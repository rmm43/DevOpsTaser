<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.Util" jls="java5">
<jent id="0" type="file" span="0:0:2863:1">Source/jabref/src/java/net/sf/jabref/Util.java</jent>
<jent id="1" pid="0" type="class" span="119:1:2863:1">net.sf.jabref.Util</jent>
<jent id="2" pid="1" type="method" span="151:2:153:2">net.sf.jabref.Util.getMinimumIntegerDigits()</jent>
<jent id="3" pid="1" type="method" span="155:2:160:2">net.sf.jabref.Util.bool(boolean)</jent>
<jent id="4" pid="1" type="method" span="162:2:164:2">net.sf.jabref.Util.pr(String)</jent>
<jent id="5" pid="1" type="method" span="166:2:168:2">net.sf.jabref.Util.pr_(String)</jent>
<jent id="6" pid="1" type="method" span="170:2:178:2">net.sf.jabref.Util.nCase(String)</jent>
<jent id="7" pid="1" type="method" span="180:2:186:2">net.sf.jabref.Util.checkName(String)</jent>
<jent id="8" pid="1" type="method" span="190:2:192:2">net.sf.jabref.Util.createNeutralId()</jent>
<jent id="9" pid="1" type="method" span="199:2:201:2">net.sf.jabref.Util.placeDialog(java.awt.Dialog,java.awt.Container)</jent>
<jent id="10" pid="1" type="method" span="209:2:239:2">net.sf.jabref.Util.parseField(String)</jent>
<jent id="11" pid="1" type="method" span="249:2:265:2">net.sf.jabref.Util.getPublicationDate(BibtexEntry)</jent>
<jent id="12" pid="1" type="method" span="267:2:309:2">net.sf.jabref.Util.shaveString(String)</jent>
<jent id="13" pid="1" type="method" span="320:2:350:2">net.sf.jabref.Util.checkLegalKey(String)</jent>
<jent id="14" pid="1" type="method" span="357:2:362:2">net.sf.jabref.Util.replaceSpecialCharacters(String)</jent>
<jent id="15" pid="1" type="method" span="364:2:389:2">net.sf.jabref.Util._wrap2(String,int)</jent>
<jent id="16" pid="1" type="method" span="391:2:393:2">net.sf.jabref.Util.wrap2(String,int)</jent>
<jent id="17" pid="1" type="method" span="395:2:423:2">net.sf.jabref.Util.__wrap2(String,int)</jent>
<jent id="18" pid="1" type="method" span="425:2:440:2">net.sf.jabref.Util.findDeliminatedWordsInField(BibtexDatabase,String,String)</jent>
<jent id="19" pid="1" type="method" span="456:2:469:2">net.sf.jabref.Util.findAllWordsInField(BibtexDatabase,String,String)</jent>
<jent id="20" pid="1" type="method" span="478:5:498:2">net.sf.jabref.Util.findAuthorLastNames(BibtexDatabase,List&lt;String&gt;)</jent>
<jent id="21" pid="1" type="method" span="511:2:523:2">net.sf.jabref.Util.stringArrayToDelimited(String[],String)</jent>
<jent id="22" pid="1" type="method" span="532:2:536:2">net.sf.jabref.Util.delimToStringArray(String,String)</jent>
<jent id="23" pid="1" type="method" span="541:2:690:2">net.sf.jabref.Util.openExternalViewer(MetaData,String,String)</jent>
<jent id="24" pid="1" type="method" span="701:2:720:2">net.sf.jabref.Util.openFileOnWindows(String,boolean)</jent>
<jent id="25" pid="1" type="method" span="729:5:735:5">net.sf.jabref.Util.openFileWithApplicationOnWindows(String,String)</jent>
<jent id="26" pid="1" type="method" span="746:2:846:5">net.sf.jabref.Util.openExternalFileAnyFormat(MetaData,String,ExternalFileType)</jent>
<jent id="27" pid="1" type="method" span="849:5:874:5">net.sf.jabref.Util.openRemoteExternalFile(MetaData,String,ExternalFileType)</jent>
<jent id="28" pid="27" type="class" span="865:51:873:9">net.sf.jabref.Util.openRemoteExternalFile(MetaData,String,ExternalFileType).$1</jent>
<jent id="29" pid="28" type="method" span="866:13:872:13">net.sf.jabref.Util.openRemoteExternalFile(MetaData,String,ExternalFileType).$1.run()</jent>
<jent id="30" pid="1" type="method" span="876:1:952:1">net.sf.jabref.Util.openExternalFileUnknown(JabRefFrame,BibtexEntry,MetaData,String,UnknownExternalFileType)</jent>
<jent id="31" pid="1" type="method" span="965:2:1005:2">net.sf.jabref.Util.sanitizeUrl(String)</jent>
<jent id="32" pid="1" type="method" span="1011:2:1030:2">net.sf.jabref.Util.findPdf(String,String,String,OpenFileFilter)</jent>
<jent id="33" pid="1" type="method" span="1032:2:1078:2">net.sf.jabref.Util.findAssociatedFiles(Collection&lt;BibtexEntry&gt;,Collection&lt;String&gt;,Collection&lt;File&gt;)</jent>
<jent id="34" pid="1" type="method" span="1080:2:1088:2">net.sf.jabref.Util.findFiles(Collection&lt;String&gt;,Collection&lt;File&gt;)</jent>
<jent id="35" pid="1" type="method" span="1090:2:1113:2">net.sf.jabref.Util.findFiles(Collection&lt;String&gt;,File)</jent>
<jent id="36" pid="1" type="method" span="1122:2:1128:2">net.sf.jabref.Util.getFileExtension(File)</jent>
<jent id="37" pid="1" type="method" span="1139:2:1141:2">net.sf.jabref.Util.findPdf(BibtexEntry,String,String)</jent>
<jent id="38" pid="1" type="method" span="1146:2:1158:2">net.sf.jabref.Util.findPdf(BibtexEntry,String,String[])</jent>
<jent id="39" pid="1" type="method" span="1166:5:1175:5">net.sf.jabref.Util.findFile(BibtexEntry,ExternalFileType,List&lt;String&gt;)</jent>
<jent id="40" pid="1" type="method" span="1217:2:1227:2">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,String[],String,boolean)</jent>
<jent id="41" pid="1" type="method" span="1235:2:1239:2">net.sf.jabref.Util.stripBrackets(String)</jent>
<jent id="42" pid="1" type="method" span="1241:2:1316:2">net.sf.jabref.Util.parseMethodsCalls(String)</jent>
<jent id="43" pid="1" type="method" span="1328:2:1365:2">net.sf.jabref.Util.getFieldAndFormat(String,BibtexEntry,BibtexDatabase)</jent>
<jent id="44" pid="1" type="method" span="1372:2:1374:2">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,String)</jent>
<jent id="45" pid="1" type="method" span="1381:2:1418:2">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,String,String,boolean)</jent>
<jent id="46" pid="1" type="method" span="1424:2:1553:2">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,File,String)</jent>
<jent id="47" pid="46" type="class" span="1519:63:1523:5">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,File,String).$2</jent>
<jent id="48" pid="47" type="method" span="1520:6:1522:6">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,File,String).$2.accept(File,String)</jent>
<jent id="49" pid="46" type="class" span="1540:61:1544:3">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,File,String).$3</jent>
<jent id="50" pid="49" type="method" span="1541:4:1543:4">net.sf.jabref.Util.findFile(BibtexEntry,BibtexDatabase,File,String).$3.accept(File,String)</jent>
<jent id="51" pid="1" type="method" span="1568:2:1581:2">net.sf.jabref.Util.expandBrackets(String,BibtexEntry,BibtexDatabase)</jent>
<jent id="52" pid="1" type="method" span="1599:2:1611:2">net.sf.jabref.Util.join(String[],String,int,int)</jent>
<jent id="53" pid="1" type="method" span="1620:2:1632:2">net.sf.jabref.Util.expandFilename(String,String[])</jent>
<jent id="54" pid="1" type="method" span="1638:2:1679:5">net.sf.jabref.Util.expandFilename(String,String)</jent>
<jent id="55" pid="1" type="method" span="1681:2:1707:2">net.sf.jabref.Util.findInDir(String,String,OpenFileFilter,int)</jent>
<jent id="56" pid="1" type="method" span="1713:5:1718:5">net.sf.jabref.Util.updateCompletersForEntry(HashMap&lt;String,AbstractAutoCompleter&gt;,BibtexEntry)</jent>
<jent id="57" pid="1" type="method" span="1729:2:1756:2">net.sf.jabref.Util.setAutomaticFields(Collection&lt;BibtexEntry&gt;,boolean,boolean,boolean)</jent>
<jent id="58" pid="1" type="method" span="1770:2:1781:2">net.sf.jabref.Util.setAutomaticFields(BibtexEntry,boolean,boolean)</jent>
<jent id="59" pid="1" type="method" span="1783:2:1798:2">net.sf.jabref.Util.setAutomaticFields(BibtexEntry,boolean,String,boolean,String,String)</jent>
<jent id="60" pid="1" type="method" span="1814:2:1845:2">net.sf.jabref.Util.copyFile(File,File,boolean)</jent>
<jent id="61" pid="1" type="method" span="1851:2:1874:2">net.sf.jabref.Util.performCompatibilityUpdate()</jent>
<jent id="62" pid="1" type="method" span="1883:5:1917:5">net.sf.jabref.Util.upgradePdfPsToFile(BibtexDatabase,String[])</jent>
<jent id="63" pid="1" type="method" span="1925:2:1935:2">net.sf.jabref.Util.getCorrectFileName(String,String)</jent>
<jent id="64" pid="1" type="method" span="1941:2:1947:2">net.sf.jabref.Util.quoteForHTML(String)</jent>
<jent id="65" pid="1" type="method" span="1949:2:1951:2">net.sf.jabref.Util.quote(String,String,char)</jent>
<jent id="66" pid="1" type="method" span="1969:2:1991:2">net.sf.jabref.Util.quote(String,String,char,int)</jent>
<jent id="67" pid="1" type="method" span="2002:2:2019:2">net.sf.jabref.Util.unquote(String,char)</jent>
<jent id="68" pid="1" type="method" span="2025:2:2036:2">net.sf.jabref.Util.quoteMeta(String)</jent>
<jent id="69" pid="1" type="method" span="2042:2:2057:2">net.sf.jabref.Util.sortWordsAndRemoveDuplicates(String)</jent>
<jent id="70" pid="1" type="method" span="2075:2:2134:2">net.sf.jabref.Util.warnAssignmentSideEffects(AbstractGroup[],BibtexEntry[],BibtexDatabase,Component)</jent>
<jent id="71" pid="1" type="method" span="2151:2:2206:2">net.sf.jabref.Util.putBracesAroundCapitals(String)</jent>
<jent id="72" pid="1" type="method" span="2219:2:2225:2">net.sf.jabref.Util.removeBracesAroundCapitals(String)</jent>
<jent id="73" pid="1" type="method" span="2236:2:2245:2">net.sf.jabref.Util.removeSingleBracesAroundCapitals(String)</jent>
<jent id="74" pid="1" type="method" span="2256:2:2265:2">net.sf.jabref.Util.getFileFilterForField(String)</jent>
<jent id="75" pid="1" type="method" span="2274:2:2312:2">net.sf.jabref.Util.showQuickErrorDialog(JFrame,String,Exception)</jent>
<jent id="76" pid="75" type="class" span="2303:47:2307:3">net.sf.jabref.Util.showQuickErrorDialog(JFrame,String,Exception).$4</jent>
<jent id="77" pid="76" type="method" span="2304:4:2306:4">net.sf.jabref.Util.showQuickErrorDialog(JFrame,String,Exception).$4.actionPerformed(ActionEvent)</jent>
<jent id="78" pid="1" type="method" span="2314:2:2345:2">net.sf.jabref.Util.wrapHTML(String,int)</jent>
<jent id="79" pid="1" type="method" span="2354:2:2357:2">net.sf.jabref.Util.easyDateFormat()</jent>
<jent id="80" pid="1" type="method" span="2365:2:2372:2">net.sf.jabref.Util.easyDateFormat(Date)</jent>
<jent id="81" pid="1" type="method" span="2374:2:2390:2">net.sf.jabref.Util.markEntry(BibtexEntry,NamedCompound)</jent>
<jent id="82" pid="1" type="method" span="2392:2:2416:2">net.sf.jabref.Util.unmarkEntry(BibtexEntry,BibtexDatabase,NamedCompound)</jent>
<jent id="83" pid="1" type="method" span="2429:2:2451:2">net.sf.jabref.Util.unmarkOldStyle(BibtexEntry,BibtexDatabase,NamedCompound)</jent>
<jent id="84" pid="1" type="method" span="2453:2:2459:2">net.sf.jabref.Util.isMarked(BibtexEntry)</jent>
<jent id="85" pid="1" type="method" span="2478:2:2497:2">net.sf.jabref.Util.massSetField(Collection&lt;BibtexEntry&gt;,String,String,boolean)</jent>
<jent id="86" pid="1" type="method" span="2508:5:2529:5">net.sf.jabref.Util.massRenameField(Collection&lt;BibtexEntry&gt;,String,String,boolean)</jent>
<jent id="87" pid="1" type="method" span="2540:2:2548:2">net.sf.jabref.Util.findEncodingsForString(String)</jent>
<jent id="88" pid="1" type="method" span="2564:2:2569:2">net.sf.jabref.Util.toFourDigitYear(String)</jent>
<jent id="89" pid="1" type="method" span="2587:2:2617:2">net.sf.jabref.Util.toFourDigitYear(String,int)</jent>
<jent id="90" pid="1" type="method" span="2632:2:2647:2">net.sf.jabref.Util.getMonthNumber(String)</jent>
<jent id="91" pid="1" type="method" span="2656:5:2664:5">net.sf.jabref.Util.encodeStringArray(String[][])</jent>
<jent id="92" pid="1" type="method" span="2672:5:2681:5">net.sf.jabref.Util.encodeStringArray(String[])</jent>
<jent id="93" pid="1" type="method" span="2690:5:2728:5">net.sf.jabref.Util.decodeStringDoubleArray(String)</jent>
<jent id="94" pid="1" type="method" span="2730:5:2741:5">net.sf.jabref.Util.encodeString(String)</jent>
<jent id="95" pid="1" type="method" span="2754:2:2756:2">net.sf.jabref.Util.equals(Object,Object)</jent>
<jent id="96" pid="1" type="method" span="2769:2:2777:2">net.sf.jabref.Util.toUpperFirstLetter(String)</jent>
<jent id="97" pid="1" type="method" span="2786:5:2804:5">net.sf.jabref.Util.runAbstractWorker(AbstractWorker)</jent>
<jent id="98" pid="1" type="method" span="2815:5:2828:5">net.sf.jabref.Util.waitForFileLock(File,int)</jent>
<jent id="99" pid="1" type="method" span="2835:5:2838:5">net.sf.jabref.Util.hasLockFile(File)</jent>
<jent id="100" pid="1" type="method" span="2845:5:2848:5">net.sf.jabref.Util.getLockFileTimeStamp(File)</jent>
<jent id="101" pid="1" type="method" span="2855:5:2862:5">net.sf.jabref.Util.deleteLockFile(File)</jent>
<jtok eid="0" type="block_comment" span="1:1:26:4">/*
 Copyright (C) 2003 Morten O. Alver

 All programs in this directory and
 subdirectories are published under the GNU General Public License as
 described below.

 This program is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or (at
 your option) any later version.

 This program is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307
 USA

 Further information about the GNU GPL is available at:
 http://www.gnu.org/copyleft/gpl.ja.html

 */</jtok>
<jtok eid="0" type="line_comment" span="27:1:27:37">// created by : Morten O. Alver 2003</jtok>
<jtok eid="0" type="line_comment" span="28:1:28:3">//</jtok>
<jtok eid="0" type="line_comment" span="29:1:29:32">// function : utility functions</jtok>
<jtok eid="0" type="line_comment" span="30:1:30:3">//</jtok>
<jtok eid="0" type="line_comment" span="31:1:31:36">// modified :  - r.nagel 20.04.2006</jtok>
<jtok eid="0" type="line_comment" span="32:1:32:81">//               make the DateFormatter abstract and splitt the easyDate methode</jtok>
<jtok eid="0" type="line_comment" span="33:1:33:72">//               (now we cannot change the dateformat dynamicly, sorry)</jtok>
<jtok eid="0" type="block_comment" span="113:1:118:4">/**
 * Describe class &lt;code&gt;Util&lt;/code&gt; here.
 * 
 * @author &lt;a href="mailto:"&gt; &lt;/a&gt;
 * @version 1.0
 */</jtok>
<jtok eid="1" type="class_name" span="119:14:119:18">Util</jtok>
<jtok eid="1" type="block_comment" span="121:2:125:5">/**
	 * A static Object for date formatting. Please do not create the object
	 * here, because there are some references from the Globals class.....
	 * 
	 */</jtok>
<jtok eid="1" type="class_or_interface_ref" span="126:17:126:33">SimpleDateFormat</jtok>
<jtok eid="1" type="field_name" span="126:34:126:47">dateFormatter</jtok>
<jtok eid="1" type="block_comment" span="128:2:131:5">/*
	 * Colors are defined here.
	 * 
	 */</jtok>
<jtok eid="1" type="class_or_interface_ref" span="132:16:132:21">Color</jtok>
<jtok eid="1" type="field_name" span="132:22:132:31">fieldsCol</jtok>
<jtok eid="1" type="constructor_call" span="132:38:132:43">Color</jtok>
<jtok eid="1" type="block_comment" span="134:2:137:5">/*
	 * Integer values for indicating result of duplicate check (for entries):
	 * 
	 */</jtok>
<jtok eid="1" type="field_name" span="138:19:138:32">TYPE_MISMATCH</jtok>
<jtok eid="1" type="field_name" span="138:39:138:48">NOT_EQUAL</jtok>
<jtok eid="1" type="field_name" span="138:54:138:59">EQUAL</jtok>
<jtok eid="1" type="field_name" span="138:65:138:77">EMPTY_IN_ONE</jtok>
<jtok eid="1" type="field_name" span="139:3:139:15">EMPTY_IN_TWO</jtok>
<jtok eid="1" type="field_name" span="139:21:139:34">EMPTY_IN_BOTH</jtok>
<jtok eid="1" type="class_or_interface_ref" span="141:15:141:27">NumberFormat</jtok>
<jtok eid="1" type="field_name" span="141:28:141:36">idFormat</jtok>
<jtok eid="1" type="class_or_interface_ref" span="143:19:143:26">Pattern</jtok>
<jtok eid="1" type="field_name" span="143:27:143:44">remoteLinkPattern</jtok>
<jtok eid="1" type="primary_name_ref" span="143:47:143:54">Pattern</jtok>
<jtok eid="1" type="method_call" span="143:55:143:62">compile</jtok>
<jtok eid="1" type="string_literal" span="143:63:143:76">"[a-z]+://.*"</jtok>
<jtok eid="1" type="primary_name_ref" span="146:3:146:11">idFormat</jtok>
<jtok eid="1" type="primary_name_ref" span="146:14:146:26">NumberFormat</jtok>
<jtok eid="1" type="method_call" span="146:27:146:38">getInstance</jtok>
<jtok eid="1" type="primary_name_ref" span="147:3:147:11">idFormat</jtok>
<jtok eid="1" type="method_call" span="147:12:147:35">setMinimumIntegerDigits</jtok>
<jtok eid="1" type="primary_name_ref" span="148:3:148:11">idFormat</jtok>
<jtok eid="1" type="method_call" span="148:12:148:27">setGroupingUsed</jtok>
<jtok eid="2" type="method_name" span="151:20:151:43">getMinimumIntegerDigits</jtok>
<jtok eid="2" type="primary_name_ref" span="152:10:152:18">idFormat</jtok>
<jtok eid="2" type="method_call" span="152:19:152:42">getMinimumIntegerDigits</jtok>
<jtok eid="3" type="method_name" span="155:21:155:25">bool</jtok>
<jtok eid="3" type="parameter_name" span="155:34:155:35">b</jtok>
<jtok eid="3" type="primary_name_ref" span="156:7:156:8">b</jtok>
<jtok eid="3" type="primary_name_ref" span="157:4:157:10">System</jtok>
<jtok eid="3" type="qualified_name_ref" span="157:11:157:14">out</jtok>
<jtok eid="3" type="method_call" span="157:15:157:22">println</jtok>
<jtok eid="3" type="string_literal" span="157:23:157:29">"true"</jtok>
<jtok eid="3" type="primary_name_ref" span="159:4:159:10">System</jtok>
<jtok eid="3" type="qualified_name_ref" span="159:11:159:14">out</jtok>
<jtok eid="3" type="method_call" span="159:15:159:22">println</jtok>
<jtok eid="3" type="string_literal" span="159:23:159:30">"false"</jtok>
<jtok eid="4" type="method_name" span="162:21:162:23">pr</jtok>
<jtok eid="4" type="parameter_type" span="162:24:162:30">String</jtok>
<jtok eid="4" type="parameter_name" span="162:31:162:32">s</jtok>
<jtok eid="4" type="primary_name_ref" span="163:3:163:9">System</jtok>
<jtok eid="4" type="qualified_name_ref" span="163:10:163:13">out</jtok>
<jtok eid="4" type="method_call" span="163:14:163:21">println</jtok>
<jtok eid="4" type="primary_name_ref" span="163:22:163:23">s</jtok>
<jtok eid="5" type="method_name" span="166:21:166:24">pr_</jtok>
<jtok eid="5" type="parameter_type" span="166:25:166:31">String</jtok>
<jtok eid="5" type="parameter_name" span="166:32:166:33">s</jtok>
<jtok eid="5" type="primary_name_ref" span="167:3:167:9">System</jtok>
<jtok eid="5" type="qualified_name_ref" span="167:10:167:13">out</jtok>
<jtok eid="5" type="method_call" span="167:14:167:19">print</jtok>
<jtok eid="5" type="primary_name_ref" span="167:20:167:21">s</jtok>
<jtok eid="6" type="class_or_interface_ref" span="170:16:170:22">String</jtok>
<jtok eid="6" type="method_name" span="170:23:170:28">nCase</jtok>
<jtok eid="6" type="parameter_type" span="170:29:170:35">String</jtok>
<jtok eid="6" type="parameter_name" span="170:36:170:37">s</jtok>
<jtok eid="6" type="line_comment" span="171:3:171:55">// Make first character of String uppercase, and the</jtok>
<jtok eid="6" type="line_comment" span="172:3:172:21">// rest lowercase.</jtok>
<jtok eid="6" type="primary_name_ref" span="173:7:173:8">s</jtok>
<jtok eid="6" type="method_call" span="173:9:173:15">length</jtok>
<jtok eid="6" type="primary_name_ref" span="174:11:174:12">s</jtok>
<jtok eid="6" type="method_call" span="174:13:174:22">substring</jtok>
<jtok eid="6" type="method_call" span="174:29:174:40">toUpperCase</jtok>
<jtok eid="6" type="primary_name_ref" span="174:45:174:46">s</jtok>
<jtok eid="6" type="method_call" span="174:47:174:56">substring</jtok>
<jtok eid="6" type="primary_name_ref" span="174:60:174:61">s</jtok>
<jtok eid="6" type="method_call" span="174:62:174:68">length</jtok>
<jtok eid="6" type="method_call" span="174:72:174:83">toLowerCase</jtok>
<jtok eid="6" type="primary_name_ref" span="176:11:176:12">s</jtok>
<jtok eid="6" type="method_call" span="176:13:176:24">toUpperCase</jtok>
<jtok eid="7" type="class_or_interface_ref" span="180:16:180:22">String</jtok>
<jtok eid="7" type="method_name" span="180:23:180:32">checkName</jtok>
<jtok eid="7" type="parameter_type" span="180:33:180:39">String</jtok>
<jtok eid="7" type="parameter_name" span="180:40:180:41">s</jtok>
<jtok eid="7" type="line_comment" span="181:3:181:59">// Append '.bib' to the string unless it ends with that.</jtok>
<jtok eid="7" type="primary_name_ref" span="182:7:182:8">s</jtok>
<jtok eid="7" type="method_call" span="182:9:182:15">length</jtok>
<jtok eid="7" type="primary_name_ref" span="182:26:182:27">s</jtok>
<jtok eid="7" type="method_call" span="182:28:182:37">substring</jtok>
<jtok eid="7" type="primary_name_ref" span="182:38:182:39">s</jtok>
<jtok eid="7" type="method_call" span="182:40:182:46">length</jtok>
<jtok eid="7" type="method_call" span="182:54:182:70">equalsIgnoreCase</jtok>
<jtok eid="7" type="string_literal" span="182:71:182:77">".bib"</jtok>
<jtok eid="7" type="primary_name_ref" span="183:11:183:12">s</jtok>
<jtok eid="7" type="string_literal" span="183:15:183:21">".bib"</jtok>
<jtok eid="7" type="primary_name_ref" span="185:10:185:11">s</jtok>
<jtok eid="1" type="field_name" span="188:21:188:30">idCounter</jtok>
<jtok eid="8" type="class_or_interface_ref" span="190:29:190:35">String</jtok>
<jtok eid="8" type="method_name" span="190:36:190:51">createNeutralId</jtok>
<jtok eid="8" type="primary_name_ref" span="191:10:191:18">idFormat</jtok>
<jtok eid="8" type="method_call" span="191:19:191:25">format</jtok>
<jtok eid="8" type="primary_name_ref" span="191:26:191:35">idCounter</jtok>
<jtok eid="1" type="block_comment" span="194:2:198:5">/**
	 * This method sets the location of a Dialog such that it is centered with
	 * regard to another window, but not outside the screen on the left and the
	 * top.
	 */</jtok>
<jtok eid="9" type="method_name" span="199:21:199:32">placeDialog</jtok>
<jtok eid="9" type="parameter_type" span="199:33:199:37">java</jtok>
<jtok eid="9" type="parameter_type" span="199:38:199:41">awt</jtok>
<jtok eid="9" type="parameter_type" span="199:42:199:48">Dialog</jtok>
<jtok eid="9" type="parameter_name" span="199:49:199:53">diag</jtok>
<jtok eid="9" type="parameter_type" span="199:55:199:59">java</jtok>
<jtok eid="9" type="parameter_type" span="199:60:199:63">awt</jtok>
<jtok eid="9" type="parameter_type" span="199:64:199:73">Container</jtok>
<jtok eid="9" type="parameter_name" span="199:74:199:77">win</jtok>
<jtok eid="9" type="primary_name_ref" span="200:9:200:13">diag</jtok>
<jtok eid="9" type="method_call" span="200:14:200:35">setLocationRelativeTo</jtok>
<jtok eid="9" type="primary_name_ref" span="200:36:200:39">win</jtok>
<jtok eid="1" type="block_comment" span="203:2:208:5">/**
	 * This method translates a field or string from Bibtex notation, with
	 * possibly text contained in " " or { }, and string references,
	 * concatenated by '#' characters, into Bibkeeper notation, where string
	 * references are enclosed in a pair of '#' characters.
	 */</jtok>
<jtok eid="10" type="class_or_interface_ref" span="209:16:209:22">String</jtok>
<jtok eid="10" type="method_name" span="209:23:209:33">parseField</jtok>
<jtok eid="10" type="parameter_type" span="209:34:209:40">String</jtok>
<jtok eid="10" type="parameter_name" span="209:41:209:48">content</jtok>
<jtok eid="10" type="primary_name_ref" span="211:7:211:14">content</jtok>
<jtok eid="10" type="method_call" span="211:15:211:21">length</jtok>
<jtok eid="10" type="primary_name_ref" span="212:11:212:18">content</jtok>
<jtok eid="10" type="class_or_interface_ref" span="214:3:214:9">String</jtok>
<jtok eid="10" type="local_variable_name" span="214:12:214:19">strings</jtok>
<jtok eid="10" type="primary_name_ref" span="214:22:214:29">content</jtok>
<jtok eid="10" type="method_call" span="214:30:214:35">split</jtok>
<jtok eid="10" type="string_literal" span="214:36:214:39">"#"</jtok>
<jtok eid="10" type="class_or_interface_ref" span="215:3:215:15">StringBuffer</jtok>
<jtok eid="10" type="local_variable_name" span="215:16:215:22">result</jtok>
<jtok eid="10" type="constructor_call" span="215:29:215:41">StringBuffer</jtok>
<jtok eid="10" type="local_variable_name" span="216:12:216:13">i</jtok>
<jtok eid="10" type="primary_name_ref" span="216:19:216:20">i</jtok>
<jtok eid="10" type="primary_name_ref" span="216:23:216:30">strings</jtok>
<jtok eid="10" type="qualified_name_ref" span="216:31:216:37">length</jtok>
<jtok eid="10" type="primary_name_ref" span="216:39:216:40">i</jtok>
<jtok eid="10" type="class_or_interface_ref" span="217:4:217:10">String</jtok>
<jtok eid="10" type="local_variable_name" span="217:11:217:12">s</jtok>
<jtok eid="10" type="primary_name_ref" span="217:15:217:22">strings</jtok>
<jtok eid="10" type="primary_name_ref" span="217:23:217:24">i</jtok>
<jtok eid="10" type="method_call" span="217:26:217:30">trim</jtok>
<jtok eid="10" type="primary_name_ref" span="218:8:218:9">s</jtok>
<jtok eid="10" type="method_call" span="218:10:218:16">length</jtok>
<jtok eid="10" type="local_variable_name" span="219:10:219:11">c</jtok>
<jtok eid="10" type="primary_name_ref" span="219:14:219:15">s</jtok>
<jtok eid="10" type="method_call" span="219:16:219:22">charAt</jtok>
<jtok eid="10" type="line_comment" span="220:5:220:32">// String reference or not?</jtok>
<jtok eid="10" type="primary_name_ref" span="221:9:221:10">c</jtok>
<jtok eid="10" type="primary_name_ref" span="221:21:221:22">c</jtok>
<jtok eid="10" type="primary_name_ref" span="222:6:222:12">result</jtok>
<jtok eid="10" type="method_call" span="222:13:222:19">append</jtok>
<jtok eid="10" type="method_call" span="222:20:222:31">shaveString</jtok>
<jtok eid="10" type="primary_name_ref" span="222:32:222:39">strings</jtok>
<jtok eid="10" type="primary_name_ref" span="222:40:222:41">i</jtok>
<jtok eid="10" type="line_comment" span="224:6:224:69">// This part should normally be a string reference, but if it's</jtok>
<jtok eid="10" type="line_comment" span="225:6:225:34">// a pure number, it is not.</jtok>
<jtok eid="10" type="class_or_interface_ref" span="226:6:226:12">String</jtok>
<jtok eid="10" type="local_variable_name" span="226:13:226:15">s2</jtok>
<jtok eid="10" type="method_call" span="226:18:226:29">shaveString</jtok>
<jtok eid="10" type="primary_name_ref" span="226:30:226:31">s</jtok>
<jtok eid="10" type="primary_name_ref" span="228:7:228:14">Integer</jtok>
<jtok eid="10" type="method_call" span="228:15:228:23">parseInt</jtok>
<jtok eid="10" type="primary_name_ref" span="228:24:228:26">s2</jtok>
<jtok eid="10" type="line_comment" span="229:7:229:49">// If there's no exception, it's a number.</jtok>
<jtok eid="10" type="primary_name_ref" span="230:7:230:13">result</jtok>
<jtok eid="10" type="method_call" span="230:14:230:20">append</jtok>
<jtok eid="10" type="primary_name_ref" span="230:21:230:23">s2</jtok>
<jtok eid="10" type="class_or_interface_ref" span="231:15:231:36">NumberFormatException</jtok>
<jtok eid="10" type="local_variable_name" span="231:37:231:39">ex</jtok>
<jtok eid="10" type="line_comment" span="232:7:232:41">// otherwise append with hashes...</jtok>
<jtok eid="10" type="primary_name_ref" span="233:7:233:13">result</jtok>
<jtok eid="10" type="method_call" span="233:14:233:20">append</jtok>
<jtok eid="10" type="string_literal" span="233:21:233:24">"#"</jtok>
<jtok eid="10" type="method_call" span="233:26:233:32">append</jtok>
<jtok eid="10" type="primary_name_ref" span="233:33:233:35">s2</jtok>
<jtok eid="10" type="method_call" span="233:37:233:43">append</jtok>
<jtok eid="10" type="string_literal" span="233:44:233:47">"#"</jtok>
<jtok eid="10" type="primary_name_ref" span="238:10:238:16">result</jtok>
<jtok eid="10" type="method_call" span="238:17:238:25">toString</jtok>
<jtok eid="1" type="block_comment" span="241:2:248:5">/**
	 * Will return the publication date of the given bibtex entry in conformance
	 * to ISO 8601, i.e. either YYYY or YYYY-MM.
	 * 
	 * @param entry
	 * @return will return the publication date of the entry or null if no year
	 *         was found.
	 */</jtok>
<jtok eid="11" type="class_or_interface_ref" span="249:16:249:22">String</jtok>
<jtok eid="11" type="method_name" span="249:23:249:41">getPublicationDate</jtok>
<jtok eid="11" type="parameter_type" span="249:42:249:53">BibtexEntry</jtok>
<jtok eid="11" type="parameter_name" span="249:54:249:59">entry</jtok>
<jtok eid="11" type="class_or_interface_ref" span="251:3:251:9">Object</jtok>
<jtok eid="11" type="local_variable_name" span="251:10:251:11">o</jtok>
<jtok eid="11" type="primary_name_ref" span="251:14:251:19">entry</jtok>
<jtok eid="11" type="method_call" span="251:20:251:28">getField</jtok>
<jtok eid="11" type="string_literal" span="251:29:251:35">"year"</jtok>
<jtok eid="11" type="primary_name_ref" span="252:7:252:8">o</jtok>
<jtok eid="11" type="class_or_interface_ref" span="255:3:255:9">String</jtok>
<jtok eid="11" type="local_variable_name" span="255:10:255:14">year</jtok>
<jtok eid="11" type="method_call" span="255:17:255:32">toFourDigitYear</jtok>
<jtok eid="11" type="primary_name_ref" span="255:33:255:34">o</jtok>
<jtok eid="11" type="method_call" span="255:35:255:43">toString</jtok>
<jtok eid="11" type="primary_name_ref" span="257:3:257:4">o</jtok>
<jtok eid="11" type="primary_name_ref" span="257:7:257:12">entry</jtok>
<jtok eid="11" type="method_call" span="257:13:257:21">getField</jtok>
<jtok eid="11" type="string_literal" span="257:22:257:29">"month"</jtok>
<jtok eid="11" type="primary_name_ref" span="258:7:258:8">o</jtok>
<jtok eid="11" type="local_variable_name" span="259:8:259:13">month</jtok>
<jtok eid="11" type="primary_name_ref" span="259:16:259:20">Util</jtok>
<jtok eid="11" type="method_call" span="259:21:259:35">getMonthNumber</jtok>
<jtok eid="11" type="primary_name_ref" span="259:36:259:37">o</jtok>
<jtok eid="11" type="method_call" span="259:38:259:46">toString</jtok>
<jtok eid="11" type="primary_name_ref" span="260:8:260:13">month</jtok>
<jtok eid="11" type="primary_name_ref" span="261:12:261:16">year</jtok>
<jtok eid="11" type="string_literal" span="261:19:261:22">"-"</jtok>
<jtok eid="11" type="primary_name_ref" span="261:26:261:31">month</jtok>
<jtok eid="11" type="string_literal" span="261:43:261:46">"0"</jtok>
<jtok eid="11" type="string_literal" span="261:49:261:51">""</jtok>
<jtok eid="11" type="primary_name_ref" span="261:56:261:61">month</jtok>
<jtok eid="11" type="primary_name_ref" span="264:10:264:14">year</jtok>
<jtok eid="12" type="class_or_interface_ref" span="267:16:267:22">String</jtok>
<jtok eid="12" type="method_name" span="267:23:267:34">shaveString</jtok>
<jtok eid="12" type="parameter_type" span="267:35:267:41">String</jtok>
<jtok eid="12" type="parameter_name" span="267:42:267:43">s</jtok>
<jtok eid="12" type="line_comment" span="268:3:268:71">// returns the string, after shaving off whitespace at the beginning</jtok>
<jtok eid="12" type="line_comment" span="269:3:269:73">// and end, and removing (at most) one pair of braces or " surrounding</jtok>
<jtok eid="12" type="line_comment" span="270:3:270:9">// it.</jtok>
<jtok eid="12" type="primary_name_ref" span="271:7:271:8">s</jtok>
<jtok eid="12" type="local_variable_name" span="273:8:273:10">ch</jtok>
<jtok eid="12" type="local_variable_name" span="273:12:273:15">ch2</jtok>
<jtok eid="12" type="local_variable_name" span="274:7:274:10">beg</jtok>
<jtok eid="12" type="local_variable_name" span="274:16:274:19">end</jtok>
<jtok eid="12" type="primary_name_ref" span="274:22:274:23">s</jtok>
<jtok eid="12" type="method_call" span="274:24:274:30">length</jtok>
<jtok eid="12" type="line_comment" span="275:3:275:52">// We start out assuming nothing will be removed.</jtok>
<jtok eid="12" type="local_variable_name" span="276:11:276:16">begok</jtok>
<jtok eid="12" type="local_variable_name" span="276:26:276:31">endok</jtok>
<jtok eid="12" type="primary_name_ref" span="277:11:277:16">begok</jtok>
<jtok eid="12" type="primary_name_ref" span="278:8:278:11">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="278:14:278:15">s</jtok>
<jtok eid="12" type="method_call" span="278:16:278:22">length</jtok>
<jtok eid="12" type="primary_name_ref" span="279:5:279:7">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="279:10:279:11">s</jtok>
<jtok eid="12" type="method_call" span="279:12:279:18">charAt</jtok>
<jtok eid="12" type="primary_name_ref" span="279:19:279:22">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="280:9:280:18">Character</jtok>
<jtok eid="12" type="method_call" span="280:19:280:31">isWhitespace</jtok>
<jtok eid="12" type="primary_name_ref" span="280:32:280:34">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="281:6:281:9">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="283:6:283:11">begok</jtok>
<jtok eid="12" type="primary_name_ref" span="285:5:285:10">begok</jtok>
<jtok eid="12" type="primary_name_ref" span="288:11:288:16">endok</jtok>
<jtok eid="12" type="primary_name_ref" span="289:8:289:11">end</jtok>
<jtok eid="12" type="primary_name_ref" span="289:14:289:17">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="290:5:290:7">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="290:10:290:11">s</jtok>
<jtok eid="12" type="method_call" span="290:12:290:18">charAt</jtok>
<jtok eid="12" type="primary_name_ref" span="290:19:290:22">end</jtok>
<jtok eid="12" type="primary_name_ref" span="291:9:291:18">Character</jtok>
<jtok eid="12" type="method_call" span="291:19:291:31">isWhitespace</jtok>
<jtok eid="12" type="primary_name_ref" span="291:32:291:34">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="292:6:292:9">end</jtok>
<jtok eid="12" type="primary_name_ref" span="294:6:294:11">endok</jtok>
<jtok eid="12" type="primary_name_ref" span="296:5:296:10">endok</jtok>
<jtok eid="12" type="primary_name_ref" span="299:7:299:10">end</jtok>
<jtok eid="12" type="primary_name_ref" span="299:13:299:16">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="300:4:300:6">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="300:9:300:10">s</jtok>
<jtok eid="12" type="method_call" span="300:11:300:17">charAt</jtok>
<jtok eid="12" type="primary_name_ref" span="300:18:300:21">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="301:4:301:7">ch2</jtok>
<jtok eid="12" type="primary_name_ref" span="301:10:301:11">s</jtok>
<jtok eid="12" type="method_call" span="301:12:301:18">charAt</jtok>
<jtok eid="12" type="primary_name_ref" span="301:19:301:22">end</jtok>
<jtok eid="12" type="primary_name_ref" span="302:10:302:12">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="302:25:302:28">ch2</jtok>
<jtok eid="12" type="primary_name_ref" span="302:43:302:45">ch</jtok>
<jtok eid="12" type="primary_name_ref" span="302:58:302:61">ch2</jtok>
<jtok eid="12" type="primary_name_ref" span="303:5:303:8">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="304:5:304:8">end</jtok>
<jtok eid="12" type="primary_name_ref" span="307:3:307:4">s</jtok>
<jtok eid="12" type="primary_name_ref" span="307:7:307:8">s</jtok>
<jtok eid="12" type="method_call" span="307:9:307:18">substring</jtok>
<jtok eid="12" type="primary_name_ref" span="307:19:307:22">beg</jtok>
<jtok eid="12" type="primary_name_ref" span="307:24:307:27">end</jtok>
<jtok eid="12" type="primary_name_ref" span="308:10:308:11">s</jtok>
<jtok eid="1" type="block_comment" span="311:2:319:5">/**
	 * This method returns a String similar to the one passed in, except that it
	 * is molded into a form that is acceptable for bibtex.
	 * 
	 * Watch-out that the returned string might be of length 0 afterwards.
	 * 
	 * @param key
	 *            mayBeNull
	 */</jtok>
<jtok eid="13" type="class_or_interface_ref" span="320:16:320:22">String</jtok>
<jtok eid="13" type="method_name" span="320:23:320:36">checkLegalKey</jtok>
<jtok eid="13" type="parameter_type" span="320:37:320:43">String</jtok>
<jtok eid="13" type="parameter_name" span="320:44:320:47">key</jtok>
<jtok eid="13" type="primary_name_ref" span="321:7:321:10">key</jtok>
<jtok eid="13" type="primary_name_ref" span="323:14:323:21">Globals</jtok>
<jtok eid="13" type="qualified_name_ref" span="323:22:323:27">prefs</jtok>
<jtok eid="13" type="method_call" span="323:28:323:38">getBoolean</jtok>
<jtok eid="13" type="string_literal" span="323:39:323:62">"enforceLegalBibtexKey"</jtok>
<jtok eid="13" type="line_comment" span="324:13:324:84">// User doesn't want us to enforce legal characters. We must still look</jtok>
<jtok eid="13" type="line_comment" span="325:13:325:84">// for whitespace and some characters such as commas, since these would</jtok>
<jtok eid="13" type="line_comment" span="326:13:326:39">// interfere with parsing:</jtok>
<jtok eid="13" type="class_or_interface_ref" span="327:13:327:26">StringBuilder</jtok>
<jtok eid="13" type="local_variable_name" span="327:27:327:33">newKey</jtok>
<jtok eid="13" type="constructor_call" span="327:40:327:53">StringBuilder</jtok>
<jtok eid="13" type="local_variable_name" span="328:22:328:23">i</jtok>
<jtok eid="13" type="primary_name_ref" span="328:29:328:30">i</jtok>
<jtok eid="13" type="primary_name_ref" span="328:33:328:36">key</jtok>
<jtok eid="13" type="method_call" span="328:37:328:43">length</jtok>
<jtok eid="13" type="primary_name_ref" span="328:47:328:48">i</jtok>
<jtok eid="13" type="local_variable_name" span="329:22:329:23">c</jtok>
<jtok eid="13" type="primary_name_ref" span="329:26:329:29">key</jtok>
<jtok eid="13" type="method_call" span="329:30:329:36">charAt</jtok>
<jtok eid="13" type="primary_name_ref" span="329:37:329:38">i</jtok>
<jtok eid="13" type="primary_name_ref" span="330:22:330:31">Character</jtok>
<jtok eid="13" type="method_call" span="330:32:330:44">isWhitespace</jtok>
<jtok eid="13" type="primary_name_ref" span="330:45:330:46">c</jtok>
<jtok eid="13" type="primary_name_ref" span="330:52:330:53">c</jtok>
<jtok eid="13" type="primary_name_ref" span="330:66:330:67">c</jtok>
<jtok eid="13" type="primary_name_ref" span="330:81:330:82">c</jtok>
<jtok eid="13" type="primary_name_ref" span="331:25:331:26">c</jtok>
<jtok eid="13" type="primary_name_ref" span="331:39:331:40">c</jtok>
<jtok eid="13" type="primary_name_ref" span="332:21:332:27">newKey</jtok>
<jtok eid="13" type="method_call" span="332:28:332:34">append</jtok>
<jtok eid="13" type="primary_name_ref" span="332:35:332:36">c</jtok>
<jtok eid="13" type="primary_name_ref" span="334:20:334:26">newKey</jtok>
<jtok eid="13" type="method_call" span="334:27:334:35">toString</jtok>
<jtok eid="13" type="class_or_interface_ref" span="337:3:337:16">StringBuilder</jtok>
<jtok eid="13" type="local_variable_name" span="337:17:337:23">newKey</jtok>
<jtok eid="13" type="constructor_call" span="337:30:337:43">StringBuilder</jtok>
<jtok eid="13" type="local_variable_name" span="338:12:338:13">i</jtok>
<jtok eid="13" type="primary_name_ref" span="338:19:338:20">i</jtok>
<jtok eid="13" type="primary_name_ref" span="338:23:338:26">key</jtok>
<jtok eid="13" type="method_call" span="338:27:338:33">length</jtok>
<jtok eid="13" type="primary_name_ref" span="338:37:338:38">i</jtok>
<jtok eid="13" type="local_variable_name" span="339:9:339:10">c</jtok>
<jtok eid="13" type="primary_name_ref" span="339:13:339:16">key</jtok>
<jtok eid="13" type="method_call" span="339:17:339:23">charAt</jtok>
<jtok eid="13" type="primary_name_ref" span="339:24:339:25">i</jtok>
<jtok eid="13" type="primary_name_ref" span="340:9:340:18">Character</jtok>
<jtok eid="13" type="method_call" span="340:19:340:31">isWhitespace</jtok>
<jtok eid="13" type="primary_name_ref" span="340:32:340:33">c</jtok>
<jtok eid="13" type="primary_name_ref" span="340:39:340:40">c</jtok>
<jtok eid="13" type="primary_name_ref" span="340:53:340:54">c</jtok>
<jtok eid="13" type="primary_name_ref" span="340:67:340:68">c</jtok>
<jtok eid="13" type="primary_name_ref" span="340:82:340:83">c</jtok>
<jtok eid="13" type="primary_name_ref" span="341:9:341:10">c</jtok>
<jtok eid="13" type="primary_name_ref" span="341:23:341:24">c</jtok>
<jtok eid="13" type="primary_name_ref" span="341:37:341:38">c</jtok>
<jtok eid="13" type="primary_name_ref" span="341:51:341:52">c</jtok>
<jtok eid="13" type="primary_name_ref" span="342:5:342:11">newKey</jtok>
<jtok eid="13" type="method_call" span="342:12:342:18">append</jtok>
<jtok eid="13" type="primary_name_ref" span="342:19:342:20">c</jtok>
<jtok eid="13" type="line_comment" span="345:3:345:70">// Replace non-english characters like umlauts etc. with a sensible</jtok>
<jtok eid="13" type="line_comment" span="346:3:346:58">// letter or letter combination that bibtex can accept.</jtok>
<jtok eid="13" type="class_or_interface_ref" span="347:3:347:9">String</jtok>
<jtok eid="13" type="local_variable_name" span="347:10:347:17">newKeyS</jtok>
<jtok eid="13" type="method_call" span="347:20:347:44">replaceSpecialCharacters</jtok>
<jtok eid="13" type="primary_name_ref" span="347:45:347:51">newKey</jtok>
<jtok eid="13" type="method_call" span="347:52:347:60">toString</jtok>
<jtok eid="13" type="primary_name_ref" span="349:10:349:17">newKeyS</jtok>
<jtok eid="1" type="block_comment" span="352:2:356:5">/**
	 * Replace non-english characters like umlauts etc. with a sensible letter
	 * or letter combination that bibtex can accept. The basis for replacement
	 * is the HashMap GLobals.UNICODE_CHARS.
	 */</jtok>
<jtok eid="14" type="class_or_interface_ref" span="357:16:357:22">String</jtok>
<jtok eid="14" type="method_name" span="357:23:357:47">replaceSpecialCharacters</jtok>
<jtok eid="14" type="parameter_type" span="357:48:357:54">String</jtok>
<jtok eid="14" type="parameter_name" span="357:55:357:56">s</jtok>
<jtok eid="14" type="class_or_interface_ref" span="358:8:358:11">Map</jtok>
<jtok eid="14" type="class_or_interface_ref" span="358:12:358:17">Entry</jtok>
<jtok eid="14" type="class_or_interface_ref" span="358:18:358:24">String</jtok>
<jtok eid="14" type="class_or_interface_ref" span="358:26:358:32">String</jtok>
<jtok eid="14" type="local_variable_name" span="358:34:358:47">chrAndReplace</jtok>
<jtok eid="14" type="primary_name_ref" span="358:50:358:57">Globals</jtok>
<jtok eid="14" type="qualified_name_ref" span="358:58:358:71">UNICODE_CHARS</jtok>
<jtok eid="14" type="method_call" span="358:72:358:80">entrySet</jtok>
<jtok eid="14" type="primary_name_ref" span="359:4:359:5">s</jtok>
<jtok eid="14" type="primary_name_ref" span="359:8:359:9">s</jtok>
<jtok eid="14" type="method_call" span="359:10:359:20">replaceAll</jtok>
<jtok eid="14" type="primary_name_ref" span="359:21:359:34">chrAndReplace</jtok>
<jtok eid="14" type="method_call" span="359:35:359:41">getKey</jtok>
<jtok eid="14" type="primary_name_ref" span="359:45:359:58">chrAndReplace</jtok>
<jtok eid="14" type="method_call" span="359:59:359:67">getValue</jtok>
<jtok eid="14" type="primary_name_ref" span="361:10:361:11">s</jtok>
<jtok eid="15" type="class_or_interface_ref" span="364:16:364:22">String</jtok>
<jtok eid="15" type="method_name" span="364:23:364:29">_wrap2</jtok>
<jtok eid="15" type="parameter_type" span="364:30:364:36">String</jtok>
<jtok eid="15" type="parameter_name" span="364:37:364:39">in</jtok>
<jtok eid="15" type="parameter_name" span="364:45:364:55">wrapAmount</jtok>
<jtok eid="15" type="line_comment" span="365:3:365:71">// The following line cuts out all whitespace and replaces them with</jtok>
<jtok eid="15" type="line_comment" span="366:3:366:12">// single</jtok>
<jtok eid="15" type="line_comment" span="367:3:367:13">// spaces:</jtok>
<jtok eid="15" type="line_comment" span="368:3:368:62">// in = in.replaceAll("[ ]+"," ").replaceAll("[\\t]+"," ");</jtok>
<jtok eid="15" type="line_comment" span="369:3:369:46">// StringBuffer out = new StringBuffer(in);</jtok>
<jtok eid="15" type="class_or_interface_ref" span="370:3:370:15">StringBuffer</jtok>
<jtok eid="15" type="local_variable_name" span="370:16:370:19">out</jtok>
<jtok eid="15" type="constructor_call" span="370:26:370:38">StringBuffer</jtok>
<jtok eid="15" type="primary_name_ref" span="370:39:370:41">in</jtok>
<jtok eid="15" type="method_call" span="370:42:370:52">replaceAll</jtok>
<jtok eid="15" type="string_literal" span="370:53:370:65">"[ \\t\\r]+"</jtok>
<jtok eid="15" type="string_literal" span="370:67:370:70">" "</jtok>
<jtok eid="15" type="local_variable_name" span="372:7:372:8">p</jtok>
<jtok eid="15" type="primary_name_ref" span="372:11:372:13">in</jtok>
<jtok eid="15" type="method_call" span="372:14:372:20">length</jtok>
<jtok eid="15" type="primary_name_ref" span="372:25:372:35">wrapAmount</jtok>
<jtok eid="15" type="local_variable_name" span="373:7:373:19">lastInserted</jtok>
<jtok eid="15" type="primary_name_ref" span="374:10:374:11">p</jtok>
<jtok eid="15" type="primary_name_ref" span="375:4:375:5">p</jtok>
<jtok eid="15" type="primary_name_ref" span="375:8:375:11">out</jtok>
<jtok eid="15" type="method_call" span="375:12:375:23">lastIndexOf</jtok>
<jtok eid="15" type="string_literal" span="375:24:375:27">" "</jtok>
<jtok eid="15" type="primary_name_ref" span="375:29:375:30">p</jtok>
<jtok eid="15" type="primary_name_ref" span="376:8:376:9">p</jtok>
<jtok eid="15" type="primary_name_ref" span="376:18:376:19">p</jtok>
<jtok eid="15" type="local_variable_name" span="378:8:378:14">lbreak</jtok>
<jtok eid="15" type="primary_name_ref" span="378:17:378:20">out</jtok>
<jtok eid="15" type="method_call" span="378:21:378:28">indexOf</jtok>
<jtok eid="15" type="string_literal" span="378:29:378:33">"\n"</jtok>
<jtok eid="15" type="primary_name_ref" span="378:35:378:36">p</jtok>
<jtok eid="15" type="primary_name_ref" span="379:4:379:10">System</jtok>
<jtok eid="15" type="qualified_name_ref" span="379:11:379:14">out</jtok>
<jtok eid="15" type="method_call" span="379:15:379:22">println</jtok>
<jtok eid="15" type="primary_name_ref" span="379:23:379:29">lbreak</jtok>
<jtok eid="15" type="string_literal" span="379:32:379:35">" "</jtok>
<jtok eid="15" type="primary_name_ref" span="379:38:379:50">lastInserted</jtok>
<jtok eid="15" type="primary_name_ref" span="380:9:380:15">lbreak</jtok>
<jtok eid="15" type="primary_name_ref" span="380:18:380:19">p</jtok>
<jtok eid="15" type="primary_name_ref" span="380:26:380:38">lastInserted</jtok>
<jtok eid="15" type="primary_name_ref" span="380:49:380:55">lbreak</jtok>
<jtok eid="15" type="primary_name_ref" span="380:58:380:70">lastInserted</jtok>
<jtok eid="15" type="primary_name_ref" span="381:5:381:6">p</jtok>
<jtok eid="15" type="primary_name_ref" span="381:9:381:15">lbreak</jtok>
<jtok eid="15" type="primary_name_ref" span="381:18:381:28">wrapAmount</jtok>
<jtok eid="15" type="primary_name_ref" span="383:5:383:8">out</jtok>
<jtok eid="15" type="method_call" span="383:9:383:15">insert</jtok>
<jtok eid="15" type="primary_name_ref" span="383:16:383:17">p</jtok>
<jtok eid="15" type="string_literal" span="383:19:383:25">"\n\t"</jtok>
<jtok eid="15" type="primary_name_ref" span="384:5:384:17">lastInserted</jtok>
<jtok eid="15" type="primary_name_ref" span="384:20:384:21">p</jtok>
<jtok eid="15" type="primary_name_ref" span="385:5:385:6">p</jtok>
<jtok eid="15" type="primary_name_ref" span="385:10:385:20">wrapAmount</jtok>
<jtok eid="15" type="primary_name_ref" span="388:10:388:13">out</jtok>
<jtok eid="15" type="method_call" span="388:14:388:22">toString</jtok>
<jtok eid="16" type="class_or_interface_ref" span="391:16:391:22">String</jtok>
<jtok eid="16" type="method_name" span="391:23:391:28">wrap2</jtok>
<jtok eid="16" type="parameter_type" span="391:29:391:35">String</jtok>
<jtok eid="16" type="parameter_name" span="391:36:391:38">in</jtok>
<jtok eid="16" type="parameter_name" span="391:44:391:54">wrapAmount</jtok>
<jtok eid="16" type="primary_name_ref" span="392:10:392:13">net</jtok>
<jtok eid="16" type="qualified_name_ref" span="392:14:392:16">sf</jtok>
<jtok eid="16" type="qualified_name_ref" span="392:17:392:23">jabref</jtok>
<jtok eid="16" type="qualified_name_ref" span="392:24:392:31">imports</jtok>
<jtok eid="16" type="qualified_name_ref" span="392:32:392:50">FieldContentParser</jtok>
<jtok eid="16" type="method_call" span="392:51:392:55">wrap</jtok>
<jtok eid="16" type="primary_name_ref" span="392:56:392:58">in</jtok>
<jtok eid="16" type="primary_name_ref" span="392:60:392:70">wrapAmount</jtok>
<jtok eid="17" type="class_or_interface_ref" span="395:16:395:22">String</jtok>
<jtok eid="17" type="method_name" span="395:23:395:30">__wrap2</jtok>
<jtok eid="17" type="parameter_type" span="395:31:395:37">String</jtok>
<jtok eid="17" type="parameter_name" span="395:38:395:40">in</jtok>
<jtok eid="17" type="parameter_name" span="395:46:395:56">wrapAmount</jtok>
<jtok eid="17" type="line_comment" span="396:3:396:72">// The following line cuts out all whitespace except line breaks, and</jtok>
<jtok eid="17" type="line_comment" span="397:3:397:14">// replaces</jtok>
<jtok eid="17" type="line_comment" span="398:3:398:70">// with single spaces. Line breaks are padded with a tab character:</jtok>
<jtok eid="17" type="class_or_interface_ref" span="399:3:399:15">StringBuffer</jtok>
<jtok eid="17" type="local_variable_name" span="399:16:399:19">out</jtok>
<jtok eid="17" type="constructor_call" span="399:26:399:38">StringBuffer</jtok>
<jtok eid="17" type="primary_name_ref" span="399:39:399:41">in</jtok>
<jtok eid="17" type="method_call" span="399:42:399:52">replaceAll</jtok>
<jtok eid="17" type="string_literal" span="399:53:399:65">"[ \\t\\r]+"</jtok>
<jtok eid="17" type="string_literal" span="399:67:399:70">" "</jtok>
<jtok eid="17" type="local_variable_name" span="401:7:401:8">p</jtok>
<jtok eid="17" type="line_comment" span="402:3:402:28">// int lastInserted = -1;</jtok>
<jtok eid="17" type="primary_name_ref" span="403:10:403:11">p</jtok>
<jtok eid="17" type="primary_name_ref" span="403:14:403:17">out</jtok>
<jtok eid="17" type="method_call" span="403:18:403:24">length</jtok>
<jtok eid="17" type="local_variable_name" span="404:8:404:9">q</jtok>
<jtok eid="17" type="primary_name_ref" span="404:12:404:15">out</jtok>
<jtok eid="17" type="method_call" span="404:16:404:23">indexOf</jtok>
<jtok eid="17" type="string_literal" span="404:24:404:27">" "</jtok>
<jtok eid="17" type="primary_name_ref" span="404:29:404:30">p</jtok>
<jtok eid="17" type="primary_name_ref" span="404:33:404:43">wrapAmount</jtok>
<jtok eid="17" type="primary_name_ref" span="405:9:405:10">q</jtok>
<jtok eid="17" type="primary_name_ref" span="405:20:405:21">q</jtok>
<jtok eid="17" type="primary_name_ref" span="405:25:405:28">out</jtok>
<jtok eid="17" type="method_call" span="405:29:405:35">length</jtok>
<jtok eid="17" type="local_variable_name" span="407:8:407:14">lbreak</jtok>
<jtok eid="17" type="primary_name_ref" span="407:17:407:20">out</jtok>
<jtok eid="17" type="method_call" span="407:21:407:28">indexOf</jtok>
<jtok eid="17" type="string_literal" span="407:29:407:33">"\n"</jtok>
<jtok eid="17" type="primary_name_ref" span="407:35:407:36">p</jtok>
<jtok eid="17" type="line_comment" span="408:4:408:34">// System.out.println(lbreak);</jtok>
<jtok eid="17" type="primary_name_ref" span="409:9:409:15">lbreak</jtok>
<jtok eid="17" type="primary_name_ref" span="409:18:409:19">p</jtok>
<jtok eid="17" type="primary_name_ref" span="409:25:409:31">lbreak</jtok>
<jtok eid="17" type="primary_name_ref" span="409:34:409:35">q</jtok>
<jtok eid="17" type="primary_name_ref" span="410:5:410:6">p</jtok>
<jtok eid="17" type="primary_name_ref" span="410:9:410:15">lbreak</jtok>
<jtok eid="17" type="local_variable_name" span="411:9:411:12">piv</jtok>
<jtok eid="17" type="primary_name_ref" span="411:15:411:21">lbreak</jtok>
<jtok eid="17" type="primary_name_ref" span="412:10:412:13">out</jtok>
<jtok eid="17" type="method_call" span="412:14:412:20">length</jtok>
<jtok eid="17" type="primary_name_ref" span="412:25:412:28">piv</jtok>
<jtok eid="17" type="primary_name_ref" span="412:35:412:38">out</jtok>
<jtok eid="17" type="method_call" span="412:39:412:45">charAt</jtok>
<jtok eid="17" type="primary_name_ref" span="412:46:412:49">piv</jtok>
<jtok eid="17" type="primary_name_ref" span="413:6:413:9">out</jtok>
<jtok eid="17" type="method_call" span="413:10:413:16">insert</jtok>
<jtok eid="17" type="primary_name_ref" span="413:17:413:20">piv</jtok>
<jtok eid="17" type="string_literal" span="413:22:413:28">"\n\t"</jtok>
<jtok eid="17" type="line_comment" span="416:5:416:47">// System.out.println(q+" "+out.length());</jtok>
<jtok eid="17" type="primary_name_ref" span="417:5:417:8">out</jtok>
<jtok eid="17" type="method_call" span="417:9:417:21">deleteCharAt</jtok>
<jtok eid="17" type="primary_name_ref" span="417:22:417:23">q</jtok>
<jtok eid="17" type="primary_name_ref" span="418:5:418:8">out</jtok>
<jtok eid="17" type="method_call" span="418:9:418:15">insert</jtok>
<jtok eid="17" type="primary_name_ref" span="418:16:418:17">q</jtok>
<jtok eid="17" type="string_literal" span="418:19:418:25">"\n\t"</jtok>
<jtok eid="17" type="primary_name_ref" span="419:5:419:6">p</jtok>
<jtok eid="17" type="primary_name_ref" span="419:9:419:10">q</jtok>
<jtok eid="17" type="primary_name_ref" span="422:10:422:13">out</jtok>
<jtok eid="17" type="method_call" span="422:14:422:22">toString</jtok>
<jtok eid="17" type="line_comment" span="422:25:422:54">// .replaceAll("\n", "\n\t");</jtok>
<jtok eid="18" type="class_or_interface_ref" span="425:16:425:23">TreeSet</jtok>
<jtok eid="18" type="class_or_interface_ref" span="425:24:425:30">String</jtok>
<jtok eid="18" type="method_name" span="425:32:425:59">findDeliminatedWordsInField</jtok>
<jtok eid="18" type="parameter_type" span="425:60:425:74">BibtexDatabase</jtok>
<jtok eid="18" type="parameter_name" span="425:75:425:77">db</jtok>
<jtok eid="18" type="parameter_type" span="425:79:425:85">String</jtok>
<jtok eid="18" type="parameter_name" span="425:86:425:91">field</jtok>
<jtok eid="18" type="parameter_type" span="426:3:426:9">String</jtok>
<jtok eid="18" type="parameter_name" span="426:10:426:21">deliminator</jtok>
<jtok eid="18" type="class_or_interface_ref" span="427:3:427:10">TreeSet</jtok>
<jtok eid="18" type="class_or_interface_ref" span="427:11:427:17">String</jtok>
<jtok eid="18" type="local_variable_name" span="427:19:427:22">res</jtok>
<jtok eid="18" type="constructor_call" span="427:29:427:36">TreeSet</jtok>
<jtok eid="18" type="constructor_call" span="427:37:427:43">String</jtok>
<jtok eid="18" type="class_or_interface_ref" span="429:8:429:14">String</jtok>
<jtok eid="18" type="local_variable_name" span="429:15:429:16">s</jtok>
<jtok eid="18" type="primary_name_ref" span="429:19:429:21">db</jtok>
<jtok eid="18" type="method_call" span="429:22:429:31">getKeySet</jtok>
<jtok eid="18" type="class_or_interface_ref" span="430:4:430:15">BibtexEntry</jtok>
<jtok eid="18" type="local_variable_name" span="430:16:430:18">be</jtok>
<jtok eid="18" type="primary_name_ref" span="430:21:430:23">db</jtok>
<jtok eid="18" type="method_call" span="430:24:430:36">getEntryById</jtok>
<jtok eid="18" type="primary_name_ref" span="430:37:430:38">s</jtok>
<jtok eid="18" type="class_or_interface_ref" span="431:4:431:10">Object</jtok>
<jtok eid="18" type="local_variable_name" span="431:11:431:12">o</jtok>
<jtok eid="18" type="primary_name_ref" span="431:15:431:17">be</jtok>
<jtok eid="18" type="method_call" span="431:18:431:26">getField</jtok>
<jtok eid="18" type="primary_name_ref" span="431:27:431:32">field</jtok>
<jtok eid="18" type="primary_name_ref" span="432:8:432:9">o</jtok>
<jtok eid="18" type="class_or_interface_ref" span="433:5:433:11">String</jtok>
<jtok eid="18" type="local_variable_name" span="433:12:433:22">fieldValue</jtok>
<jtok eid="18" type="primary_name_ref" span="433:25:433:26">o</jtok>
<jtok eid="18" type="method_call" span="433:27:433:35">toString</jtok>
<jtok eid="18" type="method_call" span="433:38:433:42">trim</jtok>
<jtok eid="18" type="class_or_interface_ref" span="434:5:434:20">StringTokenizer</jtok>
<jtok eid="18" type="local_variable_name" span="434:21:434:24">tok</jtok>
<jtok eid="18" type="constructor_call" span="434:31:434:46">StringTokenizer</jtok>
<jtok eid="18" type="primary_name_ref" span="434:47:434:57">fieldValue</jtok>
<jtok eid="18" type="primary_name_ref" span="434:59:434:70">deliminator</jtok>
<jtok eid="18" type="primary_name_ref" span="435:12:435:15">tok</jtok>
<jtok eid="18" type="method_call" span="435:16:435:29">hasMoreTokens</jtok>
<jtok eid="18" type="primary_name_ref" span="436:6:436:9">res</jtok>
<jtok eid="18" type="method_call" span="436:10:436:13">add</jtok>
<jtok eid="18" type="method_call" span="436:14:436:19">nCase</jtok>
<jtok eid="18" type="primary_name_ref" span="436:20:436:23">tok</jtok>
<jtok eid="18" type="method_call" span="436:24:436:33">nextToken</jtok>
<jtok eid="18" type="method_call" span="436:36:436:40">trim</jtok>
<jtok eid="18" type="primary_name_ref" span="439:10:439:13">res</jtok>
<jtok eid="1" type="block_comment" span="442:2:455:5">/**
	 * Returns a HashMap containing all words used in the database in the given
	 * field type. Characters in
	 * 
	 * @param remove
	 *            are not included.
	 * @param db
	 *            a &lt;code&gt;BibtexDatabase&lt;/code&gt; value
	 * @param field
	 *            a &lt;code&gt;String&lt;/code&gt; value
	 * @param remove
	 *            a &lt;code&gt;String&lt;/code&gt; value
	 * @return a &lt;code&gt;HashSet&lt;/code&gt; value
	 */</jtok>
<jtok eid="19" type="class_or_interface_ref" span="456:16:456:23">TreeSet</jtok>
<jtok eid="19" type="class_or_interface_ref" span="456:24:456:30">String</jtok>
<jtok eid="19" type="method_name" span="456:32:456:51">findAllWordsInField</jtok>
<jtok eid="19" type="parameter_type" span="456:52:456:66">BibtexDatabase</jtok>
<jtok eid="19" type="parameter_name" span="456:67:456:69">db</jtok>
<jtok eid="19" type="parameter_type" span="456:71:456:77">String</jtok>
<jtok eid="19" type="parameter_name" span="456:78:456:83">field</jtok>
<jtok eid="19" type="parameter_type" span="456:85:456:91">String</jtok>
<jtok eid="19" type="parameter_name" span="456:92:456:98">remove</jtok>
<jtok eid="19" type="class_or_interface_ref" span="457:3:457:10">TreeSet</jtok>
<jtok eid="19" type="class_or_interface_ref" span="457:11:457:17">String</jtok>
<jtok eid="19" type="local_variable_name" span="457:19:457:22">res</jtok>
<jtok eid="19" type="constructor_call" span="457:29:457:36">TreeSet</jtok>
<jtok eid="19" type="constructor_call" span="457:37:457:43">String</jtok>
<jtok eid="19" type="class_or_interface_ref" span="458:3:458:18">StringTokenizer</jtok>
<jtok eid="19" type="local_variable_name" span="458:19:458:22">tok</jtok>
<jtok eid="19" type="class_or_interface_ref" span="459:8:459:14">String</jtok>
<jtok eid="19" type="local_variable_name" span="459:15:459:16">s</jtok>
<jtok eid="19" type="primary_name_ref" span="459:19:459:21">db</jtok>
<jtok eid="19" type="method_call" span="459:22:459:31">getKeySet</jtok>
<jtok eid="19" type="class_or_interface_ref" span="460:4:460:15">BibtexEntry</jtok>
<jtok eid="19" type="local_variable_name" span="460:16:460:18">be</jtok>
<jtok eid="19" type="primary_name_ref" span="460:21:460:23">db</jtok>
<jtok eid="19" type="method_call" span="460:24:460:36">getEntryById</jtok>
<jtok eid="19" type="primary_name_ref" span="460:37:460:38">s</jtok>
<jtok eid="19" type="class_or_interface_ref" span="461:4:461:10">Object</jtok>
<jtok eid="19" type="local_variable_name" span="461:11:461:12">o</jtok>
<jtok eid="19" type="primary_name_ref" span="461:15:461:17">be</jtok>
<jtok eid="19" type="method_call" span="461:18:461:26">getField</jtok>
<jtok eid="19" type="primary_name_ref" span="461:27:461:32">field</jtok>
<jtok eid="19" type="primary_name_ref" span="462:8:462:9">o</jtok>
<jtok eid="19" type="primary_name_ref" span="463:5:463:8">tok</jtok>
<jtok eid="19" type="constructor_call" span="463:15:463:30">StringTokenizer</jtok>
<jtok eid="19" type="primary_name_ref" span="463:31:463:32">o</jtok>
<jtok eid="19" type="method_call" span="463:33:463:41">toString</jtok>
<jtok eid="19" type="primary_name_ref" span="463:45:463:51">remove</jtok>
<jtok eid="19" type="primary_name_ref" span="464:12:464:15">tok</jtok>
<jtok eid="19" type="method_call" span="464:16:464:29">hasMoreTokens</jtok>
<jtok eid="19" type="primary_name_ref" span="465:6:465:9">res</jtok>
<jtok eid="19" type="method_call" span="465:10:465:13">add</jtok>
<jtok eid="19" type="method_call" span="465:14:465:19">nCase</jtok>
<jtok eid="19" type="primary_name_ref" span="465:20:465:23">tok</jtok>
<jtok eid="19" type="method_call" span="465:24:465:33">nextToken</jtok>
<jtok eid="19" type="method_call" span="465:36:465:40">trim</jtok>
<jtok eid="19" type="primary_name_ref" span="468:10:468:13">res</jtok>
<jtok eid="1" type="block_comment" span="472:5:477:8">/**
     * Finds all authors' last names in all the given fields for the given database.
     * @param db The database.
     * @param fields The fields to look in.
     * @return a set containing the names.
     */</jtok>
<jtok eid="20" type="class_or_interface_ref" span="478:19:478:22">Set</jtok>
<jtok eid="20" type="class_or_interface_ref" span="478:23:478:29">String</jtok>
<jtok eid="20" type="method_name" span="478:31:478:50">findAuthorLastNames</jtok>
<jtok eid="20" type="parameter_type" span="478:51:478:65">BibtexDatabase</jtok>
<jtok eid="20" type="parameter_name" span="478:66:478:68">db</jtok>
<jtok eid="20" type="parameter_type" span="478:70:478:74">List</jtok>
<jtok eid="20" type="parameter_type" span="478:75:478:81">String</jtok>
<jtok eid="20" type="parameter_name" span="478:83:478:89">fields</jtok>
<jtok eid="20" type="class_or_interface_ref" span="479:3:479:6">Set</jtok>
<jtok eid="20" type="class_or_interface_ref" span="479:7:479:13">String</jtok>
<jtok eid="20" type="local_variable_name" span="479:15:479:18">res</jtok>
<jtok eid="20" type="constructor_call" span="479:25:479:32">TreeSet</jtok>
<jtok eid="20" type="constructor_call" span="479:33:479:39">String</jtok>
<jtok eid="20" type="class_or_interface_ref" span="480:8:480:14">String</jtok>
<jtok eid="20" type="local_variable_name" span="480:15:480:16">s</jtok>
<jtok eid="20" type="primary_name_ref" span="480:19:480:21">db</jtok>
<jtok eid="20" type="method_call" span="480:22:480:31">getKeySet</jtok>
<jtok eid="20" type="class_or_interface_ref" span="481:4:481:15">BibtexEntry</jtok>
<jtok eid="20" type="local_variable_name" span="481:16:481:18">be</jtok>
<jtok eid="20" type="primary_name_ref" span="481:21:481:23">db</jtok>
<jtok eid="20" type="method_call" span="481:24:481:36">getEntryById</jtok>
<jtok eid="20" type="primary_name_ref" span="481:37:481:38">s</jtok>
<jtok eid="20" type="class_or_interface_ref" span="482:18:482:24">String</jtok>
<jtok eid="20" type="local_variable_name" span="482:25:482:30">field</jtok>
<jtok eid="20" type="primary_name_ref" span="482:33:482:39">fields</jtok>
<jtok eid="20" type="class_or_interface_ref" span="483:17:483:23">String</jtok>
<jtok eid="20" type="local_variable_name" span="483:24:483:27">val</jtok>
<jtok eid="20" type="primary_name_ref" span="483:30:483:32">be</jtok>
<jtok eid="20" type="method_call" span="483:33:483:41">getField</jtok>
<jtok eid="20" type="primary_name_ref" span="483:42:483:47">field</jtok>
<jtok eid="20" type="primary_name_ref" span="484:22:484:25">val</jtok>
<jtok eid="20" type="primary_name_ref" span="484:39:484:42">val</jtok>
<jtok eid="20" type="method_call" span="484:43:484:49">length</jtok>
<jtok eid="20" type="class_or_interface_ref" span="485:21:485:31">AuthorList</jtok>
<jtok eid="20" type="local_variable_name" span="485:32:485:34">al</jtok>
<jtok eid="20" type="primary_name_ref" span="485:37:485:47">AuthorList</jtok>
<jtok eid="20" type="method_call" span="485:48:485:61">getAuthorList</jtok>
<jtok eid="20" type="primary_name_ref" span="485:62:485:65">val</jtok>
<jtok eid="20" type="local_variable_name" span="486:30:486:31">i</jtok>
<jtok eid="20" type="primary_name_ref" span="486:35:486:36">i</jtok>
<jtok eid="20" type="primary_name_ref" span="486:37:486:39">al</jtok>
<jtok eid="20" type="method_call" span="486:40:486:44">size</jtok>
<jtok eid="20" type="primary_name_ref" span="486:48:486:49">i</jtok>
<jtok eid="20" type="class_or_interface_ref" span="487:25:487:35">AuthorList</jtok>
<jtok eid="20" type="class_or_interface_ref" span="487:36:487:42">Author</jtok>
<jtok eid="20" type="local_variable_name" span="487:43:487:44">a</jtok>
<jtok eid="20" type="primary_name_ref" span="487:47:487:49">al</jtok>
<jtok eid="20" type="method_call" span="487:50:487:59">getAuthor</jtok>
<jtok eid="20" type="primary_name_ref" span="487:60:487:61">i</jtok>
<jtok eid="20" type="class_or_interface_ref" span="488:25:488:31">String</jtok>
<jtok eid="20" type="local_variable_name" span="488:32:488:40">lastName</jtok>
<jtok eid="20" type="primary_name_ref" span="488:43:488:44">a</jtok>
<jtok eid="20" type="method_call" span="488:45:488:52">getLast</jtok>
<jtok eid="20" type="primary_name_ref" span="489:30:489:38">lastName</jtok>
<jtok eid="20" type="primary_name_ref" span="489:52:489:60">lastName</jtok>
<jtok eid="20" type="method_call" span="489:61:489:67">length</jtok>
<jtok eid="20" type="primary_name_ref" span="490:29:490:32">res</jtok>
<jtok eid="20" type="method_call" span="490:33:490:36">add</jtok>
<jtok eid="20" type="primary_name_ref" span="490:37:490:45">lastName</jtok>
<jtok eid="20" type="primary_name_ref" span="497:10:497:13">res</jtok>
<jtok eid="1" type="block_comment" span="501:2:510:5">/**
	 * Takes a String array and returns a string with the array's elements
	 * delimited by a certain String.
	 * 
	 * @param strs
	 *            String array to convert.
	 * @param delimiter
	 *            String to use as delimiter.
	 * @return Delimited String.
	 */</jtok>
<jtok eid="21" type="class_or_interface_ref" span="511:16:511:22">String</jtok>
<jtok eid="21" type="method_name" span="511:23:511:45">stringArrayToDelimited</jtok>
<jtok eid="21" type="parameter_type" span="511:46:511:52">String</jtok>
<jtok eid="21" type="parameter_name" span="511:55:511:59">strs</jtok>
<jtok eid="21" type="parameter_type" span="511:61:511:67">String</jtok>
<jtok eid="21" type="parameter_name" span="511:68:511:77">delimiter</jtok>
<jtok eid="21" type="primary_name_ref" span="512:8:512:12">strs</jtok>
<jtok eid="21" type="primary_name_ref" span="512:26:512:30">strs</jtok>
<jtok eid="21" type="qualified_name_ref" span="512:31:512:37">length</jtok>
<jtok eid="21" type="string_literal" span="513:11:513:13">""</jtok>
<jtok eid="21" type="primary_name_ref" span="514:7:514:11">strs</jtok>
<jtok eid="21" type="qualified_name_ref" span="514:12:514:18">length</jtok>
<jtok eid="21" type="primary_name_ref" span="515:11:515:15">strs</jtok>
<jtok eid="21" type="class_or_interface_ref" span="516:3:516:15">StringBuffer</jtok>
<jtok eid="21" type="local_variable_name" span="516:16:516:18">sb</jtok>
<jtok eid="21" type="constructor_call" span="516:25:516:37">StringBuffer</jtok>
<jtok eid="21" type="local_variable_name" span="517:12:517:13">i</jtok>
<jtok eid="21" type="primary_name_ref" span="517:19:517:20">i</jtok>
<jtok eid="21" type="primary_name_ref" span="517:23:517:27">strs</jtok>
<jtok eid="21" type="qualified_name_ref" span="517:28:517:34">length</jtok>
<jtok eid="21" type="primary_name_ref" span="517:40:517:41">i</jtok>
<jtok eid="21" type="primary_name_ref" span="518:4:518:6">sb</jtok>
<jtok eid="21" type="method_call" span="518:7:518:13">append</jtok>
<jtok eid="21" type="primary_name_ref" span="518:14:518:18">strs</jtok>
<jtok eid="21" type="primary_name_ref" span="518:19:518:20">i</jtok>
<jtok eid="21" type="primary_name_ref" span="519:4:519:6">sb</jtok>
<jtok eid="21" type="method_call" span="519:7:519:13">append</jtok>
<jtok eid="21" type="primary_name_ref" span="519:14:519:23">delimiter</jtok>
<jtok eid="21" type="primary_name_ref" span="521:3:521:5">sb</jtok>
<jtok eid="21" type="method_call" span="521:6:521:12">append</jtok>
<jtok eid="21" type="primary_name_ref" span="521:13:521:17">strs</jtok>
<jtok eid="21" type="primary_name_ref" span="521:18:521:22">strs</jtok>
<jtok eid="21" type="qualified_name_ref" span="521:23:521:29">length</jtok>
<jtok eid="21" type="primary_name_ref" span="522:10:522:12">sb</jtok>
<jtok eid="21" type="method_call" span="522:13:522:21">toString</jtok>
<jtok eid="1" type="block_comment" span="525:2:531:5">/**
	 * Takes a delimited string, splits it and returns
	 * 
	 * @param names
	 *            a &lt;code&gt;String&lt;/code&gt; value
	 * @return a &lt;code&gt;String[]&lt;/code&gt; value
	 */</jtok>
<jtok eid="22" type="class_or_interface_ref" span="532:16:532:22">String</jtok>
<jtok eid="22" type="method_name" span="532:25:532:43">delimToStringArray</jtok>
<jtok eid="22" type="parameter_type" span="532:44:532:50">String</jtok>
<jtok eid="22" type="parameter_name" span="532:51:532:56">names</jtok>
<jtok eid="22" type="parameter_type" span="532:58:532:64">String</jtok>
<jtok eid="22" type="parameter_name" span="532:65:532:74">delimiter</jtok>
<jtok eid="22" type="primary_name_ref" span="533:7:533:12">names</jtok>
<jtok eid="22" type="primary_name_ref" span="535:10:535:15">names</jtok>
<jtok eid="22" type="method_call" span="535:16:535:21">split</jtok>
<jtok eid="22" type="primary_name_ref" span="535:22:535:31">delimiter</jtok>
<jtok eid="1" type="block_comment" span="538:2:540:5">/**
	 * Open a http/pdf/ps viewer for the given link string.
	 */</jtok>
<jtok eid="23" type="method_name" span="541:21:541:39">openExternalViewer</jtok>
<jtok eid="23" type="parameter_type" span="541:40:541:48">MetaData</jtok>
<jtok eid="23" type="parameter_name" span="541:49:541:57">metaData</jtok>
<jtok eid="23" type="parameter_type" span="541:59:541:65">String</jtok>
<jtok eid="23" type="parameter_name" span="541:66:541:70">link</jtok>
<jtok eid="23" type="parameter_type" span="541:72:541:78">String</jtok>
<jtok eid="23" type="parameter_name" span="541:79:541:88">fieldName</jtok>
<jtok eid="23" type="throws" span="542:10:542:21">IOException</jtok>
<jtok eid="23" type="primary_name_ref" span="544:13:544:22">fieldName</jtok>
<jtok eid="23" type="method_call" span="544:23:544:29">equals</jtok>
<jtok eid="23" type="string_literal" span="544:30:544:34">"ps"</jtok>
<jtok eid="23" type="primary_name_ref" span="544:39:544:48">fieldName</jtok>
<jtok eid="23" type="method_call" span="544:49:544:55">equals</jtok>
<jtok eid="23" type="string_literal" span="544:56:544:61">"pdf"</jtok>
<jtok eid="23" type="line_comment" span="546:13:546:63">// Find the default directory for this field type:</jtok>
<jtok eid="23" type="class_or_interface_ref" span="547:4:547:10">String</jtok>
<jtok eid="23" type="local_variable_name" span="547:11:547:14">dir</jtok>
<jtok eid="23" type="primary_name_ref" span="547:17:547:25">metaData</jtok>
<jtok eid="23" type="method_call" span="547:26:547:42">getFileDirectory</jtok>
<jtok eid="23" type="primary_name_ref" span="547:43:547:52">fieldName</jtok>
<jtok eid="23" type="class_or_interface_ref" span="549:4:549:8">File</jtok>
<jtok eid="23" type="local_variable_name" span="549:9:549:13">file</jtok>
<jtok eid="23" type="method_call" span="549:16:549:30">expandFilename</jtok>
<jtok eid="23" type="primary_name_ref" span="549:31:549:35">link</jtok>
<jtok eid="23" type="constructor_call" span="549:41:549:47">String</jtok>
<jtok eid="23" type="primary_name_ref" span="549:52:549:55">dir</jtok>
<jtok eid="23" type="string_literal" span="549:57:549:60">"."</jtok>
<jtok eid="23" type="line_comment" span="551:4:551:34">// Check that the file exists:</jtok>
<jtok eid="23" type="primary_name_ref" span="552:9:552:13">file</jtok>
<jtok eid="23" type="primary_name_ref" span="552:27:552:31">file</jtok>
<jtok eid="23" type="method_call" span="552:32:552:38">exists</jtok>
<jtok eid="23" type="constructor_call" span="553:15:553:26">IOException</jtok>
<jtok eid="23" type="primary_name_ref" span="553:27:553:34">Globals</jtok>
<jtok eid="23" type="method_call" span="553:35:553:39">lang</jtok>
<jtok eid="23" type="string_literal" span="553:40:553:56">"File not found"</jtok>
<jtok eid="23" type="string_literal" span="553:60:553:64">" ("</jtok>
<jtok eid="23" type="primary_name_ref" span="553:67:553:76">fieldName</jtok>
<jtok eid="23" type="string_literal" span="553:79:553:85">"): '"</jtok>
<jtok eid="23" type="primary_name_ref" span="554:8:554:12">link</jtok>
<jtok eid="23" type="string_literal" span="554:15:554:19">"'."</jtok>
<jtok eid="23" type="primary_name_ref" span="556:4:556:8">link</jtok>
<jtok eid="23" type="primary_name_ref" span="556:11:556:15">file</jtok>
<jtok eid="23" type="method_call" span="556:16:556:32">getCanonicalPath</jtok>
<jtok eid="23" type="line_comment" span="558:4:558:62">// Use the correct viewer even if pdf and ps are mixed up:</jtok>
<jtok eid="23" type="class_or_interface_ref" span="559:4:559:10">String</jtok>
<jtok eid="23" type="local_variable_name" span="559:13:559:18">split</jtok>
<jtok eid="23" type="primary_name_ref" span="559:21:559:25">file</jtok>
<jtok eid="23" type="method_call" span="559:26:559:33">getName</jtok>
<jtok eid="23" type="method_call" span="559:36:559:41">split</jtok>
<jtok eid="23" type="string_literal" span="559:42:559:47">"\\."</jtok>
<jtok eid="23" type="primary_name_ref" span="560:8:560:13">split</jtok>
<jtok eid="23" type="qualified_name_ref" span="560:14:560:20">length</jtok>
<jtok eid="23" type="primary_name_ref" span="561:9:561:14">split</jtok>
<jtok eid="23" type="primary_name_ref" span="561:15:561:20">split</jtok>
<jtok eid="23" type="qualified_name_ref" span="561:21:561:27">length</jtok>
<jtok eid="23" type="method_call" span="561:33:561:49">equalsIgnoreCase</jtok>
<jtok eid="23" type="string_literal" span="561:50:561:55">"pdf"</jtok>
<jtok eid="23" type="primary_name_ref" span="562:6:562:15">fieldName</jtok>
<jtok eid="23" type="string_literal" span="562:18:562:23">"pdf"</jtok>
<jtok eid="23" type="primary_name_ref" span="563:14:563:19">split</jtok>
<jtok eid="23" type="primary_name_ref" span="563:20:563:25">split</jtok>
<jtok eid="23" type="qualified_name_ref" span="563:26:563:32">length</jtok>
<jtok eid="23" type="method_call" span="563:38:563:54">equalsIgnoreCase</jtok>
<jtok eid="23" type="string_literal" span="563:55:563:59">"ps"</jtok>
<jtok eid="23" type="primary_name_ref" span="564:10:564:15">split</jtok>
<jtok eid="23" type="qualified_name_ref" span="564:16:564:22">length</jtok>
<jtok eid="23" type="primary_name_ref" span="564:31:564:36">split</jtok>
<jtok eid="23" type="primary_name_ref" span="564:37:564:42">split</jtok>
<jtok eid="23" type="qualified_name_ref" span="564:43:564:49">length</jtok>
<jtok eid="23" type="method_call" span="564:55:564:71">equalsIgnoreCase</jtok>
<jtok eid="23" type="string_literal" span="564:72:564:76">"ps"</jtok>
<jtok eid="23" type="primary_name_ref" span="565:6:565:15">fieldName</jtok>
<jtok eid="23" type="string_literal" span="565:18:565:22">"ps"</jtok>
<jtok eid="23" type="primary_name_ref" span="568:20:568:29">fieldName</jtok>
<jtok eid="23" type="method_call" span="568:30:568:36">equals</jtok>
<jtok eid="23" type="string_literal" span="568:37:568:42">"doi"</jtok>
<jtok eid="23" type="primary_name_ref" span="569:4:569:13">fieldName</jtok>
<jtok eid="23" type="string_literal" span="569:16:569:21">"url"</jtok>
<jtok eid="23" type="primary_name_ref" span="571:4:571:8">link</jtok>
<jtok eid="23" type="method_call" span="571:11:571:22">sanitizeUrl</jtok>
<jtok eid="23" type="primary_name_ref" span="571:23:571:27">link</jtok>
<jtok eid="23" type="line_comment" span="573:4:573:70">// Check to see if link field already contains a well formated URL</jtok>
<jtok eid="23" type="primary_name_ref" span="574:9:574:13">link</jtok>
<jtok eid="23" type="method_call" span="574:14:574:24">startsWith</jtok>
<jtok eid="23" type="string_literal" span="574:25:574:34">"http://"</jtok>
<jtok eid="23" type="line_comment" span="575:8:575:33">// Remove possible 'doi:'</jtok>
<jtok eid="23" type="primary_name_ref" span="576:12:576:16">link</jtok>
<jtok eid="23" type="method_call" span="576:17:576:24">matches</jtok>
<jtok eid="23" type="string_literal" span="576:25:576:36">"^doi:/*.*"</jtok>
<jtok eid="23" type="primary_name_ref" span="577:18:577:22">link</jtok>
<jtok eid="23" type="primary_name_ref" span="577:25:577:29">link</jtok>
<jtok eid="23" type="method_call" span="577:30:577:42">replaceFirst</jtok>
<jtok eid="23" type="string_literal" span="577:43:577:52">"^doi:/*"</jtok>
<jtok eid="23" type="string_literal" span="577:54:577:56">""</jtok>
<jtok eid="23" type="primary_name_ref" span="579:8:579:12">link</jtok>
<jtok eid="23" type="primary_name_ref" span="579:15:579:22">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="579:23:579:40">DOI_LOOKUP_PREFIX</jtok>
<jtok eid="23" type="primary_name_ref" span="579:43:579:47">link</jtok>
<jtok eid="23" type="primary_name_ref" span="581:14:581:23">fieldName</jtok>
<jtok eid="23" type="method_call" span="581:24:581:30">equals</jtok>
<jtok eid="23" type="string_literal" span="581:31:581:44">"citeseerurl"</jtok>
<jtok eid="23" type="primary_name_ref" span="582:4:582:13">fieldName</jtok>
<jtok eid="23" type="string_literal" span="582:16:582:21">"url"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="584:4:584:10">String</jtok>
<jtok eid="23" type="local_variable_name" span="584:11:584:24">canonicalLink</jtok>
<jtok eid="23" type="primary_name_ref" span="584:27:584:42">CiteSeerFetcher</jtok>
<jtok eid="23" type="method_call" span="584:43:584:63">generateCanonicalURL</jtok>
<jtok eid="23" type="primary_name_ref" span="584:64:584:68">link</jtok>
<jtok eid="23" type="primary_name_ref" span="585:8:585:21">canonicalLink</jtok>
<jtok eid="23" type="primary_name_ref" span="586:5:586:9">link</jtok>
<jtok eid="23" type="primary_name_ref" span="586:12:586:25">canonicalLink</jtok>
<jtok eid="23" type="primary_name_ref" span="589:7:589:16">fieldName</jtok>
<jtok eid="23" type="method_call" span="589:17:589:23">equals</jtok>
<jtok eid="23" type="string_literal" span="589:24:589:29">"url"</jtok>
<jtok eid="23" type="line_comment" span="589:34:589:41">// html</jtok>
<jtok eid="23" type="primary_name_ref" span="591:5:591:9">link</jtok>
<jtok eid="23" type="method_call" span="591:12:591:23">sanitizeUrl</jtok>
<jtok eid="23" type="primary_name_ref" span="591:24:591:28">link</jtok>
<jtok eid="23" type="class_or_interface_ref" span="592:17:592:33">ExternalFileType</jtok>
<jtok eid="23" type="local_variable_name" span="592:34:592:42">fileType</jtok>
<jtok eid="23" type="primary_name_ref" span="592:45:592:52">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="592:53:592:58">prefs</jtok>
<jtok eid="23" type="method_call" span="592:59:592:83">getExternalFileTypeByExt</jtok>
<jtok eid="23" type="string_literal" span="592:84:592:90">"html"</jtok>
<jtok eid="23" type="primary_name_ref" span="593:9:593:16">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="593:17:593:23">ON_MAC</jtok>
<jtok eid="23" type="class_or_interface_ref" span="595:21:595:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="595:30:595:33">cmd</jtok>
<jtok eid="23" type="primary_name_ref" span="595:38:595:46">fileType</jtok>
<jtok eid="23" type="method_call" span="595:47:595:58">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="595:74:595:82">fileType</jtok>
<jtok eid="23" type="method_call" span="595:83:595:94">getOpenWith</jtok>
<jtok eid="23" type="method_call" span="595:97:595:103">length</jtok>
<jtok eid="23" type="constructor_call" span="596:33:596:39">String</jtok>
<jtok eid="23" type="string_literal" span="596:44:596:59">"/usr/bin/open"</jtok>
<jtok eid="23" type="string_literal" span="596:61:596:65">"-a"</jtok>
<jtok eid="23" type="primary_name_ref" span="596:67:596:75">fileType</jtok>
<jtok eid="23" type="method_call" span="596:76:596:87">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="596:91:596:95">link</jtok>
<jtok eid="23" type="constructor_call" span="597:33:597:39">String</jtok>
<jtok eid="23" type="string_literal" span="597:44:597:59">"/usr/bin/open"</jtok>
<jtok eid="23" type="primary_name_ref" span="597:61:597:65">link</jtok>
<jtok eid="23" type="primary_name_ref" span="598:6:598:13">Runtime</jtok>
<jtok eid="23" type="method_call" span="598:14:598:24">getRuntime</jtok>
<jtok eid="23" type="method_call" span="598:27:598:31">exec</jtok>
<jtok eid="23" type="primary_name_ref" span="598:32:598:35">cmd</jtok>
<jtok eid="23" type="primary_name_ref" span="599:16:599:23">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="599:24:599:30">ON_WIN</jtok>
<jtok eid="23" type="primary_name_ref" span="601:26:601:34">fileType</jtok>
<jtok eid="23" type="method_call" span="601:35:601:46">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="601:62:601:70">fileType</jtok>
<jtok eid="23" type="method_call" span="601:71:601:82">getOpenWith</jtok>
<jtok eid="23" type="method_call" span="601:85:601:91">length</jtok>
<jtok eid="23" type="line_comment" span="602:25:602:61">// Application is specified. Use it:</jtok>
<jtok eid="23" type="method_call" span="603:25:603:57">openFileWithApplicationOnWindows</jtok>
<jtok eid="23" type="primary_name_ref" span="603:58:603:62">link</jtok>
<jtok eid="23" type="primary_name_ref" span="603:64:603:72">fileType</jtok>
<jtok eid="23" type="method_call" span="603:73:603:84">getOpenWith</jtok>
<jtok eid="23" type="method_call" span="605:25:605:42">openFileOnWindows</jtok>
<jtok eid="23" type="primary_name_ref" span="605:43:605:47">link</jtok>
<jtok eid="23" type="line_comment" span="607:21:607:95">// Use the given app if specified, and the universal "xdg-open" otherwise:</jtok>
<jtok eid="23" type="class_or_interface_ref" span="608:21:608:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="608:30:608:38">openWith</jtok>
<jtok eid="23" type="primary_name_ref" span="609:26:609:34">fileType</jtok>
<jtok eid="23" type="method_call" span="609:35:609:46">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="609:62:609:70">fileType</jtok>
<jtok eid="23" type="method_call" span="609:71:609:82">getOpenWith</jtok>
<jtok eid="23" type="method_call" span="609:85:609:91">length</jtok>
<jtok eid="23" type="primary_name_ref" span="610:25:610:33">openWith</jtok>
<jtok eid="23" type="primary_name_ref" span="610:36:610:44">fileType</jtok>
<jtok eid="23" type="method_call" span="610:45:610:56">getOpenWith</jtok>
<jtok eid="23" type="method_call" span="610:59:610:64">split</jtok>
<jtok eid="23" type="string_literal" span="610:65:610:68">" "</jtok>
<jtok eid="23" type="primary_name_ref" span="612:25:612:33">openWith</jtok>
<jtok eid="23" type="constructor_call" span="612:40:612:46">String</jtok>
<jtok eid="23" type="string_literal" span="612:50:612:60">"xdg-open"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="614:21:614:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="614:30:614:33">cmd</jtok>
<jtok eid="23" type="constructor_call" span="614:40:614:46">String</jtok>
<jtok eid="23" type="primary_name_ref" span="614:47:614:55">openWith</jtok>
<jtok eid="23" type="qualified_name_ref" span="614:56:614:62">length</jtok>
<jtok eid="23" type="primary_name_ref" span="615:21:615:27">System</jtok>
<jtok eid="23" type="method_call" span="615:28:615:37">arraycopy</jtok>
<jtok eid="23" type="primary_name_ref" span="615:38:615:46">openWith</jtok>
<jtok eid="23" type="primary_name_ref" span="615:51:615:54">cmd</jtok>
<jtok eid="23" type="primary_name_ref" span="615:59:615:67">openWith</jtok>
<jtok eid="23" type="qualified_name_ref" span="615:68:615:74">length</jtok>
<jtok eid="23" type="primary_name_ref" span="616:21:616:24">cmd</jtok>
<jtok eid="23" type="primary_name_ref" span="616:25:616:28">cmd</jtok>
<jtok eid="23" type="qualified_name_ref" span="616:29:616:35">length</jtok>
<jtok eid="23" type="primary_name_ref" span="616:41:616:45">link</jtok>
<jtok eid="23" type="primary_name_ref" span="617:21:617:28">Runtime</jtok>
<jtok eid="23" type="method_call" span="617:29:617:39">getRuntime</jtok>
<jtok eid="23" type="method_call" span="617:42:617:46">exec</jtok>
<jtok eid="23" type="primary_name_ref" span="617:47:617:50">cmd</jtok>
<jtok eid="23" type="class_or_interface_ref" span="620:13:620:24">IOException</jtok>
<jtok eid="23" type="local_variable_name" span="620:25:620:26">e</jtok>
<jtok eid="23" type="primary_name_ref" span="621:17:621:23">System</jtok>
<jtok eid="23" type="qualified_name_ref" span="621:24:621:27">err</jtok>
<jtok eid="23" type="method_call" span="621:28:621:35">println</jtok>
<jtok eid="23" type="primary_name_ref" span="621:36:621:43">Globals</jtok>
<jtok eid="23" type="method_call" span="621:44:621:48">lang</jtok>
<jtok eid="23" type="string_literal" span="621:49:621:75">"Error_opening_file_'%0'."</jtok>
<jtok eid="23" type="primary_name_ref" span="621:77:621:81">link</jtok>
<jtok eid="23" type="primary_name_ref" span="622:17:622:18">e</jtok>
<jtok eid="23" type="method_call" span="622:19:622:34">printStackTrace</jtok>
<jtok eid="23" type="primary_name_ref" span="624:14:624:23">fieldName</jtok>
<jtok eid="23" type="method_call" span="624:24:624:30">equals</jtok>
<jtok eid="23" type="string_literal" span="624:31:624:35">"ps"</jtok>
<jtok eid="23" type="primary_name_ref" span="626:9:626:16">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="626:17:626:23">ON_MAC</jtok>
<jtok eid="23" type="class_or_interface_ref" span="627:21:627:37">ExternalFileType</jtok>
<jtok eid="23" type="local_variable_name" span="627:38:627:42">type</jtok>
<jtok eid="23" type="primary_name_ref" span="627:45:627:52">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="627:53:627:58">prefs</jtok>
<jtok eid="23" type="method_call" span="627:59:627:83">getExternalFileTypeByExt</jtok>
<jtok eid="23" type="string_literal" span="627:84:627:88">"ps"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="628:21:628:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="628:28:628:34">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="628:37:628:41">type</jtok>
<jtok eid="23" type="primary_name_ref" span="628:52:628:56">type</jtok>
<jtok eid="23" type="method_call" span="628:57:628:68">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="628:73:628:80">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="628:81:628:86">prefs</jtok>
<jtok eid="23" type="method_call" span="628:87:628:90">get</jtok>
<jtok eid="23" type="string_literal" span="628:91:628:101">"psviewer"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="629:21:629:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="629:30:629:33">cmd</jtok>
<jtok eid="23" type="string_literal" span="629:38:629:53">"/usr/bin/open"</jtok>
<jtok eid="23" type="string_literal" span="629:55:629:59">"-a"</jtok>
<jtok eid="23" type="primary_name_ref" span="629:61:629:67">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="629:69:629:73">link</jtok>
<jtok eid="23" type="primary_name_ref" span="630:6:630:13">Runtime</jtok>
<jtok eid="23" type="method_call" span="630:14:630:24">getRuntime</jtok>
<jtok eid="23" type="method_call" span="630:27:630:31">exec</jtok>
<jtok eid="23" type="primary_name_ref" span="630:32:630:35">cmd</jtok>
<jtok eid="23" type="primary_name_ref" span="631:16:631:23">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="631:24:631:30">ON_WIN</jtok>
<jtok eid="23" type="method_call" span="632:6:632:23">openFileOnWindows</jtok>
<jtok eid="23" type="primary_name_ref" span="632:24:632:28">link</jtok>
<jtok eid="23" type="block_comment" span="633:6:637:9">/*
					 * cmdArray[0] = Globals.prefs.get("psviewer"); cmdArray[1] =
					 * link; Process child = Runtime.getRuntime().exec(
					 * cmdArray[0] + " " + cmdArray[1]);
					 */</jtok>
<jtok eid="23" type="class_or_interface_ref" span="639:21:639:37">ExternalFileType</jtok>
<jtok eid="23" type="local_variable_name" span="639:38:639:42">type</jtok>
<jtok eid="23" type="primary_name_ref" span="639:45:639:52">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="639:53:639:58">prefs</jtok>
<jtok eid="23" type="method_call" span="639:59:639:83">getExternalFileTypeByExt</jtok>
<jtok eid="23" type="string_literal" span="639:84:639:88">"ps"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="640:21:640:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="640:28:640:34">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="640:37:640:41">type</jtok>
<jtok eid="23" type="primary_name_ref" span="640:52:640:56">type</jtok>
<jtok eid="23" type="method_call" span="640:57:640:68">getOpenWith</jtok>
<jtok eid="23" type="string_literal" span="640:73:640:83">"xdg-open"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="641:21:641:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="641:30:641:38">cmdArray</jtok>
<jtok eid="23" type="constructor_call" span="641:45:641:51">String</jtok>
<jtok eid="23" type="primary_name_ref" span="642:21:642:29">cmdArray</jtok>
<jtok eid="23" type="primary_name_ref" span="642:35:642:41">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="643:6:643:14">cmdArray</jtok>
<jtok eid="23" type="primary_name_ref" span="643:20:643:24">link</jtok>
<jtok eid="23" type="primary_name_ref" span="644:6:644:13">Runtime</jtok>
<jtok eid="23" type="method_call" span="644:14:644:24">getRuntime</jtok>
<jtok eid="23" type="method_call" span="644:27:644:31">exec</jtok>
<jtok eid="23" type="primary_name_ref" span="644:32:644:40">cmdArray</jtok>
<jtok eid="23" type="class_or_interface_ref" span="646:13:646:24">IOException</jtok>
<jtok eid="23" type="local_variable_name" span="646:25:646:26">e</jtok>
<jtok eid="23" type="primary_name_ref" span="647:5:647:11">System</jtok>
<jtok eid="23" type="qualified_name_ref" span="647:12:647:15">err</jtok>
<jtok eid="23" type="method_call" span="647:16:647:23">println</jtok>
<jtok eid="23" type="string_literal" span="647:24:647:59">"An error occured on the command: "</jtok>
<jtok eid="23" type="primary_name_ref" span="648:8:648:15">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="648:16:648:21">prefs</jtok>
<jtok eid="23" type="method_call" span="648:22:648:25">get</jtok>
<jtok eid="23" type="string_literal" span="648:26:648:36">"psviewer"</jtok>
<jtok eid="23" type="string_literal" span="648:40:648:43">" "</jtok>
<jtok eid="23" type="primary_name_ref" span="648:46:648:50">link</jtok>
<jtok eid="23" type="primary_name_ref" span="650:14:650:23">fieldName</jtok>
<jtok eid="23" type="method_call" span="650:24:650:30">equals</jtok>
<jtok eid="23" type="string_literal" span="650:31:650:36">"pdf"</jtok>
<jtok eid="23" type="primary_name_ref" span="652:9:652:16">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="652:17:652:23">ON_MAC</jtok>
<jtok eid="23" type="class_or_interface_ref" span="653:21:653:37">ExternalFileType</jtok>
<jtok eid="23" type="local_variable_name" span="653:38:653:42">type</jtok>
<jtok eid="23" type="primary_name_ref" span="653:45:653:52">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="653:53:653:58">prefs</jtok>
<jtok eid="23" type="method_call" span="653:59:653:83">getExternalFileTypeByExt</jtok>
<jtok eid="23" type="string_literal" span="653:84:653:89">"pdf"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="654:21:654:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="654:28:654:34">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="654:37:654:41">type</jtok>
<jtok eid="23" type="primary_name_ref" span="654:52:654:56">type</jtok>
<jtok eid="23" type="method_call" span="654:57:654:68">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="654:73:654:80">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="654:81:654:86">prefs</jtok>
<jtok eid="23" type="method_call" span="654:87:654:90">get</jtok>
<jtok eid="23" type="string_literal" span="654:91:654:101">"psviewer"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="655:21:655:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="655:30:655:33">cmd</jtok>
<jtok eid="23" type="string_literal" span="655:38:655:53">"/usr/bin/open"</jtok>
<jtok eid="23" type="string_literal" span="655:55:655:59">"-a"</jtok>
<jtok eid="23" type="primary_name_ref" span="655:61:655:67">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="655:69:655:73">link</jtok>
<jtok eid="23" type="primary_name_ref" span="656:6:656:13">Runtime</jtok>
<jtok eid="23" type="method_call" span="656:14:656:24">getRuntime</jtok>
<jtok eid="23" type="method_call" span="656:27:656:31">exec</jtok>
<jtok eid="23" type="primary_name_ref" span="656:32:656:35">cmd</jtok>
<jtok eid="23" type="primary_name_ref" span="657:16:657:23">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="657:24:657:30">ON_WIN</jtok>
<jtok eid="23" type="method_call" span="658:6:658:23">openFileOnWindows</jtok>
<jtok eid="23" type="primary_name_ref" span="658:24:658:28">link</jtok>
<jtok eid="23" type="block_comment" span="659:6:669:9">/*
					 * String[] spl = link.split("\\\\"); StringBuffer sb = new
					 * StringBuffer(); for (int i = 0; i &lt; spl.length; i++) { if
					 * (i &gt; 0) sb.append("\\"); if (spl[i].indexOf(" ") &gt;= 0)
					 * spl[i] = "\"" + spl[i] + "\""; sb.append(spl[i]); }
					 * //pr(sb.toString()); link = sb.toString();
					 * 
					 * String cmd = "cmd.exe /c start " + link;
					 * 
					 * Process child = Runtime.getRuntime().exec(cmd);
					 */</jtok>
<jtok eid="23" type="class_or_interface_ref" span="671:21:671:37">ExternalFileType</jtok>
<jtok eid="23" type="local_variable_name" span="671:38:671:42">type</jtok>
<jtok eid="23" type="primary_name_ref" span="671:45:671:52">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="671:53:671:58">prefs</jtok>
<jtok eid="23" type="method_call" span="671:59:671:83">getExternalFileTypeByExt</jtok>
<jtok eid="23" type="string_literal" span="671:84:671:89">"pdf"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="672:21:672:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="672:28:672:34">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="672:37:672:41">type</jtok>
<jtok eid="23" type="primary_name_ref" span="672:52:672:56">type</jtok>
<jtok eid="23" type="method_call" span="672:57:672:68">getOpenWith</jtok>
<jtok eid="23" type="primary_name_ref" span="672:73:672:80">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="672:81:672:86">prefs</jtok>
<jtok eid="23" type="method_call" span="672:87:672:90">get</jtok>
<jtok eid="23" type="string_literal" span="672:91:672:101">"psviewer"</jtok>
<jtok eid="23" type="class_or_interface_ref" span="673:21:673:27">String</jtok>
<jtok eid="23" type="local_variable_name" span="673:30:673:38">cmdArray</jtok>
<jtok eid="23" type="constructor_call" span="673:45:673:51">String</jtok>
<jtok eid="23" type="primary_name_ref" span="674:21:674:29">cmdArray</jtok>
<jtok eid="23" type="primary_name_ref" span="674:35:674:41">viewer</jtok>
<jtok eid="23" type="primary_name_ref" span="675:6:675:14">cmdArray</jtok>
<jtok eid="23" type="primary_name_ref" span="675:20:675:24">link</jtok>
<jtok eid="23" type="line_comment" span="676:6:676:64">// Process child = Runtime.getRuntime().exec(cmdArray[0]+"</jtok>
<jtok eid="23" type="line_comment" span="677:6:677:24">// "+cmdArray[1]);</jtok>
<jtok eid="23" type="primary_name_ref" span="678:6:678:13">Runtime</jtok>
<jtok eid="23" type="method_call" span="678:14:678:24">getRuntime</jtok>
<jtok eid="23" type="method_call" span="678:27:678:31">exec</jtok>
<jtok eid="23" type="primary_name_ref" span="678:32:678:40">cmdArray</jtok>
<jtok eid="23" type="class_or_interface_ref" span="680:13:680:24">IOException</jtok>
<jtok eid="23" type="local_variable_name" span="680:25:680:26">e</jtok>
<jtok eid="23" type="primary_name_ref" span="681:5:681:6">e</jtok>
<jtok eid="23" type="method_call" span="681:7:681:22">printStackTrace</jtok>
<jtok eid="23" type="primary_name_ref" span="682:5:682:11">System</jtok>
<jtok eid="23" type="qualified_name_ref" span="682:12:682:15">err</jtok>
<jtok eid="23" type="method_call" span="682:16:682:23">println</jtok>
<jtok eid="23" type="string_literal" span="682:24:682:59">"An error occured on the command: "</jtok>
<jtok eid="23" type="primary_name_ref" span="683:8:683:15">Globals</jtok>
<jtok eid="23" type="qualified_name_ref" span="683:16:683:21">prefs</jtok>
<jtok eid="23" type="method_call" span="683:22:683:25">get</jtok>
<jtok eid="23" type="string_literal" span="683:26:683:37">"pdfviewer"</jtok>
<jtok eid="23" type="string_literal" span="683:41:683:45">" #"</jtok>
<jtok eid="23" type="primary_name_ref" span="683:48:683:52">link</jtok>
<jtok eid="23" type="primary_name_ref" span="684:5:684:11">System</jtok>
<jtok eid="23" type="qualified_name_ref" span="684:12:684:15">err</jtok>
<jtok eid="23" type="method_call" span="684:16:684:23">println</jtok>
<jtok eid="23" type="primary_name_ref" span="684:24:684:25">e</jtok>
<jtok eid="23" type="method_call" span="684:26:684:36">getMessage</jtok>
<jtok eid="23" type="primary_name_ref" span="687:4:687:10">System</jtok>
<jtok eid="23" type="qualified_name_ref" span="687:11:687:14">err</jtok>
<jtok eid="23" type="method_call" span="688:6:688:13">println</jtok>
<jtok eid="23" type="string_literal" span="688:14:688:95">"Message: currently only PDF, PS and HTML files can be opened by double clicking"</jtok>
<jtok eid="1" type="block_comment" span="692:2:700:5">/**
	 * Opens a file on a Windows system, using its default viewer.
	 * 
	 * @param link
	 *            The file name.
	 * @param localFile
	 *            true if it is a local file, not an URL.
	 * @throws IOException
	 */</jtok>
<jtok eid="24" type="method_name" span="701:21:701:38">openFileOnWindows</jtok>
<jtok eid="24" type="parameter_type" span="701:39:701:45">String</jtok>
<jtok eid="24" type="parameter_name" span="701:46:701:50">link</jtok>
<jtok eid="24" type="parameter_name" span="701:60:701:69">localFile</jtok>
<jtok eid="24" type="throws" span="701:78:701:89">IOException</jtok>
<jtok eid="24" type="block_comment" span="702:3:707:6">/*
		 * if (localFile) { String[] spl = link.split("\\\\"); StringBuffer sb =
		 * new StringBuffer(); for (int i = 0; i &lt; spl.length; i++) { if (i &gt; 0)
		 * sb.append("\\"); if (spl[i].indexOf(" ") &gt;= 0) spl[i] = "\"" + spl[i] +
		 * "\""; sb.append(spl[i]); } link = sb.toString(); }
		 */</jtok>
<jtok eid="24" type="primary_name_ref" span="708:3:708:7">link</jtok>
<jtok eid="24" type="primary_name_ref" span="708:10:708:14">link</jtok>
<jtok eid="24" type="method_call" span="708:15:708:25">replaceAll</jtok>
<jtok eid="24" type="string_literal" span="708:26:708:29">"&amp;"</jtok>
<jtok eid="24" type="string_literal" span="708:31:708:38">"\"&amp;\""</jtok>
<jtok eid="24" type="method_call" span="708:40:708:50">replaceAll</jtok>
<jtok eid="24" type="string_literal" span="708:51:708:54">" "</jtok>
<jtok eid="24" type="string_literal" span="708:56:708:63">"\" \""</jtok>
<jtok eid="24" type="line_comment" span="710:3:710:18">// Bug fix for:</jtok>
<jtok eid="24" type="line_comment" span="711:3:711:97">// http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1489454&amp;group_id=92314&amp;atid=600306</jtok>
<jtok eid="24" type="class_or_interface_ref" span="712:3:712:9">String</jtok>
<jtok eid="24" type="local_variable_name" span="712:10:712:13">cmd</jtok>
<jtok eid="24" type="primary_name_ref" span="713:7:713:14">Globals</jtok>
<jtok eid="24" type="qualified_name_ref" span="713:15:713:21">osName</jtok>
<jtok eid="24" type="method_call" span="713:22:713:32">startsWith</jtok>
<jtok eid="24" type="string_literal" span="713:33:713:44">"Windows 9"</jtok>
<jtok eid="24" type="primary_name_ref" span="714:4:714:7">cmd</jtok>
<jtok eid="24" type="string_literal" span="714:10:714:33">"command.com /c start "</jtok>
<jtok eid="24" type="primary_name_ref" span="714:36:714:40">link</jtok>
<jtok eid="24" type="primary_name_ref" span="716:4:716:7">cmd</jtok>
<jtok eid="24" type="string_literal" span="716:10:716:29">"cmd.exe /c start "</jtok>
<jtok eid="24" type="primary_name_ref" span="716:32:716:36">link</jtok>
<jtok eid="24" type="primary_name_ref" span="719:9:719:16">Runtime</jtok>
<jtok eid="24" type="method_call" span="719:17:719:27">getRuntime</jtok>
<jtok eid="24" type="method_call" span="719:30:719:34">exec</jtok>
<jtok eid="24" type="primary_name_ref" span="719:35:719:38">cmd</jtok>
<jtok eid="1" type="block_comment" span="722:5:728:8">/**
     * Opens a file on a Windows system, using the given application.
     *
     * @param link The file name.
     * @param application Link to the app that opens the file.
     * @throws IOException
     */</jtok>
<jtok eid="25" type="method_name" span="729:24:729:56">openFileWithApplicationOnWindows</jtok>
<jtok eid="25" type="parameter_type" span="729:57:729:63">String</jtok>
<jtok eid="25" type="parameter_name" span="729:64:729:68">link</jtok>
<jtok eid="25" type="parameter_type" span="729:70:729:76">String</jtok>
<jtok eid="25" type="parameter_name" span="729:77:729:88">application</jtok>
<jtok eid="25" type="throws" span="730:16:730:27">IOException</jtok>
<jtok eid="25" type="primary_name_ref" span="732:9:732:13">link</jtok>
<jtok eid="25" type="primary_name_ref" span="732:16:732:20">link</jtok>
<jtok eid="25" type="method_call" span="732:21:732:31">replaceAll</jtok>
<jtok eid="25" type="string_literal" span="732:32:732:35">"&amp;"</jtok>
<jtok eid="25" type="string_literal" span="732:37:732:44">"\"&amp;\""</jtok>
<jtok eid="25" type="method_call" span="732:46:732:56">replaceAll</jtok>
<jtok eid="25" type="string_literal" span="732:57:732:60">" "</jtok>
<jtok eid="25" type="string_literal" span="732:62:732:69">"\" \""</jtok>
<jtok eid="25" type="primary_name_ref" span="734:3:734:10">Runtime</jtok>
<jtok eid="25" type="method_call" span="734:11:734:21">getRuntime</jtok>
<jtok eid="25" type="method_call" span="734:24:734:28">exec</jtok>
<jtok eid="25" type="primary_name_ref" span="734:29:734:40">application</jtok>
<jtok eid="25" type="string_literal" span="734:43:734:46">" "</jtok>
<jtok eid="25" type="primary_name_ref" span="734:49:734:53">link</jtok>
<jtok eid="1" type="block_comment" span="737:5:745:5">/**
	 * Open an external file, attempting to use the correct viewer for it.
	 * 
	 * @param metaData
	 *            The MetaData for the database this file belongs to.
	 * @param link
	 *            The file name.
     * @return false if the link couldn't be resolved, true otherwise.
	 */</jtok>
<jtok eid="26" type="method_name" span="746:24:746:49">openExternalFileAnyFormat</jtok>
<jtok eid="26" type="parameter_type" span="746:56:746:64">MetaData</jtok>
<jtok eid="26" type="parameter_name" span="746:65:746:73">metaData</jtok>
<jtok eid="26" type="parameter_type" span="746:75:746:81">String</jtok>
<jtok eid="26" type="parameter_name" span="746:82:746:86">link</jtok>
<jtok eid="26" type="parameter_type" span="747:56:747:72">ExternalFileType</jtok>
<jtok eid="26" type="parameter_name" span="747:73:747:81">fileType</jtok>
<jtok eid="26" type="throws" span="747:90:747:101">IOException</jtok>
<jtok eid="26" type="local_variable_name" span="749:17:749:25">httpLink</jtok>
<jtok eid="26" type="primary_name_ref" span="751:13:751:30">remoteLinkPattern</jtok>
<jtok eid="26" type="method_call" span="751:31:751:38">matcher</jtok>
<jtok eid="26" type="primary_name_ref" span="751:39:751:43">link</jtok>
<jtok eid="26" type="method_call" span="751:44:751:55">toLowerCase</jtok>
<jtok eid="26" type="method_call" span="751:59:751:66">matches</jtok>
<jtok eid="26" type="primary_name_ref" span="752:13:752:21">httpLink</jtok>
<jtok eid="26" type="block_comment" span="754:9:766:12">/*if (link.toLowerCase().startsWith("file://")) {
            link = link.substring(7);
        }
        final String ln = link;
        if (remoteLinkPattern.matcher(link.toLowerCase()).matches()) {
            (new Thread(new Runnable() {
                public void run() {
                    openRemoteExternalFile(metaData, ln, fileType);
                }
            })).start();

            return true;
        }*/</jtok>
<jtok eid="26" type="line_comment" span="768:9:768:68">//boolean httpLink = link.toLowerCase().startsWith("http:")</jtok>
<jtok eid="26" type="line_comment" span="769:9:769:60">//        || link.toLowerCase().startsWith("ftp:");</jtok>
<jtok eid="26" type="line_comment" span="772:9:772:64">// For other platforms we'll try to find the file type:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="773:3:773:7">File</jtok>
<jtok eid="26" type="local_variable_name" span="773:8:773:12">file</jtok>
<jtok eid="26" type="constructor_call" span="773:19:773:23">File</jtok>
<jtok eid="26" type="primary_name_ref" span="773:24:773:28">link</jtok>
<jtok eid="26" type="line_comment" span="775:3:775:49">// We try to check the extension for the file:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="776:3:776:9">String</jtok>
<jtok eid="26" type="local_variable_name" span="776:10:776:14">name</jtok>
<jtok eid="26" type="primary_name_ref" span="776:17:776:21">file</jtok>
<jtok eid="26" type="method_call" span="776:22:776:29">getName</jtok>
<jtok eid="26" type="local_variable_name" span="777:7:777:10">pos</jtok>
<jtok eid="26" type="primary_name_ref" span="777:13:777:17">name</jtok>
<jtok eid="26" type="method_call" span="777:18:777:29">lastIndexOf</jtok>
<jtok eid="26" type="class_or_interface_ref" span="778:3:778:9">String</jtok>
<jtok eid="26" type="local_variable_name" span="778:10:778:19">extension</jtok>
<jtok eid="26" type="primary_name_ref" span="778:24:778:27">pos</jtok>
<jtok eid="26" type="primary_name_ref" span="778:38:778:41">pos</jtok>
<jtok eid="26" type="primary_name_ref" span="778:44:778:48">name</jtok>
<jtok eid="26" type="method_call" span="778:49:778:55">length</jtok>
<jtok eid="26" type="primary_name_ref" span="778:66:778:70">name</jtok>
<jtok eid="26" type="method_call" span="778:71:778:80">substring</jtok>
<jtok eid="26" type="primary_name_ref" span="778:81:778:84">pos</jtok>
<jtok eid="26" type="method_call" span="779:5:779:9">trim</jtok>
<jtok eid="26" type="method_call" span="779:12:779:23">toLowerCase</jtok>
<jtok eid="26" type="line_comment" span="780:3:780:61">// Find the default directory for this field type, if any:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="781:3:781:9">String</jtok>
<jtok eid="26" type="local_variable_name" span="781:10:781:13">dir</jtok>
<jtok eid="26" type="primary_name_ref" span="781:16:781:24">metaData</jtok>
<jtok eid="26" type="method_call" span="781:25:781:41">getFileDirectory</jtok>
<jtok eid="26" type="primary_name_ref" span="781:42:781:51">extension</jtok>
<jtok eid="26" type="line_comment" span="782:3:782:44">// Include the standard "file" directory:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="783:9:783:15">String</jtok>
<jtok eid="26" type="local_variable_name" span="783:16:783:23">fileDir</jtok>
<jtok eid="26" type="primary_name_ref" span="783:26:783:34">metaData</jtok>
<jtok eid="26" type="method_call" span="783:35:783:51">getFileDirectory</jtok>
<jtok eid="26" type="primary_name_ref" span="783:52:783:62">GUIGlobals</jtok>
<jtok eid="26" type="qualified_name_ref" span="783:63:783:73">FILE_FIELD</jtok>
<jtok eid="26" type="line_comment" span="784:9:784:50">// Include the directory of the bib file:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="785:9:785:15">String</jtok>
<jtok eid="26" type="local_variable_name" span="785:18:785:22">dirs</jtok>
<jtok eid="26" type="primary_name_ref" span="786:13:786:21">metaData</jtok>
<jtok eid="26" type="method_call" span="786:22:786:29">getFile</jtok>
<jtok eid="26" type="class_or_interface_ref" span="787:13:787:19">String</jtok>
<jtok eid="26" type="local_variable_name" span="787:20:787:31">databaseDir</jtok>
<jtok eid="26" type="primary_name_ref" span="787:34:787:42">metaData</jtok>
<jtok eid="26" type="method_call" span="787:43:787:50">getFile</jtok>
<jtok eid="26" type="method_call" span="787:53:787:62">getParent</jtok>
<jtok eid="26" type="primary_name_ref" span="788:13:788:17">dirs</jtok>
<jtok eid="26" type="constructor_call" span="788:24:788:30">String</jtok>
<jtok eid="26" type="primary_name_ref" span="788:35:788:38">dir</jtok>
<jtok eid="26" type="primary_name_ref" span="788:40:788:47">fileDir</jtok>
<jtok eid="26" type="primary_name_ref" span="788:49:788:60">databaseDir</jtok>
<jtok eid="26" type="primary_name_ref" span="791:13:791:17">dirs</jtok>
<jtok eid="26" type="constructor_call" span="791:24:791:30">String</jtok>
<jtok eid="26" type="primary_name_ref" span="791:35:791:38">dir</jtok>
<jtok eid="26" type="primary_name_ref" span="791:40:791:47">fileDir</jtok>
<jtok eid="26" type="primary_name_ref" span="793:14:793:22">httpLink</jtok>
<jtok eid="26" type="class_or_interface_ref" span="794:13:794:17">File</jtok>
<jtok eid="26" type="local_variable_name" span="794:18:794:21">tmp</jtok>
<jtok eid="26" type="method_call" span="794:24:794:38">expandFilename</jtok>
<jtok eid="26" type="primary_name_ref" span="794:39:794:43">link</jtok>
<jtok eid="26" type="primary_name_ref" span="794:45:794:49">dirs</jtok>
<jtok eid="26" type="primary_name_ref" span="795:17:795:20">tmp</jtok>
<jtok eid="26" type="primary_name_ref" span="796:17:796:21">file</jtok>
<jtok eid="26" type="primary_name_ref" span="796:24:796:27">tmp</jtok>
<jtok eid="26" type="line_comment" span="799:9:799:97">// Check if we have arrived at a file type, and either an http link or an existing file:</jtok>
<jtok eid="26" type="primary_name_ref" span="800:8:800:16">httpLink</jtok>
<jtok eid="26" type="primary_name_ref" span="800:20:800:24">file</jtok>
<jtok eid="26" type="method_call" span="800:25:800:31">exists</jtok>
<jtok eid="26" type="primary_name_ref" span="800:39:800:47">fileType</jtok>
<jtok eid="26" type="line_comment" span="801:13:801:30">// Open the file:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="803:17:803:23">String</jtok>
<jtok eid="26" type="local_variable_name" span="803:24:803:32">filePath</jtok>
<jtok eid="26" type="primary_name_ref" span="803:35:803:43">httpLink</jtok>
<jtok eid="26" type="primary_name_ref" span="803:46:803:50">link</jtok>
<jtok eid="26" type="primary_name_ref" span="803:53:803:57">file</jtok>
<jtok eid="26" type="method_call" span="803:58:803:65">getPath</jtok>
<jtok eid="26" type="primary_name_ref" span="804:21:804:28">Globals</jtok>
<jtok eid="26" type="qualified_name_ref" span="804:29:804:35">ON_MAC</jtok>
<jtok eid="26" type="line_comment" span="805:21:805:109">// Use "-a &lt;application&gt;" if the app is specified, and just "open &lt;filename&gt;" otherwise:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="806:21:806:27">String</jtok>
<jtok eid="26" type="local_variable_name" span="806:30:806:33">cmd</jtok>
<jtok eid="26" type="primary_name_ref" span="806:38:806:46">fileType</jtok>
<jtok eid="26" type="method_call" span="806:47:806:58">getOpenWith</jtok>
<jtok eid="26" type="primary_name_ref" span="806:74:806:82">fileType</jtok>
<jtok eid="26" type="method_call" span="806:83:806:94">getOpenWith</jtok>
<jtok eid="26" type="method_call" span="806:97:806:103">length</jtok>
<jtok eid="26" type="constructor_call" span="807:33:807:39">String</jtok>
<jtok eid="26" type="string_literal" span="807:44:807:59">"/usr/bin/open"</jtok>
<jtok eid="26" type="string_literal" span="807:61:807:65">"-a"</jtok>
<jtok eid="26" type="primary_name_ref" span="807:67:807:75">fileType</jtok>
<jtok eid="26" type="method_call" span="807:76:807:87">getOpenWith</jtok>
<jtok eid="26" type="primary_name_ref" span="807:91:807:99">filePath</jtok>
<jtok eid="26" type="constructor_call" span="808:33:808:39">String</jtok>
<jtok eid="26" type="string_literal" span="808:44:808:59">"/usr/bin/open"</jtok>
<jtok eid="26" type="primary_name_ref" span="808:61:808:69">filePath</jtok>
<jtok eid="26" type="primary_name_ref" span="809:6:809:13">Runtime</jtok>
<jtok eid="26" type="method_call" span="809:14:809:24">getRuntime</jtok>
<jtok eid="26" type="method_call" span="809:27:809:31">exec</jtok>
<jtok eid="26" type="primary_name_ref" span="809:32:809:35">cmd</jtok>
<jtok eid="26" type="primary_name_ref" span="810:16:810:23">Globals</jtok>
<jtok eid="26" type="qualified_name_ref" span="810:24:810:30">ON_WIN</jtok>
<jtok eid="26" type="primary_name_ref" span="811:26:811:34">fileType</jtok>
<jtok eid="26" type="method_call" span="811:35:811:46">getOpenWith</jtok>
<jtok eid="26" type="primary_name_ref" span="811:62:811:70">fileType</jtok>
<jtok eid="26" type="method_call" span="811:71:811:82">getOpenWith</jtok>
<jtok eid="26" type="method_call" span="811:85:811:91">length</jtok>
<jtok eid="26" type="line_comment" span="812:25:812:61">// Application is specified. Use it:</jtok>
<jtok eid="26" type="method_call" span="813:25:813:57">openFileWithApplicationOnWindows</jtok>
<jtok eid="26" type="primary_name_ref" span="813:58:813:66">filePath</jtok>
<jtok eid="26" type="primary_name_ref" span="813:68:813:76">fileType</jtok>
<jtok eid="26" type="method_call" span="813:77:813:88">getOpenWith</jtok>
<jtok eid="26" type="method_call" span="815:25:815:42">openFileOnWindows</jtok>
<jtok eid="26" type="primary_name_ref" span="815:43:815:51">filePath</jtok>
<jtok eid="26" type="line_comment" span="817:21:817:95">// Use the given app if specified, and the universal "xdg-open" otherwise:</jtok>
<jtok eid="26" type="class_or_interface_ref" span="818:21:818:27">String</jtok>
<jtok eid="26" type="local_variable_name" span="818:30:818:38">openWith</jtok>
<jtok eid="26" type="primary_name_ref" span="819:26:819:34">fileType</jtok>
<jtok eid="26" type="method_call" span="819:35:819:46">getOpenWith</jtok>
<jtok eid="26" type="primary_name_ref" span="819:62:819:70">fileType</jtok>
<jtok eid="26" type="method_call" span="819:71:819:82">getOpenWith</jtok>
<jtok eid="26" type="method_call" span="819:85:819:91">length</jtok>
<jtok eid="26" type="primary_name_ref" span="820:25:820:33">openWith</jtok>
<jtok eid="26" type="primary_name_ref" span="820:36:820:44">fileType</jtok>
<jtok eid="26" type="method_call" span="820:45:820:56">getOpenWith</jtok>
<jtok eid="26" type="method_call" span="820:59:820:64">split</jtok>
<jtok eid="26" type="string_literal" span="820:65:820:68">" "</jtok>
<jtok eid="26" type="primary_name_ref" span="822:25:822:33">openWith</jtok>
<jtok eid="26" type="constructor_call" span="822:40:822:46">String</jtok>
<jtok eid="26" type="string_literal" span="822:50:822:60">"xdg-open"</jtok>
<jtok eid="26" type="class_or_interface_ref" span="824:21:824:27">String</jtok>
<jtok eid="26" type="local_variable_name" span="824:30:824:38">cmdArray</jtok>
<jtok eid="26" type="constructor_call" span="824:45:824:51">String</jtok>
<jtok eid="26" type="primary_name_ref" span="824:52:824:60">openWith</jtok>
<jtok eid="26" type="qualified_name_ref" span="824:61:824:67">length</jtok>
<jtok eid="26" type="primary_name_ref" span="825:21:825:27">System</jtok>
<jtok eid="26" type="method_call" span="825:28:825:37">arraycopy</jtok>
<jtok eid="26" type="primary_name_ref" span="825:38:825:46">openWith</jtok>
<jtok eid="26" type="primary_name_ref" span="825:51:825:59">cmdArray</jtok>
<jtok eid="26" type="primary_name_ref" span="825:64:825:72">openWith</jtok>
<jtok eid="26" type="qualified_name_ref" span="825:73:825:79">length</jtok>
<jtok eid="26" type="primary_name_ref" span="826:21:826:29">cmdArray</jtok>
<jtok eid="26" type="primary_name_ref" span="826:30:826:38">cmdArray</jtok>
<jtok eid="26" type="qualified_name_ref" span="826:39:826:45">length</jtok>
<jtok eid="26" type="primary_name_ref" span="826:51:826:59">filePath</jtok>
<jtok eid="26" type="primary_name_ref" span="827:21:827:28">Runtime</jtok>
<jtok eid="26" type="method_call" span="827:29:827:39">getRuntime</jtok>
<jtok eid="26" type="method_call" span="827:42:827:46">exec</jtok>
<jtok eid="26" type="primary_name_ref" span="827:47:827:55">cmdArray</jtok>
<jtok eid="26" type="class_or_interface_ref" span="830:22:830:33">IOException</jtok>
<jtok eid="26" type="local_variable_name" span="830:34:830:35">e</jtok>
<jtok eid="26" type="primary_name_ref" span="831:23:831:24">e</jtok>
<jtok eid="26" type="block_comment" span="832:17:835:42">/*e.printStackTrace();
				System.err.println("An error occured on the command: " + fileType.getOpenWith()
					+ " #" + link);
				System.err.println(e.getMessage());*/</jtok>
<jtok eid="26" type="line_comment" span="841:13:841:74">// No file matched the name, or we didn't know the file type.</jtok>
<jtok eid="27" type="method_name" span="849:24:849:46">openRemoteExternalFile</jtok>
<jtok eid="27" type="parameter_type" span="849:53:849:61">MetaData</jtok>
<jtok eid="27" type="parameter_name" span="849:62:849:70">metaData</jtok>
<jtok eid="27" type="parameter_type" span="850:53:850:59">String</jtok>
<jtok eid="27" type="parameter_name" span="850:60:850:64">link</jtok>
<jtok eid="27" type="parameter_type" span="850:72:850:88">ExternalFileType</jtok>
<jtok eid="27" type="parameter_name" span="850:89:850:97">fileType</jtok>
<jtok eid="27" type="class_or_interface_ref" span="851:9:851:13">File</jtok>
<jtok eid="27" type="local_variable_name" span="851:14:851:18">temp</jtok>
<jtok eid="27" type="primary_name_ref" span="853:13:853:17">temp</jtok>
<jtok eid="27" type="primary_name_ref" span="853:20:853:24">File</jtok>
<jtok eid="27" type="method_call" span="853:25:853:39">createTempFile</jtok>
<jtok eid="27" type="string_literal" span="853:40:853:53">"jabref-link"</jtok>
<jtok eid="27" type="string_literal" span="853:55:853:58">"."</jtok>
<jtok eid="27" type="primary_name_ref" span="853:59:853:67">fileType</jtok>
<jtok eid="27" type="method_call" span="853:68:853:80">getExtension</jtok>
<jtok eid="27" type="primary_name_ref" span="854:13:854:17">temp</jtok>
<jtok eid="27" type="method_call" span="854:18:854:30">deleteOnExit</jtok>
<jtok eid="27" type="primary_name_ref" span="855:13:855:19">System</jtok>
<jtok eid="27" type="qualified_name_ref" span="855:20:855:23">out</jtok>
<jtok eid="27" type="method_call" span="855:24:855:31">println</jtok>
<jtok eid="27" type="string_literal" span="855:32:855:50">"Downloading to '"</jtok>
<jtok eid="27" type="primary_name_ref" span="855:51:855:55">temp</jtok>
<jtok eid="27" type="method_call" span="855:56:855:63">getPath</jtok>
<jtok eid="27" type="string_literal" span="855:66:855:69">"'"</jtok>
<jtok eid="27" type="class_or_interface_ref" span="856:13:856:24">URLDownload</jtok>
<jtok eid="27" type="local_variable_name" span="856:25:856:27">ud</jtok>
<jtok eid="27" type="constructor_call" span="856:34:856:45">URLDownload</jtok>
<jtok eid="27" type="constructor_call" span="856:56:856:59">URL</jtok>
<jtok eid="27" type="primary_name_ref" span="856:60:856:64">link</jtok>
<jtok eid="27" type="primary_name_ref" span="856:67:856:71">temp</jtok>
<jtok eid="27" type="primary_name_ref" span="857:13:857:15">ud</jtok>
<jtok eid="27" type="method_call" span="857:16:857:24">download</jtok>
<jtok eid="27" type="primary_name_ref" span="858:13:858:19">System</jtok>
<jtok eid="27" type="qualified_name_ref" span="858:20:858:23">out</jtok>
<jtok eid="27" type="method_call" span="858:24:858:31">println</jtok>
<jtok eid="27" type="string_literal" span="858:32:858:38">"Done"</jtok>
<jtok eid="27" type="class_or_interface_ref" span="859:18:859:39">MalformedURLException</jtok>
<jtok eid="27" type="local_variable_name" span="859:40:859:42">ex</jtok>
<jtok eid="27" type="primary_name_ref" span="860:13:860:15">ex</jtok>
<jtok eid="27" type="method_call" span="860:16:860:31">printStackTrace</jtok>
<jtok eid="27" type="class_or_interface_ref" span="861:18:861:29">IOException</jtok>
<jtok eid="27" type="local_variable_name" span="861:30:861:32">ex</jtok>
<jtok eid="27" type="primary_name_ref" span="862:13:862:15">ex</jtok>
<jtok eid="27" type="method_call" span="862:16:862:31">printStackTrace</jtok>
<jtok eid="27" type="class_or_interface_ref" span="864:15:864:21">String</jtok>
<jtok eid="27" type="local_variable_name" span="864:22:864:24">ln</jtok>
<jtok eid="27" type="primary_name_ref" span="864:27:864:31">temp</jtok>
<jtok eid="27" type="method_call" span="864:32:864:39">getPath</jtok>
<jtok eid="27" type="primary_name_ref" span="865:9:865:23">SwingUtilities</jtok>
<jtok eid="27" type="method_call" span="865:24:865:35">invokeLater</jtok>
<jtok eid="27" type="constructor_call" span="865:40:865:48">Runnable</jtok>
<jtok eid="29" type="method_name" span="866:25:866:28">run</jtok>
<jtok eid="29" type="method_call" span="868:21:868:46">openExternalFileAnyFormat</jtok>
<jtok eid="29" type="primary_name_ref" span="868:47:868:55">metaData</jtok>
<jtok eid="29" type="primary_name_ref" span="868:57:868:59">ln</jtok>
<jtok eid="29" type="primary_name_ref" span="868:61:868:69">fileType</jtok>
<jtok eid="29" type="class_or_interface_ref" span="869:26:869:37">IOException</jtok>
<jtok eid="29" type="local_variable_name" span="869:38:869:40">ex</jtok>
<jtok eid="29" type="primary_name_ref" span="870:21:870:23">ex</jtok>
<jtok eid="29" type="method_call" span="870:24:870:39">printStackTrace</jtok>
<jtok eid="30" type="method_name" span="876:23:876:46">openExternalFileUnknown</jtok>
<jtok eid="30" type="parameter_type" span="876:47:876:58">JabRefFrame</jtok>
<jtok eid="30" type="parameter_name" span="876:59:876:64">frame</jtok>
<jtok eid="30" type="parameter_type" span="876:66:876:77">BibtexEntry</jtok>
<jtok eid="30" type="parameter_name" span="876:78:876:83">entry</jtok>
<jtok eid="30" type="parameter_type" span="876:85:876:93">MetaData</jtok>
<jtok eid="30" type="parameter_name" span="876:94:876:102">metaData</jtok>
<jtok eid="30" type="parameter_type" span="877:44:877:50">String</jtok>
<jtok eid="30" type="parameter_name" span="877:51:877:55">link</jtok>
<jtok eid="30" type="parameter_type" span="877:57:877:80">UnknownExternalFileType</jtok>
<jtok eid="30" type="parameter_name" span="877:81:877:89">fileType</jtok>
<jtok eid="30" type="throws" span="877:98:877:109">IOException</jtok>
<jtok eid="30" type="class_or_interface_ref" span="879:5:879:11">String</jtok>
<jtok eid="30" type="local_variable_name" span="879:12:879:25">cancelMessage</jtok>
<jtok eid="30" type="primary_name_ref" span="879:28:879:35">Globals</jtok>
<jtok eid="30" type="method_call" span="879:36:879:40">lang</jtok>
<jtok eid="30" type="string_literal" span="879:41:879:63">"Unable to open file."</jtok>
<jtok eid="30" type="class_or_interface_ref" span="880:5:880:11">String</jtok>
<jtok eid="30" type="local_variable_name" span="880:14:880:21">options</jtok>
<jtok eid="30" type="constructor_call" span="880:28:880:34">String</jtok>
<jtok eid="30" type="primary_name_ref" span="880:38:880:45">Globals</jtok>
<jtok eid="30" type="method_call" span="880:46:880:50">lang</jtok>
<jtok eid="30" type="string_literal" span="880:51:880:64">"Define '%0'"</jtok>
<jtok eid="30" type="primary_name_ref" span="880:66:880:74">fileType</jtok>
<jtok eid="30" type="method_call" span="880:75:880:82">getName</jtok>
<jtok eid="30" type="primary_name_ref" span="881:13:881:20">Globals</jtok>
<jtok eid="30" type="method_call" span="881:21:881:25">lang</jtok>
<jtok eid="30" type="string_literal" span="881:26:881:44">"Change file type"</jtok>
<jtok eid="30" type="primary_name_ref" span="881:47:881:54">Globals</jtok>
<jtok eid="30" type="method_call" span="881:55:881:59">lang</jtok>
<jtok eid="30" type="string_literal" span="881:60:881:68">"Cancel"</jtok>
<jtok eid="30" type="class_or_interface_ref" span="882:5:882:11">String</jtok>
<jtok eid="30" type="local_variable_name" span="882:12:882:21">defOption</jtok>
<jtok eid="30" type="primary_name_ref" span="882:24:882:31">options</jtok>
<jtok eid="30" type="local_variable_name" span="883:9:883:15">answer</jtok>
<jtok eid="30" type="primary_name_ref" span="883:18:883:29">JOptionPane</jtok>
<jtok eid="30" type="method_call" span="883:30:883:46">showOptionDialog</jtok>
<jtok eid="30" type="primary_name_ref" span="883:47:883:52">frame</jtok>
<jtok eid="30" type="primary_name_ref" span="883:54:883:61">Globals</jtok>
<jtok eid="30" type="method_call" span="883:62:883:66">lang</jtok>
<jtok eid="30" type="string_literal" span="883:67:883:152">"This external link is of the type '%0', which is undefined. What do you want to do?"</jtok>
<jtok eid="30" type="primary_name_ref" span="884:13:884:21">fileType</jtok>
<jtok eid="30" type="method_call" span="884:22:884:29">getName</jtok>
<jtok eid="30" type="primary_name_ref" span="885:13:885:20">Globals</jtok>
<jtok eid="30" type="method_call" span="885:21:885:25">lang</jtok>
<jtok eid="30" type="string_literal" span="885:26:885:47">"Undefined file type"</jtok>
<jtok eid="30" type="primary_name_ref" span="885:50:885:61">JOptionPane</jtok>
<jtok eid="30" type="qualified_name_ref" span="885:62:885:82">YES_NO_CANCEL_OPTION</jtok>
<jtok eid="30" type="primary_name_ref" span="886:13:886:24">JOptionPane</jtok>
<jtok eid="30" type="qualified_name_ref" span="886:25:886:41">QUESTION_MESSAGE</jtok>
<jtok eid="30" type="primary_name_ref" span="886:49:886:56">options</jtok>
<jtok eid="30" type="primary_name_ref" span="886:58:886:67">defOption</jtok>
<jtok eid="30" type="primary_name_ref" span="887:9:887:15">answer</jtok>
<jtok eid="30" type="primary_name_ref" span="887:19:887:30">JOptionPane</jtok>
<jtok eid="30" type="qualified_name_ref" span="887:31:887:44">CANCEL_OPTION</jtok>
<jtok eid="30" type="primary_name_ref" span="888:9:888:14">frame</jtok>
<jtok eid="30" type="method_call" span="888:15:888:21">output</jtok>
<jtok eid="30" type="primary_name_ref" span="888:22:888:35">cancelMessage</jtok>
<jtok eid="30" type="primary_name_ref" span="891:14:891:20">answer</jtok>
<jtok eid="30" type="primary_name_ref" span="891:24:891:35">JOptionPane</jtok>
<jtok eid="30" type="qualified_name_ref" span="891:36:891:46">YES_OPTION</jtok>
<jtok eid="30" type="line_comment" span="892:9:892:68">// User wants to define the new file type. Show the dialog:</jtok>
<jtok eid="30" type="class_or_interface_ref" span="893:9:893:25">ExternalFileType</jtok>
<jtok eid="30" type="local_variable_name" span="893:26:893:33">newType</jtok>
<jtok eid="30" type="constructor_call" span="893:40:893:56">ExternalFileType</jtok>
<jtok eid="30" type="primary_name_ref" span="893:57:893:65">fileType</jtok>
<jtok eid="30" type="method_call" span="893:66:893:73">getName</jtok>
<jtok eid="30" type="string_literal" span="893:77:893:79">""</jtok>
<jtok eid="30" type="string_literal" span="893:81:893:83">""</jtok>
<jtok eid="30" type="string_literal" span="893:85:893:87">""</jtok>
<jtok eid="30" type="string_literal" span="893:89:893:94">"new"</jtok>
<jtok eid="30" type="class_or_interface_ref" span="894:9:894:36">ExternalFileTypeEntryEditor</jtok>
<jtok eid="30" type="local_variable_name" span="894:37:894:43">editor</jtok>
<jtok eid="30" type="constructor_call" span="894:50:894:77">ExternalFileTypeEntryEditor</jtok>
<jtok eid="30" type="primary_name_ref" span="894:78:894:83">frame</jtok>
<jtok eid="30" type="primary_name_ref" span="894:85:894:92">newType</jtok>
<jtok eid="30" type="primary_name_ref" span="895:9:895:15">editor</jtok>
<jtok eid="30" type="method_call" span="895:16:895:26">setVisible</jtok>
<jtok eid="30" type="primary_name_ref" span="896:13:896:19">editor</jtok>
<jtok eid="30" type="method_call" span="896:20:896:29">okPressed</jtok>
<jtok eid="30" type="line_comment" span="897:13:897:86">// Get the old list of types, add this one, and update the list in prefs:</jtok>
<jtok eid="30" type="class_or_interface_ref" span="898:13:898:17">List</jtok>
<jtok eid="30" type="class_or_interface_ref" span="898:18:898:34">ExternalFileType</jtok>
<jtok eid="30" type="local_variable_name" span="898:36:898:45">fileTypes</jtok>
<jtok eid="30" type="constructor_call" span="898:52:898:61">ArrayList</jtok>
<jtok eid="30" type="constructor_call" span="898:62:898:78">ExternalFileType</jtok>
<jtok eid="30" type="class_or_interface_ref" span="899:13:899:29">ExternalFileType</jtok>
<jtok eid="30" type="local_variable_name" span="899:32:899:40">oldTypes</jtok>
<jtok eid="30" type="primary_name_ref" span="899:43:899:50">Globals</jtok>
<jtok eid="30" type="qualified_name_ref" span="899:51:899:56">prefs</jtok>
<jtok eid="30" type="method_call" span="899:57:899:85">getExternalFileTypeSelection</jtok>
<jtok eid="30" type="local_variable_name" span="900:22:900:23">i</jtok>
<jtok eid="30" type="primary_name_ref" span="900:29:900:30">i</jtok>
<jtok eid="30" type="primary_name_ref" span="900:33:900:41">oldTypes</jtok>
<jtok eid="30" type="qualified_name_ref" span="900:42:900:48">length</jtok>
<jtok eid="30" type="primary_name_ref" span="900:50:900:51">i</jtok>
<jtok eid="30" type="primary_name_ref" span="901:17:901:26">fileTypes</jtok>
<jtok eid="30" type="method_call" span="901:27:901:30">add</jtok>
<jtok eid="30" type="primary_name_ref" span="901:31:901:39">oldTypes</jtok>
<jtok eid="30" type="primary_name_ref" span="901:40:901:41">i</jtok>
<jtok eid="30" type="primary_name_ref" span="903:13:903:22">fileTypes</jtok>
<jtok eid="30" type="method_call" span="903:23:903:26">add</jtok>
<jtok eid="30" type="primary_name_ref" span="903:27:903:34">newType</jtok>
<jtok eid="30" type="primary_name_ref" span="904:13:904:24">Collections</jtok>
<jtok eid="30" type="method_call" span="904:25:904:29">sort</jtok>
<jtok eid="30" type="primary_name_ref" span="904:30:904:39">fileTypes</jtok>
<jtok eid="30" type="primary_name_ref" span="905:13:905:20">Globals</jtok>
<jtok eid="30" type="qualified_name_ref" span="905:21:905:26">prefs</jtok>
<jtok eid="30" type="method_call" span="905:27:905:47">setExternalFileTypes</jtok>
<jtok eid="30" type="primary_name_ref" span="905:48:905:57">fileTypes</jtok>
<jtok eid="30" type="line_comment" span="906:13:906:39">// Finally, open the file:</jtok>
<jtok eid="30" type="method_call" span="907:20:907:45">openExternalFileAnyFormat</jtok>
<jtok eid="30" type="primary_name_ref" span="907:46:907:54">metaData</jtok>
<jtok eid="30" type="primary_name_ref" span="907:56:907:60">link</jtok>
<jtok eid="30" type="primary_name_ref" span="907:62:907:69">newType</jtok>
<jtok eid="30" type="line_comment" span="909:13:909:26">// Cancelled:</jtok>
<jtok eid="30" type="primary_name_ref" span="910:13:910:18">frame</jtok>
<jtok eid="30" type="method_call" span="910:19:910:25">output</jtok>
<jtok eid="30" type="primary_name_ref" span="910:26:910:39">cancelMessage</jtok>
<jtok eid="30" type="line_comment" span="915:9:915:55">// User wants to change the type of this link.</jtok>
<jtok eid="30" type="line_comment" span="916:9:916:63">// First get a model of all file links for this entry:</jtok>
<jtok eid="30" type="class_or_interface_ref" span="917:9:917:27">FileListTableModel</jtok>
<jtok eid="30" type="local_variable_name" span="917:28:917:34">tModel</jtok>
<jtok eid="30" type="constructor_call" span="917:41:917:59">FileListTableModel</jtok>
<jtok eid="30" type="class_or_interface_ref" span="918:9:918:15">String</jtok>
<jtok eid="30" type="local_variable_name" span="918:16:918:24">oldValue</jtok>
<jtok eid="30" type="primary_name_ref" span="918:27:918:32">entry</jtok>
<jtok eid="30" type="method_call" span="918:33:918:41">getField</jtok>
<jtok eid="30" type="primary_name_ref" span="918:42:918:52">GUIGlobals</jtok>
<jtok eid="30" type="qualified_name_ref" span="918:53:918:63">FILE_FIELD</jtok>
<jtok eid="30" type="primary_name_ref" span="919:9:919:15">tModel</jtok>
<jtok eid="30" type="method_call" span="919:16:919:26">setContent</jtok>
<jtok eid="30" type="primary_name_ref" span="919:27:919:35">oldValue</jtok>
<jtok eid="30" type="class_or_interface_ref" span="920:9:920:22">FileListEntry</jtok>
<jtok eid="30" type="local_variable_name" span="920:23:920:30">flEntry</jtok>
<jtok eid="30" type="line_comment" span="921:9:921:50">// Then find which one we are looking at:</jtok>
<jtok eid="30" type="local_variable_name" span="922:18:922:19">i</jtok>
<jtok eid="30" type="primary_name_ref" span="922:23:922:24">i</jtok>
<jtok eid="30" type="primary_name_ref" span="922:25:922:31">tModel</jtok>
<jtok eid="30" type="method_call" span="922:32:922:43">getRowCount</jtok>
<jtok eid="30" type="primary_name_ref" span="922:47:922:48">i</jtok>
<jtok eid="30" type="class_or_interface_ref" span="923:13:923:26">FileListEntry</jtok>
<jtok eid="30" type="local_variable_name" span="923:27:923:33">iEntry</jtok>
<jtok eid="30" type="primary_name_ref" span="923:36:923:42">tModel</jtok>
<jtok eid="30" type="method_call" span="923:43:923:51">getEntry</jtok>
<jtok eid="30" type="primary_name_ref" span="923:52:923:53">i</jtok>
<jtok eid="30" type="primary_name_ref" span="924:17:924:23">iEntry</jtok>
<jtok eid="30" type="method_call" span="924:24:924:31">getLink</jtok>
<jtok eid="30" type="method_call" span="924:34:924:40">equals</jtok>
<jtok eid="30" type="primary_name_ref" span="924:41:924:45">link</jtok>
<jtok eid="30" type="primary_name_ref" span="925:17:925:24">flEntry</jtok>
<jtok eid="30" type="primary_name_ref" span="925:27:925:33">iEntry</jtok>
<jtok eid="30" type="primary_name_ref" span="929:13:929:20">flEntry</jtok>
<jtok eid="30" type="line_comment" span="930:13:930:75">// This shouldn't happen, so I'm not sure what to put in here:</jtok>
<jtok eid="30" type="constructor_call" span="931:23:931:39">RuntimeException</jtok>
<jtok eid="30" type="string_literal" span="931:40:931:77">"Could not find the file list entry "</jtok>
<jtok eid="30" type="primary_name_ref" span="931:78:931:82">link</jtok>
<jtok eid="30" type="string_literal" span="931:83:931:89">" in "</jtok>
<jtok eid="30" type="primary_name_ref" span="931:90:931:95">entry</jtok>
<jtok eid="30" type="method_call" span="931:96:931:104">toString</jtok>
<jtok eid="30" type="class_or_interface_ref" span="934:9:934:28">FileListEntryEditor</jtok>
<jtok eid="30" type="local_variable_name" span="934:29:934:35">editor</jtok>
<jtok eid="30" type="constructor_call" span="934:42:934:61">FileListEntryEditor</jtok>
<jtok eid="30" type="primary_name_ref" span="934:62:934:67">frame</jtok>
<jtok eid="30" type="primary_name_ref" span="934:69:934:76">flEntry</jtok>
<jtok eid="30" type="primary_name_ref" span="934:91:934:99">metaData</jtok>
<jtok eid="30" type="primary_name_ref" span="935:9:935:15">editor</jtok>
<jtok eid="30" type="method_call" span="935:16:935:26">setVisible</jtok>
<jtok eid="30" type="primary_name_ref" span="936:13:936:19">editor</jtok>
<jtok eid="30" type="method_call" span="936:20:936:29">okPressed</jtok>
<jtok eid="30" type="line_comment" span="937:13:937:55">// Store the changes and add an undo edit:</jtok>
<jtok eid="30" type="class_or_interface_ref" span="938:13:938:19">String</jtok>
<jtok eid="30" type="local_variable_name" span="938:20:938:28">newValue</jtok>
<jtok eid="30" type="primary_name_ref" span="938:31:938:37">tModel</jtok>
<jtok eid="30" type="method_call" span="938:38:938:61">getStringRepresentation</jtok>
<jtok eid="30" type="class_or_interface_ref" span="939:13:939:32">UndoableFieldChange</jtok>
<jtok eid="30" type="local_variable_name" span="939:33:939:35">ce</jtok>
<jtok eid="30" type="constructor_call" span="939:42:939:61">UndoableFieldChange</jtok>
<jtok eid="30" type="primary_name_ref" span="939:62:939:67">entry</jtok>
<jtok eid="30" type="primary_name_ref" span="939:69:939:79">GUIGlobals</jtok>
<jtok eid="30" type="qualified_name_ref" span="939:80:939:90">FILE_FIELD</jtok>
<jtok eid="30" type="primary_name_ref" span="940:21:940:29">oldValue</jtok>
<jtok eid="30" type="primary_name_ref" span="940:31:940:39">newValue</jtok>
<jtok eid="30" type="primary_name_ref" span="941:13:941:18">entry</jtok>
<jtok eid="30" type="method_call" span="941:19:941:27">setField</jtok>
<jtok eid="30" type="primary_name_ref" span="941:28:941:38">GUIGlobals</jtok>
<jtok eid="30" type="qualified_name_ref" span="941:39:941:49">FILE_FIELD</jtok>
<jtok eid="30" type="primary_name_ref" span="941:51:941:59">newValue</jtok>
<jtok eid="30" type="primary_name_ref" span="942:13:942:18">frame</jtok>
<jtok eid="30" type="method_call" span="942:19:942:28">basePanel</jtok>
<jtok eid="30" type="qualified_name_ref" span="942:31:942:42">undoManager</jtok>
<jtok eid="30" type="method_call" span="942:43:942:50">addEdit</jtok>
<jtok eid="30" type="primary_name_ref" span="942:51:942:53">ce</jtok>
<jtok eid="30" type="primary_name_ref" span="943:13:943:18">frame</jtok>
<jtok eid="30" type="method_call" span="943:19:943:28">basePanel</jtok>
<jtok eid="30" type="method_call" span="943:31:943:46">markBaseChanged</jtok>
<jtok eid="30" type="line_comment" span="944:13:944:39">// Finally, open the link:</jtok>
<jtok eid="30" type="method_call" span="945:20:945:45">openExternalFileAnyFormat</jtok>
<jtok eid="30" type="primary_name_ref" span="945:46:945:54">metaData</jtok>
<jtok eid="30" type="primary_name_ref" span="945:56:945:63">flEntry</jtok>
<jtok eid="30" type="method_call" span="945:64:945:71">getLink</jtok>
<jtok eid="30" type="primary_name_ref" span="945:75:945:82">flEntry</jtok>
<jtok eid="30" type="method_call" span="945:83:945:90">getType</jtok>
<jtok eid="30" type="line_comment" span="947:13:947:26">// Cancelled:</jtok>
<jtok eid="30" type="primary_name_ref" span="948:13:948:18">frame</jtok>
<jtok eid="30" type="method_call" span="948:19:948:25">output</jtok>
<jtok eid="30" type="primary_name_ref" span="948:26:948:39">cancelMessage</jtok>
<jtok eid="1" type="block_comment" span="953:5:964:5">/**
	 * Make sure an URL is "portable", in that it doesn't contain bad characters
	 * that break the open command in some OSes.
	 * 
	 * A call to this method will also remove \\url{} enclosings and clean doi links.
	 * 
	 * Old Version can be found in CVS version 114 of Util.java.
	 * 
	 * @param link
	 *            The URL to sanitize.
	 * @return Sanitized URL
	 */</jtok>
<jtok eid="31" type="class_or_interface_ref" span="965:16:965:22">String</jtok>
<jtok eid="31" type="method_name" span="965:23:965:34">sanitizeUrl</jtok>
<jtok eid="31" type="parameter_type" span="965:35:965:41">String</jtok>
<jtok eid="31" type="parameter_name" span="965:42:965:46">link</jtok>
<jtok eid="31" type="line_comment" span="967:6:967:64">// First check if it is enclosed in \\url{}. If so, remove</jtok>
<jtok eid="31" type="line_comment" span="968:9:968:24">// the wrapper.</jtok>
<jtok eid="31" type="primary_name_ref" span="969:13:969:17">link</jtok>
<jtok eid="31" type="method_call" span="969:18:969:28">startsWith</jtok>
<jtok eid="31" type="string_literal" span="969:29:969:37">"\\url{"</jtok>
<jtok eid="31" type="primary_name_ref" span="969:42:969:46">link</jtok>
<jtok eid="31" type="method_call" span="969:47:969:55">endsWith</jtok>
<jtok eid="31" type="string_literal" span="969:56:969:59">"}"</jtok>
<jtok eid="31" type="primary_name_ref" span="970:13:970:17">link</jtok>
<jtok eid="31" type="primary_name_ref" span="970:20:970:24">link</jtok>
<jtok eid="31" type="method_call" span="970:25:970:34">substring</jtok>
<jtok eid="31" type="primary_name_ref" span="970:38:970:42">link</jtok>
<jtok eid="31" type="method_call" span="970:43:970:49">length</jtok>
<jtok eid="31" type="primary_name_ref" span="972:13:972:17">link</jtok>
<jtok eid="31" type="method_call" span="972:18:972:25">matches</jtok>
<jtok eid="31" type="string_literal" span="972:26:972:37">"^doi:/*.*"</jtok>
<jtok eid="31" type="line_comment" span="973:13:973:29">// Remove 'doi:'</jtok>
<jtok eid="31" type="primary_name_ref" span="974:13:974:17">link</jtok>
<jtok eid="31" type="primary_name_ref" span="974:20:974:24">link</jtok>
<jtok eid="31" type="method_call" span="974:25:974:37">replaceFirst</jtok>
<jtok eid="31" type="string_literal" span="974:38:974:47">"^doi:/*"</jtok>
<jtok eid="31" type="string_literal" span="974:49:974:51">""</jtok>
<jtok eid="31" type="primary_name_ref" span="975:13:975:17">link</jtok>
<jtok eid="31" type="primary_name_ref" span="975:20:975:27">Globals</jtok>
<jtok eid="31" type="qualified_name_ref" span="975:28:975:45">DOI_LOOKUP_PREFIX</jtok>
<jtok eid="31" type="primary_name_ref" span="975:48:975:52">link</jtok>
<jtok eid="31" type="block_comment" span="978:9:983:12">/*
         * Poor man's DOI detection
         * 
         * Fixes
         * https://sourceforge.net/tracker/index.php?func=detail&amp;aid=1709449&amp;group_id=92314&amp;atid=600306
         */</jtok>
<jtok eid="31" type="primary_name_ref" span="984:13:984:17">link</jtok>
<jtok eid="31" type="method_call" span="984:18:984:28">startsWith</jtok>
<jtok eid="31" type="string_literal" span="984:29:984:34">"10."</jtok>
<jtok eid="31" type="primary_name_ref" span="985:13:985:17">link</jtok>
<jtok eid="31" type="primary_name_ref" span="985:20:985:27">Globals</jtok>
<jtok eid="31" type="qualified_name_ref" span="985:28:985:45">DOI_LOOKUP_PREFIX</jtok>
<jtok eid="31" type="primary_name_ref" span="985:48:985:52">link</jtok>
<jtok eid="31" type="primary_name_ref" span="988:3:988:7">link</jtok>
<jtok eid="31" type="primary_name_ref" span="988:10:988:14">link</jtok>
<jtok eid="31" type="method_call" span="988:15:988:25">replaceAll</jtok>
<jtok eid="31" type="string_literal" span="988:26:988:31">"\\+"</jtok>
<jtok eid="31" type="string_literal" span="988:33:988:38">"%2B"</jtok>
<jtok eid="31" type="primary_name_ref" span="991:4:991:8">link</jtok>
<jtok eid="31" type="primary_name_ref" span="991:11:991:21">URLDecoder</jtok>
<jtok eid="31" type="method_call" span="991:22:991:28">decode</jtok>
<jtok eid="31" type="primary_name_ref" span="991:29:991:33">link</jtok>
<jtok eid="31" type="string_literal" span="991:35:991:42">"UTF-8"</jtok>
<jtok eid="31" type="class_or_interface_ref" span="992:12:992:40">UnsupportedEncodingException</jtok>
<jtok eid="31" type="local_variable_name" span="992:41:992:42">e</jtok>
<jtok eid="31" type="block_comment" span="995:3:999:6">/**
		 * Fix for: [ 1574773 ] sanitizeUrl() breaks ftp:// and file:///
		 * 
		 * http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1574773&amp;group_id=92314&amp;atid=600306
		 */</jtok>
<jtok eid="31" type="constructor_call" span="1001:15:1001:18">URI</jtok>
<jtok eid="31" type="primary_name_ref" span="1001:25:1001:29">link</jtok>
<jtok eid="31" type="method_call" span="1001:37:1001:50">toASCIIString</jtok>
<jtok eid="31" type="class_or_interface_ref" span="1002:12:1002:30">URISyntaxException</jtok>
<jtok eid="31" type="local_variable_name" span="1002:31:1002:32">e</jtok>
<jtok eid="31" type="primary_name_ref" span="1003:11:1003:15">link</jtok>
<jtok eid="1" type="block_comment" span="1007:2:1010:5">/**
	 * Searches the given directory and subdirectories for a pdf file with name
	 * as given + ".pdf"
	 */</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1011:16:1011:22">String</jtok>
<jtok eid="32" type="method_name" span="1011:23:1011:30">findPdf</jtok>
<jtok eid="32" type="parameter_type" span="1011:31:1011:37">String</jtok>
<jtok eid="32" type="parameter_name" span="1011:38:1011:41">key</jtok>
<jtok eid="32" type="parameter_type" span="1011:43:1011:49">String</jtok>
<jtok eid="32" type="parameter_name" span="1011:50:1011:59">extension</jtok>
<jtok eid="32" type="parameter_type" span="1011:61:1011:67">String</jtok>
<jtok eid="32" type="parameter_name" span="1011:68:1011:77">directory</jtok>
<jtok eid="32" type="parameter_type" span="1011:79:1011:93">OpenFileFilter</jtok>
<jtok eid="32" type="parameter_name" span="1011:94:1011:97">off</jtok>
<jtok eid="32" type="line_comment" span="1012:3:1012:44">// String filename = key + "."+extension;</jtok>
<jtok eid="32" type="block_comment" span="1014:3:1022:6">/*
		 * Simon Fischer's patch for replacing a regexp in keys before
		 * converting to filename:
		 * 
		 * String regex = Globals.prefs.get("basenamePatternRegex"); if ((regex !=
		 * null) &amp;&amp; (regex.trim().length() &gt; 0)) { String replacement =
		 * Globals.prefs.get("basenamePatternReplacement"); key =
		 * key.replaceAll(regex, replacement); }
		 */</jtok>
<jtok eid="32" type="primary_name_ref" span="1023:8:1023:17">directory</jtok>
<jtok eid="32" type="method_call" span="1023:18:1023:26">endsWith</jtok>
<jtok eid="32" type="primary_name_ref" span="1023:27:1023:33">System</jtok>
<jtok eid="32" type="method_call" span="1023:34:1023:45">getProperty</jtok>
<jtok eid="32" type="string_literal" span="1023:46:1023:62">"file.separator"</jtok>
<jtok eid="32" type="primary_name_ref" span="1024:4:1024:13">directory</jtok>
<jtok eid="32" type="primary_name_ref" span="1024:17:1024:23">System</jtok>
<jtok eid="32" type="method_call" span="1024:24:1024:35">getProperty</jtok>
<jtok eid="32" type="string_literal" span="1024:36:1024:52">"file.separator"</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1025:3:1025:9">String</jtok>
<jtok eid="32" type="local_variable_name" span="1025:10:1025:15">found</jtok>
<jtok eid="32" type="method_call" span="1025:18:1025:27">findInDir</jtok>
<jtok eid="32" type="primary_name_ref" span="1025:28:1025:31">key</jtok>
<jtok eid="32" type="primary_name_ref" span="1025:33:1025:42">directory</jtok>
<jtok eid="32" type="primary_name_ref" span="1025:44:1025:47">off</jtok>
<jtok eid="32" type="primary_name_ref" span="1026:7:1026:12">found</jtok>
<jtok eid="32" type="primary_name_ref" span="1027:11:1027:16">found</jtok>
<jtok eid="32" type="method_call" span="1027:17:1027:26">substring</jtok>
<jtok eid="32" type="primary_name_ref" span="1027:27:1027:36">directory</jtok>
<jtok eid="32" type="method_call" span="1027:37:1027:43">length</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1032:16:1032:19">Map</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1032:20:1032:31">BibtexEntry</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1032:33:1032:37">List</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1032:38:1032:42">File</jtok>
<jtok eid="33" type="method_name" span="1032:45:1032:64">findAssociatedFiles</jtok>
<jtok eid="33" type="parameter_type" span="1032:65:1032:75">Collection</jtok>
<jtok eid="33" type="parameter_type" span="1032:76:1032:87">BibtexEntry</jtok>
<jtok eid="33" type="parameter_name" span="1032:89:1032:96">entries</jtok>
<jtok eid="33" type="parameter_type" span="1032:98:1032:108">Collection</jtok>
<jtok eid="33" type="parameter_type" span="1032:109:1032:115">String</jtok>
<jtok eid="33" type="parameter_name" span="1032:117:1032:127">extensions</jtok>
<jtok eid="33" type="parameter_type" span="1032:129:1032:139">Collection</jtok>
<jtok eid="33" type="parameter_type" span="1032:140:1032:144">File</jtok>
<jtok eid="33" type="parameter_name" span="1032:146:1032:157">directories</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1033:3:1033:10">HashMap</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1033:11:1033:22">BibtexEntry</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1033:24:1033:28">List</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1033:29:1033:33">File</jtok>
<jtok eid="33" type="local_variable_name" span="1033:36:1033:42">result</jtok>
<jtok eid="33" type="constructor_call" span="1033:49:1033:56">HashMap</jtok>
<jtok eid="33" type="constructor_call" span="1033:57:1033:68">BibtexEntry</jtok>
<jtok eid="33" type="constructor_call" span="1033:70:1033:74">List</jtok>
<jtok eid="33" type="constructor_call" span="1033:75:1033:79">File</jtok>
<jtok eid="33" type="line_comment" span="1035:3:1035:28">// First scan directories</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1036:3:1036:6">Set</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1036:7:1036:11">File</jtok>
<jtok eid="33" type="local_variable_name" span="1036:13:1036:31">filesWithExtension</jtok>
<jtok eid="33" type="method_call" span="1036:34:1036:43">findFiles</jtok>
<jtok eid="33" type="primary_name_ref" span="1036:44:1036:54">extensions</jtok>
<jtok eid="33" type="primary_name_ref" span="1036:56:1036:67">directories</jtok>
<jtok eid="33" type="line_comment" span="1038:3:1038:27">// Initialize Result-Set</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1039:8:1039:19">BibtexEntry</jtok>
<jtok eid="33" type="local_variable_name" span="1039:20:1039:25">entry</jtok>
<jtok eid="33" type="primary_name_ref" span="1039:28:1039:35">entries</jtok>
<jtok eid="33" type="primary_name_ref" span="1040:4:1040:10">result</jtok>
<jtok eid="33" type="method_call" span="1040:11:1040:14">put</jtok>
<jtok eid="33" type="primary_name_ref" span="1040:15:1040:20">entry</jtok>
<jtok eid="33" type="constructor_call" span="1040:26:1040:35">ArrayList</jtok>
<jtok eid="33" type="constructor_call" span="1040:36:1040:40">File</jtok>
<jtok eid="33" type="local_variable_name" span="1043:17:1043:26">exactOnly</jtok>
<jtok eid="33" type="primary_name_ref" span="1043:29:1043:36">Globals</jtok>
<jtok eid="33" type="qualified_name_ref" span="1043:37:1043:42">prefs</jtok>
<jtok eid="33" type="method_call" span="1043:43:1043:53">getBoolean</jtok>
<jtok eid="33" type="string_literal" span="1043:54:1043:76">"autolinkExactKeyOnly"</jtok>
<jtok eid="33" type="line_comment" span="1044:9:1044:29">// Now look for keys</jtok>
<jtok eid="33" type="label_name" span="1045:3:1045:11">nextFile</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1046:8:1046:12">File</jtok>
<jtok eid="33" type="local_variable_name" span="1046:13:1046:17">file</jtok>
<jtok eid="33" type="primary_name_ref" span="1046:20:1046:38">filesWithExtension</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1048:4:1048:10">String</jtok>
<jtok eid="33" type="local_variable_name" span="1048:11:1048:15">name</jtok>
<jtok eid="33" type="primary_name_ref" span="1048:18:1048:22">file</jtok>
<jtok eid="33" type="method_call" span="1048:23:1048:30">getName</jtok>
<jtok eid="33" type="local_variable_name" span="1049:17:1049:20">dot</jtok>
<jtok eid="33" type="primary_name_ref" span="1049:23:1049:27">name</jtok>
<jtok eid="33" type="method_call" span="1049:28:1049:39">lastIndexOf</jtok>
<jtok eid="33" type="line_comment" span="1050:13:1050:46">// First, look for exact matches:</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1051:18:1051:29">BibtexEntry</jtok>
<jtok eid="33" type="local_variable_name" span="1051:30:1051:35">entry</jtok>
<jtok eid="33" type="primary_name_ref" span="1051:38:1051:45">entries</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1052:17:1052:23">String</jtok>
<jtok eid="33" type="local_variable_name" span="1052:24:1052:31">citeKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1052:34:1052:39">entry</jtok>
<jtok eid="33" type="method_call" span="1052:40:1052:50">getCiteKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1053:22:1053:29">citeKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1053:43:1053:50">citeKey</jtok>
<jtok eid="33" type="method_call" span="1053:51:1053:57">length</jtok>
<jtok eid="33" type="primary_name_ref" span="1054:25:1054:28">dot</jtok>
<jtok eid="33" type="primary_name_ref" span="1055:29:1055:33">name</jtok>
<jtok eid="33" type="method_call" span="1055:34:1055:43">substring</jtok>
<jtok eid="33" type="primary_name_ref" span="1055:47:1055:50">dot</jtok>
<jtok eid="33" type="method_call" span="1055:52:1055:58">equals</jtok>
<jtok eid="33" type="primary_name_ref" span="1055:59:1055:66">citeKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1056:29:1056:35">result</jtok>
<jtok eid="33" type="method_call" span="1056:36:1056:39">get</jtok>
<jtok eid="33" type="primary_name_ref" span="1056:40:1056:45">entry</jtok>
<jtok eid="33" type="method_call" span="1056:47:1056:50">add</jtok>
<jtok eid="33" type="primary_name_ref" span="1056:51:1056:55">file</jtok>
<jtok eid="33" type="label_ref" span="1057:38:1057:46">nextFile</jtok>
<jtok eid="33" type="line_comment" span="1062:13:1062:78">// If we get here, we didn't find any exact matches. If non-exact</jtok>
<jtok eid="33" type="line_comment" span="1063:13:1063:53">// matches are allowed, try to find one:</jtok>
<jtok eid="33" type="primary_name_ref" span="1064:18:1064:27">exactOnly</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1065:22:1065:33">BibtexEntry</jtok>
<jtok eid="33" type="local_variable_name" span="1065:34:1065:39">entry</jtok>
<jtok eid="33" type="primary_name_ref" span="1065:42:1065:49">entries</jtok>
<jtok eid="33" type="class_or_interface_ref" span="1066:21:1066:27">String</jtok>
<jtok eid="33" type="local_variable_name" span="1066:28:1066:35">citeKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1066:38:1066:43">entry</jtok>
<jtok eid="33" type="method_call" span="1066:44:1066:54">getCiteKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1067:26:1067:33">citeKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1067:47:1067:54">citeKey</jtok>
<jtok eid="33" type="method_call" span="1067:55:1067:61">length</jtok>
<jtok eid="33" type="primary_name_ref" span="1068:29:1068:33">name</jtok>
<jtok eid="33" type="method_call" span="1068:34:1068:44">startsWith</jtok>
<jtok eid="33" type="primary_name_ref" span="1068:45:1068:52">citeKey</jtok>
<jtok eid="33" type="primary_name_ref" span="1069:29:1069:35">result</jtok>
<jtok eid="33" type="method_call" span="1069:36:1069:39">get</jtok>
<jtok eid="33" type="primary_name_ref" span="1069:40:1069:45">entry</jtok>
<jtok eid="33" type="method_call" span="1069:47:1069:50">add</jtok>
<jtok eid="33" type="primary_name_ref" span="1069:51:1069:55">file</jtok>
<jtok eid="33" type="label_ref" span="1070:38:1070:46">nextFile</jtok>
<jtok eid="33" type="primary_name_ref" span="1077:10:1077:16">result</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1080:16:1080:19">Set</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1080:20:1080:24">File</jtok>
<jtok eid="34" type="method_name" span="1080:26:1080:35">findFiles</jtok>
<jtok eid="34" type="parameter_type" span="1080:36:1080:46">Collection</jtok>
<jtok eid="34" type="parameter_type" span="1080:47:1080:53">String</jtok>
<jtok eid="34" type="parameter_name" span="1080:55:1080:65">extensions</jtok>
<jtok eid="34" type="parameter_type" span="1080:67:1080:77">Collection</jtok>
<jtok eid="34" type="parameter_type" span="1080:78:1080:82">File</jtok>
<jtok eid="34" type="parameter_name" span="1080:84:1080:95">directories</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1081:3:1081:6">Set</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1081:7:1081:11">File</jtok>
<jtok eid="34" type="local_variable_name" span="1081:13:1081:19">result</jtok>
<jtok eid="34" type="constructor_call" span="1081:26:1081:33">HashSet</jtok>
<jtok eid="34" type="constructor_call" span="1081:34:1081:38">File</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1083:8:1083:12">File</jtok>
<jtok eid="34" type="local_variable_name" span="1083:13:1083:22">directory</jtok>
<jtok eid="34" type="primary_name_ref" span="1083:25:1083:36">directories</jtok>
<jtok eid="34" type="primary_name_ref" span="1084:4:1084:10">result</jtok>
<jtok eid="34" type="method_call" span="1084:11:1084:17">addAll</jtok>
<jtok eid="34" type="method_call" span="1084:18:1084:27">findFiles</jtok>
<jtok eid="34" type="primary_name_ref" span="1084:28:1084:38">extensions</jtok>
<jtok eid="34" type="primary_name_ref" span="1084:40:1084:49">directory</jtok>
<jtok eid="34" type="primary_name_ref" span="1087:10:1087:16">result</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1090:17:1090:27">Collection</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1090:38:1090:42">File</jtok>
<jtok eid="35" type="method_name" span="1090:44:1090:53">findFiles</jtok>
<jtok eid="35" type="parameter_type" span="1090:54:1090:64">Collection</jtok>
<jtok eid="35" type="parameter_type" span="1090:65:1090:71">String</jtok>
<jtok eid="35" type="parameter_name" span="1090:73:1090:83">extensions</jtok>
<jtok eid="35" type="parameter_type" span="1090:85:1090:89">File</jtok>
<jtok eid="35" type="parameter_name" span="1090:90:1090:99">directory</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1091:3:1091:6">Set</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1091:7:1091:11">File</jtok>
<jtok eid="35" type="local_variable_name" span="1091:13:1091:19">result</jtok>
<jtok eid="35" type="constructor_call" span="1091:26:1091:33">HashSet</jtok>
<jtok eid="35" type="constructor_call" span="1091:34:1091:38">File</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1093:3:1093:7">File</jtok>
<jtok eid="35" type="local_variable_name" span="1093:10:1093:18">children</jtok>
<jtok eid="35" type="primary_name_ref" span="1093:21:1093:30">directory</jtok>
<jtok eid="35" type="method_call" span="1093:31:1093:40">listFiles</jtok>
<jtok eid="35" type="primary_name_ref" span="1094:7:1094:15">children</jtok>
<jtok eid="35" type="primary_name_ref" span="1095:11:1095:17">result</jtok>
<jtok eid="35" type="line_comment" span="1095:19:1095:36">// No permission?</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1097:8:1097:12">File</jtok>
<jtok eid="35" type="local_variable_name" span="1097:13:1097:18">child</jtok>
<jtok eid="35" type="primary_name_ref" span="1097:21:1097:29">children</jtok>
<jtok eid="35" type="primary_name_ref" span="1098:8:1098:13">child</jtok>
<jtok eid="35" type="method_call" span="1098:14:1098:25">isDirectory</jtok>
<jtok eid="35" type="primary_name_ref" span="1099:5:1099:11">result</jtok>
<jtok eid="35" type="method_call" span="1099:12:1099:18">addAll</jtok>
<jtok eid="35" type="method_call" span="1099:19:1099:28">findFiles</jtok>
<jtok eid="35" type="primary_name_ref" span="1099:29:1099:39">extensions</jtok>
<jtok eid="35" type="primary_name_ref" span="1099:41:1099:46">child</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1102:5:1102:11">String</jtok>
<jtok eid="35" type="local_variable_name" span="1102:12:1102:21">extension</jtok>
<jtok eid="35" type="method_call" span="1102:24:1102:40">getFileExtension</jtok>
<jtok eid="35" type="primary_name_ref" span="1102:41:1102:46">child</jtok>
<jtok eid="35" type="primary_name_ref" span="1104:9:1104:18">extension</jtok>
<jtok eid="35" type="primary_name_ref" span="1105:10:1105:20">extensions</jtok>
<jtok eid="35" type="method_call" span="1105:21:1105:29">contains</jtok>
<jtok eid="35" type="primary_name_ref" span="1105:30:1105:39">extension</jtok>
<jtok eid="35" type="primary_name_ref" span="1106:7:1106:13">result</jtok>
<jtok eid="35" type="method_call" span="1106:14:1106:17">add</jtok>
<jtok eid="35" type="primary_name_ref" span="1106:18:1106:23">child</jtok>
<jtok eid="35" type="primary_name_ref" span="1112:10:1112:16">result</jtok>
<jtok eid="1" type="block_comment" span="1115:2:1121:5">/**
	 * Returns the extension of a file or null if the file does not have one (no . in name).
	 * 
	 * @param file
	 * 
	 * @return The extension, trimmed and in lowercase.
	 */</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1122:16:1122:22">String</jtok>
<jtok eid="36" type="method_name" span="1122:23:1122:39">getFileExtension</jtok>
<jtok eid="36" type="parameter_type" span="1122:40:1122:44">File</jtok>
<jtok eid="36" type="parameter_name" span="1122:45:1122:49">file</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1123:3:1123:9">String</jtok>
<jtok eid="36" type="local_variable_name" span="1123:10:1123:14">name</jtok>
<jtok eid="36" type="primary_name_ref" span="1123:17:1123:21">file</jtok>
<jtok eid="36" type="method_call" span="1123:22:1123:29">getName</jtok>
<jtok eid="36" type="local_variable_name" span="1124:7:1124:10">pos</jtok>
<jtok eid="36" type="primary_name_ref" span="1124:13:1124:17">name</jtok>
<jtok eid="36" type="method_call" span="1124:18:1124:29">lastIndexOf</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1125:3:1125:9">String</jtok>
<jtok eid="36" type="local_variable_name" span="1125:10:1125:19">extension</jtok>
<jtok eid="36" type="primary_name_ref" span="1125:24:1125:27">pos</jtok>
<jtok eid="36" type="primary_name_ref" span="1125:38:1125:41">pos</jtok>
<jtok eid="36" type="primary_name_ref" span="1125:44:1125:48">name</jtok>
<jtok eid="36" type="method_call" span="1125:49:1125:55">length</jtok>
<jtok eid="36" type="primary_name_ref" span="1125:66:1125:70">name</jtok>
<jtok eid="36" type="method_call" span="1125:71:1125:80">substring</jtok>
<jtok eid="36" type="primary_name_ref" span="1125:81:1125:84">pos</jtok>
<jtok eid="36" type="method_call" span="1126:5:1126:9">trim</jtok>
<jtok eid="36" type="method_call" span="1126:12:1126:23">toLowerCase</jtok>
<jtok eid="36" type="primary_name_ref" span="1127:10:1127:19">extension</jtok>
<jtok eid="1" type="block_comment" span="1130:2:1138:5">/**
	 * New version of findPdf that uses findFiles.
	 * 
	 * The search pattern will be read from the preferences.
	 * 
	 * The [extension]-tags in this pattern will be replace by the given
	 * extension parameter.
	 * 
	 */</jtok>
<jtok eid="37" type="class_or_interface_ref" span="1139:16:1139:22">String</jtok>
<jtok eid="37" type="method_name" span="1139:23:1139:30">findPdf</jtok>
<jtok eid="37" type="parameter_type" span="1139:31:1139:42">BibtexEntry</jtok>
<jtok eid="37" type="parameter_name" span="1139:43:1139:48">entry</jtok>
<jtok eid="37" type="parameter_type" span="1139:50:1139:56">String</jtok>
<jtok eid="37" type="parameter_name" span="1139:57:1139:66">extension</jtok>
<jtok eid="37" type="parameter_type" span="1139:68:1139:74">String</jtok>
<jtok eid="37" type="parameter_name" span="1139:75:1139:84">directory</jtok>
<jtok eid="37" type="method_call" span="1140:10:1140:17">findPdf</jtok>
<jtok eid="37" type="primary_name_ref" span="1140:18:1140:23">entry</jtok>
<jtok eid="37" type="primary_name_ref" span="1140:25:1140:34">extension</jtok>
<jtok eid="37" type="constructor_call" span="1140:40:1140:46">String</jtok>
<jtok eid="37" type="primary_name_ref" span="1140:51:1140:60">directory</jtok>
<jtok eid="1" type="block_comment" span="1143:2:1145:5">/**
	 * Convenience method for findPDF. Can search multiple PDF directories.
	 */</jtok>
<jtok eid="38" type="class_or_interface_ref" span="1146:16:1146:22">String</jtok>
<jtok eid="38" type="method_name" span="1146:23:1146:30">findPdf</jtok>
<jtok eid="38" type="parameter_type" span="1146:31:1146:42">BibtexEntry</jtok>
<jtok eid="38" type="parameter_name" span="1146:43:1146:48">entry</jtok>
<jtok eid="38" type="parameter_type" span="1146:50:1146:56">String</jtok>
<jtok eid="38" type="parameter_name" span="1146:57:1146:66">extension</jtok>
<jtok eid="38" type="parameter_type" span="1146:68:1146:74">String</jtok>
<jtok eid="38" type="parameter_name" span="1146:77:1146:88">directories</jtok>
<jtok eid="38" type="class_or_interface_ref" span="1148:3:1148:9">String</jtok>
<jtok eid="38" type="local_variable_name" span="1148:10:1148:27">regularExpression</jtok>
<jtok eid="38" type="primary_name_ref" span="1149:7:1149:14">Globals</jtok>
<jtok eid="38" type="qualified_name_ref" span="1149:15:1149:20">prefs</jtok>
<jtok eid="38" type="method_call" span="1149:21:1149:31">getBoolean</jtok>
<jtok eid="38" type="primary_name_ref" span="1149:32:1149:49">JabRefPreferences</jtok>
<jtok eid="38" type="qualified_name_ref" span="1149:50:1149:72">USE_REG_EXP_SEARCH_KEY</jtok>
<jtok eid="38" type="primary_name_ref" span="1150:4:1150:21">regularExpression</jtok>
<jtok eid="38" type="primary_name_ref" span="1150:24:1150:31">Globals</jtok>
<jtok eid="38" type="qualified_name_ref" span="1150:32:1150:37">prefs</jtok>
<jtok eid="38" type="method_call" span="1150:38:1150:41">get</jtok>
<jtok eid="38" type="primary_name_ref" span="1150:42:1150:59">JabRefPreferences</jtok>
<jtok eid="38" type="qualified_name_ref" span="1150:60:1150:89">REG_EXP_SEARCH_EXPRESSION_KEY</jtok>
<jtok eid="38" type="primary_name_ref" span="1152:4:1152:21">regularExpression</jtok>
<jtok eid="38" type="primary_name_ref" span="1152:24:1152:31">Globals</jtok>
<jtok eid="38" type="qualified_name_ref" span="1152:32:1152:37">prefs</jtok>
<jtok eid="38" type="method_call" span="1153:6:1153:9">get</jtok>
<jtok eid="38" type="primary_name_ref" span="1153:10:1153:27">JabRefPreferences</jtok>
<jtok eid="38" type="qualified_name_ref" span="1153:28:1153:65">DEFAULT_REG_EXP_SEARCH_EXPRESSION_KEY</jtok>
<jtok eid="38" type="primary_name_ref" span="1155:3:1155:20">regularExpression</jtok>
<jtok eid="38" type="primary_name_ref" span="1155:23:1155:40">regularExpression</jtok>
<jtok eid="38" type="method_call" span="1155:41:1155:51">replaceAll</jtok>
<jtok eid="38" type="string_literal" span="1155:52:1155:69">"\\[extension\\]"</jtok>
<jtok eid="38" type="primary_name_ref" span="1155:71:1155:80">extension</jtok>
<jtok eid="38" type="method_call" span="1157:10:1157:18">findFile</jtok>
<jtok eid="38" type="primary_name_ref" span="1157:19:1157:24">entry</jtok>
<jtok eid="38" type="primary_name_ref" span="1157:32:1157:43">directories</jtok>
<jtok eid="38" type="primary_name_ref" span="1157:45:1157:62">regularExpression</jtok>
<jtok eid="1" type="block_comment" span="1160:5:1165:8">/**
     * Convenience menthod for findPDF. Searches for a file of the given type.
     * @param entry The BibtexEntry to search for a link for.
     * @param fileType The file type to search for.
     * @return The link to the file found, or null if not found.
     */</jtok>
<jtok eid="39" type="class_or_interface_ref" span="1166:19:1166:25">String</jtok>
<jtok eid="39" type="method_name" span="1166:26:1166:34">findFile</jtok>
<jtok eid="39" type="parameter_type" span="1166:35:1166:46">BibtexEntry</jtok>
<jtok eid="39" type="parameter_name" span="1166:47:1166:52">entry</jtok>
<jtok eid="39" type="parameter_type" span="1166:54:1166:70">ExternalFileType</jtok>
<jtok eid="39" type="parameter_name" span="1166:71:1166:79">fileType</jtok>
<jtok eid="39" type="parameter_type" span="1166:81:1166:85">List</jtok>
<jtok eid="39" type="parameter_type" span="1166:86:1166:92">String</jtok>
<jtok eid="39" type="parameter_name" span="1166:94:1166:103">extraDirs</jtok>
<jtok eid="39" type="class_or_interface_ref" span="1168:9:1168:13">List</jtok>
<jtok eid="39" type="class_or_interface_ref" span="1168:14:1168:20">String</jtok>
<jtok eid="39" type="local_variable_name" span="1168:22:1168:26">dirs</jtok>
<jtok eid="39" type="constructor_call" span="1168:33:1168:42">ArrayList</jtok>
<jtok eid="39" type="constructor_call" span="1168:43:1168:49">String</jtok>
<jtok eid="39" type="primary_name_ref" span="1169:9:1169:13">dirs</jtok>
<jtok eid="39" type="method_call" span="1169:14:1169:20">addAll</jtok>
<jtok eid="39" type="primary_name_ref" span="1169:21:1169:30">extraDirs</jtok>
<jtok eid="39" type="primary_name_ref" span="1170:13:1170:20">Globals</jtok>
<jtok eid="39" type="qualified_name_ref" span="1170:21:1170:26">prefs</jtok>
<jtok eid="39" type="method_call" span="1170:27:1170:33">hasKey</jtok>
<jtok eid="39" type="primary_name_ref" span="1170:34:1170:42">fileType</jtok>
<jtok eid="39" type="method_call" span="1170:43:1170:55">getExtension</jtok>
<jtok eid="39" type="string_literal" span="1170:58:1170:69">"Directory"</jtok>
<jtok eid="39" type="primary_name_ref" span="1171:13:1171:17">dirs</jtok>
<jtok eid="39" type="method_call" span="1171:18:1171:21">add</jtok>
<jtok eid="39" type="primary_name_ref" span="1171:22:1171:29">Globals</jtok>
<jtok eid="39" type="qualified_name_ref" span="1171:30:1171:35">prefs</jtok>
<jtok eid="39" type="method_call" span="1171:36:1171:39">get</jtok>
<jtok eid="39" type="primary_name_ref" span="1171:40:1171:48">fileType</jtok>
<jtok eid="39" type="method_call" span="1171:49:1171:61">getExtension</jtok>
<jtok eid="39" type="string_literal" span="1171:64:1171:75">"Directory"</jtok>
<jtok eid="39" type="class_or_interface_ref" span="1173:9:1173:15">String</jtok>
<jtok eid="39" type="local_variable_name" span="1173:19:1173:30">directories</jtok>
<jtok eid="39" type="primary_name_ref" span="1173:33:1173:37">dirs</jtok>
<jtok eid="39" type="method_call" span="1173:38:1173:45">toArray</jtok>
<jtok eid="39" type="constructor_call" span="1173:50:1173:56">String</jtok>
<jtok eid="39" type="primary_name_ref" span="1173:57:1173:61">dirs</jtok>
<jtok eid="39" type="method_call" span="1173:62:1173:66">size</jtok>
<jtok eid="39" type="method_call" span="1174:16:1174:23">findPdf</jtok>
<jtok eid="39" type="primary_name_ref" span="1174:24:1174:29">entry</jtok>
<jtok eid="39" type="primary_name_ref" span="1174:31:1174:39">fileType</jtok>
<jtok eid="39" type="method_call" span="1174:40:1174:52">getExtension</jtok>
<jtok eid="39" type="primary_name_ref" span="1174:56:1174:67">directories</jtok>
<jtok eid="1" type="block_comment" span="1177:5:1216:5">/**
	 * Searches the given directory and file name pattern for a file for the
	 * bibtexentry.
	 *
	 * Used to fix:
	 *
	 * http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1503410&amp;group_id=92314&amp;atid=600309
	 *
	 * Requirements:
	 *  - Be able to find the associated PDF in a set of given directories.
	 *  - Be able to return a relative path or absolute path.
	 *  - Be fast.
	 *  - Allow for flexible naming schemes in the PDFs.
	 *
	 * Syntax scheme for file:
	 * &lt;ul&gt;
	 * &lt;li&gt;* Any subDir&lt;/li&gt;
	 * &lt;li&gt;** Any subDir (recursiv)&lt;/li&gt;
	 * &lt;li&gt;[key] Key from bibtex file and database&lt;/li&gt;
	 * &lt;li&gt;.* Anything else is taken to be a Regular expression.&lt;/li&gt;
	 * &lt;/ul&gt;
	 *
	 * @param entry
	 *            non-null
	 * @param database
	 *            non-null
	 * @param directory
	 *            A set of root directories to start the search from. Paths are
	 *            returned relative to these directories if relative is set to
	 *            true. These directories will not be expanded or anything. Use
	 *            the file attribute for this.
	 * @param file
	 *            non-null
	 *
	 * @param relative
	 *            whether to return relative file paths or absolute ones
	 *
	 * @return Will return the first file found to match the given criteria or
	 *         null if none was found.
	 */</jtok>
<jtok eid="40" type="class_or_interface_ref" span="1217:16:1217:22">String</jtok>
<jtok eid="40" type="method_name" span="1217:23:1217:31">findFile</jtok>
<jtok eid="40" type="parameter_type" span="1217:32:1217:43">BibtexEntry</jtok>
<jtok eid="40" type="parameter_name" span="1217:44:1217:49">entry</jtok>
<jtok eid="40" type="parameter_type" span="1217:51:1217:65">BibtexDatabase</jtok>
<jtok eid="40" type="parameter_name" span="1217:66:1217:74">database</jtok>
<jtok eid="40" type="parameter_type" span="1217:76:1217:82">String</jtok>
<jtok eid="40" type="parameter_name" span="1217:85:1217:94">directory</jtok>
<jtok eid="40" type="parameter_type" span="1218:3:1218:9">String</jtok>
<jtok eid="40" type="parameter_name" span="1218:10:1218:14">file</jtok>
<jtok eid="40" type="parameter_name" span="1218:24:1218:32">relative</jtok>
<jtok eid="40" type="local_variable_name" span="1220:12:1220:13">i</jtok>
<jtok eid="40" type="primary_name_ref" span="1220:19:1220:20">i</jtok>
<jtok eid="40" type="primary_name_ref" span="1220:23:1220:32">directory</jtok>
<jtok eid="40" type="qualified_name_ref" span="1220:33:1220:39">length</jtok>
<jtok eid="40" type="primary_name_ref" span="1220:41:1220:42">i</jtok>
<jtok eid="40" type="class_or_interface_ref" span="1221:4:1221:10">String</jtok>
<jtok eid="40" type="local_variable_name" span="1221:11:1221:17">result</jtok>
<jtok eid="40" type="method_call" span="1221:20:1221:28">findFile</jtok>
<jtok eid="40" type="primary_name_ref" span="1221:29:1221:34">entry</jtok>
<jtok eid="40" type="primary_name_ref" span="1221:36:1221:44">database</jtok>
<jtok eid="40" type="primary_name_ref" span="1221:46:1221:55">directory</jtok>
<jtok eid="40" type="primary_name_ref" span="1221:56:1221:57">i</jtok>
<jtok eid="40" type="primary_name_ref" span="1221:60:1221:64">file</jtok>
<jtok eid="40" type="primary_name_ref" span="1221:66:1221:74">relative</jtok>
<jtok eid="40" type="primary_name_ref" span="1222:8:1222:14">result</jtok>
<jtok eid="40" type="primary_name_ref" span="1223:12:1223:18">result</jtok>
<jtok eid="1" type="block_comment" span="1229:2:1234:5">/**
	 * Removes optional square brackets from the string s
	 *
	 * @param s
	 * @return
	 */</jtok>
<jtok eid="41" type="class_or_interface_ref" span="1235:16:1235:22">String</jtok>
<jtok eid="41" type="method_name" span="1235:23:1235:36">stripBrackets</jtok>
<jtok eid="41" type="parameter_type" span="1235:37:1235:43">String</jtok>
<jtok eid="41" type="parameter_name" span="1235:44:1235:45">s</jtok>
<jtok eid="41" type="local_variable_name" span="1236:7:1236:17">beginIndex</jtok>
<jtok eid="41" type="primary_name_ref" span="1236:21:1236:22">s</jtok>
<jtok eid="41" type="method_call" span="1236:23:1236:33">startsWith</jtok>
<jtok eid="41" type="string_literal" span="1236:34:1236:37">"["</jtok>
<jtok eid="41" type="local_variable_name" span="1237:7:1237:15">endIndex</jtok>
<jtok eid="41" type="primary_name_ref" span="1237:19:1237:20">s</jtok>
<jtok eid="41" type="method_call" span="1237:21:1237:29">endsWith</jtok>
<jtok eid="41" type="string_literal" span="1237:30:1237:33">"]"</jtok>
<jtok eid="41" type="primary_name_ref" span="1237:37:1237:38">s</jtok>
<jtok eid="41" type="method_call" span="1237:39:1237:45">length</jtok>
<jtok eid="41" type="primary_name_ref" span="1237:54:1237:55">s</jtok>
<jtok eid="41" type="method_call" span="1237:56:1237:62">length</jtok>
<jtok eid="41" type="primary_name_ref" span="1238:10:1238:11">s</jtok>
<jtok eid="41" type="method_call" span="1238:12:1238:21">substring</jtok>
<jtok eid="41" type="primary_name_ref" span="1238:22:1238:32">beginIndex</jtok>
<jtok eid="41" type="primary_name_ref" span="1238:34:1238:42">endIndex</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1241:16:1241:25">ArrayList</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1241:26:1241:32">String</jtok>
<jtok eid="42" type="method_name" span="1241:36:1241:53">parseMethodsCalls</jtok>
<jtok eid="42" type="parameter_type" span="1241:54:1241:60">String</jtok>
<jtok eid="42" type="parameter_name" span="1241:61:1241:66">calls</jtok>
<jtok eid="42" type="throws" span="1241:75:1241:91">RuntimeException</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1243:3:1243:12">ArrayList</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1243:13:1243:19">String</jtok>
<jtok eid="42" type="local_variable_name" span="1243:23:1243:29">result</jtok>
<jtok eid="42" type="constructor_call" span="1243:36:1243:45">ArrayList</jtok>
<jtok eid="42" type="constructor_call" span="1243:46:1243:52">String</jtok>
<jtok eid="42" type="local_variable_name" span="1245:10:1245:11">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1245:14:1245:19">calls</jtok>
<jtok eid="42" type="method_call" span="1245:20:1245:31">toCharArray</jtok>
<jtok eid="42" type="local_variable_name" span="1247:7:1247:8">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1249:10:1249:11">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1249:14:1249:15">c</jtok>
<jtok eid="42" type="qualified_name_ref" span="1249:16:1249:22">length</jtok>
<jtok eid="42" type="local_variable_name" span="1251:8:1251:13">start</jtok>
<jtok eid="42" type="primary_name_ref" span="1251:16:1251:17">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1252:8:1252:17">Character</jtok>
<jtok eid="42" type="method_call" span="1252:18:1252:39">isJavaIdentifierStart</jtok>
<jtok eid="42" type="primary_name_ref" span="1252:40:1252:41">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1252:42:1252:43">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1253:5:1253:6">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:12:1254:13">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:16:1254:17">c</jtok>
<jtok eid="42" type="qualified_name_ref" span="1254:18:1254:24">length</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:29:1254:38">Character</jtok>
<jtok eid="42" type="method_call" span="1254:39:1254:59">isJavaIdentifierPart</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:60:1254:61">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:62:1254:63">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:69:1254:70">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1254:71:1254:72">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1255:6:1255:7">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1257:9:1257:10">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1257:13:1257:14">c</jtok>
<jtok eid="42" type="qualified_name_ref" span="1257:15:1257:21">length</jtok>
<jtok eid="42" type="primary_name_ref" span="1257:25:1257:26">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1257:27:1257:28">i</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1259:6:1259:12">String</jtok>
<jtok eid="42" type="local_variable_name" span="1259:13:1259:19">method</jtok>
<jtok eid="42" type="primary_name_ref" span="1259:22:1259:27">calls</jtok>
<jtok eid="42" type="method_call" span="1259:28:1259:37">substring</jtok>
<jtok eid="42" type="primary_name_ref" span="1259:38:1259:43">start</jtok>
<jtok eid="42" type="primary_name_ref" span="1259:45:1259:46">i</jtok>
<jtok eid="42" type="line_comment" span="1261:6:1261:23">// Skip the brace</jtok>
<jtok eid="42" type="primary_name_ref" span="1262:6:1262:7">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1264:10:1264:11">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1264:14:1264:15">c</jtok>
<jtok eid="42" type="qualified_name_ref" span="1264:16:1264:22">length</jtok>
<jtok eid="42" type="primary_name_ref" span="1265:11:1265:12">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1265:13:1265:14">i</jtok>
<jtok eid="42" type="line_comment" span="1266:8:1266:39">// Parameter is in format "xxx"</jtok>
<jtok eid="42" type="line_comment" span="1268:8:1268:17">// Skip "</jtok>
<jtok eid="42" type="primary_name_ref" span="1269:8:1269:9">i</jtok>
<jtok eid="42" type="local_variable_name" span="1271:12:1271:22">startParam</jtok>
<jtok eid="42" type="primary_name_ref" span="1271:25:1271:26">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1272:8:1272:9">i</jtok>
<jtok eid="42" type="local_variable_name" span="1273:31:1273:38">escaped</jtok>
<jtok eid="42" type="primary_name_ref" span="1274:15:1274:16">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1274:23:1274:24">c</jtok>
<jtok eid="42" type="qualified_name_ref" span="1274:25:1274:31">length</jtok>
<jtok eid="42" type="primary_name_ref" span="1275:40:1275:47">escaped</jtok>
<jtok eid="42" type="primary_name_ref" span="1275:51:1275:52">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1275:53:1275:54">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1275:66:1275:67">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1275:68:1275:69">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1276:37:1276:38">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1276:39:1276:40">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1277:37:1277:44">escaped</jtok>
<jtok eid="42" type="primary_name_ref" span="1277:48:1277:55">escaped</jtok>
<jtok eid="42" type="primary_name_ref" span="1280:37:1280:44">escaped</jtok>
<jtok eid="42" type="primary_name_ref" span="1281:33:1281:34">i</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1285:8:1285:14">String</jtok>
<jtok eid="42" type="local_variable_name" span="1285:15:1285:20">param</jtok>
<jtok eid="42" type="primary_name_ref" span="1285:23:1285:28">calls</jtok>
<jtok eid="42" type="method_call" span="1285:29:1285:38">substring</jtok>
<jtok eid="42" type="primary_name_ref" span="1285:39:1285:49">startParam</jtok>
<jtok eid="42" type="primary_name_ref" span="1285:51:1285:52">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1287:8:1287:14">result</jtok>
<jtok eid="42" type="method_call" span="1287:15:1287:18">add</jtok>
<jtok eid="42" type="constructor_call" span="1287:23:1287:29">String</jtok>
<jtok eid="42" type="primary_name_ref" span="1287:34:1287:40">method</jtok>
<jtok eid="42" type="primary_name_ref" span="1287:42:1287:47">param</jtok>
<jtok eid="42" type="line_comment" span="1289:8:1289:37">// Parameter is in format xxx</jtok>
<jtok eid="42" type="local_variable_name" span="1291:12:1291:22">startParam</jtok>
<jtok eid="42" type="primary_name_ref" span="1291:25:1291:26">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1293:15:1293:16">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1293:19:1293:20">c</jtok>
<jtok eid="42" type="qualified_name_ref" span="1293:21:1293:27">length</jtok>
<jtok eid="42" type="primary_name_ref" span="1293:31:1293:32">c</jtok>
<jtok eid="42" type="primary_name_ref" span="1293:33:1293:34">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1294:9:1294:10">i</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1297:8:1297:14">String</jtok>
<jtok eid="42" type="local_variable_name" span="1297:15:1297:20">param</jtok>
<jtok eid="42" type="primary_name_ref" span="1297:23:1297:28">calls</jtok>
<jtok eid="42" type="method_call" span="1297:29:1297:38">substring</jtok>
<jtok eid="42" type="primary_name_ref" span="1297:39:1297:49">startParam</jtok>
<jtok eid="42" type="primary_name_ref" span="1297:51:1297:52">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1299:8:1299:14">result</jtok>
<jtok eid="42" type="method_call" span="1299:15:1299:18">add</jtok>
<jtok eid="42" type="constructor_call" span="1299:23:1299:29">String</jtok>
<jtok eid="42" type="primary_name_ref" span="1299:34:1299:40">method</jtok>
<jtok eid="42" type="primary_name_ref" span="1299:42:1299:47">param</jtok>
<jtok eid="42" type="line_comment" span="1304:7:1304:42">// Incorrecly terminated open brace</jtok>
<jtok eid="42" type="primary_name_ref" span="1305:7:1305:13">result</jtok>
<jtok eid="42" type="method_call" span="1305:14:1305:17">add</jtok>
<jtok eid="42" type="constructor_call" span="1305:22:1305:28">String</jtok>
<jtok eid="42" type="primary_name_ref" span="1305:33:1305:39">method</jtok>
<jtok eid="42" type="class_or_interface_ref" span="1308:6:1308:12">String</jtok>
<jtok eid="42" type="local_variable_name" span="1308:13:1308:19">method</jtok>
<jtok eid="42" type="primary_name_ref" span="1308:22:1308:27">calls</jtok>
<jtok eid="42" type="method_call" span="1308:28:1308:37">substring</jtok>
<jtok eid="42" type="primary_name_ref" span="1308:38:1308:43">start</jtok>
<jtok eid="42" type="primary_name_ref" span="1308:45:1308:46">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1309:6:1309:12">result</jtok>
<jtok eid="42" type="method_call" span="1309:13:1309:16">add</jtok>
<jtok eid="42" type="constructor_call" span="1309:21:1309:27">String</jtok>
<jtok eid="42" type="primary_name_ref" span="1309:32:1309:38">method</jtok>
<jtok eid="42" type="primary_name_ref" span="1312:4:1312:5">i</jtok>
<jtok eid="42" type="primary_name_ref" span="1315:10:1315:16">result</jtok>
<jtok eid="1" type="block_comment" span="1318:2:1327:5">/**
	 * Accepts a string like [author:lower] or [title:abbr] or [auth],
	 * whereas the first part signifies the bibtex-field to get, or the key generator
     * field marker to use, while the others are the modifiers that will be applied.
	 *
	 * @param fieldAndFormat
	 * @param entry
	 * @param database
	 * @return
	 */</jtok>
<jtok eid="43" type="class_or_interface_ref" span="1328:16:1328:22">String</jtok>
<jtok eid="43" type="method_name" span="1328:23:1328:40">getFieldAndFormat</jtok>
<jtok eid="43" type="parameter_type" span="1328:41:1328:47">String</jtok>
<jtok eid="43" type="parameter_name" span="1328:48:1328:62">fieldAndFormat</jtok>
<jtok eid="43" type="parameter_type" span="1328:64:1328:75">BibtexEntry</jtok>
<jtok eid="43" type="parameter_name" span="1328:76:1328:81">entry</jtok>
<jtok eid="43" type="parameter_type" span="1329:3:1329:17">BibtexDatabase</jtok>
<jtok eid="43" type="parameter_name" span="1329:18:1329:26">database</jtok>
<jtok eid="43" type="primary_name_ref" span="1331:3:1331:17">fieldAndFormat</jtok>
<jtok eid="43" type="method_call" span="1331:20:1331:33">stripBrackets</jtok>
<jtok eid="43" type="primary_name_ref" span="1331:34:1331:48">fieldAndFormat</jtok>
<jtok eid="43" type="local_variable_name" span="1333:7:1333:12">colon</jtok>
<jtok eid="43" type="primary_name_ref" span="1333:15:1333:29">fieldAndFormat</jtok>
<jtok eid="43" type="method_call" span="1333:30:1333:37">indexOf</jtok>
<jtok eid="43" type="class_or_interface_ref" span="1335:3:1335:9">String</jtok>
<jtok eid="43" type="local_variable_name" span="1335:10:1335:21">beforeColon</jtok>
<jtok eid="43" type="local_variable_name" span="1335:23:1335:33">afterColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1336:7:1336:12">colon</jtok>
<jtok eid="43" type="primary_name_ref" span="1337:4:1337:15">beforeColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1337:18:1337:32">fieldAndFormat</jtok>
<jtok eid="43" type="primary_name_ref" span="1338:4:1338:14">afterColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1340:4:1340:15">beforeColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1340:18:1340:32">fieldAndFormat</jtok>
<jtok eid="43" type="method_call" span="1340:33:1340:42">substring</jtok>
<jtok eid="43" type="primary_name_ref" span="1340:46:1340:51">colon</jtok>
<jtok eid="43" type="primary_name_ref" span="1341:4:1341:14">afterColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1341:17:1341:31">fieldAndFormat</jtok>
<jtok eid="43" type="method_call" span="1341:32:1341:41">substring</jtok>
<jtok eid="43" type="primary_name_ref" span="1341:42:1341:47">colon</jtok>
<jtok eid="43" type="primary_name_ref" span="1343:3:1343:14">beforeColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1343:17:1343:28">beforeColon</jtok>
<jtok eid="43" type="method_call" span="1343:29:1343:33">trim</jtok>
<jtok eid="43" type="primary_name_ref" span="1345:7:1345:18">beforeColon</jtok>
<jtok eid="43" type="method_call" span="1345:19:1345:25">length</jtok>
<jtok eid="43" type="class_or_interface_ref" span="1349:3:1349:9">String</jtok>
<jtok eid="43" type="local_variable_name" span="1349:10:1349:20">fieldValue</jtok>
<jtok eid="43" type="primary_name_ref" span="1349:23:1349:37">BibtexDatabase</jtok>
<jtok eid="43" type="method_call" span="1349:38:1349:54">getResolvedField</jtok>
<jtok eid="43" type="primary_name_ref" span="1349:55:1349:66">beforeColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1349:68:1349:73">entry</jtok>
<jtok eid="43" type="primary_name_ref" span="1349:75:1349:83">database</jtok>
<jtok eid="43" type="line_comment" span="1351:9:1351:93">// If no field value was found, try to interpret it as a key generator field marker:</jtok>
<jtok eid="43" type="primary_name_ref" span="1352:13:1352:23">fieldValue</jtok>
<jtok eid="43" type="primary_name_ref" span="1353:13:1353:23">fieldValue</jtok>
<jtok eid="43" type="primary_name_ref" span="1353:27:1353:43">LabelPatternUtil</jtok>
<jtok eid="43" type="method_call" span="1353:44:1353:53">makeLabel</jtok>
<jtok eid="43" type="primary_name_ref" span="1353:54:1353:59">entry</jtok>
<jtok eid="43" type="primary_name_ref" span="1353:61:1353:72">beforeColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1355:7:1355:17">fieldValue</jtok>
<jtok eid="43" type="primary_name_ref" span="1358:7:1358:17">afterColon</jtok>
<jtok eid="43" type="primary_name_ref" span="1358:29:1358:39">afterColon</jtok>
<jtok eid="43" type="method_call" span="1358:40:1358:46">length</jtok>
<jtok eid="43" type="primary_name_ref" span="1359:11:1359:21">fieldValue</jtok>
<jtok eid="43" type="class_or_interface_ref" span="1361:9:1361:15">String</jtok>
<jtok eid="43" type="local_variable_name" span="1361:18:1361:23">parts</jtok>
<jtok eid="43" type="primary_name_ref" span="1361:26:1361:36">afterColon</jtok>
<jtok eid="43" type="method_call" span="1361:37:1361:42">split</jtok>
<jtok eid="43" type="string_literal" span="1361:43:1361:46">":"</jtok>
<jtok eid="43" type="primary_name_ref" span="1362:9:1362:19">fieldValue</jtok>
<jtok eid="43" type="primary_name_ref" span="1362:22:1362:38">LabelPatternUtil</jtok>
<jtok eid="43" type="method_call" span="1362:39:1362:53">applyModifiers</jtok>
<jtok eid="43" type="primary_name_ref" span="1362:54:1362:64">fieldValue</jtok>
<jtok eid="43" type="primary_name_ref" span="1362:66:1362:71">parts</jtok>
<jtok eid="43" type="primary_name_ref" span="1364:10:1364:20">fieldValue</jtok>
<jtok eid="1" type="block_comment" span="1367:2:1371:5">/**
	 * Convenience function for absolute search.
	 *
	 * Uses findFile(BibtexEntry, BibtexDatabase, (String)null, String, false).
	 */</jtok>
<jtok eid="44" type="class_or_interface_ref" span="1372:16:1372:22">String</jtok>
<jtok eid="44" type="method_name" span="1372:23:1372:31">findFile</jtok>
<jtok eid="44" type="parameter_type" span="1372:32:1372:43">BibtexEntry</jtok>
<jtok eid="44" type="parameter_name" span="1372:44:1372:49">entry</jtok>
<jtok eid="44" type="parameter_type" span="1372:51:1372:65">BibtexDatabase</jtok>
<jtok eid="44" type="parameter_name" span="1372:66:1372:74">database</jtok>
<jtok eid="44" type="parameter_type" span="1372:76:1372:82">String</jtok>
<jtok eid="44" type="parameter_name" span="1372:83:1372:87">file</jtok>
<jtok eid="44" type="method_call" span="1373:10:1373:18">findFile</jtok>
<jtok eid="44" type="primary_name_ref" span="1373:19:1373:24">entry</jtok>
<jtok eid="44" type="primary_name_ref" span="1373:26:1373:34">database</jtok>
<jtok eid="44" type="class_or_interface_ref" span="1373:37:1373:43">String</jtok>
<jtok eid="44" type="primary_name_ref" span="1373:51:1373:55">file</jtok>
<jtok eid="1" type="block_comment" span="1376:2:1380:5">/**
	 * Internal Version of findFile, which also accepts a current directory to
	 * base the search on.
	 *
	 */</jtok>
<jtok eid="45" type="class_or_interface_ref" span="1381:16:1381:22">String</jtok>
<jtok eid="45" type="method_name" span="1381:23:1381:31">findFile</jtok>
<jtok eid="45" type="parameter_type" span="1381:32:1381:43">BibtexEntry</jtok>
<jtok eid="45" type="parameter_name" span="1381:44:1381:49">entry</jtok>
<jtok eid="45" type="parameter_type" span="1381:51:1381:65">BibtexDatabase</jtok>
<jtok eid="45" type="parameter_name" span="1381:66:1381:74">database</jtok>
<jtok eid="45" type="parameter_type" span="1381:76:1381:82">String</jtok>
<jtok eid="45" type="parameter_name" span="1381:83:1381:92">directory</jtok>
<jtok eid="45" type="parameter_type" span="1382:3:1382:9">String</jtok>
<jtok eid="45" type="parameter_name" span="1382:10:1382:14">file</jtok>
<jtok eid="45" type="parameter_name" span="1382:24:1382:32">relative</jtok>
<jtok eid="45" type="class_or_interface_ref" span="1384:3:1384:7">File</jtok>
<jtok eid="45" type="local_variable_name" span="1384:8:1384:12">root</jtok>
<jtok eid="45" type="primary_name_ref" span="1385:7:1385:16">directory</jtok>
<jtok eid="45" type="primary_name_ref" span="1386:4:1386:8">root</jtok>
<jtok eid="45" type="constructor_call" span="1386:15:1386:19">File</jtok>
<jtok eid="45" type="string_literal" span="1386:20:1386:23">"."</jtok>
<jtok eid="45" type="primary_name_ref" span="1388:4:1388:8">root</jtok>
<jtok eid="45" type="constructor_call" span="1388:15:1388:19">File</jtok>
<jtok eid="45" type="primary_name_ref" span="1388:20:1388:29">directory</jtok>
<jtok eid="45" type="primary_name_ref" span="1390:8:1390:12">root</jtok>
<jtok eid="45" type="method_call" span="1390:13:1390:19">exists</jtok>
<jtok eid="45" type="class_or_interface_ref" span="1393:3:1393:9">String</jtok>
<jtok eid="45" type="local_variable_name" span="1393:10:1393:15">found</jtok>
<jtok eid="45" type="method_call" span="1393:18:1393:26">findFile</jtok>
<jtok eid="45" type="primary_name_ref" span="1393:27:1393:32">entry</jtok>
<jtok eid="45" type="primary_name_ref" span="1393:34:1393:42">database</jtok>
<jtok eid="45" type="primary_name_ref" span="1393:44:1393:48">root</jtok>
<jtok eid="45" type="primary_name_ref" span="1393:50:1393:54">file</jtok>
<jtok eid="45" type="primary_name_ref" span="1395:7:1395:16">directory</jtok>
<jtok eid="45" type="primary_name_ref" span="1395:29:1395:37">relative</jtok>
<jtok eid="45" type="primary_name_ref" span="1396:11:1396:16">found</jtok>
<jtok eid="45" type="primary_name_ref" span="1399:7:1399:12">found</jtok>
<jtok eid="45" type="block_comment" span="1401:5:1405:8">/**
				 * [ 1601651 ] PDF subdirectory - missing first character
				 *
				 * http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1601651&amp;group_id=92314&amp;atid=600306
				 */</jtok>
<jtok eid="45" type="line_comment" span="1406:17:1406:51">// Changed by M. Alver 2007.01.04:</jtok>
<jtok eid="45" type="line_comment" span="1407:17:1407:84">// Remove first character if it is a directory separator character:</jtok>
<jtok eid="45" type="class_or_interface_ref" span="1408:17:1408:23">String</jtok>
<jtok eid="45" type="local_variable_name" span="1408:24:1408:27">tmp</jtok>
<jtok eid="45" type="primary_name_ref" span="1408:30:1408:35">found</jtok>
<jtok eid="45" type="method_call" span="1408:36:1408:45">substring</jtok>
<jtok eid="45" type="primary_name_ref" span="1408:46:1408:50">root</jtok>
<jtok eid="45" type="method_call" span="1408:51:1408:67">getCanonicalPath</jtok>
<jtok eid="45" type="method_call" span="1408:70:1408:76">length</jtok>
<jtok eid="45" type="primary_name_ref" span="1409:22:1409:25">tmp</jtok>
<jtok eid="45" type="method_call" span="1409:26:1409:32">length</jtok>
<jtok eid="45" type="primary_name_ref" span="1409:44:1409:47">tmp</jtok>
<jtok eid="45" type="method_call" span="1409:48:1409:54">charAt</jtok>
<jtok eid="45" type="primary_name_ref" span="1409:61:1409:65">File</jtok>
<jtok eid="45" type="qualified_name_ref" span="1409:66:1409:79">separatorChar</jtok>
<jtok eid="45" type="primary_name_ref" span="1410:21:1410:24">tmp</jtok>
<jtok eid="45" type="primary_name_ref" span="1410:27:1410:30">tmp</jtok>
<jtok eid="45" type="method_call" span="1410:31:1410:40">substring</jtok>
<jtok eid="45" type="primary_name_ref" span="1411:24:1411:27">tmp</jtok>
<jtok eid="45" type="line_comment" span="1412:17:1412:76">//return found.substring(root.getCanonicalPath().length());</jtok>
<jtok eid="45" type="class_or_interface_ref" span="1413:13:1413:24">IOException</jtok>
<jtok eid="45" type="local_variable_name" span="1413:25:1413:26">e</jtok>
<jtok eid="1" type="block_comment" span="1420:2:1423:5">/**
	 * The actual work-horse. Will find absolute filepaths starting from the
	 * given directory using the given regular expression string for search.
	 */</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1424:19:1424:25">String</jtok>
<jtok eid="46" type="method_name" span="1424:26:1424:34">findFile</jtok>
<jtok eid="46" type="parameter_type" span="1424:35:1424:46">BibtexEntry</jtok>
<jtok eid="46" type="parameter_name" span="1424:47:1424:52">entry</jtok>
<jtok eid="46" type="parameter_type" span="1424:54:1424:68">BibtexDatabase</jtok>
<jtok eid="46" type="parameter_name" span="1424:69:1424:77">database</jtok>
<jtok eid="46" type="parameter_type" span="1424:79:1424:83">File</jtok>
<jtok eid="46" type="parameter_name" span="1424:84:1424:93">directory</jtok>
<jtok eid="46" type="parameter_type" span="1425:3:1425:9">String</jtok>
<jtok eid="46" type="parameter_name" span="1425:10:1425:14">file</jtok>
<jtok eid="46" type="primary_name_ref" span="1427:7:1427:11">file</jtok>
<jtok eid="46" type="method_call" span="1427:12:1427:22">startsWith</jtok>
<jtok eid="46" type="string_literal" span="1427:23:1427:26">"/"</jtok>
<jtok eid="46" type="primary_name_ref" span="1428:4:1428:13">directory</jtok>
<jtok eid="46" type="constructor_call" span="1428:20:1428:24">File</jtok>
<jtok eid="46" type="string_literal" span="1428:25:1428:28">"."</jtok>
<jtok eid="46" type="primary_name_ref" span="1429:4:1429:8">file</jtok>
<jtok eid="46" type="primary_name_ref" span="1429:11:1429:15">file</jtok>
<jtok eid="46" type="method_call" span="1429:16:1429:25">substring</jtok>
<jtok eid="46" type="line_comment" span="1432:3:1432:24">// Escape handling...</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1433:3:1433:10">Matcher</jtok>
<jtok eid="46" type="local_variable_name" span="1433:11:1433:12">m</jtok>
<jtok eid="46" type="primary_name_ref" span="1433:15:1433:22">Pattern</jtok>
<jtok eid="46" type="method_call" span="1433:23:1433:30">compile</jtok>
<jtok eid="46" type="string_literal" span="1433:31:1433:55">"([^\\\\])\\\\([^\\\\])"</jtok>
<jtok eid="46" type="method_call" span="1433:57:1433:64">matcher</jtok>
<jtok eid="46" type="primary_name_ref" span="1433:65:1433:69">file</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1434:3:1434:15">StringBuffer</jtok>
<jtok eid="46" type="local_variable_name" span="1434:16:1434:17">s</jtok>
<jtok eid="46" type="constructor_call" span="1434:24:1434:36">StringBuffer</jtok>
<jtok eid="46" type="primary_name_ref" span="1435:10:1435:11">m</jtok>
<jtok eid="46" type="method_call" span="1435:12:1435:16">find</jtok>
<jtok eid="46" type="primary_name_ref" span="1436:4:1436:5">m</jtok>
<jtok eid="46" type="method_call" span="1436:6:1436:23">appendReplacement</jtok>
<jtok eid="46" type="primary_name_ref" span="1436:24:1436:25">s</jtok>
<jtok eid="46" type="primary_name_ref" span="1436:27:1436:28">m</jtok>
<jtok eid="46" type="method_call" span="1436:29:1436:34">group</jtok>
<jtok eid="46" type="string_literal" span="1436:40:1436:43">"/"</jtok>
<jtok eid="46" type="primary_name_ref" span="1436:46:1436:47">m</jtok>
<jtok eid="46" type="method_call" span="1436:48:1436:53">group</jtok>
<jtok eid="46" type="primary_name_ref" span="1438:3:1438:4">m</jtok>
<jtok eid="46" type="method_call" span="1438:5:1438:15">appendTail</jtok>
<jtok eid="46" type="primary_name_ref" span="1438:16:1438:17">s</jtok>
<jtok eid="46" type="primary_name_ref" span="1439:3:1439:7">file</jtok>
<jtok eid="46" type="primary_name_ref" span="1439:10:1439:11">s</jtok>
<jtok eid="46" type="method_call" span="1439:12:1439:20">toString</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1440:3:1440:9">String</jtok>
<jtok eid="46" type="local_variable_name" span="1440:12:1440:21">fileParts</jtok>
<jtok eid="46" type="primary_name_ref" span="1440:24:1440:28">file</jtok>
<jtok eid="46" type="method_call" span="1440:29:1440:34">split</jtok>
<jtok eid="46" type="string_literal" span="1440:35:1440:38">"/"</jtok>
<jtok eid="46" type="primary_name_ref" span="1442:7:1442:16">fileParts</jtok>
<jtok eid="46" type="qualified_name_ref" span="1442:17:1442:23">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1445:7:1445:16">fileParts</jtok>
<jtok eid="46" type="qualified_name_ref" span="1445:17:1445:23">length</jtok>
<jtok eid="46" type="local_variable_name" span="1447:13:1447:14">i</jtok>
<jtok eid="46" type="primary_name_ref" span="1447:20:1447:21">i</jtok>
<jtok eid="46" type="primary_name_ref" span="1447:24:1447:33">fileParts</jtok>
<jtok eid="46" type="qualified_name_ref" span="1447:34:1447:40">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1447:46:1447:47">i</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1449:5:1449:11">String</jtok>
<jtok eid="46" type="local_variable_name" span="1449:12:1449:24">dirToProcess</jtok>
<jtok eid="46" type="primary_name_ref" span="1449:27:1449:36">fileParts</jtok>
<jtok eid="46" type="primary_name_ref" span="1449:37:1449:38">i</jtok>
<jtok eid="46" type="primary_name_ref" span="1451:5:1451:17">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1451:20:1451:34">expandBrackets</jtok>
<jtok eid="46" type="primary_name_ref" span="1451:35:1451:47">dirToProcess</jtok>
<jtok eid="46" type="primary_name_ref" span="1451:49:1451:54">entry</jtok>
<jtok eid="46" type="primary_name_ref" span="1451:56:1451:64">database</jtok>
<jtok eid="46" type="primary_name_ref" span="1453:9:1453:21">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1453:22:1453:29">matches</jtok>
<jtok eid="46" type="string_literal" span="1453:30:1453:36">"^.:$"</jtok>
<jtok eid="46" type="line_comment" span="1453:41:1453:64">// Windows Drive Letter</jtok>
<jtok eid="46" type="primary_name_ref" span="1454:6:1454:15">directory</jtok>
<jtok eid="46" type="constructor_call" span="1454:22:1454:26">File</jtok>
<jtok eid="46" type="primary_name_ref" span="1454:27:1454:39">dirToProcess</jtok>
<jtok eid="46" type="string_literal" span="1454:42:1454:45">"/"</jtok>
<jtok eid="46" type="primary_name_ref" span="1457:9:1457:21">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1457:22:1457:28">equals</jtok>
<jtok eid="46" type="string_literal" span="1457:29:1457:32">"."</jtok>
<jtok eid="46" type="line_comment" span="1457:37:1457:65">// Stay in current directory</jtok>
<jtok eid="46" type="primary_name_ref" span="1460:9:1460:21">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1460:22:1460:28">equals</jtok>
<jtok eid="46" type="string_literal" span="1460:29:1460:33">".."</jtok>
<jtok eid="46" type="primary_name_ref" span="1461:6:1461:15">directory</jtok>
<jtok eid="46" type="constructor_call" span="1461:22:1461:26">File</jtok>
<jtok eid="46" type="primary_name_ref" span="1461:27:1461:36">directory</jtok>
<jtok eid="46" type="method_call" span="1461:37:1461:46">getParent</jtok>
<jtok eid="46" type="primary_name_ref" span="1464:9:1464:21">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1464:22:1464:28">equals</jtok>
<jtok eid="46" type="string_literal" span="1464:29:1464:32">"*"</jtok>
<jtok eid="46" type="line_comment" span="1464:37:1464:65">// Do for all direct subdirs</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1466:6:1466:10">File</jtok>
<jtok eid="46" type="local_variable_name" span="1466:13:1466:20">subDirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1466:23:1466:32">directory</jtok>
<jtok eid="46" type="method_call" span="1466:33:1466:42">listFiles</jtok>
<jtok eid="46" type="primary_name_ref" span="1467:10:1467:17">subDirs</jtok>
<jtok eid="46" type="line_comment" span="1468:20:1468:37">// No permission?</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1470:6:1470:12">String</jtok>
<jtok eid="46" type="local_variable_name" span="1470:13:1470:29">restOfFileString</jtok>
<jtok eid="46" type="method_call" span="1470:32:1470:36">join</jtok>
<jtok eid="46" type="primary_name_ref" span="1470:37:1470:46">fileParts</jtok>
<jtok eid="46" type="string_literal" span="1470:48:1470:51">"/"</jtok>
<jtok eid="46" type="primary_name_ref" span="1470:53:1470:54">i</jtok>
<jtok eid="46" type="primary_name_ref" span="1470:60:1470:69">fileParts</jtok>
<jtok eid="46" type="qualified_name_ref" span="1470:70:1470:76">length</jtok>
<jtok eid="46" type="local_variable_name" span="1472:15:1472:18">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1472:24:1472:27">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1472:30:1472:37">subDirs</jtok>
<jtok eid="46" type="qualified_name_ref" span="1472:38:1472:44">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1472:46:1472:49">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1473:11:1473:18">subDirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1473:19:1473:22">sub</jtok>
<jtok eid="46" type="method_call" span="1473:24:1473:35">isDirectory</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1474:8:1474:14">String</jtok>
<jtok eid="46" type="local_variable_name" span="1474:15:1474:21">result</jtok>
<jtok eid="46" type="method_call" span="1474:24:1474:32">findFile</jtok>
<jtok eid="46" type="primary_name_ref" span="1474:33:1474:38">entry</jtok>
<jtok eid="46" type="primary_name_ref" span="1474:40:1474:48">database</jtok>
<jtok eid="46" type="primary_name_ref" span="1474:50:1474:57">subDirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1474:58:1474:61">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1475:9:1475:25">restOfFileString</jtok>
<jtok eid="46" type="primary_name_ref" span="1476:12:1476:18">result</jtok>
<jtok eid="46" type="primary_name_ref" span="1477:16:1477:22">result</jtok>
<jtok eid="46" type="line_comment" span="1482:5:1482:46">// Do for all direct and indirect subdirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1483:9:1483:21">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1483:22:1483:28">equals</jtok>
<jtok eid="46" type="string_literal" span="1483:29:1483:33">"**"</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1484:6:1484:10">List</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1484:11:1484:15">File</jtok>
<jtok eid="46" type="local_variable_name" span="1484:17:1484:21">toDo</jtok>
<jtok eid="46" type="constructor_call" span="1484:28:1484:38">LinkedList</jtok>
<jtok eid="46" type="constructor_call" span="1484:39:1484:43">File</jtok>
<jtok eid="46" type="primary_name_ref" span="1485:6:1485:10">toDo</jtok>
<jtok eid="46" type="method_call" span="1485:11:1485:14">add</jtok>
<jtok eid="46" type="primary_name_ref" span="1485:15:1485:24">directory</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1487:6:1487:12">String</jtok>
<jtok eid="46" type="local_variable_name" span="1487:13:1487:29">restOfFileString</jtok>
<jtok eid="46" type="method_call" span="1487:32:1487:36">join</jtok>
<jtok eid="46" type="primary_name_ref" span="1487:37:1487:46">fileParts</jtok>
<jtok eid="46" type="string_literal" span="1487:48:1487:51">"/"</jtok>
<jtok eid="46" type="primary_name_ref" span="1487:53:1487:54">i</jtok>
<jtok eid="46" type="primary_name_ref" span="1487:60:1487:69">fileParts</jtok>
<jtok eid="46" type="qualified_name_ref" span="1487:70:1487:76">length</jtok>
<jtok eid="46" type="line_comment" span="1489:6:1489:64">// Before checking the subdirs, we first check the current</jtok>
<jtok eid="46" type="line_comment" span="1490:6:1490:12">// dir</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1491:6:1491:12">String</jtok>
<jtok eid="46" type="local_variable_name" span="1491:13:1491:19">result</jtok>
<jtok eid="46" type="method_call" span="1491:22:1491:30">findFile</jtok>
<jtok eid="46" type="primary_name_ref" span="1491:31:1491:36">entry</jtok>
<jtok eid="46" type="primary_name_ref" span="1491:38:1491:46">database</jtok>
<jtok eid="46" type="primary_name_ref" span="1491:48:1491:57">directory</jtok>
<jtok eid="46" type="primary_name_ref" span="1491:59:1491:75">restOfFileString</jtok>
<jtok eid="46" type="primary_name_ref" span="1492:10:1492:16">result</jtok>
<jtok eid="46" type="primary_name_ref" span="1493:14:1493:20">result</jtok>
<jtok eid="46" type="primary_name_ref" span="1495:14:1495:18">toDo</jtok>
<jtok eid="46" type="method_call" span="1495:19:1495:26">isEmpty</jtok>
<jtok eid="46" type="line_comment" span="1497:7:1497:63">// Get all subdirs of each of the elements found in toDo</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1498:7:1498:11">File</jtok>
<jtok eid="46" type="local_variable_name" span="1498:14:1498:21">subDirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1498:24:1498:28">toDo</jtok>
<jtok eid="46" type="method_call" span="1498:29:1498:35">remove</jtok>
<jtok eid="46" type="method_call" span="1498:39:1498:48">listFiles</jtok>
<jtok eid="46" type="primary_name_ref" span="1499:11:1499:18">subDirs</jtok>
<jtok eid="46" type="line_comment" span="1499:28:1499:45">// No permission?</jtok>
<jtok eid="46" type="primary_name_ref" span="1502:7:1502:11">toDo</jtok>
<jtok eid="46" type="method_call" span="1502:12:1502:18">addAll</jtok>
<jtok eid="46" type="primary_name_ref" span="1502:19:1502:25">Arrays</jtok>
<jtok eid="46" type="method_call" span="1502:26:1502:32">asList</jtok>
<jtok eid="46" type="primary_name_ref" span="1502:33:1502:40">subDirs</jtok>
<jtok eid="46" type="local_variable_name" span="1504:16:1504:19">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1504:25:1504:28">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1504:31:1504:38">subDirs</jtok>
<jtok eid="46" type="qualified_name_ref" span="1504:39:1504:45">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1504:47:1504:50">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1505:13:1505:20">subDirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1505:21:1505:24">sub</jtok>
<jtok eid="46" type="method_call" span="1505:26:1505:37">isDirectory</jtok>
<jtok eid="46" type="primary_name_ref" span="1507:8:1507:14">result</jtok>
<jtok eid="46" type="method_call" span="1507:17:1507:25">findFile</jtok>
<jtok eid="46" type="primary_name_ref" span="1507:26:1507:31">entry</jtok>
<jtok eid="46" type="primary_name_ref" span="1507:33:1507:41">database</jtok>
<jtok eid="46" type="primary_name_ref" span="1507:43:1507:50">subDirs</jtok>
<jtok eid="46" type="primary_name_ref" span="1507:51:1507:54">sub</jtok>
<jtok eid="46" type="primary_name_ref" span="1507:57:1507:73">restOfFileString</jtok>
<jtok eid="46" type="primary_name_ref" span="1508:12:1508:18">result</jtok>
<jtok eid="46" type="primary_name_ref" span="1509:16:1509:22">result</jtok>
<jtok eid="46" type="line_comment" span="1512:6:1512:44">// We already did the currentDirectory</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1516:11:1516:18">Pattern</jtok>
<jtok eid="46" type="local_variable_name" span="1516:19:1516:26">toMatch</jtok>
<jtok eid="46" type="primary_name_ref" span="1516:29:1516:36">Pattern</jtok>
<jtok eid="46" type="method_call" span="1517:7:1517:14">compile</jtok>
<jtok eid="46" type="primary_name_ref" span="1517:15:1517:27">dirToProcess</jtok>
<jtok eid="46" type="method_call" span="1517:28:1517:38">replaceAll</jtok>
<jtok eid="46" type="string_literal" span="1517:39:1517:49">"\\\\\\\\"</jtok>
<jtok eid="46" type="string_literal" span="1517:51:1517:57">"\\\\"</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1519:5:1519:9">File</jtok>
<jtok eid="46" type="local_variable_name" span="1519:12:1519:19">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1519:22:1519:31">directory</jtok>
<jtok eid="46" type="method_call" span="1519:32:1519:41">listFiles</jtok>
<jtok eid="46" type="constructor_call" span="1519:46:1519:60">FilenameFilter</jtok>
<jtok eid="48" type="method_name" span="1520:21:1520:27">accept</jtok>
<jtok eid="48" type="parameter_type" span="1520:28:1520:32">File</jtok>
<jtok eid="48" type="parameter_name" span="1520:33:1520:37">arg0</jtok>
<jtok eid="48" type="parameter_type" span="1520:39:1520:45">String</jtok>
<jtok eid="48" type="parameter_name" span="1520:46:1520:50">arg1</jtok>
<jtok eid="48" type="primary_name_ref" span="1521:14:1521:21">toMatch</jtok>
<jtok eid="48" type="method_call" span="1521:22:1521:29">matcher</jtok>
<jtok eid="48" type="primary_name_ref" span="1521:30:1521:34">arg1</jtok>
<jtok eid="48" type="method_call" span="1521:36:1521:43">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1524:9:1524:16">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1524:28:1524:35">matches</jtok>
<jtok eid="46" type="qualified_name_ref" span="1524:36:1524:42">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1527:5:1527:14">directory</jtok>
<jtok eid="46" type="primary_name_ref" span="1527:17:1527:24">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1529:10:1529:19">directory</jtok>
<jtok eid="46" type="method_call" span="1529:20:1529:26">exists</jtok>
<jtok eid="46" type="line_comment" span="1532:6:1532:42">// End process directory information</jtok>
<jtok eid="46" type="line_comment" span="1534:3:1534:70">// Last step check if the given file can be found in this directory</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1535:3:1535:9">String</jtok>
<jtok eid="46" type="local_variable_name" span="1535:10:1535:27">filenameToLookFor</jtok>
<jtok eid="46" type="method_call" span="1535:30:1535:44">expandBrackets</jtok>
<jtok eid="46" type="primary_name_ref" span="1535:45:1535:54">fileParts</jtok>
<jtok eid="46" type="primary_name_ref" span="1535:55:1535:64">fileParts</jtok>
<jtok eid="46" type="qualified_name_ref" span="1535:65:1535:71">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1535:78:1535:83">entry</jtok>
<jtok eid="46" type="primary_name_ref" span="1535:85:1535:93">database</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1537:9:1537:16">Pattern</jtok>
<jtok eid="46" type="local_variable_name" span="1537:17:1537:24">toMatch</jtok>
<jtok eid="46" type="primary_name_ref" span="1537:27:1537:34">Pattern</jtok>
<jtok eid="46" type="method_call" span="1537:35:1537:42">compile</jtok>
<jtok eid="46" type="string_literal" span="1537:43:1537:46">"^"</jtok>
<jtok eid="46" type="primary_name_ref" span="1538:6:1538:23">filenameToLookFor</jtok>
<jtok eid="46" type="method_call" span="1538:24:1538:34">replaceAll</jtok>
<jtok eid="46" type="string_literal" span="1538:35:1538:45">"\\\\\\\\"</jtok>
<jtok eid="46" type="string_literal" span="1538:47:1538:53">"\\\\"</jtok>
<jtok eid="46" type="string_literal" span="1538:57:1538:60">"$"</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1540:3:1540:7">File</jtok>
<jtok eid="46" type="local_variable_name" span="1540:10:1540:17">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1540:20:1540:29">directory</jtok>
<jtok eid="46" type="method_call" span="1540:30:1540:39">listFiles</jtok>
<jtok eid="46" type="constructor_call" span="1540:44:1540:58">FilenameFilter</jtok>
<jtok eid="50" type="method_name" span="1541:19:1541:25">accept</jtok>
<jtok eid="50" type="parameter_type" span="1541:26:1541:30">File</jtok>
<jtok eid="50" type="parameter_name" span="1541:31:1541:35">arg0</jtok>
<jtok eid="50" type="parameter_type" span="1541:37:1541:43">String</jtok>
<jtok eid="50" type="parameter_name" span="1541:44:1541:48">arg1</jtok>
<jtok eid="50" type="primary_name_ref" span="1542:12:1542:19">toMatch</jtok>
<jtok eid="50" type="method_call" span="1542:20:1542:27">matcher</jtok>
<jtok eid="50" type="primary_name_ref" span="1542:28:1542:32">arg1</jtok>
<jtok eid="50" type="method_call" span="1542:34:1542:41">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1545:7:1545:14">matches</jtok>
<jtok eid="46" type="primary_name_ref" span="1545:26:1545:33">matches</jtok>
<jtok eid="46" type="qualified_name_ref" span="1545:34:1545:40">length</jtok>
<jtok eid="46" type="primary_name_ref" span="1549:11:1549:18">matches</jtok>
<jtok eid="46" type="method_call" span="1549:22:1549:38">getCanonicalPath</jtok>
<jtok eid="46" type="class_or_interface_ref" span="1550:12:1550:23">IOException</jtok>
<jtok eid="46" type="local_variable_name" span="1550:24:1550:25">e</jtok>
<jtok eid="1" type="class_or_interface_ref" span="1555:9:1555:16">Pattern</jtok>
<jtok eid="1" type="field_name" span="1555:17:1555:38">squareBracketsPattern</jtok>
<jtok eid="1" type="primary_name_ref" span="1555:41:1555:48">Pattern</jtok>
<jtok eid="1" type="method_call" span="1555:49:1555:56">compile</jtok>
<jtok eid="1" type="string_literal" span="1555:57:1555:68">"\\[.*?\\]"</jtok>
<jtok eid="1" type="block_comment" span="1557:2:1567:5">/**
	 * Takes a string that contains bracketed expression and expands each of
	 * these using getFieldAndFormat.
	 *
	 * Unknown Bracket expressions are silently dropped.
	 *
	 * @param bracketString
	 * @param entry
	 * @param database
	 * @return
	 */</jtok>
<jtok eid="51" type="class_or_interface_ref" span="1568:16:1568:22">String</jtok>
<jtok eid="51" type="method_name" span="1568:23:1568:37">expandBrackets</jtok>
<jtok eid="51" type="parameter_type" span="1568:38:1568:44">String</jtok>
<jtok eid="51" type="parameter_name" span="1568:45:1568:58">bracketString</jtok>
<jtok eid="51" type="parameter_type" span="1568:60:1568:71">BibtexEntry</jtok>
<jtok eid="51" type="parameter_name" span="1568:72:1568:77">entry</jtok>
<jtok eid="51" type="parameter_type" span="1569:3:1569:17">BibtexDatabase</jtok>
<jtok eid="51" type="parameter_name" span="1569:18:1569:26">database</jtok>
<jtok eid="51" type="class_or_interface_ref" span="1570:3:1570:10">Matcher</jtok>
<jtok eid="51" type="local_variable_name" span="1570:11:1570:12">m</jtok>
<jtok eid="51" type="primary_name_ref" span="1570:15:1570:36">squareBracketsPattern</jtok>
<jtok eid="51" type="method_call" span="1570:37:1570:44">matcher</jtok>
<jtok eid="51" type="primary_name_ref" span="1570:45:1570:58">bracketString</jtok>
<jtok eid="51" type="class_or_interface_ref" span="1571:3:1571:15">StringBuffer</jtok>
<jtok eid="51" type="local_variable_name" span="1571:16:1571:17">s</jtok>
<jtok eid="51" type="constructor_call" span="1571:24:1571:36">StringBuffer</jtok>
<jtok eid="51" type="primary_name_ref" span="1572:10:1572:11">m</jtok>
<jtok eid="51" type="method_call" span="1572:12:1572:16">find</jtok>
<jtok eid="51" type="class_or_interface_ref" span="1573:4:1573:10">String</jtok>
<jtok eid="51" type="local_variable_name" span="1573:11:1573:22">replacement</jtok>
<jtok eid="51" type="method_call" span="1573:25:1573:42">getFieldAndFormat</jtok>
<jtok eid="51" type="primary_name_ref" span="1573:43:1573:44">m</jtok>
<jtok eid="51" type="method_call" span="1573:45:1573:50">group</jtok>
<jtok eid="51" type="primary_name_ref" span="1573:54:1573:59">entry</jtok>
<jtok eid="51" type="primary_name_ref" span="1573:61:1573:69">database</jtok>
<jtok eid="51" type="primary_name_ref" span="1574:8:1574:19">replacement</jtok>
<jtok eid="51" type="primary_name_ref" span="1575:5:1575:16">replacement</jtok>
<jtok eid="51" type="string_literal" span="1575:19:1575:21">""</jtok>
<jtok eid="51" type="primary_name_ref" span="1576:4:1576:5">m</jtok>
<jtok eid="51" type="method_call" span="1576:6:1576:23">appendReplacement</jtok>
<jtok eid="51" type="primary_name_ref" span="1576:24:1576:25">s</jtok>
<jtok eid="51" type="primary_name_ref" span="1576:27:1576:38">replacement</jtok>
<jtok eid="51" type="primary_name_ref" span="1578:3:1578:4">m</jtok>
<jtok eid="51" type="method_call" span="1578:5:1578:15">appendTail</jtok>
<jtok eid="51" type="primary_name_ref" span="1578:16:1578:17">s</jtok>
<jtok eid="51" type="primary_name_ref" span="1580:10:1580:11">s</jtok>
<jtok eid="51" type="method_call" span="1580:12:1580:20">toString</jtok>
<jtok eid="1" type="block_comment" span="1583:2:1598:5">/**
	 * Concatenate all strings in the array from index 'from' to 'to' (excluding
	 * to) with the given separator.
	 * 
	 * Example:
	 * 
	 * String[] s = "ab/cd/ed".split("/"); join(s, "\\", 0, s.length) -&gt;
	 * "ab\\cd\\ed"
	 * 
	 * @param strings
	 * @param separator
	 * @param from
	 * @param to
	 *            Excluding strings[to]
	 * @return
	 */</jtok>
<jtok eid="52" type="class_or_interface_ref" span="1599:16:1599:22">String</jtok>
<jtok eid="52" type="method_name" span="1599:23:1599:27">join</jtok>
<jtok eid="52" type="parameter_type" span="1599:28:1599:34">String</jtok>
<jtok eid="52" type="parameter_name" span="1599:37:1599:44">strings</jtok>
<jtok eid="52" type="parameter_type" span="1599:46:1599:52">String</jtok>
<jtok eid="52" type="parameter_name" span="1599:53:1599:62">separator</jtok>
<jtok eid="52" type="parameter_name" span="1599:68:1599:72">from</jtok>
<jtok eid="52" type="parameter_name" span="1599:78:1599:80">to</jtok>
<jtok eid="52" type="primary_name_ref" span="1600:7:1600:14">strings</jtok>
<jtok eid="52" type="qualified_name_ref" span="1600:15:1600:21">length</jtok>
<jtok eid="52" type="primary_name_ref" span="1600:30:1600:34">from</jtok>
<jtok eid="52" type="primary_name_ref" span="1600:38:1600:40">to</jtok>
<jtok eid="52" type="string_literal" span="1601:11:1601:13">""</jtok>
<jtok eid="52" type="primary_name_ref" span="1603:3:1603:7">from</jtok>
<jtok eid="52" type="primary_name_ref" span="1603:10:1603:14">Math</jtok>
<jtok eid="52" type="method_call" span="1603:15:1603:18">max</jtok>
<jtok eid="52" type="primary_name_ref" span="1603:19:1603:23">from</jtok>
<jtok eid="52" type="primary_name_ref" span="1604:3:1604:5">to</jtok>
<jtok eid="52" type="primary_name_ref" span="1604:8:1604:12">Math</jtok>
<jtok eid="52" type="method_call" span="1604:13:1604:16">min</jtok>
<jtok eid="52" type="primary_name_ref" span="1604:17:1604:24">strings</jtok>
<jtok eid="52" type="qualified_name_ref" span="1604:25:1604:31">length</jtok>
<jtok eid="52" type="primary_name_ref" span="1604:33:1604:35">to</jtok>
<jtok eid="52" type="class_or_interface_ref" span="1606:3:1606:15">StringBuffer</jtok>
<jtok eid="52" type="local_variable_name" span="1606:16:1606:18">sb</jtok>
<jtok eid="52" type="constructor_call" span="1606:25:1606:37">StringBuffer</jtok>
<jtok eid="52" type="local_variable_name" span="1607:12:1607:13">i</jtok>
<jtok eid="52" type="primary_name_ref" span="1607:16:1607:20">from</jtok>
<jtok eid="52" type="primary_name_ref" span="1607:22:1607:23">i</jtok>
<jtok eid="52" type="primary_name_ref" span="1607:26:1607:28">to</jtok>
<jtok eid="52" type="primary_name_ref" span="1607:34:1607:35">i</jtok>
<jtok eid="52" type="primary_name_ref" span="1608:4:1608:6">sb</jtok>
<jtok eid="52" type="method_call" span="1608:7:1608:13">append</jtok>
<jtok eid="52" type="primary_name_ref" span="1608:14:1608:21">strings</jtok>
<jtok eid="52" type="primary_name_ref" span="1608:22:1608:23">i</jtok>
<jtok eid="52" type="method_call" span="1608:26:1608:32">append</jtok>
<jtok eid="52" type="primary_name_ref" span="1608:33:1608:42">separator</jtok>
<jtok eid="52" type="primary_name_ref" span="1610:10:1610:12">sb</jtok>
<jtok eid="52" type="method_call" span="1610:13:1610:19">append</jtok>
<jtok eid="52" type="primary_name_ref" span="1610:20:1610:27">strings</jtok>
<jtok eid="52" type="primary_name_ref" span="1610:28:1610:30">to</jtok>
<jtok eid="52" type="method_call" span="1610:37:1610:45">toString</jtok>
<jtok eid="1" type="block_comment" span="1613:2:1619:5">/**
	 * Converts a relative filename to an absolute one, if necessary. Returns
	 * null if the file does not exist.
	 * 
	 * Will look in each of the given dirs starting from the beginning and
	 * returning the first found file to match if any.
	 */</jtok>
<jtok eid="53" type="class_or_interface_ref" span="1620:16:1620:20">File</jtok>
<jtok eid="53" type="method_name" span="1620:21:1620:35">expandFilename</jtok>
<jtok eid="53" type="parameter_type" span="1620:36:1620:42">String</jtok>
<jtok eid="53" type="parameter_name" span="1620:43:1620:47">name</jtok>
<jtok eid="53" type="parameter_type" span="1620:49:1620:55">String</jtok>
<jtok eid="53" type="parameter_name" span="1620:58:1620:61">dir</jtok>
<jtok eid="53" type="local_variable_name" span="1622:12:1622:13">i</jtok>
<jtok eid="53" type="primary_name_ref" span="1622:19:1622:20">i</jtok>
<jtok eid="53" type="primary_name_ref" span="1622:23:1622:26">dir</jtok>
<jtok eid="53" type="qualified_name_ref" span="1622:27:1622:33">length</jtok>
<jtok eid="53" type="primary_name_ref" span="1622:35:1622:36">i</jtok>
<jtok eid="53" type="primary_name_ref" span="1623:17:1623:20">dir</jtok>
<jtok eid="53" type="primary_name_ref" span="1623:21:1623:22">i</jtok>
<jtok eid="53" type="class_or_interface_ref" span="1624:17:1624:21">File</jtok>
<jtok eid="53" type="local_variable_name" span="1624:22:1624:28">result</jtok>
<jtok eid="53" type="method_call" span="1624:31:1624:45">expandFilename</jtok>
<jtok eid="53" type="primary_name_ref" span="1624:46:1624:50">name</jtok>
<jtok eid="53" type="primary_name_ref" span="1624:52:1624:55">dir</jtok>
<jtok eid="53" type="primary_name_ref" span="1624:56:1624:57">i</jtok>
<jtok eid="53" type="primary_name_ref" span="1625:21:1625:27">result</jtok>
<jtok eid="53" type="primary_name_ref" span="1626:28:1626:34">result</jtok>
<jtok eid="1" type="block_comment" span="1634:2:1637:5">/**
	 * Converts a relative filename to an absolute one, if necessary. Returns
	 * null if the file does not exist.
	 */</jtok>
<jtok eid="54" type="class_or_interface_ref" span="1638:16:1638:20">File</jtok>
<jtok eid="54" type="method_name" span="1638:21:1638:35">expandFilename</jtok>
<jtok eid="54" type="parameter_type" span="1638:36:1638:42">String</jtok>
<jtok eid="54" type="parameter_name" span="1638:43:1638:47">name</jtok>
<jtok eid="54" type="parameter_type" span="1638:49:1638:55">String</jtok>
<jtok eid="54" type="parameter_name" span="1638:56:1638:59">dir</jtok>
<jtok eid="54" type="class_or_interface_ref" span="1640:3:1640:7">File</jtok>
<jtok eid="54" type="local_variable_name" span="1640:8:1640:12">file</jtok>
<jtok eid="54" type="primary_name_ref" span="1641:7:1641:11">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1641:23:1641:27">name</jtok>
<jtok eid="54" type="method_call" span="1641:28:1641:34">length</jtok>
<jtok eid="54" type="primary_name_ref" span="1644:4:1644:8">file</jtok>
<jtok eid="54" type="constructor_call" span="1644:15:1644:19">File</jtok>
<jtok eid="54" type="primary_name_ref" span="1644:20:1644:24">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1647:8:1647:12">file</jtok>
<jtok eid="54" type="method_call" span="1647:13:1647:19">exists</jtok>
<jtok eid="54" type="primary_name_ref" span="1647:26:1647:29">dir</jtok>
<jtok eid="54" type="primary_name_ref" span="1648:17:1648:20">dir</jtok>
<jtok eid="54" type="method_call" span="1648:21:1648:29">endsWith</jtok>
<jtok eid="54" type="primary_name_ref" span="1648:30:1648:36">System</jtok>
<jtok eid="54" type="method_call" span="1648:37:1648:48">getProperty</jtok>
<jtok eid="54" type="string_literal" span="1648:49:1648:65">"file.separator"</jtok>
<jtok eid="54" type="primary_name_ref" span="1649:17:1649:21">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1649:24:1649:27">dir</jtok>
<jtok eid="54" type="primary_name_ref" span="1649:30:1649:34">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1651:17:1651:21">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1651:24:1651:27">dir</jtok>
<jtok eid="54" type="primary_name_ref" span="1651:30:1651:36">System</jtok>
<jtok eid="54" type="method_call" span="1651:37:1651:48">getProperty</jtok>
<jtok eid="54" type="string_literal" span="1651:49:1651:65">"file.separator"</jtok>
<jtok eid="54" type="primary_name_ref" span="1651:69:1651:73">name</jtok>
<jtok eid="54" type="line_comment" span="1653:13:1653:57">// System.out.println("expanded to: "+name);</jtok>
<jtok eid="54" type="line_comment" span="1654:13:1654:43">// if (name.startsWith("ftp"))</jtok>
<jtok eid="54" type="primary_name_ref" span="1656:13:1656:17">file</jtok>
<jtok eid="54" type="constructor_call" span="1656:24:1656:28">File</jtok>
<jtok eid="54" type="primary_name_ref" span="1656:29:1656:33">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1658:17:1658:21">file</jtok>
<jtok eid="54" type="method_call" span="1658:22:1658:28">exists</jtok>
<jtok eid="54" type="primary_name_ref" span="1659:24:1659:28">file</jtok>
<jtok eid="54" type="line_comment" span="1660:13:1660:48">// Ok, try to fix / and \ problems:</jtok>
<jtok eid="54" type="primary_name_ref" span="1661:17:1661:24">Globals</jtok>
<jtok eid="54" type="qualified_name_ref" span="1661:25:1661:31">ON_WIN</jtok>
<jtok eid="54" type="line_comment" span="1662:17:1662:71">// workaround for catching Java bug in regexp replacer</jtok>
<jtok eid="54" type="line_comment" span="1663:17:1663:77">// and, why, why, why ... I don't get it - wegner 2006/01/22</jtok>
<jtok eid="54" type="primary_name_ref" span="1665:21:1665:25">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1665:28:1665:32">name</jtok>
<jtok eid="54" type="method_call" span="1665:33:1665:43">replaceAll</jtok>
<jtok eid="54" type="string_literal" span="1665:44:1665:47">"/"</jtok>
<jtok eid="54" type="string_literal" span="1665:49:1665:55">"\\\\"</jtok>
<jtok eid="54" type="class_or_interface_ref" span="1666:26:1666:30">java</jtok>
<jtok eid="54" type="class_or_interface_ref" span="1666:31:1666:35">lang</jtok>
<jtok eid="54" type="class_or_interface_ref" span="1666:36:1666:67">StringIndexOutOfBoundsException</jtok>
<jtok eid="54" type="local_variable_name" span="1666:68:1666:71">exc</jtok>
<jtok eid="54" type="primary_name_ref" span="1667:21:1667:27">System</jtok>
<jtok eid="54" type="qualified_name_ref" span="1667:28:1667:31">err</jtok>
<jtok eid="54" type="method_call" span="1668:26:1668:33">println</jtok>
<jtok eid="54" type="string_literal" span="1668:34:1668:83">"An internal Java error was caused by the entry "</jtok>
<jtok eid="54" type="string_literal" span="1669:29:1669:33">"\""</jtok>
<jtok eid="54" type="primary_name_ref" span="1669:36:1669:40">name</jtok>
<jtok eid="54" type="string_literal" span="1669:43:1669:47">"\""</jtok>
<jtok eid="54" type="primary_name_ref" span="1672:17:1672:21">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1672:24:1672:28">name</jtok>
<jtok eid="54" type="method_call" span="1672:29:1672:39">replaceAll</jtok>
<jtok eid="54" type="string_literal" span="1672:40:1672:46">"\\\\"</jtok>
<jtok eid="54" type="string_literal" span="1672:48:1672:51">"/"</jtok>
<jtok eid="54" type="line_comment" span="1673:13:1673:60">// System.out.println("expandFilename: "+name);</jtok>
<jtok eid="54" type="primary_name_ref" span="1674:13:1674:17">file</jtok>
<jtok eid="54" type="constructor_call" span="1674:24:1674:28">File</jtok>
<jtok eid="54" type="primary_name_ref" span="1674:29:1674:33">name</jtok>
<jtok eid="54" type="primary_name_ref" span="1675:18:1675:22">file</jtok>
<jtok eid="54" type="method_call" span="1675:23:1675:29">exists</jtok>
<jtok eid="54" type="primary_name_ref" span="1676:17:1676:21">file</jtok>
<jtok eid="54" type="primary_name_ref" span="1678:16:1678:20">file</jtok>
<jtok eid="55" type="class_or_interface_ref" span="1681:17:1681:23">String</jtok>
<jtok eid="55" type="method_name" span="1681:24:1681:33">findInDir</jtok>
<jtok eid="55" type="parameter_type" span="1681:34:1681:40">String</jtok>
<jtok eid="55" type="parameter_name" span="1681:41:1681:44">key</jtok>
<jtok eid="55" type="parameter_type" span="1681:46:1681:52">String</jtok>
<jtok eid="55" type="parameter_name" span="1681:53:1681:56">dir</jtok>
<jtok eid="55" type="parameter_type" span="1681:58:1681:72">OpenFileFilter</jtok>
<jtok eid="55" type="parameter_name" span="1681:73:1681:76">off</jtok>
<jtok eid="55" type="parameter_name" span="1681:82:1681:87">count</jtok>
<jtok eid="55" type="primary_name_ref" span="1682:13:1682:18">count</jtok>
<jtok eid="55" type="line_comment" span="1683:26:1683:70">// Make sure an infinite loop doesn't occur.</jtok>
<jtok eid="55" type="class_or_interface_ref" span="1684:9:1684:13">File</jtok>
<jtok eid="55" type="local_variable_name" span="1684:14:1684:15">f</jtok>
<jtok eid="55" type="constructor_call" span="1684:22:1684:26">File</jtok>
<jtok eid="55" type="primary_name_ref" span="1684:27:1684:30">dir</jtok>
<jtok eid="55" type="class_or_interface_ref" span="1685:3:1685:7">File</jtok>
<jtok eid="55" type="local_variable_name" span="1685:10:1685:13">all</jtok>
<jtok eid="55" type="primary_name_ref" span="1685:16:1685:17">f</jtok>
<jtok eid="55" type="method_call" span="1685:18:1685:27">listFiles</jtok>
<jtok eid="55" type="primary_name_ref" span="1686:7:1686:10">all</jtok>
<jtok eid="55" type="line_comment" span="1687:17:1687:53">// An error occured. We may not have</jtok>
<jtok eid="55" type="line_comment" span="1688:3:1688:35">// permission to list the files.</jtok>
<jtok eid="55" type="local_variable_name" span="1690:7:1690:15">numFiles</jtok>
<jtok eid="55" type="primary_name_ref" span="1690:18:1690:21">all</jtok>
<jtok eid="55" type="qualified_name_ref" span="1690:22:1690:28">length</jtok>
<jtok eid="55" type="local_variable_name" span="1692:12:1692:13">i</jtok>
<jtok eid="55" type="primary_name_ref" span="1692:19:1692:20">i</jtok>
<jtok eid="55" type="primary_name_ref" span="1692:23:1692:31">numFiles</jtok>
<jtok eid="55" type="primary_name_ref" span="1692:33:1692:34">i</jtok>
<jtok eid="55" type="class_or_interface_ref" span="1693:4:1693:8">File</jtok>
<jtok eid="55" type="local_variable_name" span="1693:9:1693:16">curFile</jtok>
<jtok eid="55" type="primary_name_ref" span="1693:19:1693:22">all</jtok>
<jtok eid="55" type="primary_name_ref" span="1693:23:1693:24">i</jtok>
<jtok eid="55" type="primary_name_ref" span="1695:8:1695:15">curFile</jtok>
<jtok eid="55" type="method_call" span="1695:16:1695:22">isFile</jtok>
<jtok eid="55" type="class_or_interface_ref" span="1696:5:1696:11">String</jtok>
<jtok eid="55" type="local_variable_name" span="1696:12:1696:16">name</jtok>
<jtok eid="55" type="primary_name_ref" span="1696:19:1696:26">curFile</jtok>
<jtok eid="55" type="method_call" span="1696:27:1696:34">getName</jtok>
<jtok eid="55" type="primary_name_ref" span="1697:9:1697:13">name</jtok>
<jtok eid="55" type="method_call" span="1697:14:1697:24">startsWith</jtok>
<jtok eid="55" type="primary_name_ref" span="1697:25:1697:28">key</jtok>
<jtok eid="55" type="string_literal" span="1697:31:1697:34">"."</jtok>
<jtok eid="55" type="primary_name_ref" span="1697:39:1697:42">off</jtok>
<jtok eid="55" type="method_call" span="1697:43:1697:49">accept</jtok>
<jtok eid="55" type="primary_name_ref" span="1697:50:1697:54">name</jtok>
<jtok eid="55" type="primary_name_ref" span="1698:13:1698:20">curFile</jtok>
<jtok eid="55" type="method_call" span="1698:21:1698:28">getPath</jtok>
<jtok eid="55" type="primary_name_ref" span="1700:15:1700:22">curFile</jtok>
<jtok eid="55" type="method_call" span="1700:23:1700:34">isDirectory</jtok>
<jtok eid="55" type="class_or_interface_ref" span="1701:5:1701:11">String</jtok>
<jtok eid="55" type="local_variable_name" span="1701:12:1701:17">found</jtok>
<jtok eid="55" type="method_call" span="1701:20:1701:29">findInDir</jtok>
<jtok eid="55" type="primary_name_ref" span="1701:30:1701:33">key</jtok>
<jtok eid="55" type="primary_name_ref" span="1701:35:1701:42">curFile</jtok>
<jtok eid="55" type="method_call" span="1701:43:1701:50">getPath</jtok>
<jtok eid="55" type="primary_name_ref" span="1701:54:1701:57">off</jtok>
<jtok eid="55" type="primary_name_ref" span="1701:59:1701:64">count</jtok>
<jtok eid="55" type="primary_name_ref" span="1702:9:1702:14">found</jtok>
<jtok eid="55" type="primary_name_ref" span="1703:13:1703:18">found</jtok>
<jtok eid="1" type="block_comment" span="1709:5:1712:8">/**
     * This methods assures all words in the given entry are recorded in their
     * respective Completers, if any.
     */</jtok>
<jtok eid="56" type="method_name" span="1713:24:1713:48">updateCompletersForEntry</jtok>
<jtok eid="56" type="parameter_type" span="1713:49:1713:56">HashMap</jtok>
<jtok eid="56" type="parameter_type" span="1713:57:1713:63">String</jtok>
<jtok eid="56" type="parameter_type" span="1713:65:1713:86">AbstractAutoCompleter</jtok>
<jtok eid="56" type="parameter_name" span="1713:88:1713:102">autoCompleters</jtok>
<jtok eid="56" type="parameter_type" span="1713:104:1713:115">BibtexEntry</jtok>
<jtok eid="56" type="parameter_name" span="1713:116:1713:127">bibtexEntry</jtok>
<jtok eid="56" type="class_or_interface_ref" span="1714:11:1714:14">Map</jtok>
<jtok eid="56" type="class_or_interface_ref" span="1714:15:1714:20">Entry</jtok>
<jtok eid="56" type="class_or_interface_ref" span="1714:21:1714:27">String</jtok>
<jtok eid="56" type="class_or_interface_ref" span="1714:29:1714:50">AbstractAutoCompleter</jtok>
<jtok eid="56" type="local_variable_name" span="1714:52:1714:57">entry</jtok>
<jtok eid="56" type="primary_name_ref" span="1714:60:1714:74">autoCompleters</jtok>
<jtok eid="56" type="method_call" span="1714:75:1714:83">entrySet</jtok>
<jtok eid="56" type="class_or_interface_ref" span="1715:13:1715:34">AbstractAutoCompleter</jtok>
<jtok eid="56" type="local_variable_name" span="1715:35:1715:39">comp</jtok>
<jtok eid="56" type="primary_name_ref" span="1715:42:1715:47">entry</jtok>
<jtok eid="56" type="method_call" span="1715:48:1715:56">getValue</jtok>
<jtok eid="56" type="primary_name_ref" span="1716:13:1716:17">comp</jtok>
<jtok eid="56" type="method_call" span="1716:18:1716:32">addBibtexEntry</jtok>
<jtok eid="56" type="primary_name_ref" span="1716:33:1716:44">bibtexEntry</jtok>
<jtok eid="1" type="block_comment" span="1721:2:1728:5">/**
	 * Sets empty or non-existing owner fields of bibtex entries inside a List
	 * to a specified default value. Timestamp field is also set. Preferences
	 * are checked to see if these options are enabled.
	 * 
	 * @param bibs
	 *            List of bibtex entries
	 */</jtok>
<jtok eid="57" type="method_name" span="1729:21:1729:39">setAutomaticFields</jtok>
<jtok eid="57" type="parameter_type" span="1729:40:1729:50">Collection</jtok>
<jtok eid="57" type="parameter_type" span="1729:51:1729:62">BibtexEntry</jtok>
<jtok eid="57" type="parameter_name" span="1729:64:1729:68">bibs</jtok>
<jtok eid="57" type="parameter_name" span="1730:22:1730:36">overwriteOwner</jtok>
<jtok eid="57" type="parameter_name" span="1730:46:1730:64">overwriteTimestamp</jtok>
<jtok eid="57" type="parameter_name" span="1730:74:1730:85">markEntries</jtok>
<jtok eid="57" type="class_or_interface_ref" span="1733:3:1733:9">String</jtok>
<jtok eid="57" type="local_variable_name" span="1733:10:1733:24">timeStampField</jtok>
<jtok eid="57" type="primary_name_ref" span="1733:27:1733:34">Globals</jtok>
<jtok eid="57" type="qualified_name_ref" span="1733:35:1733:40">prefs</jtok>
<jtok eid="57" type="method_call" span="1733:41:1733:44">get</jtok>
<jtok eid="57" type="string_literal" span="1733:45:1733:61">"timeStampField"</jtok>
<jtok eid="57" type="class_or_interface_ref" span="1735:3:1735:9">String</jtok>
<jtok eid="57" type="local_variable_name" span="1735:10:1735:22">defaultOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1735:25:1735:32">Globals</jtok>
<jtok eid="57" type="qualified_name_ref" span="1735:33:1735:38">prefs</jtok>
<jtok eid="57" type="method_call" span="1735:39:1735:42">get</jtok>
<jtok eid="57" type="string_literal" span="1735:43:1735:57">"defaultOwner"</jtok>
<jtok eid="57" type="class_or_interface_ref" span="1736:3:1736:9">String</jtok>
<jtok eid="57" type="local_variable_name" span="1736:10:1736:19">timestamp</jtok>
<jtok eid="57" type="method_call" span="1736:22:1736:36">easyDateFormat</jtok>
<jtok eid="57" type="local_variable_name" span="1737:11:1737:25">globalSetOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1737:28:1737:35">Globals</jtok>
<jtok eid="57" type="qualified_name_ref" span="1737:36:1737:41">prefs</jtok>
<jtok eid="57" type="method_call" span="1737:42:1737:52">getBoolean</jtok>
<jtok eid="57" type="string_literal" span="1737:53:1737:63">"useOwner"</jtok>
<jtok eid="57" type="local_variable_name" span="1738:17:1738:35">globalSetTimeStamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1738:38:1738:45">Globals</jtok>
<jtok eid="57" type="qualified_name_ref" span="1738:46:1738:51">prefs</jtok>
<jtok eid="57" type="method_call" span="1738:52:1738:62">getBoolean</jtok>
<jtok eid="57" type="string_literal" span="1738:63:1738:77">"useTimeStamp"</jtok>
<jtok eid="57" type="line_comment" span="1740:9:1740:66">// Do not need to do anything if all options are disabled</jtok>
<jtok eid="57" type="primary_name_ref" span="1741:9:1741:23">globalSetOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1741:27:1741:45">globalSetTimeStamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1741:49:1741:60">markEntries</jtok>
<jtok eid="57" type="line_comment" span="1744:9:1744:39">// Iterate through all entries</jtok>
<jtok eid="57" type="class_or_interface_ref" span="1745:8:1745:19">BibtexEntry</jtok>
<jtok eid="57" type="local_variable_name" span="1745:20:1745:28">curEntry</jtok>
<jtok eid="57" type="primary_name_ref" span="1745:31:1745:35">bibs</jtok>
<jtok eid="57" type="local_variable_name" span="1746:21:1746:29">setOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1746:32:1746:46">globalSetOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1747:18:1747:32">overwriteOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1747:37:1747:45">curEntry</jtok>
<jtok eid="57" type="method_call" span="1747:46:1747:54">getField</jtok>
<jtok eid="57" type="primary_name_ref" span="1747:55:1747:67">BibtexFields</jtok>
<jtok eid="57" type="qualified_name_ref" span="1747:68:1747:73">OWNER</jtok>
<jtok eid="57" type="local_variable_name" span="1748:21:1748:33">setTimeStamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1748:36:1748:54">globalSetTimeStamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1749:18:1749:36">overwriteTimestamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1749:41:1749:49">curEntry</jtok>
<jtok eid="57" type="method_call" span="1749:50:1749:58">getField</jtok>
<jtok eid="57" type="primary_name_ref" span="1749:59:1749:73">timeStampField</jtok>
<jtok eid="57" type="method_call" span="1750:13:1750:31">setAutomaticFields</jtok>
<jtok eid="57" type="primary_name_ref" span="1750:32:1750:40">curEntry</jtok>
<jtok eid="57" type="primary_name_ref" span="1750:42:1750:50">setOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1750:52:1750:64">defaultOwner</jtok>
<jtok eid="57" type="primary_name_ref" span="1750:66:1750:78">setTimeStamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1750:80:1750:94">timeStampField</jtok>
<jtok eid="57" type="primary_name_ref" span="1751:5:1751:14">timestamp</jtok>
<jtok eid="57" type="primary_name_ref" span="1752:17:1752:28">markEntries</jtok>
<jtok eid="57" type="primary_name_ref" span="1753:17:1753:21">Util</jtok>
<jtok eid="57" type="method_call" span="1753:22:1753:31">markEntry</jtok>
<jtok eid="57" type="primary_name_ref" span="1753:32:1753:40">curEntry</jtok>
<jtok eid="57" type="constructor_call" span="1753:46:1753:59">NamedCompound</jtok>
<jtok eid="57" type="string_literal" span="1753:60:1753:62">""</jtok>
<jtok eid="1" type="block_comment" span="1758:2:1769:5">/**
	 * Sets empty or non-existing owner fields of a bibtex entry to a specified
	 * default value. Timestamp field is also set. Preferences are checked to
	 * see if these options are enabled.
	 * 
	 * @param entry
	 *            The entry to set fields for.
     * @param overwriteOwner
     *              Indicates whether owner should be set if it is already set.
     * @param overwriteTimestamp
     *              Indicates whether timestamp should be set if it is already set.
	 */</jtok>
<jtok eid="58" type="method_name" span="1770:21:1770:39">setAutomaticFields</jtok>
<jtok eid="58" type="parameter_type" span="1770:40:1770:51">BibtexEntry</jtok>
<jtok eid="58" type="parameter_name" span="1770:52:1770:57">entry</jtok>
<jtok eid="58" type="parameter_name" span="1770:67:1770:81">overwriteOwner</jtok>
<jtok eid="58" type="parameter_name" span="1771:51:1771:69">overwriteTimestamp</jtok>
<jtok eid="58" type="class_or_interface_ref" span="1772:3:1772:9">String</jtok>
<jtok eid="58" type="local_variable_name" span="1772:10:1772:22">defaultOwner</jtok>
<jtok eid="58" type="primary_name_ref" span="1772:25:1772:32">Globals</jtok>
<jtok eid="58" type="qualified_name_ref" span="1772:33:1772:38">prefs</jtok>
<jtok eid="58" type="method_call" span="1772:39:1772:42">get</jtok>
<jtok eid="58" type="string_literal" span="1772:43:1772:57">"defaultOwner"</jtok>
<jtok eid="58" type="class_or_interface_ref" span="1773:3:1773:9">String</jtok>
<jtok eid="58" type="local_variable_name" span="1773:10:1773:19">timestamp</jtok>
<jtok eid="58" type="method_call" span="1773:22:1773:36">easyDateFormat</jtok>
<jtok eid="58" type="class_or_interface_ref" span="1774:9:1774:15">String</jtok>
<jtok eid="58" type="local_variable_name" span="1774:16:1774:30">timeStampField</jtok>
<jtok eid="58" type="primary_name_ref" span="1774:33:1774:40">Globals</jtok>
<jtok eid="58" type="qualified_name_ref" span="1774:41:1774:46">prefs</jtok>
<jtok eid="58" type="method_call" span="1774:47:1774:50">get</jtok>
<jtok eid="58" type="string_literal" span="1774:51:1774:67">"timeStampField"</jtok>
<jtok eid="58" type="local_variable_name" span="1775:17:1775:25">setOwner</jtok>
<jtok eid="58" type="primary_name_ref" span="1775:28:1775:35">Globals</jtok>
<jtok eid="58" type="qualified_name_ref" span="1775:36:1775:41">prefs</jtok>
<jtok eid="58" type="method_call" span="1775:42:1775:52">getBoolean</jtok>
<jtok eid="58" type="string_literal" span="1775:53:1775:63">"useOwner"</jtok>
<jtok eid="58" type="primary_name_ref" span="1776:14:1776:28">overwriteOwner</jtok>
<jtok eid="58" type="primary_name_ref" span="1776:33:1776:38">entry</jtok>
<jtok eid="58" type="method_call" span="1776:39:1776:47">getField</jtok>
<jtok eid="58" type="primary_name_ref" span="1776:48:1776:60">BibtexFields</jtok>
<jtok eid="58" type="qualified_name_ref" span="1776:61:1776:66">OWNER</jtok>
<jtok eid="58" type="local_variable_name" span="1777:17:1777:29">setTimeStamp</jtok>
<jtok eid="58" type="primary_name_ref" span="1777:32:1777:39">Globals</jtok>
<jtok eid="58" type="qualified_name_ref" span="1777:40:1777:45">prefs</jtok>
<jtok eid="58" type="method_call" span="1777:46:1777:56">getBoolean</jtok>
<jtok eid="58" type="string_literal" span="1777:57:1777:71">"useTimeStamp"</jtok>
<jtok eid="58" type="primary_name_ref" span="1778:14:1778:32">overwriteTimestamp</jtok>
<jtok eid="58" type="primary_name_ref" span="1778:37:1778:42">entry</jtok>
<jtok eid="58" type="method_call" span="1778:43:1778:51">getField</jtok>
<jtok eid="58" type="primary_name_ref" span="1778:52:1778:66">timeStampField</jtok>
<jtok eid="58" type="method_call" span="1780:3:1780:21">setAutomaticFields</jtok>
<jtok eid="58" type="primary_name_ref" span="1780:22:1780:27">entry</jtok>
<jtok eid="58" type="primary_name_ref" span="1780:29:1780:37">setOwner</jtok>
<jtok eid="58" type="primary_name_ref" span="1780:39:1780:51">defaultOwner</jtok>
<jtok eid="58" type="primary_name_ref" span="1780:53:1780:65">setTimeStamp</jtok>
<jtok eid="58" type="primary_name_ref" span="1780:67:1780:81">timeStampField</jtok>
<jtok eid="58" type="primary_name_ref" span="1780:83:1780:92">timestamp</jtok>
<jtok eid="59" type="method_name" span="1783:22:1783:40">setAutomaticFields</jtok>
<jtok eid="59" type="parameter_type" span="1783:41:1783:52">BibtexEntry</jtok>
<jtok eid="59" type="parameter_name" span="1783:53:1783:58">entry</jtok>
<jtok eid="59" type="parameter_name" span="1783:68:1783:76">setOwner</jtok>
<jtok eid="59" type="parameter_type" span="1783:78:1783:84">String</jtok>
<jtok eid="59" type="parameter_name" span="1783:85:1783:90">owner</jtok>
<jtok eid="59" type="parameter_name" span="1784:11:1784:23">setTimeStamp</jtok>
<jtok eid="59" type="parameter_type" span="1784:25:1784:31">String</jtok>
<jtok eid="59" type="parameter_name" span="1784:32:1784:46">timeStampField</jtok>
<jtok eid="59" type="parameter_type" span="1784:48:1784:54">String</jtok>
<jtok eid="59" type="parameter_name" span="1784:55:1784:64">timeStamp</jtok>
<jtok eid="59" type="line_comment" span="1786:3:1786:48">// Set owner field if this option is enabled:</jtok>
<jtok eid="59" type="primary_name_ref" span="1787:7:1787:15">setOwner</jtok>
<jtok eid="59" type="line_comment" span="1788:4:1788:31">// No or empty owner field?</jtok>
<jtok eid="59" type="line_comment" span="1789:4:1789:48">// if (entry.getField(Globals.OWNER) == null</jtok>
<jtok eid="59" type="line_comment" span="1790:4:1790:67">// || ((String) entry.getField(Globals.OWNER)).length() == 0) {</jtok>
<jtok eid="59" type="line_comment" span="1791:4:1791:39">// Set owner field to default value</jtok>
<jtok eid="59" type="primary_name_ref" span="1792:4:1792:9">entry</jtok>
<jtok eid="59" type="method_call" span="1792:10:1792:18">setField</jtok>
<jtok eid="59" type="primary_name_ref" span="1792:19:1792:31">BibtexFields</jtok>
<jtok eid="59" type="qualified_name_ref" span="1792:32:1792:37">OWNER</jtok>
<jtok eid="59" type="primary_name_ref" span="1792:39:1792:44">owner</jtok>
<jtok eid="59" type="line_comment" span="1793:4:1793:8">// }</jtok>
<jtok eid="59" type="primary_name_ref" span="1796:7:1796:19">setTimeStamp</jtok>
<jtok eid="59" type="primary_name_ref" span="1797:4:1797:9">entry</jtok>
<jtok eid="59" type="method_call" span="1797:10:1797:18">setField</jtok>
<jtok eid="59" type="primary_name_ref" span="1797:19:1797:33">timeStampField</jtok>
<jtok eid="59" type="primary_name_ref" span="1797:35:1797:44">timeStamp</jtok>
<jtok eid="1" type="block_comment" span="1800:2:1813:5">/**
	 * Copies a file.
	 * 
	 * @param source
	 *            File Source file
	 * @param dest
	 *            File Destination file
	 * @param deleteIfExists
	 *            boolean Determines whether the copy goes on even if the file
	 *            exists.
	 * @throws IOException
	 * @return boolean Whether the copy succeeded, or was stopped due to the
	 *         file already existing.
	 */</jtok>
<jtok eid="60" type="method_name" span="1814:24:1814:32">copyFile</jtok>
<jtok eid="60" type="parameter_type" span="1814:33:1814:37">File</jtok>
<jtok eid="60" type="parameter_name" span="1814:38:1814:44">source</jtok>
<jtok eid="60" type="parameter_type" span="1814:46:1814:50">File</jtok>
<jtok eid="60" type="parameter_name" span="1814:51:1814:55">dest</jtok>
<jtok eid="60" type="parameter_name" span="1814:65:1814:79">deleteIfExists</jtok>
<jtok eid="60" type="throws" span="1815:10:1815:21">IOException</jtok>
<jtok eid="60" type="class_or_interface_ref" span="1817:3:1817:22">BufferedInputStream</jtok>
<jtok eid="60" type="local_variable_name" span="1817:23:1817:25">in</jtok>
<jtok eid="60" type="class_or_interface_ref" span="1818:3:1818:23">BufferedOutputStream</jtok>
<jtok eid="60" type="local_variable_name" span="1818:24:1818:27">out</jtok>
<jtok eid="60" type="line_comment" span="1820:4:1820:40">// Check if the file already exists.</jtok>
<jtok eid="60" type="primary_name_ref" span="1821:8:1821:12">dest</jtok>
<jtok eid="60" type="method_call" span="1821:13:1821:19">exists</jtok>
<jtok eid="60" type="primary_name_ref" span="1822:10:1822:24">deleteIfExists</jtok>
<jtok eid="60" type="line_comment" span="1824:5:1824:27">// else dest.delete();</jtok>
<jtok eid="60" type="primary_name_ref" span="1827:4:1827:6">in</jtok>
<jtok eid="60" type="constructor_call" span="1827:13:1827:32">BufferedInputStream</jtok>
<jtok eid="60" type="constructor_call" span="1827:37:1827:52">FileInputStream</jtok>
<jtok eid="60" type="primary_name_ref" span="1827:53:1827:59">source</jtok>
<jtok eid="60" type="primary_name_ref" span="1828:4:1828:7">out</jtok>
<jtok eid="60" type="constructor_call" span="1828:14:1828:34">BufferedOutputStream</jtok>
<jtok eid="60" type="constructor_call" span="1828:39:1828:55">FileOutputStream</jtok>
<jtok eid="60" type="primary_name_ref" span="1828:56:1828:60">dest</jtok>
<jtok eid="60" type="local_variable_name" span="1829:8:1829:10">el</jtok>
<jtok eid="60" type="line_comment" span="1830:4:1830:20">// int tell = 0;</jtok>
<jtok eid="60" type="primary_name_ref" span="1831:12:1831:14">el</jtok>
<jtok eid="60" type="primary_name_ref" span="1831:17:1831:19">in</jtok>
<jtok eid="60" type="method_call" span="1831:20:1831:24">read</jtok>
<jtok eid="60" type="primary_name_ref" span="1832:5:1832:8">out</jtok>
<jtok eid="60" type="method_call" span="1832:9:1832:14">write</jtok>
<jtok eid="60" type="primary_name_ref" span="1832:15:1832:17">el</jtok>
<jtok eid="60" type="class_or_interface_ref" span="1834:12:1834:23">IOException</jtok>
<jtok eid="60" type="local_variable_name" span="1834:24:1834:26">ex</jtok>
<jtok eid="60" type="primary_name_ref" span="1835:10:1835:12">ex</jtok>
<jtok eid="60" type="primary_name_ref" span="1837:8:1837:11">out</jtok>
<jtok eid="60" type="primary_name_ref" span="1838:5:1838:8">out</jtok>
<jtok eid="60" type="method_call" span="1838:9:1838:14">flush</jtok>
<jtok eid="60" type="primary_name_ref" span="1839:5:1839:8">out</jtok>
<jtok eid="60" type="method_call" span="1839:9:1839:14">close</jtok>
<jtok eid="60" type="primary_name_ref" span="1841:8:1841:10">in</jtok>
<jtok eid="60" type="primary_name_ref" span="1842:5:1842:7">in</jtok>
<jtok eid="60" type="method_call" span="1842:8:1842:13">close</jtok>
<jtok eid="1" type="block_comment" span="1847:2:1850:5">/**
	 * This method is called at startup, and makes necessary adaptations to
	 * preferences for users from an earlier version of Jabref.
	 */</jtok>
<jtok eid="61" type="method_name" span="1851:21:1851:47">performCompatibilityUpdate</jtok>
<jtok eid="61" type="line_comment" span="1853:3:1853:60">// Make sure "abstract" is not in General fields, because</jtok>
<jtok eid="61" type="line_comment" span="1854:3:1854:52">// Jabref 1.55 moves the abstract to its own tab.</jtok>
<jtok eid="61" type="class_or_interface_ref" span="1855:3:1855:9">String</jtok>
<jtok eid="61" type="local_variable_name" span="1855:10:1855:19">genFields</jtok>
<jtok eid="61" type="primary_name_ref" span="1855:22:1855:29">Globals</jtok>
<jtok eid="61" type="qualified_name_ref" span="1855:30:1855:35">prefs</jtok>
<jtok eid="61" type="method_call" span="1855:36:1855:39">get</jtok>
<jtok eid="61" type="string_literal" span="1855:40:1855:55">"generalFields"</jtok>
<jtok eid="61" type="line_comment" span="1856:3:1856:55">// pr(genFields+"\t"+genFields.indexOf("abstract"));</jtok>
<jtok eid="61" type="primary_name_ref" span="1857:7:1857:16">genFields</jtok>
<jtok eid="61" type="method_call" span="1857:17:1857:24">indexOf</jtok>
<jtok eid="61" type="string_literal" span="1857:25:1857:35">"abstract"</jtok>
<jtok eid="61" type="line_comment" span="1858:4:1858:56">// pr(genFields+"\t"+genFields.indexOf("abstract"));</jtok>
<jtok eid="61" type="class_or_interface_ref" span="1859:4:1859:10">String</jtok>
<jtok eid="61" type="local_variable_name" span="1859:11:1859:17">newGen</jtok>
<jtok eid="61" type="primary_name_ref" span="1860:8:1860:17">genFields</jtok>
<jtok eid="61" type="method_call" span="1860:18:1860:24">equals</jtok>
<jtok eid="61" type="string_literal" span="1860:25:1860:35">"abstract"</jtok>
<jtok eid="61" type="primary_name_ref" span="1861:5:1861:11">newGen</jtok>
<jtok eid="61" type="string_literal" span="1861:14:1861:16">""</jtok>
<jtok eid="61" type="primary_name_ref" span="1862:13:1862:22">genFields</jtok>
<jtok eid="61" type="method_call" span="1862:23:1862:30">indexOf</jtok>
<jtok eid="61" type="string_literal" span="1862:31:1862:43">";abstract;"</jtok>
<jtok eid="61" type="primary_name_ref" span="1863:5:1863:11">newGen</jtok>
<jtok eid="61" type="primary_name_ref" span="1863:14:1863:23">genFields</jtok>
<jtok eid="61" type="method_call" span="1863:24:1863:34">replaceAll</jtok>
<jtok eid="61" type="string_literal" span="1863:35:1863:47">";abstract;"</jtok>
<jtok eid="61" type="string_literal" span="1863:49:1863:52">";"</jtok>
<jtok eid="61" type="primary_name_ref" span="1864:15:1864:24">genFields</jtok>
<jtok eid="61" type="method_call" span="1864:25:1864:32">indexOf</jtok>
<jtok eid="61" type="string_literal" span="1864:33:1864:44">"abstract;"</jtok>
<jtok eid="61" type="primary_name_ref" span="1865:5:1865:11">newGen</jtok>
<jtok eid="61" type="primary_name_ref" span="1865:14:1865:23">genFields</jtok>
<jtok eid="61" type="method_call" span="1865:24:1865:34">replaceAll</jtok>
<jtok eid="61" type="string_literal" span="1865:35:1865:46">"abstract;"</jtok>
<jtok eid="61" type="string_literal" span="1865:48:1865:50">""</jtok>
<jtok eid="61" type="primary_name_ref" span="1866:15:1866:24">genFields</jtok>
<jtok eid="61" type="method_call" span="1866:25:1866:32">indexOf</jtok>
<jtok eid="61" type="string_literal" span="1866:33:1866:44">";abstract"</jtok>
<jtok eid="61" type="primary_name_ref" span="1866:49:1866:58">genFields</jtok>
<jtok eid="61" type="method_call" span="1866:59:1866:65">length</jtok>
<jtok eid="61" type="primary_name_ref" span="1867:5:1867:11">newGen</jtok>
<jtok eid="61" type="primary_name_ref" span="1867:14:1867:23">genFields</jtok>
<jtok eid="61" type="method_call" span="1867:24:1867:34">replaceAll</jtok>
<jtok eid="61" type="string_literal" span="1867:35:1867:46">";abstract"</jtok>
<jtok eid="61" type="string_literal" span="1867:48:1867:50">""</jtok>
<jtok eid="61" type="primary_name_ref" span="1869:5:1869:11">newGen</jtok>
<jtok eid="61" type="primary_name_ref" span="1869:14:1869:23">genFields</jtok>
<jtok eid="61" type="line_comment" span="1870:4:1870:18">// pr(newGen);</jtok>
<jtok eid="61" type="primary_name_ref" span="1871:4:1871:11">Globals</jtok>
<jtok eid="61" type="qualified_name_ref" span="1871:12:1871:17">prefs</jtok>
<jtok eid="61" type="method_call" span="1871:18:1871:21">put</jtok>
<jtok eid="61" type="string_literal" span="1871:22:1871:37">"generalFields"</jtok>
<jtok eid="61" type="primary_name_ref" span="1871:39:1871:45">newGen</jtok>
<jtok eid="1" type="block_comment" span="1876:5:1882:8">/**
     * Collect file links from the given set of fields, and add them to the list contained
     * in the field GUIGlobals.FILE_FIELD.
     * @param database The database to modify.
     * @param fields The fields to find links in.
     * @return A CompoundEdit specifying the undo operation for the whole operation.
     */</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1883:19:1883:32">NamedCompound</jtok>
<jtok eid="62" type="method_name" span="1883:33:1883:51">upgradePdfPsToFile</jtok>
<jtok eid="62" type="parameter_type" span="1883:52:1883:66">BibtexDatabase</jtok>
<jtok eid="62" type="parameter_name" span="1883:67:1883:75">database</jtok>
<jtok eid="62" type="parameter_type" span="1883:77:1883:83">String</jtok>
<jtok eid="62" type="parameter_name" span="1883:86:1883:92">fields</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1884:9:1884:22">NamedCompound</jtok>
<jtok eid="62" type="local_variable_name" span="1884:23:1884:25">ce</jtok>
<jtok eid="62" type="constructor_call" span="1884:32:1884:45">NamedCompound</jtok>
<jtok eid="62" type="primary_name_ref" span="1884:46:1884:53">Globals</jtok>
<jtok eid="62" type="method_call" span="1884:54:1884:58">lang</jtok>
<jtok eid="62" type="string_literal" span="1884:59:1884:96">"Move external links to 'file' field"</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1886:14:1886:25">BibtexEntry</jtok>
<jtok eid="62" type="local_variable_name" span="1886:26:1886:31">entry</jtok>
<jtok eid="62" type="primary_name_ref" span="1886:34:1886:42">database</jtok>
<jtok eid="62" type="method_call" span="1886:43:1886:54">getEntryMap</jtok>
<jtok eid="62" type="method_call" span="1886:57:1886:63">values</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1887:13:1887:31">FileListTableModel</jtok>
<jtok eid="62" type="local_variable_name" span="1887:32:1887:42">tableModel</jtok>
<jtok eid="62" type="constructor_call" span="1887:49:1887:67">FileListTableModel</jtok>
<jtok eid="62" type="line_comment" span="1888:13:1888:80">// If there are already links in the file field, keep those on top:</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1889:13:1889:19">String</jtok>
<jtok eid="62" type="local_variable_name" span="1889:20:1889:34">oldFileContent</jtok>
<jtok eid="62" type="primary_name_ref" span="1889:37:1889:42">entry</jtok>
<jtok eid="62" type="method_call" span="1889:43:1889:51">getField</jtok>
<jtok eid="62" type="primary_name_ref" span="1889:52:1889:62">GUIGlobals</jtok>
<jtok eid="62" type="qualified_name_ref" span="1889:63:1889:73">FILE_FIELD</jtok>
<jtok eid="62" type="primary_name_ref" span="1890:17:1890:31">oldFileContent</jtok>
<jtok eid="62" type="primary_name_ref" span="1891:17:1891:27">tableModel</jtok>
<jtok eid="62" type="method_call" span="1891:28:1891:38">setContent</jtok>
<jtok eid="62" type="primary_name_ref" span="1891:39:1891:53">oldFileContent</jtok>
<jtok eid="62" type="local_variable_name" span="1893:17:1893:28">oldRowCount</jtok>
<jtok eid="62" type="primary_name_ref" span="1893:31:1893:41">tableModel</jtok>
<jtok eid="62" type="method_call" span="1893:42:1893:53">getRowCount</jtok>
<jtok eid="62" type="local_variable_name" span="1894:22:1894:23">j</jtok>
<jtok eid="62" type="primary_name_ref" span="1894:29:1894:30">j</jtok>
<jtok eid="62" type="primary_name_ref" span="1894:33:1894:39">fields</jtok>
<jtok eid="62" type="qualified_name_ref" span="1894:40:1894:46">length</jtok>
<jtok eid="62" type="primary_name_ref" span="1894:48:1894:49">j</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1895:17:1895:23">String</jtok>
<jtok eid="62" type="local_variable_name" span="1895:24:1895:25">o</jtok>
<jtok eid="62" type="primary_name_ref" span="1895:28:1895:33">entry</jtok>
<jtok eid="62" type="method_call" span="1895:34:1895:42">getField</jtok>
<jtok eid="62" type="primary_name_ref" span="1895:43:1895:49">fields</jtok>
<jtok eid="62" type="primary_name_ref" span="1895:50:1895:51">j</jtok>
<jtok eid="62" type="primary_name_ref" span="1896:21:1896:22">o</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1897:21:1897:27">String</jtok>
<jtok eid="62" type="local_variable_name" span="1897:28:1897:29">s</jtok>
<jtok eid="62" type="primary_name_ref" span="1897:32:1897:33">o</jtok>
<jtok eid="62" type="primary_name_ref" span="1898:25:1898:26">s</jtok>
<jtok eid="62" type="method_call" span="1898:27:1898:31">trim</jtok>
<jtok eid="62" type="method_call" span="1898:34:1898:40">length</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1899:25:1899:29">File</jtok>
<jtok eid="62" type="local_variable_name" span="1899:30:1899:31">f</jtok>
<jtok eid="62" type="constructor_call" span="1899:38:1899:42">File</jtok>
<jtok eid="62" type="primary_name_ref" span="1899:43:1899:44">s</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1900:25:1900:38">FileListEntry</jtok>
<jtok eid="62" type="local_variable_name" span="1900:39:1900:46">flEntry</jtok>
<jtok eid="62" type="constructor_call" span="1900:53:1900:66">FileListEntry</jtok>
<jtok eid="62" type="primary_name_ref" span="1900:67:1900:68">f</jtok>
<jtok eid="62" type="method_call" span="1900:69:1900:76">getName</jtok>
<jtok eid="62" type="primary_name_ref" span="1900:80:1900:81">s</jtok>
<jtok eid="62" type="primary_name_ref" span="1901:33:1901:40">Globals</jtok>
<jtok eid="62" type="qualified_name_ref" span="1901:41:1901:46">prefs</jtok>
<jtok eid="62" type="method_call" span="1901:47:1901:71">getExternalFileTypeByExt</jtok>
<jtok eid="62" type="primary_name_ref" span="1901:72:1901:78">fields</jtok>
<jtok eid="62" type="primary_name_ref" span="1901:79:1901:80">j</jtok>
<jtok eid="62" type="primary_name_ref" span="1902:25:1902:35">tableModel</jtok>
<jtok eid="62" type="method_call" span="1902:36:1902:44">addEntry</jtok>
<jtok eid="62" type="primary_name_ref" span="1902:45:1902:55">tableModel</jtok>
<jtok eid="62" type="method_call" span="1902:56:1902:67">getRowCount</jtok>
<jtok eid="62" type="primary_name_ref" span="1902:71:1902:78">flEntry</jtok>
<jtok eid="62" type="primary_name_ref" span="1904:25:1904:30">entry</jtok>
<jtok eid="62" type="method_call" span="1904:31:1904:41">clearField</jtok>
<jtok eid="62" type="primary_name_ref" span="1904:42:1904:48">fields</jtok>
<jtok eid="62" type="primary_name_ref" span="1904:49:1904:50">j</jtok>
<jtok eid="62" type="primary_name_ref" span="1905:25:1905:27">ce</jtok>
<jtok eid="62" type="method_call" span="1905:28:1905:35">addEdit</jtok>
<jtok eid="62" type="constructor_call" span="1905:40:1905:59">UndoableFieldChange</jtok>
<jtok eid="62" type="primary_name_ref" span="1905:60:1905:65">entry</jtok>
<jtok eid="62" type="primary_name_ref" span="1905:67:1905:73">fields</jtok>
<jtok eid="62" type="primary_name_ref" span="1905:74:1905:75">j</jtok>
<jtok eid="62" type="primary_name_ref" span="1905:78:1905:79">o</jtok>
<jtok eid="62" type="primary_name_ref" span="1909:17:1909:27">tableModel</jtok>
<jtok eid="62" type="method_call" span="1909:28:1909:39">getRowCount</jtok>
<jtok eid="62" type="primary_name_ref" span="1909:45:1909:56">oldRowCount</jtok>
<jtok eid="62" type="class_or_interface_ref" span="1910:17:1910:23">String</jtok>
<jtok eid="62" type="local_variable_name" span="1910:24:1910:32">newValue</jtok>
<jtok eid="62" type="primary_name_ref" span="1910:35:1910:45">tableModel</jtok>
<jtok eid="62" type="method_call" span="1910:46:1910:69">getStringRepresentation</jtok>
<jtok eid="62" type="primary_name_ref" span="1911:17:1911:22">entry</jtok>
<jtok eid="62" type="method_call" span="1911:23:1911:31">setField</jtok>
<jtok eid="62" type="primary_name_ref" span="1911:32:1911:42">GUIGlobals</jtok>
<jtok eid="62" type="qualified_name_ref" span="1911:43:1911:53">FILE_FIELD</jtok>
<jtok eid="62" type="primary_name_ref" span="1911:55:1911:63">newValue</jtok>
<jtok eid="62" type="primary_name_ref" span="1912:17:1912:19">ce</jtok>
<jtok eid="62" type="method_call" span="1912:20:1912:27">addEdit</jtok>
<jtok eid="62" type="constructor_call" span="1912:32:1912:51">UndoableFieldChange</jtok>
<jtok eid="62" type="primary_name_ref" span="1912:52:1912:57">entry</jtok>
<jtok eid="62" type="primary_name_ref" span="1912:59:1912:69">GUIGlobals</jtok>
<jtok eid="62" type="qualified_name_ref" span="1912:70:1912:80">FILE_FIELD</jtok>
<jtok eid="62" type="primary_name_ref" span="1912:82:1912:96">oldFileContent</jtok>
<jtok eid="62" type="primary_name_ref" span="1912:98:1912:106">newValue</jtok>
<jtok eid="62" type="primary_name_ref" span="1915:9:1915:11">ce</jtok>
<jtok eid="62" type="method_call" span="1915:12:1915:15">end</jtok>
<jtok eid="62" type="primary_name_ref" span="1916:16:1916:18">ce</jtok>
<jtok eid="1" type="line_comment" span="1919:5:1919:87">// -------------------------------------------------------------------------------</jtok>
<jtok eid="1" type="block_comment" span="1921:2:1924:5">/**
	 * extends the filename with a default Extension, if no Extension '.x' could
	 * be found
	 */</jtok>
<jtok eid="63" type="class_or_interface_ref" span="1925:16:1925:22">String</jtok>
<jtok eid="63" type="method_name" span="1925:23:1925:41">getCorrectFileName</jtok>
<jtok eid="63" type="parameter_type" span="1925:42:1925:48">String</jtok>
<jtok eid="63" type="parameter_name" span="1925:49:1925:56">orgName</jtok>
<jtok eid="63" type="parameter_type" span="1925:58:1925:64">String</jtok>
<jtok eid="63" type="parameter_name" span="1925:65:1925:81">defaultExtension</jtok>
<jtok eid="63" type="primary_name_ref" span="1926:7:1926:14">orgName</jtok>
<jtok eid="63" type="string_literal" span="1927:11:1927:13">""</jtok>
<jtok eid="63" type="class_or_interface_ref" span="1929:3:1929:9">String</jtok>
<jtok eid="63" type="local_variable_name" span="1929:10:1929:14">back</jtok>
<jtok eid="63" type="primary_name_ref" span="1929:17:1929:24">orgName</jtok>
<jtok eid="63" type="local_variable_name" span="1930:7:1930:8">t</jtok>
<jtok eid="63" type="primary_name_ref" span="1930:11:1930:18">orgName</jtok>
<jtok eid="63" type="method_call" span="1930:19:1930:26">indexOf</jtok>
<jtok eid="63" type="string_literal" span="1930:27:1930:30">"."</jtok>
<jtok eid="63" type="line_comment" span="1930:36:1930:66">// hidden files Linux/Unix (?)</jtok>
<jtok eid="63" type="primary_name_ref" span="1931:7:1931:8">t</jtok>
<jtok eid="63" type="primary_name_ref" span="1932:4:1932:8">back</jtok>
<jtok eid="63" type="primary_name_ref" span="1932:11:1932:15">back</jtok>
<jtok eid="63" type="string_literal" span="1932:18:1932:21">"."</jtok>
<jtok eid="63" type="primary_name_ref" span="1932:24:1932:40">defaultExtension</jtok>
<jtok eid="63" type="primary_name_ref" span="1934:10:1934:14">back</jtok>
<jtok eid="1" type="block_comment" span="1937:2:1940:5">/**
	 * Quotes each and every character, e.g. '!' as &amp;#33;. Used for verbatim
	 * display of arbitrary strings that may contain HTML entities.
	 */</jtok>
<jtok eid="64" type="class_or_interface_ref" span="1941:16:1941:22">String</jtok>
<jtok eid="64" type="method_name" span="1941:23:1941:35">quoteForHTML</jtok>
<jtok eid="64" type="parameter_type" span="1941:36:1941:42">String</jtok>
<jtok eid="64" type="parameter_name" span="1941:43:1941:44">s</jtok>
<jtok eid="64" type="class_or_interface_ref" span="1942:3:1942:15">StringBuffer</jtok>
<jtok eid="64" type="local_variable_name" span="1942:16:1942:18">sb</jtok>
<jtok eid="64" type="constructor_call" span="1942:25:1942:37">StringBuffer</jtok>
<jtok eid="64" type="local_variable_name" span="1943:12:1943:13">i</jtok>
<jtok eid="64" type="primary_name_ref" span="1943:19:1943:20">i</jtok>
<jtok eid="64" type="primary_name_ref" span="1943:23:1943:24">s</jtok>
<jtok eid="64" type="method_call" span="1943:25:1943:31">length</jtok>
<jtok eid="64" type="primary_name_ref" span="1943:37:1943:38">i</jtok>
<jtok eid="64" type="primary_name_ref" span="1944:4:1944:6">sb</jtok>
<jtok eid="64" type="method_call" span="1944:7:1944:13">append</jtok>
<jtok eid="64" type="string_literal" span="1944:14:1944:18">"&amp;#"</jtok>
<jtok eid="64" type="primary_name_ref" span="1944:27:1944:28">s</jtok>
<jtok eid="64" type="method_call" span="1944:29:1944:35">charAt</jtok>
<jtok eid="64" type="primary_name_ref" span="1944:36:1944:37">i</jtok>
<jtok eid="64" type="string_literal" span="1944:41:1944:44">";"</jtok>
<jtok eid="64" type="primary_name_ref" span="1946:10:1946:12">sb</jtok>
<jtok eid="64" type="method_call" span="1946:13:1946:21">toString</jtok>
<jtok eid="65" type="class_or_interface_ref" span="1949:16:1949:22">String</jtok>
<jtok eid="65" type="method_name" span="1949:23:1949:28">quote</jtok>
<jtok eid="65" type="parameter_type" span="1949:29:1949:35">String</jtok>
<jtok eid="65" type="parameter_name" span="1949:36:1949:37">s</jtok>
<jtok eid="65" type="parameter_type" span="1949:39:1949:45">String</jtok>
<jtok eid="65" type="parameter_name" span="1949:46:1949:54">specials</jtok>
<jtok eid="65" type="parameter_name" span="1949:61:1949:70">quoteChar</jtok>
<jtok eid="65" type="method_call" span="1950:10:1950:15">quote</jtok>
<jtok eid="65" type="primary_name_ref" span="1950:16:1950:17">s</jtok>
<jtok eid="65" type="primary_name_ref" span="1950:19:1950:27">specials</jtok>
<jtok eid="65" type="primary_name_ref" span="1950:29:1950:38">quoteChar</jtok>
<jtok eid="1" type="block_comment" span="1953:2:1968:5">/**
	 * Quote special characters.
	 * 
	 * @param s
	 *            The String which may contain special characters.
	 * @param specials
	 *            A String containing all special characters except the quoting
	 *            character itself, which is automatically quoted.
	 * @param quoteChar
	 *            The quoting character.
	 * @param linewrap
	 *            The number of characters after which a linebreak is inserted
	 *            (this linebreak is undone by unquote()). Set to 0 to disable.
	 * @return A String with every special character (including the quoting
	 *         character itself) quoted.
	 */</jtok>
<jtok eid="66" type="class_or_interface_ref" span="1969:16:1969:22">String</jtok>
<jtok eid="66" type="method_name" span="1969:23:1969:28">quote</jtok>
<jtok eid="66" type="parameter_type" span="1969:29:1969:35">String</jtok>
<jtok eid="66" type="parameter_name" span="1969:36:1969:37">s</jtok>
<jtok eid="66" type="parameter_type" span="1969:39:1969:45">String</jtok>
<jtok eid="66" type="parameter_name" span="1969:46:1969:54">specials</jtok>
<jtok eid="66" type="parameter_name" span="1969:61:1969:70">quoteChar</jtok>
<jtok eid="66" type="parameter_name" span="1969:76:1969:84">linewrap</jtok>
<jtok eid="66" type="class_or_interface_ref" span="1970:3:1970:15">StringBuffer</jtok>
<jtok eid="66" type="local_variable_name" span="1970:16:1970:18">sb</jtok>
<jtok eid="66" type="constructor_call" span="1970:25:1970:37">StringBuffer</jtok>
<jtok eid="66" type="local_variable_name" span="1971:8:1971:9">c</jtok>
<jtok eid="66" type="local_variable_name" span="1972:7:1972:17">linelength</jtok>
<jtok eid="66" type="local_variable_name" span="1973:11:1973:20">isSpecial</jtok>
<jtok eid="66" type="local_variable_name" span="1974:12:1974:13">i</jtok>
<jtok eid="66" type="primary_name_ref" span="1974:19:1974:20">i</jtok>
<jtok eid="66" type="primary_name_ref" span="1974:23:1974:24">s</jtok>
<jtok eid="66" type="method_call" span="1974:25:1974:31">length</jtok>
<jtok eid="66" type="primary_name_ref" span="1974:37:1974:38">i</jtok>
<jtok eid="66" type="primary_name_ref" span="1975:4:1975:5">c</jtok>
<jtok eid="66" type="primary_name_ref" span="1975:8:1975:9">s</jtok>
<jtok eid="66" type="method_call" span="1975:10:1975:16">charAt</jtok>
<jtok eid="66" type="primary_name_ref" span="1975:17:1975:18">i</jtok>
<jtok eid="66" type="primary_name_ref" span="1976:4:1976:13">isSpecial</jtok>
<jtok eid="66" type="primary_name_ref" span="1976:16:1976:24">specials</jtok>
<jtok eid="66" type="method_call" span="1976:25:1976:32">indexOf</jtok>
<jtok eid="66" type="primary_name_ref" span="1976:33:1976:34">c</jtok>
<jtok eid="66" type="primary_name_ref" span="1976:44:1976:45">c</jtok>
<jtok eid="66" type="primary_name_ref" span="1976:49:1976:58">quoteChar</jtok>
<jtok eid="66" type="line_comment" span="1977:4:1977:17">// linebreak?</jtok>
<jtok eid="66" type="primary_name_ref" span="1978:8:1978:16">linewrap</jtok>
<jtok eid="66" type="primary_name_ref" span="1979:11:1979:21">linelength</jtok>
<jtok eid="66" type="primary_name_ref" span="1979:25:1979:33">linewrap</jtok>
<jtok eid="66" type="primary_name_ref" span="1979:38:1979:47">isSpecial</jtok>
<jtok eid="66" type="primary_name_ref" span="1979:51:1979:61">linelength</jtok>
<jtok eid="66" type="primary_name_ref" span="1979:65:1979:73">linewrap</jtok>
<jtok eid="66" type="primary_name_ref" span="1980:5:1980:7">sb</jtok>
<jtok eid="66" type="method_call" span="1980:8:1980:14">append</jtok>
<jtok eid="66" type="primary_name_ref" span="1980:15:1980:24">quoteChar</jtok>
<jtok eid="66" type="primary_name_ref" span="1981:5:1981:7">sb</jtok>
<jtok eid="66" type="method_call" span="1981:8:1981:14">append</jtok>
<jtok eid="66" type="primary_name_ref" span="1982:5:1982:15">linelength</jtok>
<jtok eid="66" type="primary_name_ref" span="1984:8:1984:17">isSpecial</jtok>
<jtok eid="66" type="primary_name_ref" span="1985:5:1985:7">sb</jtok>
<jtok eid="66" type="method_call" span="1985:8:1985:14">append</jtok>
<jtok eid="66" type="primary_name_ref" span="1985:15:1985:24">quoteChar</jtok>
<jtok eid="66" type="primary_name_ref" span="1986:7:1986:17">linelength</jtok>
<jtok eid="66" type="primary_name_ref" span="1988:4:1988:6">sb</jtok>
<jtok eid="66" type="method_call" span="1988:7:1988:13">append</jtok>
<jtok eid="66" type="primary_name_ref" span="1988:14:1988:15">c</jtok>
<jtok eid="66" type="primary_name_ref" span="1990:10:1990:12">sb</jtok>
<jtok eid="66" type="method_call" span="1990:13:1990:21">toString</jtok>
<jtok eid="1" type="block_comment" span="1993:2:2001:5">/**
	 * Unquote special characters.
	 * 
	 * @param s
	 *            The String which may contain quoted special characters.
	 * @param quoteChar
	 *            The quoting character.
	 * @return A String with all quoted characters unquoted.
	 */</jtok>
<jtok eid="67" type="class_or_interface_ref" span="2002:16:2002:22">String</jtok>
<jtok eid="67" type="method_name" span="2002:23:2002:30">unquote</jtok>
<jtok eid="67" type="parameter_type" span="2002:31:2002:37">String</jtok>
<jtok eid="67" type="parameter_name" span="2002:38:2002:39">s</jtok>
<jtok eid="67" type="parameter_name" span="2002:46:2002:55">quoteChar</jtok>
<jtok eid="67" type="class_or_interface_ref" span="2003:3:2003:15">StringBuffer</jtok>
<jtok eid="67" type="local_variable_name" span="2003:16:2003:18">sb</jtok>
<jtok eid="67" type="constructor_call" span="2003:25:2003:37">StringBuffer</jtok>
<jtok eid="67" type="local_variable_name" span="2004:8:2004:9">c</jtok>
<jtok eid="67" type="local_variable_name" span="2005:11:2005:17">quoted</jtok>
<jtok eid="67" type="local_variable_name" span="2006:12:2006:13">i</jtok>
<jtok eid="67" type="primary_name_ref" span="2006:19:2006:20">i</jtok>
<jtok eid="67" type="primary_name_ref" span="2006:23:2006:24">s</jtok>
<jtok eid="67" type="method_call" span="2006:25:2006:31">length</jtok>
<jtok eid="67" type="primary_name_ref" span="2006:37:2006:38">i</jtok>
<jtok eid="67" type="primary_name_ref" span="2007:4:2007:5">c</jtok>
<jtok eid="67" type="primary_name_ref" span="2007:8:2007:9">s</jtok>
<jtok eid="67" type="method_call" span="2007:10:2007:16">charAt</jtok>
<jtok eid="67" type="primary_name_ref" span="2007:17:2007:18">i</jtok>
<jtok eid="67" type="primary_name_ref" span="2008:8:2008:14">quoted</jtok>
<jtok eid="67" type="line_comment" span="2008:18:2008:40">// append literally...</jtok>
<jtok eid="67" type="primary_name_ref" span="2009:9:2009:10">c</jtok>
<jtok eid="67" type="line_comment" span="2009:20:2009:40">// ...unless newline</jtok>
<jtok eid="67" type="primary_name_ref" span="2010:6:2010:8">sb</jtok>
<jtok eid="67" type="method_call" span="2010:9:2010:15">append</jtok>
<jtok eid="67" type="primary_name_ref" span="2010:16:2010:17">c</jtok>
<jtok eid="67" type="primary_name_ref" span="2011:5:2011:11">quoted</jtok>
<jtok eid="67" type="primary_name_ref" span="2012:15:2012:16">c</jtok>
<jtok eid="67" type="primary_name_ref" span="2012:20:2012:29">quoteChar</jtok>
<jtok eid="67" type="primary_name_ref" span="2013:5:2013:7">sb</jtok>
<jtok eid="67" type="method_call" span="2013:8:2013:14">append</jtok>
<jtok eid="67" type="primary_name_ref" span="2013:15:2013:16">c</jtok>
<jtok eid="67" type="line_comment" span="2014:13:2014:26">// quote char</jtok>
<jtok eid="67" type="primary_name_ref" span="2015:5:2015:11">quoted</jtok>
<jtok eid="67" type="primary_name_ref" span="2018:10:2018:12">sb</jtok>
<jtok eid="67" type="method_call" span="2018:13:2018:21">toString</jtok>
<jtok eid="1" type="block_comment" span="2021:2:2024:5">/**
	 * Quote all regular expression meta characters in s, in order to search for
	 * s literally.
	 */</jtok>
<jtok eid="68" type="class_or_interface_ref" span="2025:16:2025:22">String</jtok>
<jtok eid="68" type="method_name" span="2025:23:2025:32">quoteMeta</jtok>
<jtok eid="68" type="parameter_type" span="2025:33:2025:39">String</jtok>
<jtok eid="68" type="parameter_name" span="2025:40:2025:41">s</jtok>
<jtok eid="68" type="line_comment" span="2026:3:2026:63">// work around a bug: trailing backslashes have to be quoted</jtok>
<jtok eid="68" type="line_comment" span="2027:3:2027:18">// individually</jtok>
<jtok eid="68" type="local_variable_name" span="2028:7:2028:8">i</jtok>
<jtok eid="68" type="primary_name_ref" span="2028:11:2028:12">s</jtok>
<jtok eid="68" type="method_call" span="2028:13:2028:19">length</jtok>
<jtok eid="68" type="class_or_interface_ref" span="2029:3:2029:15">StringBuffer</jtok>
<jtok eid="68" type="local_variable_name" span="2029:16:2029:18">bs</jtok>
<jtok eid="68" type="constructor_call" span="2029:25:2029:37">StringBuffer</jtok>
<jtok eid="68" type="string_literal" span="2029:38:2029:40">""</jtok>
<jtok eid="68" type="primary_name_ref" span="2030:11:2030:12">i</jtok>
<jtok eid="68" type="primary_name_ref" span="2030:23:2030:24">s</jtok>
<jtok eid="68" type="method_call" span="2030:25:2030:31">charAt</jtok>
<jtok eid="68" type="primary_name_ref" span="2030:32:2030:33">i</jtok>
<jtok eid="68" type="primary_name_ref" span="2031:6:2031:7">i</jtok>
<jtok eid="68" type="primary_name_ref" span="2032:4:2032:6">bs</jtok>
<jtok eid="68" type="method_call" span="2032:7:2032:13">append</jtok>
<jtok eid="68" type="string_literal" span="2032:14:2032:20">"\\\\"</jtok>
<jtok eid="68" type="primary_name_ref" span="2034:3:2034:4">s</jtok>
<jtok eid="68" type="primary_name_ref" span="2034:7:2034:8">s</jtok>
<jtok eid="68" type="method_call" span="2034:9:2034:18">substring</jtok>
<jtok eid="68" type="primary_name_ref" span="2034:22:2034:23">i</jtok>
<jtok eid="68" type="string_literal" span="2035:10:2035:15">"\\Q"</jtok>
<jtok eid="68" type="primary_name_ref" span="2035:18:2035:19">s</jtok>
<jtok eid="68" type="method_call" span="2035:20:2035:30">replaceAll</jtok>
<jtok eid="68" type="string_literal" span="2035:31:2035:38">"\\\\E"</jtok>
<jtok eid="68" type="string_literal" span="2035:40:2035:61">"\\\\E\\\\\\\\E\\\\Q"</jtok>
<jtok eid="68" type="string_literal" span="2035:65:2035:70">"\\E"</jtok>
<jtok eid="68" type="primary_name_ref" span="2035:73:2035:75">bs</jtok>
<jtok eid="68" type="method_call" span="2035:76:2035:84">toString</jtok>
<jtok eid="1" type="block_comment" span="2038:2:2041:5">/*
	 * This method "tidies" up e.g. a keyword string, by alphabetizing the words
	 * and removing all duplicates.
	 */</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2042:16:2042:22">String</jtok>
<jtok eid="69" type="method_name" span="2042:23:2042:51">sortWordsAndRemoveDuplicates</jtok>
<jtok eid="69" type="parameter_type" span="2042:52:2042:58">String</jtok>
<jtok eid="69" type="parameter_name" span="2042:59:2042:63">text</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2044:3:2044:9">String</jtok>
<jtok eid="69" type="local_variable_name" span="2044:12:2044:17">words</jtok>
<jtok eid="69" type="primary_name_ref" span="2044:20:2044:24">text</jtok>
<jtok eid="69" type="method_call" span="2044:25:2044:30">split</jtok>
<jtok eid="69" type="string_literal" span="2044:31:2044:35">", "</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2045:3:2045:12">SortedSet</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2045:13:2045:19">String</jtok>
<jtok eid="69" type="local_variable_name" span="2045:21:2045:24">set</jtok>
<jtok eid="69" type="constructor_call" span="2045:31:2045:38">TreeSet</jtok>
<jtok eid="69" type="constructor_call" span="2045:39:2045:45">String</jtok>
<jtok eid="69" type="local_variable_name" span="2046:12:2046:13">i</jtok>
<jtok eid="69" type="primary_name_ref" span="2046:19:2046:20">i</jtok>
<jtok eid="69" type="primary_name_ref" span="2046:23:2046:28">words</jtok>
<jtok eid="69" type="qualified_name_ref" span="2046:29:2046:35">length</jtok>
<jtok eid="69" type="primary_name_ref" span="2046:37:2046:38">i</jtok>
<jtok eid="69" type="primary_name_ref" span="2047:4:2047:7">set</jtok>
<jtok eid="69" type="method_call" span="2047:8:2047:11">add</jtok>
<jtok eid="69" type="primary_name_ref" span="2047:12:2047:17">words</jtok>
<jtok eid="69" type="primary_name_ref" span="2047:18:2047:19">i</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2048:3:2048:15">StringBuffer</jtok>
<jtok eid="69" type="local_variable_name" span="2048:16:2048:18">sb</jtok>
<jtok eid="69" type="constructor_call" span="2048:25:2048:37">StringBuffer</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2049:8:2049:16">Iterator</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2049:17:2049:23">String</jtok>
<jtok eid="69" type="local_variable_name" span="2049:25:2049:26">i</jtok>
<jtok eid="69" type="primary_name_ref" span="2049:29:2049:32">set</jtok>
<jtok eid="69" type="method_call" span="2049:33:2049:41">iterator</jtok>
<jtok eid="69" type="primary_name_ref" span="2049:45:2049:46">i</jtok>
<jtok eid="69" type="method_call" span="2049:47:2049:54">hasNext</jtok>
<jtok eid="69" type="primary_name_ref" span="2050:4:2050:6">sb</jtok>
<jtok eid="69" type="method_call" span="2050:7:2050:13">append</jtok>
<jtok eid="69" type="primary_name_ref" span="2050:14:2050:15">i</jtok>
<jtok eid="69" type="method_call" span="2050:16:2050:20">next</jtok>
<jtok eid="69" type="primary_name_ref" span="2051:4:2051:6">sb</jtok>
<jtok eid="69" type="method_call" span="2051:7:2051:13">append</jtok>
<jtok eid="69" type="string_literal" span="2051:14:2051:18">", "</jtok>
<jtok eid="69" type="primary_name_ref" span="2053:7:2053:9">sb</jtok>
<jtok eid="69" type="method_call" span="2053:10:2053:16">length</jtok>
<jtok eid="69" type="primary_name_ref" span="2054:4:2054:6">sb</jtok>
<jtok eid="69" type="method_call" span="2054:7:2054:13">delete</jtok>
<jtok eid="69" type="primary_name_ref" span="2054:14:2054:16">sb</jtok>
<jtok eid="69" type="method_call" span="2054:17:2054:23">length</jtok>
<jtok eid="69" type="primary_name_ref" span="2054:31:2054:33">sb</jtok>
<jtok eid="69" type="method_call" span="2054:34:2054:40">length</jtok>
<jtok eid="69" type="class_or_interface_ref" span="2055:3:2055:9">String</jtok>
<jtok eid="69" type="local_variable_name" span="2055:10:2055:16">result</jtok>
<jtok eid="69" type="primary_name_ref" span="2055:19:2055:21">sb</jtok>
<jtok eid="69" type="method_call" span="2055:22:2055:30">toString</jtok>
<jtok eid="69" type="primary_name_ref" span="2056:10:2056:16">result</jtok>
<jtok eid="69" type="method_call" span="2056:17:2056:23">length</jtok>
<jtok eid="69" type="primary_name_ref" span="2056:32:2056:38">result</jtok>
<jtok eid="69" type="string_literal" span="2056:41:2056:43">""</jtok>
<jtok eid="1" type="block_comment" span="2059:2:2074:5">/**
	 * Warns the user of undesired side effects of an explicit
	 * assignment/removal of entries to/from this group. Currently there are
	 * four types of groups: AllEntriesGroup, SearchGroup - do not support
	 * explicit assignment. ExplicitGroup - never modifies entries. KeywordGroup -
	 * only this modifies entries upon assignment/removal. Modifications are
	 * acceptable unless they affect a standard field (such as "author") besides
	 * the "keywords" field.
	 * 
	 * @param parent
	 *            The Component used as a parent when displaying a confirmation
	 *            dialog.
	 * @return true if the assignment has no undesired side effects, or the user
	 *         chose to perform it anyway. false otherwise (this indicates that
	 *         the user has aborted the assignment).
	 */</jtok>
<jtok eid="70" type="method_name" span="2075:24:2075:49">warnAssignmentSideEffects</jtok>
<jtok eid="70" type="parameter_type" span="2075:50:2075:63">AbstractGroup</jtok>
<jtok eid="70" type="parameter_name" span="2075:66:2075:72">groups</jtok>
<jtok eid="70" type="parameter_type" span="2075:74:2075:85">BibtexEntry</jtok>
<jtok eid="70" type="parameter_name" span="2075:88:2075:95">entries</jtok>
<jtok eid="70" type="parameter_type" span="2076:3:2076:17">BibtexDatabase</jtok>
<jtok eid="70" type="parameter_name" span="2076:18:2076:20">db</jtok>
<jtok eid="70" type="parameter_type" span="2076:22:2076:31">Component</jtok>
<jtok eid="70" type="parameter_name" span="2076:32:2076:38">parent</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2077:3:2077:9">Vector</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2077:10:2077:16">String</jtok>
<jtok eid="70" type="local_variable_name" span="2077:18:2077:32">affectedFields</jtok>
<jtok eid="70" type="constructor_call" span="2077:39:2077:45">Vector</jtok>
<jtok eid="70" type="constructor_call" span="2077:46:2077:52">String</jtok>
<jtok eid="70" type="local_variable_name" span="2078:12:2078:13">k</jtok>
<jtok eid="70" type="primary_name_ref" span="2078:19:2078:20">k</jtok>
<jtok eid="70" type="primary_name_ref" span="2078:23:2078:29">groups</jtok>
<jtok eid="70" type="qualified_name_ref" span="2078:30:2078:36">length</jtok>
<jtok eid="70" type="primary_name_ref" span="2078:40:2078:41">k</jtok>
<jtok eid="70" type="primary_name_ref" span="2079:8:2079:14">groups</jtok>
<jtok eid="70" type="primary_name_ref" span="2079:15:2079:16">k</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2079:29:2079:41">KeywordGroup</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2080:5:2080:17">KeywordGroup</jtok>
<jtok eid="70" type="local_variable_name" span="2080:18:2080:20">kg</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2080:24:2080:36">KeywordGroup</jtok>
<jtok eid="70" type="primary_name_ref" span="2080:38:2080:44">groups</jtok>
<jtok eid="70" type="primary_name_ref" span="2080:45:2080:46">k</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2081:5:2081:11">String</jtok>
<jtok eid="70" type="local_variable_name" span="2081:12:2081:17">field</jtok>
<jtok eid="70" type="primary_name_ref" span="2081:20:2081:22">kg</jtok>
<jtok eid="70" type="method_call" span="2081:23:2081:37">getSearchField</jtok>
<jtok eid="70" type="method_call" span="2081:40:2081:51">toLowerCase</jtok>
<jtok eid="70" type="primary_name_ref" span="2082:9:2082:14">field</jtok>
<jtok eid="70" type="method_call" span="2082:15:2082:21">equals</jtok>
<jtok eid="70" type="string_literal" span="2082:22:2082:32">"keywords"</jtok>
<jtok eid="70" type="line_comment" span="2083:16:2083:40">// this is not undesired</jtok>
<jtok eid="70" type="local_variable_name" span="2084:14:2084:15">i</jtok>
<jtok eid="70" type="local_variable_name" span="2084:21:2084:24">len</jtok>
<jtok eid="70" type="primary_name_ref" span="2084:27:2084:39">BibtexFields</jtok>
<jtok eid="70" type="method_call" span="2084:40:2084:60">numberOfPublicFields</jtok>
<jtok eid="70" type="primary_name_ref" span="2084:64:2084:65">i</jtok>
<jtok eid="70" type="primary_name_ref" span="2084:68:2084:71">len</jtok>
<jtok eid="70" type="primary_name_ref" span="2084:75:2084:76">i</jtok>
<jtok eid="70" type="primary_name_ref" span="2085:10:2085:15">field</jtok>
<jtok eid="70" type="method_call" span="2085:16:2085:22">equals</jtok>
<jtok eid="70" type="primary_name_ref" span="2085:23:2085:35">BibtexFields</jtok>
<jtok eid="70" type="method_call" span="2085:36:2085:48">getFieldName</jtok>
<jtok eid="70" type="primary_name_ref" span="2085:49:2085:50">i</jtok>
<jtok eid="70" type="primary_name_ref" span="2086:7:2086:21">affectedFields</jtok>
<jtok eid="70" type="method_call" span="2086:22:2086:25">add</jtok>
<jtok eid="70" type="primary_name_ref" span="2086:26:2086:31">field</jtok>
<jtok eid="70" type="primary_name_ref" span="2092:7:2092:21">affectedFields</jtok>
<jtok eid="70" type="method_call" span="2092:22:2092:26">size</jtok>
<jtok eid="70" type="line_comment" span="2093:17:2093:35">// no side effects</jtok>
<jtok eid="70" type="line_comment" span="2095:3:2095:33">// show a warning, then return</jtok>
<jtok eid="70" type="class_or_interface_ref" span="2096:3:2096:15">StringBuffer</jtok>
<jtok eid="70" type="local_variable_name" span="2096:16:2096:23">message</jtok>
<jtok eid="70" type="line_comment" span="2096:26:2096:45">// JZTODO lyrics...</jtok>
<jtok eid="70" type="constructor_call" span="2097:7:2097:19">StringBuffer</jtok>
<jtok eid="70" type="string_literal" span="2097:20:2097:70">"This action will modify the following field(s)\n"</jtok>
<jtok eid="70" type="string_literal" span="2098:6:2098:37">"in at least one entry each:\n"</jtok>
<jtok eid="70" type="local_variable_name" span="2099:12:2099:13">i</jtok>
<jtok eid="70" type="primary_name_ref" span="2099:19:2099:20">i</jtok>
<jtok eid="70" type="primary_name_ref" span="2099:23:2099:37">affectedFields</jtok>
<jtok eid="70" type="method_call" span="2099:38:2099:42">size</jtok>
<jtok eid="70" type="primary_name_ref" span="2099:48:2099:49">i</jtok>
<jtok eid="70" type="primary_name_ref" span="2100:4:2100:11">message</jtok>
<jtok eid="70" type="method_call" span="2100:12:2100:18">append</jtok>
<jtok eid="70" type="primary_name_ref" span="2100:19:2100:33">affectedFields</jtok>
<jtok eid="70" type="method_call" span="2100:34:2100:43">elementAt</jtok>
<jtok eid="70" type="primary_name_ref" span="2100:44:2100:45">i</jtok>
<jtok eid="70" type="method_call" span="2100:48:2100:54">append</jtok>
<jtok eid="70" type="string_literal" span="2100:55:2100:59">"\n"</jtok>
<jtok eid="70" type="primary_name_ref" span="2101:3:2101:10">message</jtok>
<jtok eid="70" type="method_call" span="2101:11:2101:17">append</jtok>
<jtok eid="70" type="string_literal" span="2101:18:2101:58">"This could cause undesired changes to "</jtok>
<jtok eid="70" type="string_literal" span="2102:6:2102:79">"your entries, so it is\nrecommended that you change the grouping field "</jtok>
<jtok eid="70" type="string_literal" span="2103:6:2103:73">"in your group\ndefinition to \"keywords\" or a non-standard name."</jtok>
<jtok eid="70" type="string_literal" span="2104:6:2104:42">"\n\nDo you still want to continue?"</jtok>
<jtok eid="70" type="local_variable_name" span="2105:7:2105:13">choice</jtok>
<jtok eid="70" type="primary_name_ref" span="2105:16:2105:27">JOptionPane</jtok>
<jtok eid="70" type="method_call" span="2105:28:2105:45">showConfirmDialog</jtok>
<jtok eid="70" type="primary_name_ref" span="2105:46:2105:52">parent</jtok>
<jtok eid="70" type="primary_name_ref" span="2105:54:2105:61">message</jtok>
<jtok eid="70" type="primary_name_ref" span="2105:63:2105:70">Globals</jtok>
<jtok eid="70" type="method_call" span="2105:71:2105:75">lang</jtok>
<jtok eid="70" type="string_literal" span="2105:76:2105:85">"Warning"</jtok>
<jtok eid="70" type="primary_name_ref" span="2106:4:2106:15">JOptionPane</jtok>
<jtok eid="70" type="qualified_name_ref" span="2106:16:2106:29">YES_NO_OPTION</jtok>
<jtok eid="70" type="primary_name_ref" span="2106:31:2106:42">JOptionPane</jtok>
<jtok eid="70" type="qualified_name_ref" span="2106:43:2106:58">WARNING_MESSAGE</jtok>
<jtok eid="70" type="primary_name_ref" span="2107:10:2107:16">choice</jtok>
<jtok eid="70" type="primary_name_ref" span="2107:20:2107:31">JOptionPane</jtok>
<jtok eid="70" type="qualified_name_ref" span="2107:32:2107:41">NO_OPTION</jtok>
<jtok eid="70" type="line_comment" span="2109:3:2109:43">// if (groups instanceof KeywordGroup) {</jtok>
<jtok eid="70" type="line_comment" span="2110:3:2110:46">// KeywordGroup kg = (KeywordGroup) groups;</jtok>
<jtok eid="70" type="line_comment" span="2111:3:2111:55">// String field = kg.getSearchField().toLowerCase();</jtok>
<jtok eid="70" type="line_comment" span="2112:3:2112:35">// if (field.equals("keywords"))</jtok>
<jtok eid="70" type="line_comment" span="2113:3:2113:43">// return true; // this is not undesired</jtok>
<jtok eid="70" type="line_comment" span="2114:3:2114:62">// for (int i = 0; i &lt; GUIGlobals.ALL_FIELDS.length; ++i) {</jtok>
<jtok eid="70" type="line_comment" span="2115:3:2115:51">// if (field.equals(GUIGlobals.ALL_FIELDS[i])) {</jtok>
<jtok eid="70" type="line_comment" span="2116:3:2116:36">// // show a warning, then return</jtok>
<jtok eid="70" type="line_comment" span="2117:3:2117:50">// String message = Globals // JZTODO lyrics...</jtok>
<jtok eid="70" type="line_comment" span="2118:3:2118:12">// .lang(</jtok>
<jtok eid="70" type="line_comment" span="2119:3:2119:49">// "This action will modify the \"%0\" field "</jtok>
<jtok eid="70" type="line_comment" span="2120:3:2120:66">// + "of your entries.\nThis could cause undesired changes to "</jtok>
<jtok eid="70" type="line_comment" span="2121:3:2121:73">// + "your entries, so it is\nrecommended that you change the grouping</jtok>
<jtok eid="70" type="line_comment" span="2122:3:2122:13">// field "</jtok>
<jtok eid="70" type="line_comment" span="2123:3:2123:75">// + "in your group\ndefinition to \"keywords\" or a non-standard name."</jtok>
<jtok eid="70" type="line_comment" span="2124:3:2124:45">// + "\n\nDo you still want to continue?",</jtok>
<jtok eid="70" type="line_comment" span="2125:3:2125:13">// field);</jtok>
<jtok eid="70" type="line_comment" span="2126:3:2126:65">// int choice = JOptionPane.showConfirmDialog(parent, message,</jtok>
<jtok eid="70" type="line_comment" span="2127:3:2127:57">// Globals.lang("Warning"), JOptionPane.YES_NO_OPTION,</jtok>
<jtok eid="70" type="line_comment" span="2128:3:2128:35">// JOptionPane.WARNING_MESSAGE);</jtok>
<jtok eid="70" type="line_comment" span="2129:3:2129:45">// return choice != JOptionPane.NO_OPTION;</jtok>
<jtok eid="70" type="line_comment" span="2130:3:2130:7">// }</jtok>
<jtok eid="70" type="line_comment" span="2131:3:2131:7">// }</jtok>
<jtok eid="70" type="line_comment" span="2132:3:2132:7">// }</jtok>
<jtok eid="70" type="line_comment" span="2133:3:2133:43">// return true; // found no side effects</jtok>
<jtok eid="1" type="line_comment" span="2136:2:2136:61">// ========================================================</jtok>
<jtok eid="1" type="line_comment" span="2137:2:2137:35">// lot of abreviations in medline</jtok>
<jtok eid="1" type="line_comment" span="2138:2:2138:33">// PKC etc convert to {PKC} ...</jtok>
<jtok eid="1" type="line_comment" span="2139:2:2139:61">// ========================================================</jtok>
<jtok eid="1" type="class_or_interface_ref" span="2140:9:2140:16">Pattern</jtok>
<jtok eid="1" type="field_name" span="2140:17:2140:36">titleCapitalPattern</jtok>
<jtok eid="1" type="primary_name_ref" span="2140:39:2140:46">Pattern</jtok>
<jtok eid="1" type="method_call" span="2140:47:2140:54">compile</jtok>
<jtok eid="1" type="string_literal" span="2140:55:2140:63">"[A-Z]+"</jtok>
<jtok eid="1" type="block_comment" span="2142:2:2150:5">/**
	 * Wrap all uppercase letters, or sequences of uppercase letters, in curly
	 * braces. Ignore letters within a pair of # character, as these are part of
	 * a string label that should not be modified.
	 * 
	 * @param s
	 *            The string to modify.
	 * @return The resulting string after wrapping capitals.
	 */</jtok>
<jtok eid="71" type="class_or_interface_ref" span="2151:16:2151:22">String</jtok>
<jtok eid="71" type="method_name" span="2151:23:2151:46">putBracesAroundCapitals</jtok>
<jtok eid="71" type="parameter_type" span="2151:47:2151:53">String</jtok>
<jtok eid="71" type="parameter_name" span="2151:54:2151:55">s</jtok>
<jtok eid="71" type="local_variable_name" span="2153:11:2153:19">inString</jtok>
<jtok eid="71" type="local_variable_name" span="2153:29:2153:38">isBracing</jtok>
<jtok eid="71" type="local_variable_name" span="2153:48:2153:55">escaped</jtok>
<jtok eid="71" type="local_variable_name" span="2154:7:2154:14">inBrace</jtok>
<jtok eid="71" type="class_or_interface_ref" span="2155:3:2155:15">StringBuffer</jtok>
<jtok eid="71" type="local_variable_name" span="2155:16:2155:19">buf</jtok>
<jtok eid="71" type="constructor_call" span="2155:26:2155:38">StringBuffer</jtok>
<jtok eid="71" type="local_variable_name" span="2156:12:2156:13">i</jtok>
<jtok eid="71" type="primary_name_ref" span="2156:19:2156:20">i</jtok>
<jtok eid="71" type="primary_name_ref" span="2156:23:2156:24">s</jtok>
<jtok eid="71" type="method_call" span="2156:25:2156:31">length</jtok>
<jtok eid="71" type="primary_name_ref" span="2156:35:2156:36">i</jtok>
<jtok eid="71" type="line_comment" span="2157:4:2157:52">// Update variables based on special characters:</jtok>
<jtok eid="71" type="local_variable_name" span="2158:8:2158:9">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2158:12:2158:13">s</jtok>
<jtok eid="71" type="method_call" span="2158:14:2158:20">charAt</jtok>
<jtok eid="71" type="primary_name_ref" span="2158:21:2158:22">i</jtok>
<jtok eid="71" type="primary_name_ref" span="2159:8:2159:9">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2160:5:2160:12">inBrace</jtok>
<jtok eid="71" type="primary_name_ref" span="2161:13:2161:14">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2162:5:2162:12">inBrace</jtok>
<jtok eid="71" type="primary_name_ref" span="2163:14:2163:21">escaped</jtok>
<jtok eid="71" type="primary_name_ref" span="2163:26:2163:27">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2164:5:2164:13">inString</jtok>
<jtok eid="71" type="primary_name_ref" span="2164:17:2164:25">inString</jtok>
<jtok eid="71" type="line_comment" span="2166:4:2166:38">// See if we should start bracing:</jtok>
<jtok eid="71" type="primary_name_ref" span="2167:9:2167:16">inBrace</jtok>
<jtok eid="71" type="primary_name_ref" span="2167:27:2167:36">isBracing</jtok>
<jtok eid="71" type="primary_name_ref" span="2167:41:2167:49">inString</jtok>
<jtok eid="71" type="primary_name_ref" span="2167:53:2167:62">Character</jtok>
<jtok eid="71" type="method_call" span="2167:63:2167:71">isLetter</jtok>
<jtok eid="71" type="primary_name_ref" span="2167:79:2167:80">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2168:8:2168:17">Character</jtok>
<jtok eid="71" type="method_call" span="2168:18:2168:29">isUpperCase</jtok>
<jtok eid="71" type="primary_name_ref" span="2168:37:2168:38">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2170:5:2170:8">buf</jtok>
<jtok eid="71" type="method_call" span="2170:9:2170:15">append</jtok>
<jtok eid="71" type="primary_name_ref" span="2171:5:2171:14">isBracing</jtok>
<jtok eid="71" type="line_comment" span="2174:4:2174:42">// See if we should close a brace set:</jtok>
<jtok eid="71" type="primary_name_ref" span="2175:8:2175:17">isBracing</jtok>
<jtok eid="71" type="primary_name_ref" span="2175:23:2175:32">Character</jtok>
<jtok eid="71" type="method_call" span="2175:33:2175:41">isLetter</jtok>
<jtok eid="71" type="primary_name_ref" span="2175:49:2175:50">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2175:55:2175:64">Character</jtok>
<jtok eid="71" type="method_call" span="2175:65:2175:76">isUpperCase</jtok>
<jtok eid="71" type="primary_name_ref" span="2175:84:2175:85">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2177:5:2177:8">buf</jtok>
<jtok eid="71" type="method_call" span="2177:9:2177:15">append</jtok>
<jtok eid="71" type="primary_name_ref" span="2178:5:2178:14">isBracing</jtok>
<jtok eid="71" type="line_comment" span="2181:4:2181:33">// Add the current character:</jtok>
<jtok eid="71" type="primary_name_ref" span="2182:4:2182:7">buf</jtok>
<jtok eid="71" type="method_call" span="2182:8:2182:14">append</jtok>
<jtok eid="71" type="primary_name_ref" span="2182:22:2182:23">c</jtok>
<jtok eid="71" type="line_comment" span="2184:4:2184:51">// Check if we are entering an escape sequence:</jtok>
<jtok eid="71" type="primary_name_ref" span="2185:9:2185:10">c</jtok>
<jtok eid="71" type="primary_name_ref" span="2185:24:2185:31">escaped</jtok>
<jtok eid="71" type="primary_name_ref" span="2186:5:2186:12">escaped</jtok>
<jtok eid="71" type="primary_name_ref" span="2188:5:2188:12">escaped</jtok>
<jtok eid="71" type="line_comment" span="2191:3:2191:41">// Check if we have an unclosed brace:</jtok>
<jtok eid="71" type="primary_name_ref" span="2192:7:2192:16">isBracing</jtok>
<jtok eid="71" type="primary_name_ref" span="2193:4:2193:7">buf</jtok>
<jtok eid="71" type="method_call" span="2193:8:2193:14">append</jtok>
<jtok eid="71" type="primary_name_ref" span="2195:10:2195:13">buf</jtok>
<jtok eid="71" type="method_call" span="2195:14:2195:22">toString</jtok>
<jtok eid="71" type="block_comment" span="2197:3:2205:6">/*
		 * if (s.length() == 0) return s; // Protect against ArrayIndexOutOf....
		 * StringBuffer buf = new StringBuffer();
		 * 
		 * Matcher mcr = titleCapitalPattern.matcher(s.substring(1)); while
		 * (mcr.find()) { String replaceStr = mcr.group();
		 * mcr.appendReplacement(buf, "{" + replaceStr + "}"); }
		 * mcr.appendTail(buf); return s.substring(0, 1) + buf.toString();
		 */</jtok>
<jtok eid="1" type="class_or_interface_ref" span="2208:9:2208:16">Pattern</jtok>
<jtok eid="1" type="field_name" span="2208:17:2208:42">bracedTitleCapitalPattern</jtok>
<jtok eid="1" type="primary_name_ref" span="2208:45:2208:52">Pattern</jtok>
<jtok eid="1" type="method_call" span="2208:53:2208:60">compile</jtok>
<jtok eid="1" type="string_literal" span="2208:61:2208:75">"\\{[A-Z]+\\}"</jtok>
<jtok eid="1" type="block_comment" span="2210:2:2218:5">/**
	 * This method looks for occurences of capital letters enclosed in an
	 * arbitrary number of pairs of braces, e.g. "{AB}" or "{{T}}". All of these
	 * pairs of braces are removed.
	 * 
	 * @param s
	 *            The String to analyze.
	 * @return A new String with braces removed.
	 */</jtok>
<jtok eid="72" type="class_or_interface_ref" span="2219:16:2219:22">String</jtok>
<jtok eid="72" type="method_name" span="2219:23:2219:49">removeBracesAroundCapitals</jtok>
<jtok eid="72" type="parameter_type" span="2219:50:2219:56">String</jtok>
<jtok eid="72" type="parameter_name" span="2219:57:2219:58">s</jtok>
<jtok eid="72" type="class_or_interface_ref" span="2220:3:2220:9">String</jtok>
<jtok eid="72" type="local_variable_name" span="2220:10:2220:18">previous</jtok>
<jtok eid="72" type="primary_name_ref" span="2220:21:2220:22">s</jtok>
<jtok eid="72" type="primary_name_ref" span="2221:11:2221:12">s</jtok>
<jtok eid="72" type="method_call" span="2221:15:2221:47">removeSingleBracesAroundCapitals</jtok>
<jtok eid="72" type="primary_name_ref" span="2221:48:2221:49">s</jtok>
<jtok eid="72" type="method_call" span="2221:52:2221:58">length</jtok>
<jtok eid="72" type="primary_name_ref" span="2221:63:2221:71">previous</jtok>
<jtok eid="72" type="method_call" span="2221:72:2221:78">length</jtok>
<jtok eid="72" type="primary_name_ref" span="2222:4:2222:12">previous</jtok>
<jtok eid="72" type="primary_name_ref" span="2222:15:2222:16">s</jtok>
<jtok eid="72" type="primary_name_ref" span="2224:10:2224:11">s</jtok>
<jtok eid="1" type="block_comment" span="2227:2:2235:5">/**
	 * This method looks for occurences of capital letters enclosed in one pair
	 * of braces, e.g. "{AB}". All these are replaced by only the capitals in
	 * between the braces.
	 * 
	 * @param s
	 *            The String to analyze.
	 * @return A new String with braces removed.
	 */</jtok>
<jtok eid="73" type="class_or_interface_ref" span="2236:16:2236:22">String</jtok>
<jtok eid="73" type="method_name" span="2236:23:2236:55">removeSingleBracesAroundCapitals</jtok>
<jtok eid="73" type="parameter_type" span="2236:56:2236:62">String</jtok>
<jtok eid="73" type="parameter_name" span="2236:63:2236:64">s</jtok>
<jtok eid="73" type="class_or_interface_ref" span="2237:3:2237:10">Matcher</jtok>
<jtok eid="73" type="local_variable_name" span="2237:11:2237:14">mcr</jtok>
<jtok eid="73" type="primary_name_ref" span="2237:17:2237:42">bracedTitleCapitalPattern</jtok>
<jtok eid="73" type="method_call" span="2237:43:2237:50">matcher</jtok>
<jtok eid="73" type="primary_name_ref" span="2237:51:2237:52">s</jtok>
<jtok eid="73" type="class_or_interface_ref" span="2238:3:2238:15">StringBuffer</jtok>
<jtok eid="73" type="local_variable_name" span="2238:16:2238:19">buf</jtok>
<jtok eid="73" type="constructor_call" span="2238:26:2238:38">StringBuffer</jtok>
<jtok eid="73" type="primary_name_ref" span="2239:10:2239:13">mcr</jtok>
<jtok eid="73" type="method_call" span="2239:14:2239:18">find</jtok>
<jtok eid="73" type="class_or_interface_ref" span="2240:4:2240:10">String</jtok>
<jtok eid="73" type="local_variable_name" span="2240:11:2240:21">replaceStr</jtok>
<jtok eid="73" type="primary_name_ref" span="2240:24:2240:27">mcr</jtok>
<jtok eid="73" type="method_call" span="2240:28:2240:33">group</jtok>
<jtok eid="73" type="primary_name_ref" span="2241:4:2241:7">mcr</jtok>
<jtok eid="73" type="method_call" span="2241:8:2241:25">appendReplacement</jtok>
<jtok eid="73" type="primary_name_ref" span="2241:26:2241:29">buf</jtok>
<jtok eid="73" type="primary_name_ref" span="2241:31:2241:41">replaceStr</jtok>
<jtok eid="73" type="method_call" span="2241:42:2241:51">substring</jtok>
<jtok eid="73" type="primary_name_ref" span="2241:55:2241:65">replaceStr</jtok>
<jtok eid="73" type="method_call" span="2241:66:2241:72">length</jtok>
<jtok eid="73" type="primary_name_ref" span="2243:3:2243:6">mcr</jtok>
<jtok eid="73" type="method_call" span="2243:7:2243:17">appendTail</jtok>
<jtok eid="73" type="primary_name_ref" span="2243:18:2243:21">buf</jtok>
<jtok eid="73" type="primary_name_ref" span="2244:10:2244:13">buf</jtok>
<jtok eid="73" type="method_call" span="2244:14:2244:22">toString</jtok>
<jtok eid="1" type="block_comment" span="2247:2:2255:5">/**
	 * This method looks up what kind of external binding is used for the given
	 * field, and constructs on OpenFileFilter suitable for browsing for an
	 * external file.
	 * 
	 * @param fieldName
	 *            The BibTeX field in question.
	 * @return The file filter.
	 */</jtok>
<jtok eid="74" type="class_or_interface_ref" span="2256:16:2256:30">OpenFileFilter</jtok>
<jtok eid="74" type="method_name" span="2256:31:2256:52">getFileFilterForField</jtok>
<jtok eid="74" type="parameter_type" span="2256:53:2256:59">String</jtok>
<jtok eid="74" type="parameter_name" span="2256:60:2256:69">fieldName</jtok>
<jtok eid="74" type="class_or_interface_ref" span="2257:3:2257:9">String</jtok>
<jtok eid="74" type="local_variable_name" span="2257:10:2257:11">s</jtok>
<jtok eid="74" type="primary_name_ref" span="2257:14:2257:26">BibtexFields</jtok>
<jtok eid="74" type="method_call" span="2257:27:2257:41">getFieldExtras</jtok>
<jtok eid="74" type="primary_name_ref" span="2257:42:2257:51">fieldName</jtok>
<jtok eid="74" type="class_or_interface_ref" span="2258:9:2258:15">String</jtok>
<jtok eid="74" type="local_variable_name" span="2258:16:2258:19">ext</jtok>
<jtok eid="74" type="string_literal" span="2258:22:2258:25">"."</jtok>
<jtok eid="74" type="primary_name_ref" span="2258:28:2258:37">fieldName</jtok>
<jtok eid="74" type="method_call" span="2258:38:2258:49">toLowerCase</jtok>
<jtok eid="74" type="class_or_interface_ref" span="2259:9:2259:23">OpenFileFilter</jtok>
<jtok eid="74" type="local_variable_name" span="2259:24:2259:27">off</jtok>
<jtok eid="74" type="primary_name_ref" span="2260:7:2260:8">s</jtok>
<jtok eid="74" type="method_call" span="2260:9:2260:15">equals</jtok>
<jtok eid="74" type="string_literal" span="2260:16:2260:30">"browseDocZip"</jtok>
<jtok eid="74" type="primary_name_ref" span="2261:4:2261:7">off</jtok>
<jtok eid="74" type="constructor_call" span="2261:14:2261:28">OpenFileFilter</jtok>
<jtok eid="74" type="constructor_call" span="2261:33:2261:39">String</jtok>
<jtok eid="74" type="primary_name_ref" span="2261:44:2261:47">ext</jtok>
<jtok eid="74" type="primary_name_ref" span="2261:49:2261:52">ext</jtok>
<jtok eid="74" type="string_literal" span="2261:55:2261:60">".gz"</jtok>
<jtok eid="74" type="primary_name_ref" span="2261:62:2261:65">ext</jtok>
<jtok eid="74" type="string_literal" span="2261:68:2261:74">".bz2"</jtok>
<jtok eid="74" type="primary_name_ref" span="2263:4:2263:7">off</jtok>
<jtok eid="74" type="constructor_call" span="2263:14:2263:28">OpenFileFilter</jtok>
<jtok eid="74" type="constructor_call" span="2263:33:2263:39">String</jtok>
<jtok eid="74" type="primary_name_ref" span="2263:44:2263:47">ext</jtok>
<jtok eid="74" type="primary_name_ref" span="2264:10:2264:13">off</jtok>
<jtok eid="1" type="block_comment" span="2267:2:2273:5">/**
	 * This method can be used to display a "rich" error dialog which offers the
	 * entire stack trace for an exception.
	 * 
	 * @param parent
	 * @param e
	 */</jtok>
<jtok eid="75" type="method_name" span="2274:21:2274:41">showQuickErrorDialog</jtok>
<jtok eid="75" type="parameter_type" span="2274:42:2274:48">JFrame</jtok>
<jtok eid="75" type="parameter_name" span="2274:49:2274:55">parent</jtok>
<jtok eid="75" type="parameter_type" span="2274:57:2274:63">String</jtok>
<jtok eid="75" type="parameter_name" span="2274:64:2274:69">title</jtok>
<jtok eid="75" type="parameter_type" span="2274:71:2274:80">Exception</jtok>
<jtok eid="75" type="parameter_name" span="2274:81:2274:82">e</jtok>
<jtok eid="75" type="line_comment" span="2275:3:2275:69">// create and configure a text area - fill it with exception text.</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2276:9:2276:15">JPanel</jtok>
<jtok eid="75" type="local_variable_name" span="2276:16:2276:19">pan</jtok>
<jtok eid="75" type="constructor_call" span="2276:26:2276:32">JPanel</jtok>
<jtok eid="75" type="local_variable_name" span="2276:36:2276:43">details</jtok>
<jtok eid="75" type="constructor_call" span="2276:50:2276:56">JPanel</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2277:9:2277:19">CardLayout</jtok>
<jtok eid="75" type="local_variable_name" span="2277:20:2277:23">crd</jtok>
<jtok eid="75" type="constructor_call" span="2277:30:2277:40">CardLayout</jtok>
<jtok eid="75" type="primary_name_ref" span="2278:3:2278:6">pan</jtok>
<jtok eid="75" type="method_call" span="2278:7:2278:16">setLayout</jtok>
<jtok eid="75" type="primary_name_ref" span="2278:17:2278:20">crd</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2279:9:2279:18">JTextArea</jtok>
<jtok eid="75" type="local_variable_name" span="2279:19:2279:27">textArea</jtok>
<jtok eid="75" type="constructor_call" span="2279:34:2279:43">JTextArea</jtok>
<jtok eid="75" type="primary_name_ref" span="2280:3:2280:11">textArea</jtok>
<jtok eid="75" type="method_call" span="2280:12:2280:19">setFont</jtok>
<jtok eid="75" type="constructor_call" span="2280:24:2280:28">Font</jtok>
<jtok eid="75" type="string_literal" span="2280:29:2280:41">"Sans-Serif"</jtok>
<jtok eid="75" type="primary_name_ref" span="2280:43:2280:47">Font</jtok>
<jtok eid="75" type="qualified_name_ref" span="2280:48:2280:53">PLAIN</jtok>
<jtok eid="75" type="primary_name_ref" span="2281:3:2281:11">textArea</jtok>
<jtok eid="75" type="method_call" span="2281:12:2281:23">setEditable</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2282:3:2282:15">StringWriter</jtok>
<jtok eid="75" type="local_variable_name" span="2282:16:2282:22">writer</jtok>
<jtok eid="75" type="constructor_call" span="2282:29:2282:41">StringWriter</jtok>
<jtok eid="75" type="primary_name_ref" span="2283:3:2283:4">e</jtok>
<jtok eid="75" type="method_call" span="2283:5:2283:20">printStackTrace</jtok>
<jtok eid="75" type="constructor_call" span="2283:25:2283:36">PrintWriter</jtok>
<jtok eid="75" type="primary_name_ref" span="2283:37:2283:43">writer</jtok>
<jtok eid="75" type="primary_name_ref" span="2284:3:2284:11">textArea</jtok>
<jtok eid="75" type="method_call" span="2284:12:2284:19">setText</jtok>
<jtok eid="75" type="primary_name_ref" span="2284:20:2284:26">writer</jtok>
<jtok eid="75" type="method_call" span="2284:27:2284:35">toString</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2285:3:2285:9">JLabel</jtok>
<jtok eid="75" type="local_variable_name" span="2285:10:2285:13">lab</jtok>
<jtok eid="75" type="constructor_call" span="2285:20:2285:26">JLabel</jtok>
<jtok eid="75" type="primary_name_ref" span="2285:27:2285:28">e</jtok>
<jtok eid="75" type="method_call" span="2285:29:2285:39">getMessage</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2286:3:2286:10">JButton</jtok>
<jtok eid="75" type="local_variable_name" span="2286:11:2286:15">flip</jtok>
<jtok eid="75" type="constructor_call" span="2286:22:2286:29">JButton</jtok>
<jtok eid="75" type="primary_name_ref" span="2286:30:2286:37">Globals</jtok>
<jtok eid="75" type="method_call" span="2286:38:2286:42">lang</jtok>
<jtok eid="75" type="string_literal" span="2286:43:2286:52">"Details"</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2288:3:2288:13">FormLayout</jtok>
<jtok eid="75" type="local_variable_name" span="2288:14:2288:20">layout</jtok>
<jtok eid="75" type="constructor_call" span="2288:27:2288:37">FormLayout</jtok>
<jtok eid="75" type="string_literal" span="2288:38:2288:49">"left:pref"</jtok>
<jtok eid="75" type="string_literal" span="2288:51:2288:53">""</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2289:3:2289:21">DefaultFormBuilder</jtok>
<jtok eid="75" type="local_variable_name" span="2289:22:2289:29">builder</jtok>
<jtok eid="75" type="constructor_call" span="2289:36:2289:54">DefaultFormBuilder</jtok>
<jtok eid="75" type="primary_name_ref" span="2289:55:2289:61">layout</jtok>
<jtok eid="75" type="primary_name_ref" span="2290:3:2290:10">builder</jtok>
<jtok eid="75" type="method_call" span="2290:11:2290:17">append</jtok>
<jtok eid="75" type="primary_name_ref" span="2290:18:2290:21">lab</jtok>
<jtok eid="75" type="primary_name_ref" span="2291:3:2291:10">builder</jtok>
<jtok eid="75" type="method_call" span="2291:11:2291:19">nextLine</jtok>
<jtok eid="75" type="primary_name_ref" span="2292:3:2292:10">builder</jtok>
<jtok eid="75" type="method_call" span="2292:11:2292:17">append</jtok>
<jtok eid="75" type="primary_name_ref" span="2292:18:2292:21">Box</jtok>
<jtok eid="75" type="method_call" span="2292:22:2292:40">createVerticalGlue</jtok>
<jtok eid="75" type="primary_name_ref" span="2293:3:2293:10">builder</jtok>
<jtok eid="75" type="method_call" span="2293:11:2293:19">nextLine</jtok>
<jtok eid="75" type="primary_name_ref" span="2294:3:2294:10">builder</jtok>
<jtok eid="75" type="method_call" span="2294:11:2294:17">append</jtok>
<jtok eid="75" type="primary_name_ref" span="2294:18:2294:22">flip</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2295:9:2295:15">JPanel</jtok>
<jtok eid="75" type="local_variable_name" span="2295:16:2295:22">simple</jtok>
<jtok eid="75" type="primary_name_ref" span="2295:25:2295:32">builder</jtok>
<jtok eid="75" type="method_call" span="2295:33:2295:41">getPanel</jtok>
<jtok eid="75" type="line_comment" span="2297:3:2297:54">// stuff it in a scrollpane with a controlled size.</jtok>
<jtok eid="75" type="class_or_interface_ref" span="2298:3:2298:14">JScrollPane</jtok>
<jtok eid="75" type="local_variable_name" span="2298:15:2298:25">scrollPane</jtok>
<jtok eid="75" type="constructor_call" span="2298:32:2298:43">JScrollPane</jtok>
<jtok eid="75" type="primary_name_ref" span="2298:44:2298:52">textArea</jtok>
<jtok eid="75" type="primary_name_ref" span="2299:3:2299:13">scrollPane</jtok>
<jtok eid="75" type="method_call" span="2299:14:2299:30">setPreferredSize</jtok>
<jtok eid="75" type="constructor_call" span="2299:35:2299:44">Dimension</jtok>
<jtok eid="75" type="primary_name_ref" span="2300:3:2300:10">details</jtok>
<jtok eid="75" type="method_call" span="2300:11:2300:20">setLayout</jtok>
<jtok eid="75" type="constructor_call" span="2300:25:2300:37">BorderLayout</jtok>
<jtok eid="75" type="primary_name_ref" span="2301:3:2301:10">details</jtok>
<jtok eid="75" type="method_call" span="2301:11:2301:14">add</jtok>
<jtok eid="75" type="primary_name_ref" span="2301:15:2301:25">scrollPane</jtok>
<jtok eid="75" type="primary_name_ref" span="2301:27:2301:39">BorderLayout</jtok>
<jtok eid="75" type="qualified_name_ref" span="2301:40:2301:46">CENTER</jtok>
<jtok eid="75" type="primary_name_ref" span="2303:3:2303:7">flip</jtok>
<jtok eid="75" type="method_call" span="2303:8:2303:25">addActionListener</jtok>
<jtok eid="75" type="constructor_call" span="2303:30:2303:44">ActionListener</jtok>
<jtok eid="77" type="method_name" span="2304:16:2304:31">actionPerformed</jtok>
<jtok eid="77" type="parameter_type" span="2304:32:2304:43">ActionEvent</jtok>
<jtok eid="77" type="parameter_name" span="2304:44:2304:49">event</jtok>
<jtok eid="77" type="primary_name_ref" span="2305:5:2305:8">crd</jtok>
<jtok eid="77" type="method_call" span="2305:9:2305:13">show</jtok>
<jtok eid="77" type="primary_name_ref" span="2305:14:2305:17">pan</jtok>
<jtok eid="77" type="string_literal" span="2305:19:2305:28">"details"</jtok>
<jtok eid="75" type="primary_name_ref" span="2308:3:2308:6">pan</jtok>
<jtok eid="75" type="method_call" span="2308:7:2308:10">add</jtok>
<jtok eid="75" type="primary_name_ref" span="2308:11:2308:17">simple</jtok>
<jtok eid="75" type="string_literal" span="2308:19:2308:27">"simple"</jtok>
<jtok eid="75" type="primary_name_ref" span="2309:3:2309:6">pan</jtok>
<jtok eid="75" type="method_call" span="2309:7:2309:10">add</jtok>
<jtok eid="75" type="primary_name_ref" span="2309:11:2309:18">details</jtok>
<jtok eid="75" type="string_literal" span="2309:20:2309:29">"details"</jtok>
<jtok eid="75" type="line_comment" span="2310:3:2310:45">// pass the scrollpane to the joptionpane.</jtok>
<jtok eid="75" type="primary_name_ref" span="2311:3:2311:14">JOptionPane</jtok>
<jtok eid="75" type="method_call" span="2311:15:2311:32">showMessageDialog</jtok>
<jtok eid="75" type="primary_name_ref" span="2311:33:2311:39">parent</jtok>
<jtok eid="75" type="primary_name_ref" span="2311:41:2311:44">pan</jtok>
<jtok eid="75" type="primary_name_ref" span="2311:46:2311:51">title</jtok>
<jtok eid="75" type="primary_name_ref" span="2311:53:2311:64">JOptionPane</jtok>
<jtok eid="75" type="qualified_name_ref" span="2311:65:2311:78">ERROR_MESSAGE</jtok>
<jtok eid="78" type="class_or_interface_ref" span="2314:16:2314:22">String</jtok>
<jtok eid="78" type="method_name" span="2314:23:2314:31">wrapHTML</jtok>
<jtok eid="78" type="parameter_type" span="2314:32:2314:38">String</jtok>
<jtok eid="78" type="parameter_name" span="2314:39:2314:40">s</jtok>
<jtok eid="78" type="parameter_name" span="2314:52:2314:61">lineWidth</jtok>
<jtok eid="78" type="class_or_interface_ref" span="2315:3:2315:15">StringBuffer</jtok>
<jtok eid="78" type="local_variable_name" span="2315:16:2315:18">sb</jtok>
<jtok eid="78" type="constructor_call" span="2315:25:2315:37">StringBuffer</jtok>
<jtok eid="78" type="class_or_interface_ref" span="2316:3:2316:18">StringTokenizer</jtok>
<jtok eid="78" type="local_variable_name" span="2316:19:2316:22">tok</jtok>
<jtok eid="78" type="constructor_call" span="2316:29:2316:44">StringTokenizer</jtok>
<jtok eid="78" type="primary_name_ref" span="2316:45:2316:46">s</jtok>
<jtok eid="78" type="local_variable_name" span="2317:7:2317:16">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2317:19:2317:28">lineWidth</jtok>
<jtok eid="78" type="primary_name_ref" span="2318:10:2318:13">tok</jtok>
<jtok eid="78" type="method_call" span="2318:14:2318:27">hasMoreTokens</jtok>
<jtok eid="78" type="class_or_interface_ref" span="2319:4:2319:10">String</jtok>
<jtok eid="78" type="local_variable_name" span="2319:11:2319:15">word</jtok>
<jtok eid="78" type="primary_name_ref" span="2319:18:2319:21">tok</jtok>
<jtok eid="78" type="method_call" span="2319:22:2319:31">nextToken</jtok>
<jtok eid="78" type="primary_name_ref" span="2320:8:2320:17">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2320:21:2320:30">lineWidth</jtok>
<jtok eid="78" type="line_comment" span="2320:34:2320:47">// fresh line</jtok>
<jtok eid="78" type="primary_name_ref" span="2321:5:2321:7">sb</jtok>
<jtok eid="78" type="method_call" span="2321:8:2321:14">append</jtok>
<jtok eid="78" type="primary_name_ref" span="2321:15:2321:19">word</jtok>
<jtok eid="78" type="primary_name_ref" span="2322:5:2322:14">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2322:18:2322:22">word</jtok>
<jtok eid="78" type="method_call" span="2322:23:2322:29">length</jtok>
<jtok eid="78" type="primary_name_ref" span="2323:9:2323:18">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2324:6:2324:8">sb</jtok>
<jtok eid="78" type="method_call" span="2324:9:2324:15">append</jtok>
<jtok eid="78" type="string_literal" span="2324:16:2324:24">"&lt;br&gt;\n"</jtok>
<jtok eid="78" type="primary_name_ref" span="2325:6:2325:15">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2325:18:2325:27">lineWidth</jtok>
<jtok eid="78" type="line_comment" span="2327:13:2327:38">// continue previous line</jtok>
<jtok eid="78" type="primary_name_ref" span="2328:9:2328:18">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2328:21:2328:25">word</jtok>
<jtok eid="78" type="method_call" span="2328:26:2328:32">length</jtok>
<jtok eid="78" type="primary_name_ref" span="2329:6:2329:8">sb</jtok>
<jtok eid="78" type="method_call" span="2329:9:2329:15">append</jtok>
<jtok eid="78" type="string_literal" span="2329:16:2329:24">"&lt;br&gt;\n"</jtok>
<jtok eid="78" type="primary_name_ref" span="2330:6:2330:8">sb</jtok>
<jtok eid="78" type="method_call" span="2330:9:2330:15">append</jtok>
<jtok eid="78" type="primary_name_ref" span="2330:16:2330:20">word</jtok>
<jtok eid="78" type="primary_name_ref" span="2331:10:2331:14">word</jtok>
<jtok eid="78" type="method_call" span="2331:15:2331:21">length</jtok>
<jtok eid="78" type="primary_name_ref" span="2331:27:2331:36">lineWidth</jtok>
<jtok eid="78" type="primary_name_ref" span="2332:7:2332:9">sb</jtok>
<jtok eid="78" type="method_call" span="2332:10:2332:16">append</jtok>
<jtok eid="78" type="string_literal" span="2332:17:2332:25">"&lt;br&gt;\n"</jtok>
<jtok eid="78" type="primary_name_ref" span="2333:7:2333:16">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2333:19:2333:28">lineWidth</jtok>
<jtok eid="78" type="primary_name_ref" span="2335:7:2335:9">sb</jtok>
<jtok eid="78" type="method_call" span="2335:10:2335:16">append</jtok>
<jtok eid="78" type="string_literal" span="2335:17:2335:20">" "</jtok>
<jtok eid="78" type="primary_name_ref" span="2336:7:2336:16">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2336:19:2336:28">lineWidth</jtok>
<jtok eid="78" type="primary_name_ref" span="2336:31:2336:35">word</jtok>
<jtok eid="78" type="method_call" span="2336:36:2336:42">length</jtok>
<jtok eid="78" type="primary_name_ref" span="2339:6:2339:8">sb</jtok>
<jtok eid="78" type="method_call" span="2339:9:2339:15">append</jtok>
<jtok eid="78" type="method_call" span="2339:21:2339:27">append</jtok>
<jtok eid="78" type="primary_name_ref" span="2339:28:2339:32">word</jtok>
<jtok eid="78" type="primary_name_ref" span="2340:6:2340:15">charsLeft</jtok>
<jtok eid="78" type="primary_name_ref" span="2340:19:2340:23">word</jtok>
<jtok eid="78" type="method_call" span="2340:24:2340:30">length</jtok>
<jtok eid="78" type="primary_name_ref" span="2344:10:2344:12">sb</jtok>
<jtok eid="78" type="method_call" span="2344:13:2344:21">toString</jtok>
<jtok eid="1" type="block_comment" span="2347:2:2353:5">/**
	 * Creates a String containing the current date (and possibly time),
	 * formatted according to the format set in preferences under the key
	 * "timeStampFormat".
	 * 
	 * @return The date string.
	 */</jtok>
<jtok eid="79" type="class_or_interface_ref" span="2354:16:2354:22">String</jtok>
<jtok eid="79" type="method_name" span="2354:23:2354:37">easyDateFormat</jtok>
<jtok eid="79" type="line_comment" span="2355:3:2355:30">// Date today = new Date();</jtok>
<jtok eid="79" type="method_call" span="2356:10:2356:24">easyDateFormat</jtok>
<jtok eid="79" type="constructor_call" span="2356:29:2356:33">Date</jtok>
<jtok eid="1" type="block_comment" span="2359:2:2364:5">/**
	 * Creates a readable Date string from the parameter date. The format is set
	 * in preferences under the key "timeStampFormat".
	 * 
	 * @return The formatted date string.
	 */</jtok>
<jtok eid="80" type="class_or_interface_ref" span="2365:16:2365:22">String</jtok>
<jtok eid="80" type="method_name" span="2365:23:2365:37">easyDateFormat</jtok>
<jtok eid="80" type="parameter_type" span="2365:38:2365:42">Date</jtok>
<jtok eid="80" type="parameter_name" span="2365:43:2365:47">date</jtok>
<jtok eid="80" type="line_comment" span="2366:3:2366:35">// first use, create an instance</jtok>
<jtok eid="80" type="primary_name_ref" span="2367:7:2367:20">dateFormatter</jtok>
<jtok eid="80" type="class_or_interface_ref" span="2368:4:2368:10">String</jtok>
<jtok eid="80" type="local_variable_name" span="2368:11:2368:17">format</jtok>
<jtok eid="80" type="primary_name_ref" span="2368:20:2368:27">Globals</jtok>
<jtok eid="80" type="qualified_name_ref" span="2368:28:2368:33">prefs</jtok>
<jtok eid="80" type="method_call" span="2368:34:2368:37">get</jtok>
<jtok eid="80" type="string_literal" span="2368:38:2368:55">"timeStampFormat"</jtok>
<jtok eid="80" type="primary_name_ref" span="2369:4:2369:17">dateFormatter</jtok>
<jtok eid="80" type="constructor_call" span="2369:24:2369:40">SimpleDateFormat</jtok>
<jtok eid="80" type="primary_name_ref" span="2369:41:2369:47">format</jtok>
<jtok eid="80" type="primary_name_ref" span="2371:10:2371:23">dateFormatter</jtok>
<jtok eid="80" type="method_call" span="2371:24:2371:30">format</jtok>
<jtok eid="80" type="primary_name_ref" span="2371:31:2371:35">date</jtok>
<jtok eid="81" type="method_name" span="2374:21:2374:30">markEntry</jtok>
<jtok eid="81" type="parameter_type" span="2374:31:2374:42">BibtexEntry</jtok>
<jtok eid="81" type="parameter_name" span="2374:43:2374:45">be</jtok>
<jtok eid="81" type="parameter_type" span="2374:47:2374:60">NamedCompound</jtok>
<jtok eid="81" type="parameter_name" span="2374:61:2374:63">ce</jtok>
<jtok eid="81" type="class_or_interface_ref" span="2375:3:2375:9">Object</jtok>
<jtok eid="81" type="local_variable_name" span="2375:10:2375:11">o</jtok>
<jtok eid="81" type="primary_name_ref" span="2375:14:2375:16">be</jtok>
<jtok eid="81" type="method_call" span="2375:17:2375:25">getField</jtok>
<jtok eid="81" type="primary_name_ref" span="2375:26:2375:38">BibtexFields</jtok>
<jtok eid="81" type="qualified_name_ref" span="2375:39:2375:45">MARKED</jtok>
<jtok eid="81" type="primary_name_ref" span="2376:8:2376:9">o</jtok>
<jtok eid="81" type="primary_name_ref" span="2376:23:2376:24">o</jtok>
<jtok eid="81" type="method_call" span="2376:25:2376:33">toString</jtok>
<jtok eid="81" type="method_call" span="2376:36:2376:43">indexOf</jtok>
<jtok eid="81" type="primary_name_ref" span="2376:44:2376:51">Globals</jtok>
<jtok eid="81" type="qualified_name_ref" span="2376:52:2376:57">prefs</jtok>
<jtok eid="81" type="qualified_name_ref" span="2376:58:2376:74">WRAPPED_USERNAME</jtok>
<jtok eid="81" type="class_or_interface_ref" span="2378:3:2378:9">String</jtok>
<jtok eid="81" type="local_variable_name" span="2378:10:2378:18">newValue</jtok>
<jtok eid="81" type="primary_name_ref" span="2379:7:2379:8">o</jtok>
<jtok eid="81" type="primary_name_ref" span="2380:4:2380:12">newValue</jtok>
<jtok eid="81" type="primary_name_ref" span="2380:15:2380:22">Globals</jtok>
<jtok eid="81" type="qualified_name_ref" span="2380:23:2380:28">prefs</jtok>
<jtok eid="81" type="qualified_name_ref" span="2380:29:2380:45">WRAPPED_USERNAME</jtok>
<jtok eid="81" type="class_or_interface_ref" span="2382:4:2382:16">StringBuffer</jtok>
<jtok eid="81" type="local_variable_name" span="2382:17:2382:19">sb</jtok>
<jtok eid="81" type="constructor_call" span="2382:26:2382:38">StringBuffer</jtok>
<jtok eid="81" type="primary_name_ref" span="2382:39:2382:40">o</jtok>
<jtok eid="81" type="method_call" span="2382:41:2382:49">toString</jtok>
<jtok eid="81" type="line_comment" span="2383:4:2383:22">// sb.append(' ');</jtok>
<jtok eid="81" type="primary_name_ref" span="2384:4:2384:6">sb</jtok>
<jtok eid="81" type="method_call" span="2384:7:2384:13">append</jtok>
<jtok eid="81" type="primary_name_ref" span="2384:14:2384:21">Globals</jtok>
<jtok eid="81" type="qualified_name_ref" span="2384:22:2384:27">prefs</jtok>
<jtok eid="81" type="qualified_name_ref" span="2384:28:2384:44">WRAPPED_USERNAME</jtok>
<jtok eid="81" type="primary_name_ref" span="2385:4:2385:12">newValue</jtok>
<jtok eid="81" type="primary_name_ref" span="2385:15:2385:17">sb</jtok>
<jtok eid="81" type="method_call" span="2385:18:2385:26">toString</jtok>
<jtok eid="81" type="primary_name_ref" span="2387:3:2387:5">ce</jtok>
<jtok eid="81" type="method_call" span="2387:6:2387:13">addEdit</jtok>
<jtok eid="81" type="constructor_call" span="2387:18:2387:37">UndoableFieldChange</jtok>
<jtok eid="81" type="primary_name_ref" span="2387:38:2387:40">be</jtok>
<jtok eid="81" type="primary_name_ref" span="2387:42:2387:54">BibtexFields</jtok>
<jtok eid="81" type="qualified_name_ref" span="2387:55:2387:61">MARKED</jtok>
<jtok eid="81" type="primary_name_ref" span="2387:63:2387:65">be</jtok>
<jtok eid="81" type="method_call" span="2388:5:2388:13">getField</jtok>
<jtok eid="81" type="primary_name_ref" span="2388:14:2388:26">BibtexFields</jtok>
<jtok eid="81" type="qualified_name_ref" span="2388:27:2388:33">MARKED</jtok>
<jtok eid="81" type="primary_name_ref" span="2388:36:2388:44">newValue</jtok>
<jtok eid="81" type="primary_name_ref" span="2389:3:2389:5">be</jtok>
<jtok eid="81" type="method_call" span="2389:6:2389:14">setField</jtok>
<jtok eid="81" type="primary_name_ref" span="2389:15:2389:27">BibtexFields</jtok>
<jtok eid="81" type="qualified_name_ref" span="2389:28:2389:34">MARKED</jtok>
<jtok eid="81" type="primary_name_ref" span="2389:36:2389:44">newValue</jtok>
<jtok eid="82" type="method_name" span="2392:21:2392:32">unmarkEntry</jtok>
<jtok eid="82" type="parameter_type" span="2392:33:2392:44">BibtexEntry</jtok>
<jtok eid="82" type="parameter_name" span="2392:45:2392:47">be</jtok>
<jtok eid="82" type="parameter_type" span="2392:49:2392:63">BibtexDatabase</jtok>
<jtok eid="82" type="parameter_name" span="2392:64:2392:72">database</jtok>
<jtok eid="82" type="parameter_type" span="2392:74:2392:87">NamedCompound</jtok>
<jtok eid="82" type="parameter_name" span="2392:88:2392:90">ce</jtok>
<jtok eid="82" type="class_or_interface_ref" span="2393:3:2393:9">Object</jtok>
<jtok eid="82" type="local_variable_name" span="2393:10:2393:11">o</jtok>
<jtok eid="82" type="primary_name_ref" span="2393:14:2393:16">be</jtok>
<jtok eid="82" type="method_call" span="2393:17:2393:25">getField</jtok>
<jtok eid="82" type="primary_name_ref" span="2393:26:2393:38">BibtexFields</jtok>
<jtok eid="82" type="qualified_name_ref" span="2393:39:2393:45">MARKED</jtok>
<jtok eid="82" type="primary_name_ref" span="2394:7:2394:8">o</jtok>
<jtok eid="82" type="class_or_interface_ref" span="2395:4:2395:10">String</jtok>
<jtok eid="82" type="local_variable_name" span="2395:11:2395:12">s</jtok>
<jtok eid="82" type="primary_name_ref" span="2395:15:2395:16">o</jtok>
<jtok eid="82" type="method_call" span="2395:17:2395:25">toString</jtok>
<jtok eid="82" type="primary_name_ref" span="2396:8:2396:9">s</jtok>
<jtok eid="82" type="method_call" span="2396:10:2396:16">equals</jtok>
<jtok eid="82" type="string_literal" span="2396:17:2396:20">"0"</jtok>
<jtok eid="82" type="method_call" span="2397:5:2397:19">unmarkOldStyle</jtok>
<jtok eid="82" type="primary_name_ref" span="2397:20:2397:22">be</jtok>
<jtok eid="82" type="primary_name_ref" span="2397:24:2397:32">database</jtok>
<jtok eid="82" type="primary_name_ref" span="2397:34:2397:36">ce</jtok>
<jtok eid="82" type="local_variable_name" span="2401:8:2401:11">piv</jtok>
<jtok eid="82" type="local_variable_name" span="2401:17:2401:20">hit</jtok>
<jtok eid="82" type="class_or_interface_ref" span="2402:4:2402:16">StringBuffer</jtok>
<jtok eid="82" type="local_variable_name" span="2402:17:2402:19">sb</jtok>
<jtok eid="82" type="constructor_call" span="2402:26:2402:38">StringBuffer</jtok>
<jtok eid="82" type="primary_name_ref" span="2403:12:2403:15">hit</jtok>
<jtok eid="82" type="primary_name_ref" span="2403:18:2403:19">s</jtok>
<jtok eid="82" type="method_call" span="2403:20:2403:27">indexOf</jtok>
<jtok eid="82" type="primary_name_ref" span="2403:28:2403:35">Globals</jtok>
<jtok eid="82" type="qualified_name_ref" span="2403:36:2403:41">prefs</jtok>
<jtok eid="82" type="qualified_name_ref" span="2403:42:2403:58">WRAPPED_USERNAME</jtok>
<jtok eid="82" type="primary_name_ref" span="2403:60:2403:63">piv</jtok>
<jtok eid="82" type="primary_name_ref" span="2404:9:2404:12">hit</jtok>
<jtok eid="82" type="primary_name_ref" span="2405:6:2405:8">sb</jtok>
<jtok eid="82" type="method_call" span="2405:9:2405:15">append</jtok>
<jtok eid="82" type="primary_name_ref" span="2405:16:2405:17">s</jtok>
<jtok eid="82" type="method_call" span="2405:18:2405:27">substring</jtok>
<jtok eid="82" type="primary_name_ref" span="2405:28:2405:31">piv</jtok>
<jtok eid="82" type="primary_name_ref" span="2405:33:2405:36">hit</jtok>
<jtok eid="82" type="primary_name_ref" span="2406:5:2406:8">piv</jtok>
<jtok eid="82" type="primary_name_ref" span="2406:11:2406:14">hit</jtok>
<jtok eid="82" type="primary_name_ref" span="2406:17:2406:24">Globals</jtok>
<jtok eid="82" type="qualified_name_ref" span="2406:25:2406:30">prefs</jtok>
<jtok eid="82" type="qualified_name_ref" span="2406:31:2406:47">WRAPPED_USERNAME</jtok>
<jtok eid="82" type="method_call" span="2406:48:2406:54">length</jtok>
<jtok eid="82" type="primary_name_ref" span="2408:8:2408:11">piv</jtok>
<jtok eid="82" type="primary_name_ref" span="2408:14:2408:15">s</jtok>
<jtok eid="82" type="method_call" span="2408:16:2408:22">length</jtok>
<jtok eid="82" type="primary_name_ref" span="2409:5:2409:7">sb</jtok>
<jtok eid="82" type="method_call" span="2409:8:2409:14">append</jtok>
<jtok eid="82" type="primary_name_ref" span="2409:15:2409:16">s</jtok>
<jtok eid="82" type="method_call" span="2409:17:2409:26">substring</jtok>
<jtok eid="82" type="primary_name_ref" span="2409:27:2409:30">piv</jtok>
<jtok eid="82" type="class_or_interface_ref" span="2411:4:2411:10">String</jtok>
<jtok eid="82" type="local_variable_name" span="2411:11:2411:17">newVal</jtok>
<jtok eid="82" type="primary_name_ref" span="2411:20:2411:22">sb</jtok>
<jtok eid="82" type="method_call" span="2411:23:2411:29">length</jtok>
<jtok eid="82" type="primary_name_ref" span="2411:38:2411:40">sb</jtok>
<jtok eid="82" type="method_call" span="2411:41:2411:49">toString</jtok>
<jtok eid="82" type="primary_name_ref" span="2412:4:2412:6">ce</jtok>
<jtok eid="82" type="method_call" span="2412:7:2412:14">addEdit</jtok>
<jtok eid="82" type="constructor_call" span="2412:19:2412:38">UndoableFieldChange</jtok>
<jtok eid="82" type="primary_name_ref" span="2412:39:2412:41">be</jtok>
<jtok eid="82" type="primary_name_ref" span="2412:43:2412:55">BibtexFields</jtok>
<jtok eid="82" type="qualified_name_ref" span="2412:56:2412:62">MARKED</jtok>
<jtok eid="82" type="primary_name_ref" span="2412:64:2412:66">be</jtok>
<jtok eid="82" type="method_call" span="2413:6:2413:14">getField</jtok>
<jtok eid="82" type="primary_name_ref" span="2413:15:2413:27">BibtexFields</jtok>
<jtok eid="82" type="qualified_name_ref" span="2413:28:2413:34">MARKED</jtok>
<jtok eid="82" type="primary_name_ref" span="2413:37:2413:43">newVal</jtok>
<jtok eid="82" type="primary_name_ref" span="2414:4:2414:6">be</jtok>
<jtok eid="82" type="method_call" span="2414:7:2414:15">setField</jtok>
<jtok eid="82" type="primary_name_ref" span="2414:16:2414:28">BibtexFields</jtok>
<jtok eid="82" type="qualified_name_ref" span="2414:29:2414:35">MARKED</jtok>
<jtok eid="82" type="primary_name_ref" span="2414:37:2414:43">newVal</jtok>
<jtok eid="1" type="block_comment" span="2418:2:2428:5">/**
	 * An entry is marked with a "0", not in the new style with user names. We
	 * want to unmark it as transparently as possible. Since this shouldn't
	 * happen too often, we do it by scanning the "owner" fields of the entire
	 * database, collecting all user names. We then mark the entry for all users
	 * except the current one. Thus only the user who unmarks will see that it
	 * is unmarked, and we get rid of the old-style marking.
	 * 
	 * @param be
	 * @param ce
	 */</jtok>
<jtok eid="83" type="method_name" span="2429:22:2429:36">unmarkOldStyle</jtok>
<jtok eid="83" type="parameter_type" span="2429:37:2429:48">BibtexEntry</jtok>
<jtok eid="83" type="parameter_name" span="2429:49:2429:51">be</jtok>
<jtok eid="83" type="parameter_type" span="2429:53:2429:67">BibtexDatabase</jtok>
<jtok eid="83" type="parameter_name" span="2429:68:2429:76">database</jtok>
<jtok eid="83" type="parameter_type" span="2429:78:2429:91">NamedCompound</jtok>
<jtok eid="83" type="parameter_name" span="2429:92:2429:94">ce</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2430:3:2430:10">TreeSet</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2430:11:2430:17">Object</jtok>
<jtok eid="83" type="local_variable_name" span="2430:19:2430:25">owners</jtok>
<jtok eid="83" type="constructor_call" span="2430:32:2430:39">TreeSet</jtok>
<jtok eid="83" type="constructor_call" span="2430:40:2430:46">Object</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2431:8:2431:19">BibtexEntry</jtok>
<jtok eid="83" type="local_variable_name" span="2431:20:2431:25">entry</jtok>
<jtok eid="83" type="primary_name_ref" span="2431:28:2431:36">database</jtok>
<jtok eid="83" type="method_call" span="2431:37:2431:47">getEntries</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2432:4:2432:10">Object</jtok>
<jtok eid="83" type="local_variable_name" span="2432:11:2432:12">o</jtok>
<jtok eid="83" type="primary_name_ref" span="2432:15:2432:20">entry</jtok>
<jtok eid="83" type="method_call" span="2432:21:2432:29">getField</jtok>
<jtok eid="83" type="primary_name_ref" span="2432:30:2432:42">BibtexFields</jtok>
<jtok eid="83" type="qualified_name_ref" span="2432:43:2432:48">OWNER</jtok>
<jtok eid="83" type="primary_name_ref" span="2433:8:2433:9">o</jtok>
<jtok eid="83" type="primary_name_ref" span="2434:5:2434:11">owners</jtok>
<jtok eid="83" type="method_call" span="2434:12:2434:15">add</jtok>
<jtok eid="83" type="primary_name_ref" span="2434:16:2434:17">o</jtok>
<jtok eid="83" type="line_comment" span="2435:4:2435:67">// System.out.println("Owner: "+entry.getField(Globals.OWNER));</jtok>
<jtok eid="83" type="primary_name_ref" span="2437:3:2437:9">owners</jtok>
<jtok eid="83" type="method_call" span="2437:10:2437:16">remove</jtok>
<jtok eid="83" type="primary_name_ref" span="2437:17:2437:24">Globals</jtok>
<jtok eid="83" type="qualified_name_ref" span="2437:25:2437:30">prefs</jtok>
<jtok eid="83" type="method_call" span="2437:31:2437:34">get</jtok>
<jtok eid="83" type="string_literal" span="2437:35:2437:49">"defaultOwner"</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2438:3:2438:15">StringBuffer</jtok>
<jtok eid="83" type="local_variable_name" span="2438:16:2438:18">sb</jtok>
<jtok eid="83" type="constructor_call" span="2438:25:2438:37">StringBuffer</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2439:8:2439:16">Iterator</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2439:17:2439:23">Object</jtok>
<jtok eid="83" type="local_variable_name" span="2439:25:2439:26">i</jtok>
<jtok eid="83" type="primary_name_ref" span="2439:29:2439:35">owners</jtok>
<jtok eid="83" type="method_call" span="2439:36:2439:44">iterator</jtok>
<jtok eid="83" type="primary_name_ref" span="2439:48:2439:49">i</jtok>
<jtok eid="83" type="method_call" span="2439:50:2439:57">hasNext</jtok>
<jtok eid="83" type="primary_name_ref" span="2440:4:2440:6">sb</jtok>
<jtok eid="83" type="method_call" span="2440:7:2440:13">append</jtok>
<jtok eid="83" type="primary_name_ref" span="2441:4:2441:6">sb</jtok>
<jtok eid="83" type="method_call" span="2441:7:2441:13">append</jtok>
<jtok eid="83" type="primary_name_ref" span="2441:14:2441:15">i</jtok>
<jtok eid="83" type="method_call" span="2441:16:2441:20">next</jtok>
<jtok eid="83" type="method_call" span="2441:23:2441:31">toString</jtok>
<jtok eid="83" type="primary_name_ref" span="2442:4:2442:6">sb</jtok>
<jtok eid="83" type="method_call" span="2442:7:2442:13">append</jtok>
<jtok eid="83" type="class_or_interface_ref" span="2444:3:2444:9">String</jtok>
<jtok eid="83" type="local_variable_name" span="2444:10:2444:16">newVal</jtok>
<jtok eid="83" type="primary_name_ref" span="2444:19:2444:21">sb</jtok>
<jtok eid="83" type="method_call" span="2444:22:2444:30">toString</jtok>
<jtok eid="83" type="primary_name_ref" span="2445:7:2445:13">newVal</jtok>
<jtok eid="83" type="method_call" span="2445:14:2445:20">length</jtok>
<jtok eid="83" type="primary_name_ref" span="2446:4:2446:10">newVal</jtok>
<jtok eid="83" type="primary_name_ref" span="2447:3:2447:5">ce</jtok>
<jtok eid="83" type="method_call" span="2447:6:2447:13">addEdit</jtok>
<jtok eid="83" type="constructor_call" span="2447:18:2447:37">UndoableFieldChange</jtok>
<jtok eid="83" type="primary_name_ref" span="2447:38:2447:40">be</jtok>
<jtok eid="83" type="primary_name_ref" span="2447:42:2447:54">BibtexFields</jtok>
<jtok eid="83" type="qualified_name_ref" span="2447:55:2447:61">MARKED</jtok>
<jtok eid="83" type="primary_name_ref" span="2447:63:2447:65">be</jtok>
<jtok eid="83" type="method_call" span="2448:5:2448:13">getField</jtok>
<jtok eid="83" type="primary_name_ref" span="2448:14:2448:26">BibtexFields</jtok>
<jtok eid="83" type="qualified_name_ref" span="2448:27:2448:33">MARKED</jtok>
<jtok eid="83" type="primary_name_ref" span="2448:36:2448:42">newVal</jtok>
<jtok eid="83" type="primary_name_ref" span="2449:3:2449:5">be</jtok>
<jtok eid="83" type="method_call" span="2449:6:2449:14">setField</jtok>
<jtok eid="83" type="primary_name_ref" span="2449:15:2449:27">BibtexFields</jtok>
<jtok eid="83" type="qualified_name_ref" span="2449:28:2449:34">MARKED</jtok>
<jtok eid="83" type="primary_name_ref" span="2449:36:2449:42">newVal</jtok>
<jtok eid="84" type="method_name" span="2453:24:2453:32">isMarked</jtok>
<jtok eid="84" type="parameter_type" span="2453:33:2453:44">BibtexEntry</jtok>
<jtok eid="84" type="parameter_name" span="2453:45:2453:47">be</jtok>
<jtok eid="84" type="class_or_interface_ref" span="2454:3:2454:9">Object</jtok>
<jtok eid="84" type="local_variable_name" span="2454:10:2454:18">fieldVal</jtok>
<jtok eid="84" type="primary_name_ref" span="2454:21:2454:23">be</jtok>
<jtok eid="84" type="method_call" span="2454:24:2454:32">getField</jtok>
<jtok eid="84" type="primary_name_ref" span="2454:33:2454:45">BibtexFields</jtok>
<jtok eid="84" type="qualified_name_ref" span="2454:46:2454:52">MARKED</jtok>
<jtok eid="84" type="primary_name_ref" span="2455:7:2455:15">fieldVal</jtok>
<jtok eid="84" type="class_or_interface_ref" span="2457:3:2457:9">String</jtok>
<jtok eid="84" type="local_variable_name" span="2457:10:2457:11">s</jtok>
<jtok eid="84" type="class_or_interface_ref" span="2457:15:2457:21">String</jtok>
<jtok eid="84" type="primary_name_ref" span="2457:23:2457:31">fieldVal</jtok>
<jtok eid="84" type="primary_name_ref" span="2458:11:2458:12">s</jtok>
<jtok eid="84" type="method_call" span="2458:13:2458:19">equals</jtok>
<jtok eid="84" type="string_literal" span="2458:20:2458:23">"0"</jtok>
<jtok eid="84" type="primary_name_ref" span="2458:29:2458:30">s</jtok>
<jtok eid="84" type="method_call" span="2458:31:2458:38">indexOf</jtok>
<jtok eid="84" type="primary_name_ref" span="2458:39:2458:46">Globals</jtok>
<jtok eid="84" type="qualified_name_ref" span="2458:47:2458:52">prefs</jtok>
<jtok eid="84" type="qualified_name_ref" span="2458:53:2458:69">WRAPPED_USERNAME</jtok>
<jtok eid="1" type="block_comment" span="2461:2:2477:5">/**
	 * Set a given field to a given value for all entries in a Collection. This
	 * method DOES NOT update any UndoManager, but returns a relevant
	 * CompoundEdit that should be registered by the caller.
	 * 
	 * @param entries
	 *            The entries to set the field for.
	 * @param field
	 *            The name of the field to set.
	 * @param text
	 *            The value to set. This value can be null, indicating that the
	 *            field should be cleared.
	 * @param overwriteValues
	 *            Indicate whether the value should be set even if an entry
	 *            already has the field set.
	 * @return A CompoundEdit for the entire operation.
	 */</jtok>
<jtok eid="85" type="class_or_interface_ref" span="2478:16:2478:28">UndoableEdit</jtok>
<jtok eid="85" type="method_name" span="2478:29:2478:41">massSetField</jtok>
<jtok eid="85" type="parameter_type" span="2478:42:2478:52">Collection</jtok>
<jtok eid="85" type="parameter_type" span="2478:53:2478:64">BibtexEntry</jtok>
<jtok eid="85" type="parameter_name" span="2478:66:2478:73">entries</jtok>
<jtok eid="85" type="parameter_type" span="2478:75:2478:81">String</jtok>
<jtok eid="85" type="parameter_name" span="2478:82:2478:87">field</jtok>
<jtok eid="85" type="parameter_type" span="2478:89:2478:95">String</jtok>
<jtok eid="85" type="parameter_name" span="2478:96:2478:100">text</jtok>
<jtok eid="85" type="parameter_name" span="2479:11:2479:26">overwriteValues</jtok>
<jtok eid="85" type="class_or_interface_ref" span="2481:3:2481:16">NamedCompound</jtok>
<jtok eid="85" type="local_variable_name" span="2481:17:2481:19">ce</jtok>
<jtok eid="85" type="constructor_call" span="2481:26:2481:39">NamedCompound</jtok>
<jtok eid="85" type="primary_name_ref" span="2481:40:2481:47">Globals</jtok>
<jtok eid="85" type="method_call" span="2481:48:2481:52">lang</jtok>
<jtok eid="85" type="string_literal" span="2481:53:2481:64">"Set field"</jtok>
<jtok eid="85" type="class_or_interface_ref" span="2482:8:2482:19">BibtexEntry</jtok>
<jtok eid="85" type="local_variable_name" span="2482:20:2482:25">entry</jtok>
<jtok eid="85" type="primary_name_ref" span="2482:28:2482:35">entries</jtok>
<jtok eid="85" type="class_or_interface_ref" span="2483:4:2483:10">String</jtok>
<jtok eid="85" type="local_variable_name" span="2483:11:2483:17">oldVal</jtok>
<jtok eid="85" type="primary_name_ref" span="2483:20:2483:25">entry</jtok>
<jtok eid="85" type="method_call" span="2483:26:2483:34">getField</jtok>
<jtok eid="85" type="primary_name_ref" span="2483:35:2483:40">field</jtok>
<jtok eid="85" type="line_comment" span="2484:4:2484:69">// If we are not allowed to overwrite values, check if there is a</jtok>
<jtok eid="85" type="line_comment" span="2485:4:2485:15">// nonempty</jtok>
<jtok eid="85" type="line_comment" span="2486:4:2486:36">// value already for this entry:</jtok>
<jtok eid="85" type="primary_name_ref" span="2487:9:2487:24">overwriteValues</jtok>
<jtok eid="85" type="primary_name_ref" span="2487:29:2487:35">oldVal</jtok>
<jtok eid="85" type="primary_name_ref" span="2487:50:2487:56">oldVal</jtok>
<jtok eid="85" type="method_call" span="2487:58:2487:64">length</jtok>
<jtok eid="85" type="primary_name_ref" span="2489:8:2489:12">text</jtok>
<jtok eid="85" type="primary_name_ref" span="2490:5:2490:10">entry</jtok>
<jtok eid="85" type="method_call" span="2490:11:2490:19">setField</jtok>
<jtok eid="85" type="primary_name_ref" span="2490:20:2490:25">field</jtok>
<jtok eid="85" type="primary_name_ref" span="2490:27:2490:31">text</jtok>
<jtok eid="85" type="primary_name_ref" span="2492:5:2492:10">entry</jtok>
<jtok eid="85" type="method_call" span="2492:11:2492:21">clearField</jtok>
<jtok eid="85" type="primary_name_ref" span="2492:22:2492:27">field</jtok>
<jtok eid="85" type="primary_name_ref" span="2493:4:2493:6">ce</jtok>
<jtok eid="85" type="method_call" span="2493:7:2493:14">addEdit</jtok>
<jtok eid="85" type="constructor_call" span="2493:19:2493:38">UndoableFieldChange</jtok>
<jtok eid="85" type="primary_name_ref" span="2493:39:2493:44">entry</jtok>
<jtok eid="85" type="primary_name_ref" span="2493:46:2493:51">field</jtok>
<jtok eid="85" type="primary_name_ref" span="2493:53:2493:59">oldVal</jtok>
<jtok eid="85" type="primary_name_ref" span="2493:61:2493:65">text</jtok>
<jtok eid="85" type="primary_name_ref" span="2495:3:2495:5">ce</jtok>
<jtok eid="85" type="method_call" span="2495:6:2495:9">end</jtok>
<jtok eid="85" type="primary_name_ref" span="2496:10:2496:12">ce</jtok>
<jtok eid="1" type="block_comment" span="2499:5:2507:8">/**
     * Move contents from one field to another for a Collection of entries.
     * @param entries The entries to do this operation for.
     * @param field The field to move contents from.
     * @param newField The field to move contents into.
     * @param overwriteValues If true, overwrites any existing values in the new field.
     *          If false, makes no change for entries with existing value in the new field.
     * @return A CompoundEdit for the entire operation.
     */</jtok>
<jtok eid="86" type="class_or_interface_ref" span="2508:19:2508:31">UndoableEdit</jtok>
<jtok eid="86" type="method_name" span="2508:32:2508:47">massRenameField</jtok>
<jtok eid="86" type="parameter_type" span="2508:48:2508:58">Collection</jtok>
<jtok eid="86" type="parameter_type" span="2508:59:2508:70">BibtexEntry</jtok>
<jtok eid="86" type="parameter_name" span="2508:72:2508:79">entries</jtok>
<jtok eid="86" type="parameter_type" span="2508:81:2508:87">String</jtok>
<jtok eid="86" type="parameter_name" span="2508:88:2508:93">field</jtok>
<jtok eid="86" type="parameter_type" span="2509:17:2509:23">String</jtok>
<jtok eid="86" type="parameter_name" span="2509:24:2509:32">newField</jtok>
<jtok eid="86" type="parameter_name" span="2509:42:2509:57">overwriteValues</jtok>
<jtok eid="86" type="class_or_interface_ref" span="2510:9:2510:22">NamedCompound</jtok>
<jtok eid="86" type="local_variable_name" span="2510:23:2510:25">ce</jtok>
<jtok eid="86" type="constructor_call" span="2510:32:2510:45">NamedCompound</jtok>
<jtok eid="86" type="primary_name_ref" span="2510:46:2510:53">Globals</jtok>
<jtok eid="86" type="method_call" span="2510:54:2510:58">lang</jtok>
<jtok eid="86" type="string_literal" span="2510:59:2510:73">"Rename field"</jtok>
<jtok eid="86" type="class_or_interface_ref" span="2511:8:2511:19">BibtexEntry</jtok>
<jtok eid="86" type="local_variable_name" span="2511:20:2511:25">entry</jtok>
<jtok eid="86" type="primary_name_ref" span="2511:28:2511:35">entries</jtok>
<jtok eid="86" type="class_or_interface_ref" span="2512:4:2512:10">String</jtok>
<jtok eid="86" type="local_variable_name" span="2512:11:2512:20">valToMove</jtok>
<jtok eid="86" type="primary_name_ref" span="2512:23:2512:28">entry</jtok>
<jtok eid="86" type="method_call" span="2512:29:2512:37">getField</jtok>
<jtok eid="86" type="primary_name_ref" span="2512:38:2512:43">field</jtok>
<jtok eid="86" type="line_comment" span="2513:13:2513:49">// If there is no value, do nothing:</jtok>
<jtok eid="86" type="primary_name_ref" span="2514:18:2514:27">valToMove</jtok>
<jtok eid="86" type="primary_name_ref" span="2514:41:2514:50">valToMove</jtok>
<jtok eid="86" type="method_call" span="2514:51:2514:57">length</jtok>
<jtok eid="86" type="line_comment" span="2516:13:2516:78">// If we are not allowed to overwrite values, check if there is a</jtok>
<jtok eid="86" type="line_comment" span="2517:4:2517:62">// nonempy value already for this entry for the new field:</jtok>
<jtok eid="86" type="class_or_interface_ref" span="2518:13:2518:19">String</jtok>
<jtok eid="86" type="local_variable_name" span="2518:20:2518:33">valInNewField</jtok>
<jtok eid="86" type="primary_name_ref" span="2518:36:2518:41">entry</jtok>
<jtok eid="86" type="method_call" span="2518:42:2518:50">getField</jtok>
<jtok eid="86" type="primary_name_ref" span="2518:51:2518:59">newField</jtok>
<jtok eid="86" type="primary_name_ref" span="2519:18:2519:33">overwriteValues</jtok>
<jtok eid="86" type="primary_name_ref" span="2519:38:2519:51">valInNewField</jtok>
<jtok eid="86" type="primary_name_ref" span="2519:65:2519:78">valInNewField</jtok>
<jtok eid="86" type="method_call" span="2519:79:2519:85">length</jtok>
<jtok eid="86" type="primary_name_ref" span="2522:4:2522:9">entry</jtok>
<jtok eid="86" type="method_call" span="2522:10:2522:18">setField</jtok>
<jtok eid="86" type="primary_name_ref" span="2522:19:2522:27">newField</jtok>
<jtok eid="86" type="primary_name_ref" span="2522:29:2522:38">valToMove</jtok>
<jtok eid="86" type="primary_name_ref" span="2523:13:2523:15">ce</jtok>
<jtok eid="86" type="method_call" span="2523:16:2523:23">addEdit</jtok>
<jtok eid="86" type="constructor_call" span="2523:28:2523:47">UndoableFieldChange</jtok>
<jtok eid="86" type="primary_name_ref" span="2523:48:2523:53">entry</jtok>
<jtok eid="86" type="primary_name_ref" span="2523:55:2523:63">newField</jtok>
<jtok eid="86" type="primary_name_ref" span="2523:65:2523:78">valInNewField</jtok>
<jtok eid="86" type="primary_name_ref" span="2523:79:2523:88">valToMove</jtok>
<jtok eid="86" type="primary_name_ref" span="2524:13:2524:18">entry</jtok>
<jtok eid="86" type="method_call" span="2524:19:2524:29">clearField</jtok>
<jtok eid="86" type="primary_name_ref" span="2524:30:2524:35">field</jtok>
<jtok eid="86" type="primary_name_ref" span="2525:13:2525:15">ce</jtok>
<jtok eid="86" type="method_call" span="2525:16:2525:23">addEdit</jtok>
<jtok eid="86" type="constructor_call" span="2525:28:2525:47">UndoableFieldChange</jtok>
<jtok eid="86" type="primary_name_ref" span="2525:48:2525:53">entry</jtok>
<jtok eid="86" type="primary_name_ref" span="2525:55:2525:60">field</jtok>
<jtok eid="86" type="primary_name_ref" span="2525:62:2525:71">valToMove</jtok>
<jtok eid="86" type="primary_name_ref" span="2527:3:2527:5">ce</jtok>
<jtok eid="86" type="method_call" span="2527:6:2527:9">end</jtok>
<jtok eid="86" type="primary_name_ref" span="2528:10:2528:12">ce</jtok>
<jtok eid="1" type="block_comment" span="2531:2:2539:5">/**
	 * Make a list of supported character encodings that can encode all
	 * characters in the given String.
	 * 
	 * @param characters
	 *            A String of characters that should be supported by the
	 *            encodings.
	 * @return A List of character encodings
	 */</jtok>
<jtok eid="87" type="class_or_interface_ref" span="2540:16:2540:20">List</jtok>
<jtok eid="87" type="class_or_interface_ref" span="2540:21:2540:27">String</jtok>
<jtok eid="87" type="method_name" span="2540:29:2540:51">findEncodingsForString</jtok>
<jtok eid="87" type="parameter_type" span="2540:52:2540:58">String</jtok>
<jtok eid="87" type="parameter_name" span="2540:59:2540:69">characters</jtok>
<jtok eid="87" type="class_or_interface_ref" span="2541:3:2541:7">List</jtok>
<jtok eid="87" type="class_or_interface_ref" span="2541:8:2541:14">String</jtok>
<jtok eid="87" type="local_variable_name" span="2541:16:2541:25">encodings</jtok>
<jtok eid="87" type="constructor_call" span="2541:32:2541:41">ArrayList</jtok>
<jtok eid="87" type="constructor_call" span="2541:42:2541:48">String</jtok>
<jtok eid="87" type="local_variable_name" span="2542:12:2542:13">i</jtok>
<jtok eid="87" type="primary_name_ref" span="2542:19:2542:20">i</jtok>
<jtok eid="87" type="primary_name_ref" span="2542:23:2542:30">Globals</jtok>
<jtok eid="87" type="qualified_name_ref" span="2542:31:2542:40">ENCODINGS</jtok>
<jtok eid="87" type="qualified_name_ref" span="2542:41:2542:47">length</jtok>
<jtok eid="87" type="primary_name_ref" span="2542:49:2542:50">i</jtok>
<jtok eid="87" type="class_or_interface_ref" span="2543:4:2543:18">CharsetEncoder</jtok>
<jtok eid="87" type="local_variable_name" span="2543:19:2543:26">encoder</jtok>
<jtok eid="87" type="primary_name_ref" span="2543:29:2543:36">Charset</jtok>
<jtok eid="87" type="method_call" span="2543:37:2543:44">forName</jtok>
<jtok eid="87" type="primary_name_ref" span="2543:45:2543:52">Globals</jtok>
<jtok eid="87" type="qualified_name_ref" span="2543:53:2543:62">ENCODINGS</jtok>
<jtok eid="87" type="primary_name_ref" span="2543:63:2543:64">i</jtok>
<jtok eid="87" type="method_call" span="2543:67:2543:77">newEncoder</jtok>
<jtok eid="87" type="primary_name_ref" span="2544:8:2544:15">encoder</jtok>
<jtok eid="87" type="method_call" span="2544:16:2544:25">canEncode</jtok>
<jtok eid="87" type="primary_name_ref" span="2544:26:2544:36">characters</jtok>
<jtok eid="87" type="primary_name_ref" span="2545:5:2545:14">encodings</jtok>
<jtok eid="87" type="method_call" span="2545:15:2545:18">add</jtok>
<jtok eid="87" type="primary_name_ref" span="2545:19:2545:26">Globals</jtok>
<jtok eid="87" type="qualified_name_ref" span="2545:27:2545:36">ENCODINGS</jtok>
<jtok eid="87" type="primary_name_ref" span="2545:37:2545:38">i</jtok>
<jtok eid="87" type="primary_name_ref" span="2547:10:2547:19">encodings</jtok>
<jtok eid="1" type="block_comment" span="2550:2:2563:5">/**
	 * Will convert a two digit year using the following scheme (describe at
	 * http://www.filemaker.com/help/02-Adding%20and%20view18.html):
	 * 
	 * If a two digit year is encountered they are matched against the last 69
	 * years and future 30 years.
	 * 
	 * For instance if it is the year 1992 then entering 23 is taken to be 1923
	 * but if you enter 23 in 1993 then it will evaluate to 2023.
	 * 
	 * @param year
	 *            The year to convert to 4 digits.
	 * @return
	 */</jtok>
<jtok eid="88" type="class_or_interface_ref" span="2564:16:2564:22">String</jtok>
<jtok eid="88" type="method_name" span="2564:23:2564:38">toFourDigitYear</jtok>
<jtok eid="88" type="parameter_type" span="2564:39:2564:45">String</jtok>
<jtok eid="88" type="parameter_name" span="2564:46:2564:50">year</jtok>
<jtok eid="88" type="primary_name_ref" span="2565:7:2565:15">thisYear</jtok>
<jtok eid="88" type="primary_name_ref" span="2566:4:2566:12">thisYear</jtok>
<jtok eid="88" type="primary_name_ref" span="2566:15:2566:23">Calendar</jtok>
<jtok eid="88" type="method_call" span="2566:24:2566:35">getInstance</jtok>
<jtok eid="88" type="method_call" span="2566:38:2566:41">get</jtok>
<jtok eid="88" type="primary_name_ref" span="2566:42:2566:50">Calendar</jtok>
<jtok eid="88" type="qualified_name_ref" span="2566:51:2566:55">YEAR</jtok>
<jtok eid="88" type="method_call" span="2568:10:2568:25">toFourDigitYear</jtok>
<jtok eid="88" type="primary_name_ref" span="2568:26:2568:30">year</jtok>
<jtok eid="88" type="primary_name_ref" span="2568:32:2568:40">thisYear</jtok>
<jtok eid="1" type="field_name" span="2571:20:2571:28">thisYear</jtok>
<jtok eid="1" type="block_comment" span="2573:2:2586:5">/**
	 * Will convert a two digit year using the following scheme (describe at
	 * http://www.filemaker.com/help/02-Adding%20and%20view18.html):
	 * 
	 * If a two digit year is encountered they are matched against the last 69
	 * years and future 30 years.
	 * 
	 * For instance if it is the year 1992 then entering 23 is taken to be 1923
	 * but if you enter 23 in 1993 then it will evaluate to 2023.
	 * 
	 * @param year
	 *            The year to convert to 4 digits.
	 * @return
	 */</jtok>
<jtok eid="89" type="class_or_interface_ref" span="2587:16:2587:22">String</jtok>
<jtok eid="89" type="method_name" span="2587:23:2587:38">toFourDigitYear</jtok>
<jtok eid="89" type="parameter_type" span="2587:39:2587:45">String</jtok>
<jtok eid="89" type="parameter_name" span="2587:46:2587:50">year</jtok>
<jtok eid="89" type="parameter_name" span="2587:56:2587:64">thisYear</jtok>
<jtok eid="89" type="primary_name_ref" span="2588:7:2588:11">year</jtok>
<jtok eid="89" type="method_call" span="2588:12:2588:18">length</jtok>
<jtok eid="89" type="primary_name_ref" span="2589:11:2589:15">year</jtok>
<jtok eid="89" type="local_variable_name" span="2591:8:2591:25">thisYearTwoDigits</jtok>
<jtok eid="89" type="primary_name_ref" span="2591:28:2591:36">thisYear</jtok>
<jtok eid="89" type="local_variable_name" span="2592:8:2592:19">thisCentury</jtok>
<jtok eid="89" type="primary_name_ref" span="2592:22:2592:30">thisYear</jtok>
<jtok eid="89" type="primary_name_ref" span="2592:33:2592:50">thisYearTwoDigits</jtok>
<jtok eid="89" type="local_variable_name" span="2594:8:2594:18">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2594:21:2594:28">Integer</jtok>
<jtok eid="89" type="method_call" span="2594:29:2594:37">parseInt</jtok>
<jtok eid="89" type="primary_name_ref" span="2594:38:2594:42">year</jtok>
<jtok eid="89" type="primary_name_ref" span="2596:8:2596:18">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2596:22:2596:39">thisYearTwoDigits</jtok>
<jtok eid="89" type="primary_name_ref" span="2597:12:2597:18">String</jtok>
<jtok eid="89" type="method_call" span="2597:19:2597:26">valueOf</jtok>
<jtok eid="89" type="primary_name_ref" span="2597:27:2597:35">thisYear</jtok>
<jtok eid="89" type="line_comment" span="2599:4:2599:14">// 20 , 90</jtok>
<jtok eid="89" type="line_comment" span="2600:4:2600:14">// 99 &gt; 30</jtok>
<jtok eid="89" type="primary_name_ref" span="2601:9:2601:19">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2601:28:2601:45">thisYearTwoDigits</jtok>
<jtok eid="89" type="primary_name_ref" span="2602:9:2602:19">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2602:22:2602:39">thisYearTwoDigits</jtok>
<jtok eid="89" type="primary_name_ref" span="2603:13:2603:19">String</jtok>
<jtok eid="89" type="method_call" span="2603:20:2603:27">valueOf</jtok>
<jtok eid="89" type="primary_name_ref" span="2603:28:2603:39">thisCentury</jtok>
<jtok eid="89" type="primary_name_ref" span="2603:42:2603:52">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2605:13:2605:19">String</jtok>
<jtok eid="89" type="method_call" span="2605:20:2605:27">valueOf</jtok>
<jtok eid="89" type="primary_name_ref" span="2605:28:2605:39">thisCentury</jtok>
<jtok eid="89" type="primary_name_ref" span="2605:48:2605:58">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2608:9:2608:19">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2608:22:2608:39">thisYearTwoDigits</jtok>
<jtok eid="89" type="primary_name_ref" span="2609:13:2609:19">String</jtok>
<jtok eid="89" type="method_call" span="2609:20:2609:27">valueOf</jtok>
<jtok eid="89" type="primary_name_ref" span="2609:28:2609:39">thisCentury</jtok>
<jtok eid="89" type="primary_name_ref" span="2609:48:2609:58">yearNumber</jtok>
<jtok eid="89" type="primary_name_ref" span="2611:13:2611:19">String</jtok>
<jtok eid="89" type="method_call" span="2611:20:2611:27">valueOf</jtok>
<jtok eid="89" type="primary_name_ref" span="2611:28:2611:39">thisCentury</jtok>
<jtok eid="89" type="primary_name_ref" span="2611:42:2611:52">yearNumber</jtok>
<jtok eid="89" type="class_or_interface_ref" span="2614:12:2614:33">NumberFormatException</jtok>
<jtok eid="89" type="local_variable_name" span="2614:34:2614:35">e</jtok>
<jtok eid="89" type="primary_name_ref" span="2615:11:2615:15">year</jtok>
<jtok eid="1" type="block_comment" span="2619:2:2631:5">/**
	 * Will return an integer indicating the month of the entry from 0 to 11.
	 * 
	 * -1 signals a unknown month string.
	 * 
	 * This method accepts three types of months given:
	 *  - Single and Double Digit months from 1 to 12 (01 to 12)
	 *  - 3 Digit BibTex strings (jan, feb, mar...)
	 *  - Full English Month identifiers.
	 * 
	 * @param month
	 * @return
	 */</jtok>
<jtok eid="90" type="method_name" span="2632:20:2632:34">getMonthNumber</jtok>
<jtok eid="90" type="parameter_type" span="2632:35:2632:41">String</jtok>
<jtok eid="90" type="parameter_name" span="2632:42:2632:47">month</jtok>
<jtok eid="90" type="primary_name_ref" span="2634:3:2634:8">month</jtok>
<jtok eid="90" type="primary_name_ref" span="2634:11:2634:16">month</jtok>
<jtok eid="90" type="method_call" span="2634:17:2634:27">replaceAll</jtok>
<jtok eid="90" type="string_literal" span="2634:28:2634:31">"#"</jtok>
<jtok eid="90" type="string_literal" span="2634:33:2634:35">""</jtok>
<jtok eid="90" type="method_call" span="2634:37:2634:48">toLowerCase</jtok>
<jtok eid="90" type="local_variable_name" span="2636:12:2636:13">i</jtok>
<jtok eid="90" type="primary_name_ref" span="2636:19:2636:20">i</jtok>
<jtok eid="90" type="primary_name_ref" span="2636:23:2636:30">Globals</jtok>
<jtok eid="90" type="qualified_name_ref" span="2636:31:2636:37">MONTHS</jtok>
<jtok eid="90" type="qualified_name_ref" span="2636:38:2636:44">length</jtok>
<jtok eid="90" type="primary_name_ref" span="2636:46:2636:47">i</jtok>
<jtok eid="90" type="primary_name_ref" span="2637:8:2637:13">month</jtok>
<jtok eid="90" type="method_call" span="2637:14:2637:24">startsWith</jtok>
<jtok eid="90" type="primary_name_ref" span="2637:25:2637:32">Globals</jtok>
<jtok eid="90" type="qualified_name_ref" span="2637:33:2637:39">MONTHS</jtok>
<jtok eid="90" type="primary_name_ref" span="2637:40:2637:41">i</jtok>
<jtok eid="90" type="primary_name_ref" span="2638:12:2638:13">i</jtok>
<jtok eid="90" type="primary_name_ref" span="2643:11:2643:18">Integer</jtok>
<jtok eid="90" type="method_call" span="2643:19:2643:27">parseInt</jtok>
<jtok eid="90" type="primary_name_ref" span="2643:28:2643:33">month</jtok>
<jtok eid="90" type="class_or_interface_ref" span="2644:12:2644:33">NumberFormatException</jtok>
<jtok eid="90" type="local_variable_name" span="2644:34:2644:35">e</jtok>
<jtok eid="1" type="block_comment" span="2650:5:2655:8">/**
     * Encodes a two-dimensional String array into a single string, using ':' and
     * ';' as separators. The characters ':' and ';' are escaped with '\'.
     * @param values The String array.
     * @return The encoded String.
     */</jtok>
<jtok eid="91" type="class_or_interface_ref" span="2656:19:2656:25">String</jtok>
<jtok eid="91" type="method_name" span="2656:26:2656:43">encodeStringArray</jtok>
<jtok eid="91" type="parameter_type" span="2656:44:2656:50">String</jtok>
<jtok eid="91" type="parameter_name" span="2656:55:2656:61">values</jtok>
<jtok eid="91" type="class_or_interface_ref" span="2657:9:2657:22">StringBuilder</jtok>
<jtok eid="91" type="local_variable_name" span="2657:23:2657:25">sb</jtok>
<jtok eid="91" type="constructor_call" span="2657:32:2657:45">StringBuilder</jtok>
<jtok eid="91" type="local_variable_name" span="2658:18:2658:19">i</jtok>
<jtok eid="91" type="primary_name_ref" span="2658:25:2658:26">i</jtok>
<jtok eid="91" type="primary_name_ref" span="2658:29:2658:35">values</jtok>
<jtok eid="91" type="qualified_name_ref" span="2658:36:2658:42">length</jtok>
<jtok eid="91" type="primary_name_ref" span="2658:44:2658:45">i</jtok>
<jtok eid="91" type="primary_name_ref" span="2659:13:2659:15">sb</jtok>
<jtok eid="91" type="method_call" span="2659:16:2659:22">append</jtok>
<jtok eid="91" type="method_call" span="2659:23:2659:40">encodeStringArray</jtok>
<jtok eid="91" type="primary_name_ref" span="2659:41:2659:47">values</jtok>
<jtok eid="91" type="primary_name_ref" span="2659:48:2659:49">i</jtok>
<jtok eid="91" type="primary_name_ref" span="2660:17:2660:18">i</jtok>
<jtok eid="91" type="primary_name_ref" span="2660:21:2660:27">values</jtok>
<jtok eid="91" type="qualified_name_ref" span="2660:28:2660:34">length</jtok>
<jtok eid="91" type="primary_name_ref" span="2661:17:2661:19">sb</jtok>
<jtok eid="91" type="method_call" span="2661:20:2661:26">append</jtok>
<jtok eid="91" type="primary_name_ref" span="2663:16:2663:18">sb</jtok>
<jtok eid="91" type="method_call" span="2663:19:2663:27">toString</jtok>
<jtok eid="1" type="block_comment" span="2666:5:2671:8">/**
     * Encodes a String array into a single string, using ':' as separator.
     * The characters ':' and ';' are escaped with '\'.
     * @param entry The String array.
     * @return The encoded String.
     */</jtok>
<jtok eid="92" type="class_or_interface_ref" span="2672:19:2672:25">String</jtok>
<jtok eid="92" type="method_name" span="2672:26:2672:43">encodeStringArray</jtok>
<jtok eid="92" type="parameter_type" span="2672:44:2672:50">String</jtok>
<jtok eid="92" type="parameter_name" span="2672:53:2672:58">entry</jtok>
<jtok eid="92" type="class_or_interface_ref" span="2673:9:2673:22">StringBuilder</jtok>
<jtok eid="92" type="local_variable_name" span="2673:23:2673:25">sb</jtok>
<jtok eid="92" type="constructor_call" span="2673:32:2673:45">StringBuilder</jtok>
<jtok eid="92" type="local_variable_name" span="2674:18:2674:19">i</jtok>
<jtok eid="92" type="primary_name_ref" span="2674:25:2674:26">i</jtok>
<jtok eid="92" type="primary_name_ref" span="2674:29:2674:34">entry</jtok>
<jtok eid="92" type="qualified_name_ref" span="2674:35:2674:41">length</jtok>
<jtok eid="92" type="primary_name_ref" span="2674:43:2674:44">i</jtok>
<jtok eid="92" type="primary_name_ref" span="2675:13:2675:15">sb</jtok>
<jtok eid="92" type="method_call" span="2675:16:2675:22">append</jtok>
<jtok eid="92" type="method_call" span="2675:23:2675:35">encodeString</jtok>
<jtok eid="92" type="primary_name_ref" span="2675:36:2675:41">entry</jtok>
<jtok eid="92" type="primary_name_ref" span="2675:42:2675:43">i</jtok>
<jtok eid="92" type="primary_name_ref" span="2676:17:2676:18">i</jtok>
<jtok eid="92" type="primary_name_ref" span="2676:21:2676:26">entry</jtok>
<jtok eid="92" type="qualified_name_ref" span="2676:27:2676:33">length</jtok>
<jtok eid="92" type="primary_name_ref" span="2677:17:2677:19">sb</jtok>
<jtok eid="92" type="method_call" span="2677:20:2677:26">append</jtok>
<jtok eid="92" type="primary_name_ref" span="2680:16:2680:18">sb</jtok>
<jtok eid="92" type="method_call" span="2680:19:2680:27">toString</jtok>
<jtok eid="1" type="block_comment" span="2683:5:2689:8">/**
     * Decodes an encoded double String array back into array form. The array
     * is assumed to be square, and delimited by the characters ';' (first dim) and
     * ':' (second dim).
     * @param value The encoded String to be decoded.
     * @return The decoded String array.
     */</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2690:19:2690:25">String</jtok>
<jtok eid="93" type="method_name" span="2690:30:2690:53">decodeStringDoubleArray</jtok>
<jtok eid="93" type="parameter_type" span="2690:54:2690:60">String</jtok>
<jtok eid="93" type="parameter_name" span="2690:61:2690:66">value</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2691:9:2691:18">ArrayList</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2691:19:2691:28">ArrayList</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2691:29:2691:35">String</jtok>
<jtok eid="93" type="local_variable_name" span="2691:38:2691:45">newList</jtok>
<jtok eid="93" type="constructor_call" span="2691:52:2691:61">ArrayList</jtok>
<jtok eid="93" type="constructor_call" span="2691:62:2691:71">ArrayList</jtok>
<jtok eid="93" type="constructor_call" span="2691:72:2691:78">String</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2692:9:2692:22">StringBuilder</jtok>
<jtok eid="93" type="local_variable_name" span="2692:23:2692:25">sb</jtok>
<jtok eid="93" type="constructor_call" span="2692:32:2692:45">StringBuilder</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2693:9:2693:18">ArrayList</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2693:19:2693:25">String</jtok>
<jtok eid="93" type="local_variable_name" span="2693:27:2693:36">thisEntry</jtok>
<jtok eid="93" type="constructor_call" span="2693:43:2693:52">ArrayList</jtok>
<jtok eid="93" type="constructor_call" span="2693:53:2693:59">String</jtok>
<jtok eid="93" type="local_variable_name" span="2694:17:2694:24">escaped</jtok>
<jtok eid="93" type="local_variable_name" span="2695:18:2695:19">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2695:23:2695:24">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2695:25:2695:30">value</jtok>
<jtok eid="93" type="method_call" span="2695:31:2695:37">length</jtok>
<jtok eid="93" type="primary_name_ref" span="2695:41:2695:42">i</jtok>
<jtok eid="93" type="local_variable_name" span="2696:18:2696:19">c</jtok>
<jtok eid="93" type="primary_name_ref" span="2696:22:2696:27">value</jtok>
<jtok eid="93" type="method_call" span="2696:28:2696:34">charAt</jtok>
<jtok eid="93" type="primary_name_ref" span="2696:35:2696:36">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2697:18:2697:25">escaped</jtok>
<jtok eid="93" type="primary_name_ref" span="2697:30:2697:31">c</jtok>
<jtok eid="93" type="primary_name_ref" span="2698:17:2698:24">escaped</jtok>
<jtok eid="93" type="primary_name_ref" span="2701:23:2701:30">escaped</jtok>
<jtok eid="93" type="primary_name_ref" span="2701:35:2701:36">c</jtok>
<jtok eid="93" type="primary_name_ref" span="2702:17:2702:26">thisEntry</jtok>
<jtok eid="93" type="method_call" span="2702:27:2702:30">add</jtok>
<jtok eid="93" type="primary_name_ref" span="2702:31:2702:33">sb</jtok>
<jtok eid="93" type="method_call" span="2702:34:2702:42">toString</jtok>
<jtok eid="93" type="primary_name_ref" span="2703:17:2703:19">sb</jtok>
<jtok eid="93" type="constructor_call" span="2703:26:2703:39">StringBuilder</jtok>
<jtok eid="93" type="primary_name_ref" span="2705:23:2705:30">escaped</jtok>
<jtok eid="93" type="primary_name_ref" span="2705:35:2705:36">c</jtok>
<jtok eid="93" type="primary_name_ref" span="2706:17:2706:26">thisEntry</jtok>
<jtok eid="93" type="method_call" span="2706:27:2706:30">add</jtok>
<jtok eid="93" type="primary_name_ref" span="2706:31:2706:33">sb</jtok>
<jtok eid="93" type="method_call" span="2706:34:2706:42">toString</jtok>
<jtok eid="93" type="primary_name_ref" span="2707:17:2707:19">sb</jtok>
<jtok eid="93" type="constructor_call" span="2707:26:2707:39">StringBuilder</jtok>
<jtok eid="93" type="primary_name_ref" span="2708:17:2708:24">newList</jtok>
<jtok eid="93" type="method_call" span="2708:25:2708:28">add</jtok>
<jtok eid="93" type="primary_name_ref" span="2708:29:2708:38">thisEntry</jtok>
<jtok eid="93" type="primary_name_ref" span="2709:17:2709:26">thisEntry</jtok>
<jtok eid="93" type="constructor_call" span="2709:33:2709:42">ArrayList</jtok>
<jtok eid="93" type="constructor_call" span="2709:43:2709:49">String</jtok>
<jtok eid="93" type="primary_name_ref" span="2711:18:2711:20">sb</jtok>
<jtok eid="93" type="method_call" span="2711:21:2711:27">append</jtok>
<jtok eid="93" type="primary_name_ref" span="2711:28:2711:29">c</jtok>
<jtok eid="93" type="primary_name_ref" span="2712:13:2712:20">escaped</jtok>
<jtok eid="93" type="primary_name_ref" span="2714:13:2714:15">sb</jtok>
<jtok eid="93" type="method_call" span="2714:16:2714:22">length</jtok>
<jtok eid="93" type="primary_name_ref" span="2715:13:2715:22">thisEntry</jtok>
<jtok eid="93" type="method_call" span="2715:23:2715:26">add</jtok>
<jtok eid="93" type="primary_name_ref" span="2715:27:2715:29">sb</jtok>
<jtok eid="93" type="method_call" span="2715:30:2715:38">toString</jtok>
<jtok eid="93" type="primary_name_ref" span="2716:13:2716:22">thisEntry</jtok>
<jtok eid="93" type="method_call" span="2716:23:2716:27">size</jtok>
<jtok eid="93" type="primary_name_ref" span="2717:13:2717:20">newList</jtok>
<jtok eid="93" type="method_call" span="2717:21:2717:24">add</jtok>
<jtok eid="93" type="primary_name_ref" span="2717:25:2717:34">thisEntry</jtok>
<jtok eid="93" type="line_comment" span="2719:9:2719:34">// Convert to String[][]:</jtok>
<jtok eid="93" type="class_or_interface_ref" span="2720:9:2720:15">String</jtok>
<jtok eid="93" type="local_variable_name" span="2720:20:2720:23">res</jtok>
<jtok eid="93" type="constructor_call" span="2720:30:2720:36">String</jtok>
<jtok eid="93" type="primary_name_ref" span="2720:37:2720:44">newList</jtok>
<jtok eid="93" type="method_call" span="2720:45:2720:49">size</jtok>
<jtok eid="93" type="local_variable_name" span="2721:18:2721:19">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2721:25:2721:26">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2721:29:2721:32">res</jtok>
<jtok eid="93" type="qualified_name_ref" span="2721:33:2721:39">length</jtok>
<jtok eid="93" type="primary_name_ref" span="2721:41:2721:42">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2722:13:2722:16">res</jtok>
<jtok eid="93" type="primary_name_ref" span="2722:17:2722:18">i</jtok>
<jtok eid="93" type="constructor_call" span="2722:26:2722:32">String</jtok>
<jtok eid="93" type="primary_name_ref" span="2722:33:2722:40">newList</jtok>
<jtok eid="93" type="method_call" span="2722:41:2722:44">get</jtok>
<jtok eid="93" type="primary_name_ref" span="2722:45:2722:46">i</jtok>
<jtok eid="93" type="method_call" span="2722:48:2722:52">size</jtok>
<jtok eid="93" type="local_variable_name" span="2723:22:2723:23">j</jtok>
<jtok eid="93" type="primary_name_ref" span="2723:29:2723:30">j</jtok>
<jtok eid="93" type="primary_name_ref" span="2723:33:2723:36">res</jtok>
<jtok eid="93" type="primary_name_ref" span="2723:37:2723:38">i</jtok>
<jtok eid="93" type="qualified_name_ref" span="2723:40:2723:46">length</jtok>
<jtok eid="93" type="primary_name_ref" span="2723:48:2723:49">j</jtok>
<jtok eid="93" type="primary_name_ref" span="2724:17:2724:20">res</jtok>
<jtok eid="93" type="primary_name_ref" span="2724:21:2724:22">i</jtok>
<jtok eid="93" type="primary_name_ref" span="2724:24:2724:25">j</jtok>
<jtok eid="93" type="primary_name_ref" span="2724:29:2724:36">newList</jtok>
<jtok eid="93" type="method_call" span="2724:37:2724:40">get</jtok>
<jtok eid="93" type="primary_name_ref" span="2724:41:2724:42">i</jtok>
<jtok eid="93" type="method_call" span="2724:44:2724:47">get</jtok>
<jtok eid="93" type="primary_name_ref" span="2724:48:2724:49">j</jtok>
<jtok eid="93" type="primary_name_ref" span="2727:16:2727:19">res</jtok>
<jtok eid="94" type="class_or_interface_ref" span="2730:20:2730:26">String</jtok>
<jtok eid="94" type="method_name" span="2730:27:2730:39">encodeString</jtok>
<jtok eid="94" type="parameter_type" span="2730:40:2730:46">String</jtok>
<jtok eid="94" type="parameter_name" span="2730:47:2730:48">s</jtok>
<jtok eid="94" type="primary_name_ref" span="2731:13:2731:14">s</jtok>
<jtok eid="94" type="class_or_interface_ref" span="2733:9:2733:22">StringBuilder</jtok>
<jtok eid="94" type="local_variable_name" span="2733:23:2733:25">sb</jtok>
<jtok eid="94" type="constructor_call" span="2733:32:2733:45">StringBuilder</jtok>
<jtok eid="94" type="local_variable_name" span="2734:18:2734:19">i</jtok>
<jtok eid="94" type="primary_name_ref" span="2734:23:2734:24">i</jtok>
<jtok eid="94" type="primary_name_ref" span="2734:25:2734:26">s</jtok>
<jtok eid="94" type="method_call" span="2734:27:2734:33">length</jtok>
<jtok eid="94" type="primary_name_ref" span="2734:37:2734:38">i</jtok>
<jtok eid="94" type="local_variable_name" span="2735:18:2735:19">c</jtok>
<jtok eid="94" type="primary_name_ref" span="2735:22:2735:23">s</jtok>
<jtok eid="94" type="method_call" span="2735:24:2735:30">charAt</jtok>
<jtok eid="94" type="primary_name_ref" span="2735:31:2735:32">i</jtok>
<jtok eid="94" type="primary_name_ref" span="2736:18:2736:19">c</jtok>
<jtok eid="94" type="primary_name_ref" span="2736:32:2736:33">c</jtok>
<jtok eid="94" type="primary_name_ref" span="2736:46:2736:47">c</jtok>
<jtok eid="94" type="primary_name_ref" span="2737:17:2737:19">sb</jtok>
<jtok eid="94" type="method_call" span="2737:20:2737:26">append</jtok>
<jtok eid="94" type="primary_name_ref" span="2738:13:2738:15">sb</jtok>
<jtok eid="94" type="method_call" span="2738:16:2738:22">append</jtok>
<jtok eid="94" type="primary_name_ref" span="2738:23:2738:24">c</jtok>
<jtok eid="94" type="primary_name_ref" span="2740:16:2740:18">sb</jtok>
<jtok eid="94" type="method_call" span="2740:19:2740:27">toString</jtok>
<jtok eid="1" type="block_comment" span="2743:5:2753:5">/**
	 * Static equals that can also return the right result when one of the
	 * objects is null.
	 * 
	 * @param one
	 *            The object whose equals method is called if the first is not
	 *            null.
	 * @param two
	 *            The object passed to the first one if the first is not null.
	 * @return &lt;code&gt;one == null ? two == null : one.equals(two);&lt;/code&gt;
	 */</jtok>
<jtok eid="95" type="method_name" span="2754:24:2754:30">equals</jtok>
<jtok eid="95" type="parameter_type" span="2754:31:2754:37">Object</jtok>
<jtok eid="95" type="parameter_name" span="2754:38:2754:41">one</jtok>
<jtok eid="95" type="parameter_type" span="2754:43:2754:49">Object</jtok>
<jtok eid="95" type="parameter_name" span="2754:50:2754:53">two</jtok>
<jtok eid="95" type="primary_name_ref" span="2755:10:2755:13">one</jtok>
<jtok eid="95" type="primary_name_ref" span="2755:24:2755:27">two</jtok>
<jtok eid="95" type="primary_name_ref" span="2755:38:2755:41">one</jtok>
<jtok eid="95" type="method_call" span="2755:42:2755:48">equals</jtok>
<jtok eid="95" type="primary_name_ref" span="2755:49:2755:52">two</jtok>
<jtok eid="1" type="block_comment" span="2758:2:2768:5">/**
	 * Returns the given string but with the first character turned into an
	 * upper case character.
	 * 
	 * Example: testTest becomes TestTest
	 * 
	 * @param string
	 *            The string to change the first character to upper case to.
	 * @return A string has the first character turned to upper case and the
	 *         rest unchanged from the given one.
	 */</jtok>
<jtok eid="96" type="class_or_interface_ref" span="2769:16:2769:22">String</jtok>
<jtok eid="96" type="method_name" span="2769:23:2769:41">toUpperFirstLetter</jtok>
<jtok eid="96" type="parameter_type" span="2769:42:2769:48">String</jtok>
<jtok eid="96" type="parameter_name" span="2769:49:2769:55">string</jtok>
<jtok eid="96" type="primary_name_ref" span="2770:7:2770:13">string</jtok>
<jtok eid="96" type="constructor_call" span="2771:14:2771:38">IllegalArgumentException</jtok>
<jtok eid="96" type="primary_name_ref" span="2773:7:2773:13">string</jtok>
<jtok eid="96" type="method_call" span="2773:14:2773:20">length</jtok>
<jtok eid="96" type="primary_name_ref" span="2774:11:2774:17">string</jtok>
<jtok eid="96" type="primary_name_ref" span="2776:10:2776:19">Character</jtok>
<jtok eid="96" type="method_call" span="2776:20:2776:31">toUpperCase</jtok>
<jtok eid="96" type="primary_name_ref" span="2776:32:2776:38">string</jtok>
<jtok eid="96" type="method_call" span="2776:39:2776:45">charAt</jtok>
<jtok eid="96" type="primary_name_ref" span="2776:52:2776:58">string</jtok>
<jtok eid="96" type="method_call" span="2776:59:2776:68">substring</jtok>
<jtok eid="1" type="block_comment" span="2780:5:2785:8">/**
     * Run an AbstractWorker's methods using Spin features to put each method
     * on the correct thread.
     * @param worker The worker to run.
     * @throws Throwable 
     */</jtok>
<jtok eid="97" type="method_name" span="2786:24:2786:41">runAbstractWorker</jtok>
<jtok eid="97" type="parameter_type" span="2786:42:2786:56">AbstractWorker</jtok>
<jtok eid="97" type="parameter_name" span="2786:57:2786:63">worker</jtok>
<jtok eid="97" type="throws" span="2786:72:2786:81">Throwable</jtok>
<jtok eid="97" type="line_comment" span="2787:9:2787:43">// This part uses Spin's features:</jtok>
<jtok eid="97" type="class_or_interface_ref" span="2788:9:2788:15">Worker</jtok>
<jtok eid="97" type="local_variable_name" span="2788:16:2788:19">wrk</jtok>
<jtok eid="97" type="primary_name_ref" span="2788:22:2788:28">worker</jtok>
<jtok eid="97" type="method_call" span="2788:29:2788:38">getWorker</jtok>
<jtok eid="97" type="line_comment" span="2789:9:2789:63">// The Worker returned by getWorker() has been wrapped</jtok>
<jtok eid="97" type="line_comment" span="2790:9:2790:60">// by Spin.off(), which makes its methods be run in</jtok>
<jtok eid="97" type="line_comment" span="2791:9:2791:44">// a different thread from the EDT.</jtok>
<jtok eid="97" type="class_or_interface_ref" span="2792:9:2792:17">CallBack</jtok>
<jtok eid="97" type="local_variable_name" span="2792:18:2792:21">clb</jtok>
<jtok eid="97" type="primary_name_ref" span="2792:24:2792:30">worker</jtok>
<jtok eid="97" type="method_call" span="2792:31:2792:42">getCallBack</jtok>
<jtok eid="97" type="primary_name_ref" span="2794:9:2794:15">worker</jtok>
<jtok eid="97" type="method_call" span="2794:16:2794:20">init</jtok>
<jtok eid="97" type="line_comment" span="2794:24:2794:73">// This method runs in this same thread, the EDT.</jtok>
<jtok eid="97" type="line_comment" span="2795:9:2795:68">// Useful for initial GUI actions, like printing a message.</jtok>
<jtok eid="97" type="line_comment" span="2797:9:2797:67">// The CallBack returned by getCallBack() has been wrapped</jtok>
<jtok eid="97" type="line_comment" span="2798:9:2798:61">// by Spin.over(), which makes its methods be run on</jtok>
<jtok eid="97" type="line_comment" span="2799:9:2799:20">// the EDT.</jtok>
<jtok eid="97" type="primary_name_ref" span="2800:9:2800:12">wrk</jtok>
<jtok eid="97" type="method_call" span="2800:13:2800:16">run</jtok>
<jtok eid="97" type="line_comment" span="2800:20:2800:65">// Runs the potentially time-consuming action</jtok>
<jtok eid="97" type="line_comment" span="2801:9:2801:65">// without freezing the GUI. The magic is that THIS line</jtok>
<jtok eid="97" type="line_comment" span="2802:9:2802:67">// of execution will not continue until run() is finished.</jtok>
<jtok eid="97" type="primary_name_ref" span="2803:9:2803:12">clb</jtok>
<jtok eid="97" type="method_call" span="2803:13:2803:19">update</jtok>
<jtok eid="97" type="line_comment" span="2803:23:2803:62">// Runs the update() method on the EDT.</jtok>
<jtok eid="1" type="block_comment" span="2806:5:2814:8">/**
     * This method checks whether there is a lock file for the given file. If
     * there is, it waits for 500 ms. This is repeated until the lock is gone
     * or we have waited the maximum number of times.
     *
     * @param file The file to check the lock for.
     * @param maxWaitCount The maximum number of times to wait.
     * @return true if the lock file is gone, false if it is still there.
     */</jtok>
<jtok eid="98" type="method_name" span="2815:27:2815:42">waitForFileLock</jtok>
<jtok eid="98" type="parameter_type" span="2815:43:2815:47">File</jtok>
<jtok eid="98" type="parameter_name" span="2815:48:2815:52">file</jtok>
<jtok eid="98" type="parameter_name" span="2815:58:2815:70">maxWaitCount</jtok>
<jtok eid="98" type="line_comment" span="2816:9:2816:63">// Check if the file is locked by another JabRef user:</jtok>
<jtok eid="98" type="local_variable_name" span="2817:13:2817:27">lockCheckCount</jtok>
<jtok eid="98" type="primary_name_ref" span="2818:16:2818:20">Util</jtok>
<jtok eid="98" type="method_call" span="2818:21:2818:32">hasLockFile</jtok>
<jtok eid="98" type="primary_name_ref" span="2818:33:2818:37">file</jtok>
<jtok eid="98" type="primary_name_ref" span="2820:13:2820:19">System</jtok>
<jtok eid="98" type="qualified_name_ref" span="2820:20:2820:23">out</jtok>
<jtok eid="98" type="method_call" span="2820:24:2820:31">println</jtok>
<jtok eid="98" type="string_literal" span="2820:32:2820:56">"File locked... waiting"</jtok>
<jtok eid="98" type="primary_name_ref" span="2821:17:2821:31">lockCheckCount</jtok>
<jtok eid="98" type="primary_name_ref" span="2821:37:2821:49">maxWaitCount</jtok>
<jtok eid="98" type="primary_name_ref" span="2822:17:2822:23">System</jtok>
<jtok eid="98" type="qualified_name_ref" span="2822:24:2822:27">out</jtok>
<jtok eid="98" type="method_call" span="2822:28:2822:35">println</jtok>
<jtok eid="98" type="string_literal" span="2822:36:2822:53">"Giving up wait."</jtok>
<jtok eid="98" type="primary_name_ref" span="2825:19:2825:25">Thread</jtok>
<jtok eid="98" type="method_call" span="2825:26:2825:31">sleep</jtok>
<jtok eid="98" type="class_or_interface_ref" span="2825:47:2825:67">InterruptedException</jtok>
<jtok eid="98" type="local_variable_name" span="2825:68:2825:70">ex</jtok>
<jtok eid="1" type="block_comment" span="2830:5:2834:8">/**
     * Check whether a lock file exists for this file.
     * @param file The file to check.
     * @return true if a lock file exists, false otherwise.
     */</jtok>
<jtok eid="99" type="method_name" span="2835:27:2835:38">hasLockFile</jtok>
<jtok eid="99" type="parameter_type" span="2835:39:2835:43">File</jtok>
<jtok eid="99" type="parameter_name" span="2835:44:2835:48">file</jtok>
<jtok eid="99" type="class_or_interface_ref" span="2836:9:2836:13">File</jtok>
<jtok eid="99" type="local_variable_name" span="2836:14:2836:18">lock</jtok>
<jtok eid="99" type="constructor_call" span="2836:25:2836:29">File</jtok>
<jtok eid="99" type="primary_name_ref" span="2836:30:2836:34">file</jtok>
<jtok eid="99" type="method_call" span="2836:35:2836:42">getPath</jtok>
<jtok eid="99" type="primary_name_ref" span="2836:46:2836:57">SaveSession</jtok>
<jtok eid="99" type="qualified_name_ref" span="2836:58:2836:73">LOCKFILE_SUFFIX</jtok>
<jtok eid="99" type="primary_name_ref" span="2837:16:2837:20">lock</jtok>
<jtok eid="99" type="method_call" span="2837:21:2837:27">exists</jtok>
<jtok eid="1" type="block_comment" span="2840:5:2844:8">/**
     * Find the lock file's last modified time, if it has a lock file.
     * @param file The file to check.
     * @return the last modified time if lock file exists, -1 otherwise.
     */</jtok>
<jtok eid="100" type="method_name" span="2845:24:2845:44">getLockFileTimeStamp</jtok>
<jtok eid="100" type="parameter_type" span="2845:45:2845:49">File</jtok>
<jtok eid="100" type="parameter_name" span="2845:50:2845:54">file</jtok>
<jtok eid="100" type="class_or_interface_ref" span="2846:9:2846:13">File</jtok>
<jtok eid="100" type="local_variable_name" span="2846:14:2846:18">lock</jtok>
<jtok eid="100" type="constructor_call" span="2846:25:2846:29">File</jtok>
<jtok eid="100" type="primary_name_ref" span="2846:30:2846:34">file</jtok>
<jtok eid="100" type="method_call" span="2846:35:2846:42">getPath</jtok>
<jtok eid="100" type="primary_name_ref" span="2846:46:2846:57">SaveSession</jtok>
<jtok eid="100" type="qualified_name_ref" span="2846:58:2846:73">LOCKFILE_SUFFIX</jtok>
<jtok eid="100" type="primary_name_ref" span="2847:16:2847:20">lock</jtok>
<jtok eid="100" type="method_call" span="2847:21:2847:27">exists</jtok>
<jtok eid="100" type="primary_name_ref" span="2847:32:2847:36">lock</jtok>
<jtok eid="100" type="method_call" span="2847:37:2847:49">lastModified</jtok>
<jtok eid="1" type="block_comment" span="2850:9:2854:8">/**
     * Check if a lock file exists, and delete it if it does.
     * @return true if the lock file existed, false otherwise.
     * @throws IOException if something goes wrong.
     */</jtok>
<jtok eid="101" type="method_name" span="2855:27:2855:41">deleteLockFile</jtok>
<jtok eid="101" type="parameter_type" span="2855:42:2855:46">File</jtok>
<jtok eid="101" type="parameter_name" span="2855:47:2855:51">file</jtok>
<jtok eid="101" type="class_or_interface_ref" span="2856:9:2856:13">File</jtok>
<jtok eid="101" type="local_variable_name" span="2856:14:2856:18">lock</jtok>
<jtok eid="101" type="constructor_call" span="2856:25:2856:29">File</jtok>
<jtok eid="101" type="primary_name_ref" span="2856:30:2856:34">file</jtok>
<jtok eid="101" type="method_call" span="2856:35:2856:42">getPath</jtok>
<jtok eid="101" type="primary_name_ref" span="2856:45:2856:56">SaveSession</jtok>
<jtok eid="101" type="qualified_name_ref" span="2856:57:2856:72">LOCKFILE_SUFFIX</jtok>
<jtok eid="101" type="primary_name_ref" span="2857:14:2857:18">lock</jtok>
<jtok eid="101" type="method_call" span="2857:19:2857:25">exists</jtok>
<jtok eid="101" type="primary_name_ref" span="2860:9:2860:13">lock</jtok>
<jtok eid="101" type="method_call" span="2860:14:2860:20">delete</jtok>
</jdoc>