<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.collab.ChangeScanner" jls="java5">
<jent id="0" type="file" span="0:0:563:1">Source/jabref/src/java/net/sf/jabref/collab/ChangeScanner.java</jent>
<jent id="1" pid="0" type="class" span="23:1:563:1">net.sf.jabref.collab.ChangeScanner</jent>
<jent id="2" pid="1" type="method" span="43:5:51:5">net.sf.jabref.collab.ChangeScanner.ChangeScanner(JabRefFrame,BasePanel)</jent>
<jent id="3" pid="1" type="method" span="53:5:56:5">net.sf.jabref.collab.ChangeScanner.changeScan(File)</jent>
<jent id="4" pid="1" type="method" span="58:5:101:5">net.sf.jabref.collab.ChangeScanner.run()</jent>
<jent id="5" pid="1" type="method" span="104:5:106:5">net.sf.jabref.collab.ChangeScanner.changesFound()</jent>
<jent id="6" pid="1" type="method" span="108:5:128:5">net.sf.jabref.collab.ChangeScanner.displayResult(DisplayResultCallback)</jent>
<jent id="7" pid="6" type="class" span="110:55:121:13">net.sf.jabref.collab.ChangeScanner.displayResult(DisplayResultCallback).$1</jent>
<jent id="8" pid="7" type="method" span="111:17:120:17">net.sf.jabref.collab.ChangeScanner.displayResult(DisplayResultCallback).$1.run()</jent>
<jent id="9" pid="1" type="method" span="130:5:147:5">net.sf.jabref.collab.ChangeScanner.storeTempDatabase()</jent>
<jent id="10" pid="9" type="class" span="131:35:146:9">net.sf.jabref.collab.ChangeScanner.storeTempDatabase().$2</jent>
<jent id="11" pid="10" type="method" span="132:13:145:13">net.sf.jabref.collab.ChangeScanner.storeTempDatabase().$2.run()</jent>
<jent id="12" pid="1" type="method" span="149:5:181:5">net.sf.jabref.collab.ChangeScanner.scanMetaData(MetaData,MetaData,MetaData)</jent>
<jent id="13" pid="1" type="method" span="184:5:326:5">net.sf.jabref.collab.ChangeScanner.scanEntries(EntrySorter,EntrySorter,EntrySorter)</jent>
<jent id="14" pid="1" type="method" span="336:5:350:5">net.sf.jabref.collab.ChangeScanner.bestFit(EntrySorter,EntrySorter,int)</jent>
<jent id="15" pid="1" type="method" span="352:5:363:5">net.sf.jabref.collab.ChangeScanner.scanPreamble(BibtexDatabase,BibtexDatabase,BibtexDatabase)</jent>
<jent id="16" pid="1" type="method" span="365:5:473:5">net.sf.jabref.collab.ChangeScanner.scanStrings(BibtexDatabase,BibtexDatabase,BibtexDatabase)</jent>
<jent id="17" pid="1" type="method" span="475:5:487:5">net.sf.jabref.collab.ChangeScanner.findString(BibtexDatabase,String,HashSet&lt;Object&gt;)</jent>
<jent id="18" pid="1" type="method" span="494:5:557:5">net.sf.jabref.collab.ChangeScanner.scanGroups(MetaData,MetaData,MetaData)</jent>
<jent id="19" pid="1" type="interface" span="560:5:562:5">net.sf.jabref.collab.ChangeScanner.DisplayResultCallback</jent>
<jent id="20" pid="19" type="method" span="561:9:561:58">net.sf.jabref.collab.ChangeScanner.DisplayResultCallback.scanResultsResolved(boolean)</jent>
<jtok eid="1" type="class_name" span="23:14:23:27">ChangeScanner</jtok>
<jtok eid="1" type="class_or_interface_ref" span="23:36:23:42">Thread</jtok>
<jtok eid="1" type="field_name" span="25:18:25:33">MATCH_THRESHOLD</jtok>
<jtok eid="1" type="class_or_interface_ref" span="26:11:26:17">String</jtok>
<jtok eid="1" type="field_name" span="26:20:26:26">sortBy</jtok>
<jtok eid="1" type="constructor_call" span="26:33:26:39">String</jtok>
<jtok eid="1" type="string_literal" span="26:43:26:49">"year"</jtok>
<jtok eid="1" type="string_literal" span="26:51:26:59">"author"</jtok>
<jtok eid="1" type="string_literal" span="26:61:26:68">"title"</jtok>
<jtok eid="1" type="class_or_interface_ref" span="27:5:27:9">File</jtok>
<jtok eid="1" type="field_name" span="27:10:27:11">f</jtok>
<jtok eid="1" type="class_or_interface_ref" span="28:5:28:19">BibtexDatabase</jtok>
<jtok eid="1" type="field_name" span="28:20:28:25">inMem</jtok>
<jtok eid="1" type="field_name" span="28:27:28:33">inTemp</jtok>
<jtok eid="1" type="class_or_interface_ref" span="29:5:29:13">MetaData</jtok>
<jtok eid="1" type="field_name" span="29:14:29:21">mdInMem</jtok>
<jtok eid="1" type="field_name" span="29:23:29:31">mdInTemp</jtok>
<jtok eid="1" type="class_or_interface_ref" span="30:5:30:14">BasePanel</jtok>
<jtok eid="1" type="field_name" span="30:15:30:20">panel</jtok>
<jtok eid="1" type="class_or_interface_ref" span="31:5:31:16">JabRefFrame</jtok>
<jtok eid="1" type="field_name" span="31:17:31:22">frame</jtok>
<jtok eid="1" type="block_comment" span="33:5:37:8">/**
     * We create an ArrayList to hold the changes we find. These will be added in the form
     * of UndoEdit objects. We instantiate these so that the changes found in the file on disk
     * can be reproduced in memory by calling redo() on them. REDO, not UNDO!
     */</jtok>
<jtok eid="1" type="line_comment" span="38:5:38:43">//ArrayList changes = new ArrayList();</jtok>
<jtok eid="1" type="class_or_interface_ref" span="39:5:39:27">DefaultMutableTreeNode</jtok>
<jtok eid="1" type="field_name" span="39:28:39:35">changes</jtok>
<jtok eid="1" type="constructor_call" span="39:42:39:64">DefaultMutableTreeNode</jtok>
<jtok eid="1" type="primary_name_ref" span="39:65:39:72">Globals</jtok>
<jtok eid="1" type="method_call" span="39:73:39:77">lang</jtok>
<jtok eid="1" type="string_literal" span="39:78:39:96">"External changes"</jtok>
<jtok eid="1" type="line_comment" span="41:5:41:74">//  NamedCompound edit = new NamedCompound("Merged external changes")</jtok>
<jtok eid="2" type="method_name" span="43:12:43:25">ChangeScanner</jtok>
<jtok eid="2" type="parameter_type" span="43:26:43:37">JabRefFrame</jtok>
<jtok eid="2" type="parameter_name" span="43:38:43:43">frame</jtok>
<jtok eid="2" type="parameter_type" span="43:45:43:54">BasePanel</jtok>
<jtok eid="2" type="parameter_name" span="43:55:43:57">bp</jtok>
<jtok eid="2" type="line_comment" span="43:61:43:106">//, BibtexDatabase inMem, MetaData mdInMem) {</jtok>
<jtok eid="2" type="primary_name_ref" span="44:9:44:14">panel</jtok>
<jtok eid="2" type="primary_name_ref" span="44:17:44:19">bp</jtok>
<jtok eid="2" type="qualified_name_ref" span="45:14:45:19">frame</jtok>
<jtok eid="2" type="primary_name_ref" span="45:22:45:27">frame</jtok>
<jtok eid="2" type="qualified_name_ref" span="46:14:46:19">inMem</jtok>
<jtok eid="2" type="primary_name_ref" span="46:22:46:24">bp</jtok>
<jtok eid="2" type="method_call" span="46:25:46:33">database</jtok>
<jtok eid="2" type="qualified_name_ref" span="47:14:47:21">mdInMem</jtok>
<jtok eid="2" type="primary_name_ref" span="47:24:47:26">bp</jtok>
<jtok eid="2" type="method_call" span="47:27:47:35">metaData</jtok>
<jtok eid="2" type="line_comment" span="48:9:48:29">// Set low priority:</jtok>
<jtok eid="2" type="method_call" span="49:9:49:20">setPriority</jtok>
<jtok eid="2" type="primary_name_ref" span="49:21:49:27">Thread</jtok>
<jtok eid="2" type="qualified_name_ref" span="49:28:49:40">MIN_PRIORITY</jtok>
<jtok eid="3" type="method_name" span="53:17:53:27">changeScan</jtok>
<jtok eid="3" type="parameter_type" span="53:28:53:32">File</jtok>
<jtok eid="3" type="parameter_name" span="53:33:53:34">f</jtok>
<jtok eid="3" type="qualified_name_ref" span="54:14:54:15">f</jtok>
<jtok eid="3" type="primary_name_ref" span="54:18:54:19">f</jtok>
<jtok eid="3" type="method_call" span="55:9:55:14">start</jtok>
<jtok eid="4" type="method_name" span="58:17:58:20">run</jtok>
<jtok eid="4" type="line_comment" span="60:13:60:59">//long startTime = System.currentTimeMillis();</jtok>
<jtok eid="4" type="line_comment" span="62:13:62:41">// Parse the temporary file.</jtok>
<jtok eid="4" type="class_or_interface_ref" span="63:13:63:17">File</jtok>
<jtok eid="4" type="local_variable_name" span="63:18:63:26">tempFile</jtok>
<jtok eid="4" type="primary_name_ref" span="63:29:63:36">Globals</jtok>
<jtok eid="4" type="qualified_name_ref" span="63:37:63:54">fileUpdateMonitor</jtok>
<jtok eid="4" type="method_call" span="63:55:63:66">getTempFile</jtok>
<jtok eid="4" type="primary_name_ref" span="63:67:63:72">panel</jtok>
<jtok eid="4" type="method_call" span="63:73:63:90">fileMonitorHandle</jtok>
<jtok eid="4" type="class_or_interface_ref" span="64:13:64:25">ParserResult</jtok>
<jtok eid="4" type="local_variable_name" span="64:26:64:28">pr</jtok>
<jtok eid="4" type="primary_name_ref" span="64:31:64:49">OpenDatabaseAction</jtok>
<jtok eid="4" type="method_call" span="64:50:64:62">loadDatabase</jtok>
<jtok eid="4" type="primary_name_ref" span="64:63:64:71">tempFile</jtok>
<jtok eid="4" type="primary_name_ref" span="65:13:65:20">Globals</jtok>
<jtok eid="4" type="qualified_name_ref" span="65:21:65:26">prefs</jtok>
<jtok eid="4" type="method_call" span="65:27:65:30">get</jtok>
<jtok eid="4" type="string_literal" span="65:31:65:48">"defaultEncoding"</jtok>
<jtok eid="4" type="primary_name_ref" span="66:13:66:19">inTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="66:22:66:24">pr</jtok>
<jtok eid="4" type="method_call" span="66:25:66:36">getDatabase</jtok>
<jtok eid="4" type="primary_name_ref" span="67:13:67:21">mdInTemp</jtok>
<jtok eid="4" type="constructor_call" span="67:28:67:36">MetaData</jtok>
<jtok eid="4" type="primary_name_ref" span="67:37:67:39">pr</jtok>
<jtok eid="4" type="method_call" span="67:40:67:51">getMetaData</jtok>
<jtok eid="4" type="primary_name_ref" span="67:54:67:60">inTemp</jtok>
<jtok eid="4" type="line_comment" span="68:13:68:40">// Parse the modified file.</jtok>
<jtok eid="4" type="primary_name_ref" span="69:13:69:15">pr</jtok>
<jtok eid="4" type="primary_name_ref" span="69:18:69:36">OpenDatabaseAction</jtok>
<jtok eid="4" type="method_call" span="69:37:69:49">loadDatabase</jtok>
<jtok eid="4" type="primary_name_ref" span="69:50:69:51">f</jtok>
<jtok eid="4" type="primary_name_ref" span="69:53:69:60">Globals</jtok>
<jtok eid="4" type="qualified_name_ref" span="69:61:69:66">prefs</jtok>
<jtok eid="4" type="method_call" span="69:67:69:70">get</jtok>
<jtok eid="4" type="string_literal" span="69:71:69:88">"defaultEncoding"</jtok>
<jtok eid="4" type="class_or_interface_ref" span="70:13:70:27">BibtexDatabase</jtok>
<jtok eid="4" type="local_variable_name" span="70:28:70:34">onDisk</jtok>
<jtok eid="4" type="primary_name_ref" span="70:37:70:39">pr</jtok>
<jtok eid="4" type="method_call" span="70:40:70:51">getDatabase</jtok>
<jtok eid="4" type="class_or_interface_ref" span="71:13:71:21">MetaData</jtok>
<jtok eid="4" type="local_variable_name" span="71:22:71:30">mdOnDisk</jtok>
<jtok eid="4" type="constructor_call" span="71:37:71:45">MetaData</jtok>
<jtok eid="4" type="primary_name_ref" span="71:46:71:48">pr</jtok>
<jtok eid="4" type="method_call" span="71:49:71:60">getMetaData</jtok>
<jtok eid="4" type="primary_name_ref" span="71:63:71:69">onDisk</jtok>
<jtok eid="4" type="line_comment" span="73:13:73:67">// Sort both databases according to a common sort key.</jtok>
<jtok eid="4" type="class_or_interface_ref" span="74:13:74:28">EntryComparator</jtok>
<jtok eid="4" type="local_variable_name" span="74:29:74:33">comp</jtok>
<jtok eid="4" type="constructor_call" span="74:40:74:55">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="74:69:74:75">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="75:13:75:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="75:24:75:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="75:53:75:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="75:64:75:68">comp</jtok>
<jtok eid="4" type="primary_name_ref" span="76:13:76:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="76:24:76:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="76:53:76:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="76:64:76:68">comp</jtok>
<jtok eid="4" type="class_or_interface_ref" span="77:13:77:24">EntrySorter</jtok>
<jtok eid="4" type="local_variable_name" span="77:25:77:32">sInTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="77:35:77:41">inTemp</jtok>
<jtok eid="4" type="method_call" span="77:42:77:51">getSorter</jtok>
<jtok eid="4" type="primary_name_ref" span="77:52:77:56">comp</jtok>
<jtok eid="4" type="primary_name_ref" span="78:13:78:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="78:24:78:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="78:53:78:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="79:13:79:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="79:24:79:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="79:53:79:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="79:64:79:68">comp</jtok>
<jtok eid="4" type="primary_name_ref" span="80:13:80:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="80:24:80:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="80:53:80:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="80:64:80:68">comp</jtok>
<jtok eid="4" type="class_or_interface_ref" span="81:13:81:24">EntrySorter</jtok>
<jtok eid="4" type="local_variable_name" span="81:25:81:32">sOnDisk</jtok>
<jtok eid="4" type="primary_name_ref" span="81:35:81:41">onDisk</jtok>
<jtok eid="4" type="method_call" span="81:42:81:51">getSorter</jtok>
<jtok eid="4" type="primary_name_ref" span="81:52:81:56">comp</jtok>
<jtok eid="4" type="primary_name_ref" span="82:13:82:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="82:24:82:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="82:53:82:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="83:13:83:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="83:24:83:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="83:53:83:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="83:64:83:68">comp</jtok>
<jtok eid="4" type="primary_name_ref" span="84:13:84:17">comp</jtok>
<jtok eid="4" type="constructor_call" span="84:24:84:39">EntryComparator</jtok>
<jtok eid="4" type="primary_name_ref" span="84:53:84:59">sortBy</jtok>
<jtok eid="4" type="primary_name_ref" span="84:64:84:68">comp</jtok>
<jtok eid="4" type="class_or_interface_ref" span="85:13:85:24">EntrySorter</jtok>
<jtok eid="4" type="local_variable_name" span="85:25:85:31">sInMem</jtok>
<jtok eid="4" type="primary_name_ref" span="85:34:85:39">inMem</jtok>
<jtok eid="4" type="method_call" span="85:40:85:49">getSorter</jtok>
<jtok eid="4" type="primary_name_ref" span="85:50:85:54">comp</jtok>
<jtok eid="4" type="line_comment" span="87:13:87:41">// Start looking at changes.</jtok>
<jtok eid="4" type="method_call" span="88:13:88:25">scanMetaData</jtok>
<jtok eid="4" type="primary_name_ref" span="88:26:88:33">mdInMem</jtok>
<jtok eid="4" type="primary_name_ref" span="88:35:88:43">mdInTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="88:45:88:53">mdOnDisk</jtok>
<jtok eid="4" type="method_call" span="89:13:89:25">scanPreamble</jtok>
<jtok eid="4" type="primary_name_ref" span="89:26:89:31">inMem</jtok>
<jtok eid="4" type="primary_name_ref" span="89:33:89:39">inTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="89:41:89:47">onDisk</jtok>
<jtok eid="4" type="method_call" span="90:13:90:24">scanStrings</jtok>
<jtok eid="4" type="primary_name_ref" span="90:25:90:30">inMem</jtok>
<jtok eid="4" type="primary_name_ref" span="90:32:90:38">inTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="90:40:90:46">onDisk</jtok>
<jtok eid="4" type="method_call" span="93:13:93:24">scanEntries</jtok>
<jtok eid="4" type="primary_name_ref" span="93:25:93:31">sInMem</jtok>
<jtok eid="4" type="primary_name_ref" span="93:33:93:40">sInTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="93:42:93:49">sOnDisk</jtok>
<jtok eid="4" type="method_call" span="95:13:95:23">scanGroups</jtok>
<jtok eid="4" type="primary_name_ref" span="95:24:95:31">mdInMem</jtok>
<jtok eid="4" type="primary_name_ref" span="95:33:95:41">mdInTemp</jtok>
<jtok eid="4" type="primary_name_ref" span="95:43:95:51">mdOnDisk</jtok>
<jtok eid="4" type="class_or_interface_ref" span="98:18:98:29">IOException</jtok>
<jtok eid="4" type="local_variable_name" span="98:30:98:32">ex</jtok>
<jtok eid="4" type="primary_name_ref" span="99:13:99:15">ex</jtok>
<jtok eid="4" type="method_call" span="99:16:99:31">printStackTrace</jtok>
<jtok eid="5" type="method_name" span="104:20:104:32">changesFound</jtok>
<jtok eid="5" type="primary_name_ref" span="105:16:105:23">changes</jtok>
<jtok eid="5" type="method_call" span="105:24:105:37">getChildCount</jtok>
<jtok eid="6" type="method_name" span="108:17:108:30">displayResult</jtok>
<jtok eid="6" type="parameter_type" span="108:37:108:58">DisplayResultCallback</jtok>
<jtok eid="6" type="parameter_name" span="108:59:108:62">fup</jtok>
<jtok eid="6" type="primary_name_ref" span="109:13:109:20">changes</jtok>
<jtok eid="6" type="method_call" span="109:21:109:34">getChildCount</jtok>
<jtok eid="6" type="primary_name_ref" span="110:13:110:27">SwingUtilities</jtok>
<jtok eid="6" type="method_call" span="110:28:110:39">invokeLater</jtok>
<jtok eid="6" type="constructor_call" span="110:44:110:52">Runnable</jtok>
<jtok eid="8" type="method_name" span="111:29:111:32">run</jtok>
<jtok eid="8" type="class_or_interface_ref" span="112:21:112:40">ChangeDisplayDialog</jtok>
<jtok eid="8" type="local_variable_name" span="112:41:112:45">dial</jtok>
<jtok eid="8" type="constructor_call" span="112:52:112:71">ChangeDisplayDialog</jtok>
<jtok eid="8" type="primary_name_ref" span="112:72:112:77">frame</jtok>
<jtok eid="8" type="primary_name_ref" span="112:79:112:84">panel</jtok>
<jtok eid="8" type="primary_name_ref" span="112:86:112:92">inTemp</jtok>
<jtok eid="8" type="primary_name_ref" span="112:94:112:101">changes</jtok>
<jtok eid="8" type="primary_name_ref" span="113:21:113:25">Util</jtok>
<jtok eid="8" type="method_call" span="113:26:113:37">placeDialog</jtok>
<jtok eid="8" type="primary_name_ref" span="113:38:113:42">dial</jtok>
<jtok eid="8" type="primary_name_ref" span="113:44:113:49">frame</jtok>
<jtok eid="8" type="primary_name_ref" span="114:21:114:25">dial</jtok>
<jtok eid="8" type="method_call" span="114:26:114:36">setVisible</jtok>
<jtok eid="8" type="line_comment" span="114:44:114:83">// dial.show(); -&gt; deprecated since 1.5</jtok>
<jtok eid="8" type="primary_name_ref" span="115:21:115:24">fup</jtok>
<jtok eid="8" type="method_call" span="115:25:115:44">scanResultsResolved</jtok>
<jtok eid="8" type="primary_name_ref" span="115:45:115:49">dial</jtok>
<jtok eid="8" type="method_call" span="115:50:115:61">isOkPressed</jtok>
<jtok eid="8" type="primary_name_ref" span="116:25:116:29">dial</jtok>
<jtok eid="8" type="method_call" span="116:30:116:41">isOkPressed</jtok>
<jtok eid="8" type="line_comment" span="117:25:117:56">// Overwrite the temp database:</jtok>
<jtok eid="8" type="method_call" span="118:25:118:42">storeTempDatabase</jtok>
<jtok eid="6" type="primary_name_ref" span="124:13:124:24">JOptionPane</jtok>
<jtok eid="6" type="method_call" span="124:25:124:42">showMessageDialog</jtok>
<jtok eid="6" type="primary_name_ref" span="124:43:124:48">frame</jtok>
<jtok eid="6" type="primary_name_ref" span="124:50:124:57">Globals</jtok>
<jtok eid="6" type="method_call" span="124:58:124:62">lang</jtok>
<jtok eid="6" type="string_literal" span="124:63:124:89">"No actual changes found."</jtok>
<jtok eid="6" type="primary_name_ref" span="125:13:125:20">Globals</jtok>
<jtok eid="6" type="method_call" span="125:21:125:25">lang</jtok>
<jtok eid="6" type="string_literal" span="125:26:125:44">"External changes"</jtok>
<jtok eid="6" type="primary_name_ref" span="125:47:125:58">JOptionPane</jtok>
<jtok eid="6" type="qualified_name_ref" span="125:59:125:78">INFORMATION_MESSAGE</jtok>
<jtok eid="6" type="primary_name_ref" span="126:13:126:16">fup</jtok>
<jtok eid="6" type="method_call" span="126:17:126:36">scanResultsResolved</jtok>
<jtok eid="9" type="method_name" span="130:18:130:35">storeTempDatabase</jtok>
<jtok eid="9" type="constructor_call" span="131:13:131:19">Thread</jtok>
<jtok eid="9" type="constructor_call" span="131:24:131:32">Runnable</jtok>
<jtok eid="11" type="method_name" span="132:25:132:28">run</jtok>
<jtok eid="11" type="primary_name_ref" span="133:17:133:23">System</jtok>
<jtok eid="11" type="qualified_name_ref" span="133:24:133:27">out</jtok>
<jtok eid="11" type="method_call" span="133:28:133:35">println</jtok>
<jtok eid="11" type="string_literal" span="133:36:133:59">"Storing temp database"</jtok>
<jtok eid="11" type="class_or_interface_ref" span="135:21:135:32">SaveSession</jtok>
<jtok eid="11" type="local_variable_name" span="135:33:135:35">ss</jtok>
<jtok eid="11" type="primary_name_ref" span="135:38:135:49">FileActions</jtok>
<jtok eid="11" type="method_call" span="135:50:135:62">saveDatabase</jtok>
<jtok eid="11" type="primary_name_ref" span="135:63:135:69">inTemp</jtok>
<jtok eid="11" type="primary_name_ref" span="135:71:135:79">mdInTemp</jtok>
<jtok eid="11" type="primary_name_ref" span="136:25:136:32">Globals</jtok>
<jtok eid="11" type="qualified_name_ref" span="136:33:136:50">fileUpdateMonitor</jtok>
<jtok eid="11" type="method_call" span="136:51:136:62">getTempFile</jtok>
<jtok eid="11" type="primary_name_ref" span="136:63:136:68">panel</jtok>
<jtok eid="11" type="method_call" span="136:69:136:86">fileMonitorHandle</jtok>
<jtok eid="11" type="primary_name_ref" span="136:91:136:98">Globals</jtok>
<jtok eid="11" type="qualified_name_ref" span="136:99:136:104">prefs</jtok>
<jtok eid="11" type="primary_name_ref" span="137:39:137:44">panel</jtok>
<jtok eid="11" type="method_call" span="137:45:137:56">getEncoding</jtok>
<jtok eid="11" type="primary_name_ref" span="138:21:138:23">ss</jtok>
<jtok eid="11" type="method_call" span="138:24:138:30">commit</jtok>
<jtok eid="11" type="primary_name_ref" span="139:21:139:27">System</jtok>
<jtok eid="11" type="qualified_name_ref" span="139:28:139:31">out</jtok>
<jtok eid="11" type="method_call" span="139:32:139:39">println</jtok>
<jtok eid="11" type="string_literal" span="139:40:139:46">"done"</jtok>
<jtok eid="11" type="class_or_interface_ref" span="140:26:140:39">SaveException</jtok>
<jtok eid="11" type="local_variable_name" span="140:40:140:42">ex</jtok>
<jtok eid="11" type="primary_name_ref" span="141:21:141:27">System</jtok>
<jtok eid="11" type="qualified_name_ref" span="141:28:141:31">out</jtok>
<jtok eid="11" type="method_call" span="141:32:141:39">println</jtok>
<jtok eid="11" type="string_literal" span="141:40:141:100">"Problem updating tmp file after accepting external changes"</jtok>
<jtok eid="9" type="method_call" span="146:12:146:17">start</jtok>
<jtok eid="12" type="method_name" span="149:18:149:30">scanMetaData</jtok>
<jtok eid="12" type="parameter_type" span="149:31:149:39">MetaData</jtok>
<jtok eid="12" type="parameter_name" span="149:40:149:45">inMem</jtok>
<jtok eid="12" type="parameter_type" span="149:47:149:55">MetaData</jtok>
<jtok eid="12" type="parameter_name" span="149:56:149:62">inTemp</jtok>
<jtok eid="12" type="parameter_type" span="149:64:149:72">MetaData</jtok>
<jtok eid="12" type="parameter_name" span="149:73:149:79">onDisk</jtok>
<jtok eid="12" type="class_or_interface_ref" span="150:9:150:23">MetaDataChange</jtok>
<jtok eid="12" type="local_variable_name" span="150:24:150:27">mdc</jtok>
<jtok eid="12" type="constructor_call" span="150:34:150:48">MetaDataChange</jtok>
<jtok eid="12" type="primary_name_ref" span="150:49:150:54">inMem</jtok>
<jtok eid="12" type="primary_name_ref" span="150:56:150:62">inTemp</jtok>
<jtok eid="12" type="class_or_interface_ref" span="151:9:151:18">ArrayList</jtok>
<jtok eid="12" type="class_or_interface_ref" span="151:19:151:25">String</jtok>
<jtok eid="12" type="local_variable_name" span="151:27:151:40">handledOnDisk</jtok>
<jtok eid="12" type="constructor_call" span="151:47:151:56">ArrayList</jtok>
<jtok eid="12" type="constructor_call" span="151:57:151:63">String</jtok>
<jtok eid="12" type="line_comment" span="152:9:152:80">// Loop through the metadata entries of the "tmp" database, looking for</jtok>
<jtok eid="12" type="line_comment" span="153:9:153:19">// matches</jtok>
<jtok eid="12" type="class_or_interface_ref" span="154:14:154:22">Iterator</jtok>
<jtok eid="12" type="local_variable_name" span="154:23:154:24">i</jtok>
<jtok eid="12" type="primary_name_ref" span="154:27:154:33">inTemp</jtok>
<jtok eid="12" type="method_call" span="154:34:154:42">iterator</jtok>
<jtok eid="12" type="primary_name_ref" span="154:46:154:47">i</jtok>
<jtok eid="12" type="method_call" span="154:48:154:55">hasNext</jtok>
<jtok eid="12" type="class_or_interface_ref" span="155:13:155:19">String</jtok>
<jtok eid="12" type="local_variable_name" span="155:20:155:23">key</jtok>
<jtok eid="12" type="class_or_interface_ref" span="155:27:155:33">String</jtok>
<jtok eid="12" type="primary_name_ref" span="155:34:155:35">i</jtok>
<jtok eid="12" type="method_call" span="155:36:155:40">next</jtok>
<jtok eid="12" type="line_comment" span="156:13:156:63">// See if the key is missing in the disk database:</jtok>
<jtok eid="12" type="class_or_interface_ref" span="157:13:157:19">Vector</jtok>
<jtok eid="12" type="class_or_interface_ref" span="157:20:157:26">String</jtok>
<jtok eid="12" type="local_variable_name" span="157:28:157:31">vod</jtok>
<jtok eid="12" type="primary_name_ref" span="157:34:157:40">onDisk</jtok>
<jtok eid="12" type="method_call" span="157:41:157:48">getData</jtok>
<jtok eid="12" type="primary_name_ref" span="157:49:157:52">key</jtok>
<jtok eid="12" type="primary_name_ref" span="158:17:158:20">vod</jtok>
<jtok eid="12" type="primary_name_ref" span="159:17:159:20">mdc</jtok>
<jtok eid="12" type="method_call" span="159:21:159:42">insertMetaDataRemoval</jtok>
<jtok eid="12" type="primary_name_ref" span="159:43:159:46">key</jtok>
<jtok eid="12" type="line_comment" span="162:17:162:60">// Both exist. Check if they are different:</jtok>
<jtok eid="12" type="class_or_interface_ref" span="163:17:163:23">Vector</jtok>
<jtok eid="12" type="class_or_interface_ref" span="163:24:163:30">String</jtok>
<jtok eid="12" type="local_variable_name" span="163:32:163:35">vit</jtok>
<jtok eid="12" type="primary_name_ref" span="163:38:163:44">inTemp</jtok>
<jtok eid="12" type="method_call" span="163:45:163:52">getData</jtok>
<jtok eid="12" type="primary_name_ref" span="163:53:163:56">key</jtok>
<jtok eid="12" type="primary_name_ref" span="164:22:164:25">vod</jtok>
<jtok eid="12" type="method_call" span="164:26:164:32">equals</jtok>
<jtok eid="12" type="primary_name_ref" span="164:33:164:36">vit</jtok>
<jtok eid="12" type="primary_name_ref" span="165:21:165:24">mdc</jtok>
<jtok eid="12" type="method_call" span="165:25:165:45">insertMetaDataChange</jtok>
<jtok eid="12" type="primary_name_ref" span="165:46:165:49">key</jtok>
<jtok eid="12" type="primary_name_ref" span="165:51:165:54">vod</jtok>
<jtok eid="12" type="line_comment" span="166:17:166:57">// Remember that we've handled this one:</jtok>
<jtok eid="12" type="primary_name_ref" span="167:17:167:30">handledOnDisk</jtok>
<jtok eid="12" type="method_call" span="167:31:167:34">add</jtok>
<jtok eid="12" type="primary_name_ref" span="167:35:167:38">key</jtok>
<jtok eid="12" type="line_comment" span="171:9:171:65">// See if there are unhandled keys in the disk database:</jtok>
<jtok eid="12" type="class_or_interface_ref" span="172:14:172:22">Iterator</jtok>
<jtok eid="12" type="local_variable_name" span="172:23:172:24">i</jtok>
<jtok eid="12" type="primary_name_ref" span="172:27:172:33">onDisk</jtok>
<jtok eid="12" type="method_call" span="172:34:172:42">iterator</jtok>
<jtok eid="12" type="primary_name_ref" span="172:46:172:47">i</jtok>
<jtok eid="12" type="method_call" span="172:48:172:55">hasNext</jtok>
<jtok eid="12" type="class_or_interface_ref" span="173:13:173:19">String</jtok>
<jtok eid="12" type="local_variable_name" span="173:20:173:23">key</jtok>
<jtok eid="12" type="class_or_interface_ref" span="173:27:173:33">String</jtok>
<jtok eid="12" type="primary_name_ref" span="173:34:173:35">i</jtok>
<jtok eid="12" type="method_call" span="173:36:173:40">next</jtok>
<jtok eid="12" type="primary_name_ref" span="174:18:174:31">handledOnDisk</jtok>
<jtok eid="12" type="method_call" span="174:32:174:40">contains</jtok>
<jtok eid="12" type="primary_name_ref" span="174:41:174:44">key</jtok>
<jtok eid="12" type="primary_name_ref" span="175:17:175:20">mdc</jtok>
<jtok eid="12" type="method_call" span="175:21:175:43">insertMetaDataAddition</jtok>
<jtok eid="12" type="primary_name_ref" span="175:44:175:47">key</jtok>
<jtok eid="12" type="primary_name_ref" span="175:49:175:55">onDisk</jtok>
<jtok eid="12" type="method_call" span="175:56:175:63">getData</jtok>
<jtok eid="12" type="primary_name_ref" span="175:64:175:67">key</jtok>
<jtok eid="12" type="primary_name_ref" span="179:13:179:16">mdc</jtok>
<jtok eid="12" type="method_call" span="179:17:179:31">getChangeCount</jtok>
<jtok eid="12" type="primary_name_ref" span="180:13:180:20">changes</jtok>
<jtok eid="12" type="method_call" span="180:21:180:24">add</jtok>
<jtok eid="12" type="primary_name_ref" span="180:25:180:28">mdc</jtok>
<jtok eid="13" type="method_name" span="184:18:184:29">scanEntries</jtok>
<jtok eid="13" type="parameter_type" span="184:30:184:41">EntrySorter</jtok>
<jtok eid="13" type="parameter_name" span="184:42:184:45">mem</jtok>
<jtok eid="13" type="parameter_type" span="184:47:184:58">EntrySorter</jtok>
<jtok eid="13" type="parameter_name" span="184:59:184:62">tmp</jtok>
<jtok eid="13" type="parameter_type" span="184:64:184:75">EntrySorter</jtok>
<jtok eid="13" type="parameter_name" span="184:76:184:80">disk</jtok>
<jtok eid="13" type="line_comment" span="186:9:186:88">// Create pointers that are incremented as the entries of each base are used in</jtok>
<jtok eid="13" type="line_comment" span="187:9:187:90">// successive order from the beginning. Entries "further down" in the "disk" base</jtok>
<jtok eid="13" type="line_comment" span="188:9:188:32">// can also be matched.</jtok>
<jtok eid="13" type="local_variable_name" span="189:13:189:17">piv1</jtok>
<jtok eid="13" type="local_variable_name" span="189:23:189:27">piv2</jtok>
<jtok eid="13" type="line_comment" span="191:9:191:87">// Create a HashSet where we can put references to entry numbers in the "disk"</jtok>
<jtok eid="13" type="line_comment" span="192:9:192:80">// database that we have matched. This is to avoid matching them twice.</jtok>
<jtok eid="13" type="class_or_interface_ref" span="193:9:193:16">HashSet</jtok>
<jtok eid="13" type="class_or_interface_ref" span="193:17:193:23">String</jtok>
<jtok eid="13" type="local_variable_name" span="193:25:193:29">used</jtok>
<jtok eid="13" type="constructor_call" span="193:36:193:43">HashSet</jtok>
<jtok eid="13" type="constructor_call" span="193:44:193:50">String</jtok>
<jtok eid="13" type="primary_name_ref" span="193:52:193:56">disk</jtok>
<jtok eid="13" type="method_call" span="193:57:193:70">getEntryCount</jtok>
<jtok eid="13" type="class_or_interface_ref" span="194:9:194:16">HashSet</jtok>
<jtok eid="13" type="class_or_interface_ref" span="194:17:194:24">Integer</jtok>
<jtok eid="13" type="local_variable_name" span="194:26:194:36">notMatched</jtok>
<jtok eid="13" type="constructor_call" span="194:43:194:50">HashSet</jtok>
<jtok eid="13" type="constructor_call" span="194:51:194:58">Integer</jtok>
<jtok eid="13" type="primary_name_ref" span="194:60:194:63">tmp</jtok>
<jtok eid="13" type="method_call" span="194:64:194:77">getEntryCount</jtok>
<jtok eid="13" type="line_comment" span="196:9:196:104">// Loop through the entries of the "tmp" database, looking for exact matches in the "disk" one.</jtok>
<jtok eid="13" type="line_comment" span="197:9:197:104">// We must finish scanning for exact matches before looking for near matches, to avoid an exact</jtok>
<jtok eid="13" type="line_comment" span="198:9:198:52">// match being "stolen" from another entry.</jtok>
<jtok eid="13" type="label_name" span="199:9:199:17">mainLoop</jtok>
<jtok eid="13" type="primary_name_ref" span="199:24:199:28">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="199:32:199:36">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="199:37:199:40">tmp</jtok>
<jtok eid="13" type="method_call" span="199:41:199:54">getEntryCount</jtok>
<jtok eid="13" type="primary_name_ref" span="199:58:199:62">piv1</jtok>
<jtok eid="13" type="line_comment" span="201:13:201:92">// First check if the similarly placed entry in the other base matches exactly.</jtok>
<jtok eid="13" type="local_variable_name" span="202:20:202:24">comp</jtok>
<jtok eid="13" type="line_comment" span="203:13:203:96">// (if there are not any entries left in the "disk" database, comp will stay at -1,</jtok>
<jtok eid="13" type="line_comment" span="204:13:204:61">// and this entry will be marked as nonmatched).</jtok>
<jtok eid="13" type="primary_name_ref" span="205:18:205:22">used</jtok>
<jtok eid="13" type="method_call" span="205:23:205:31">contains</jtok>
<jtok eid="13" type="string_literal" span="205:32:205:34">""</jtok>
<jtok eid="13" type="primary_name_ref" span="205:35:205:39">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="205:45:205:49">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="205:50:205:54">disk</jtok>
<jtok eid="13" type="method_call" span="205:55:205:68">getEntryCount</jtok>
<jtok eid="13" type="primary_name_ref" span="206:17:206:21">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="206:24:206:38">DuplicateCheck</jtok>
<jtok eid="13" type="method_call" span="206:39:206:61">compareEntriesStrictly</jtok>
<jtok eid="13" type="primary_name_ref" span="206:62:206:65">tmp</jtok>
<jtok eid="13" type="method_call" span="206:66:206:76">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="206:77:206:81">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="206:84:206:88">disk</jtok>
<jtok eid="13" type="method_call" span="206:89:206:99">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="206:100:206:104">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="208:17:208:21">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="209:17:209:21">used</jtok>
<jtok eid="13" type="method_call" span="209:22:209:25">add</jtok>
<jtok eid="13" type="string_literal" span="209:26:209:28">""</jtok>
<jtok eid="13" type="primary_name_ref" span="209:29:209:33">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="210:17:210:21">piv2</jtok>
<jtok eid="13" type="label_ref" span="211:26:211:34">mainLoop</jtok>
<jtok eid="13" type="line_comment" span="214:13:214:64">// No? Then check if another entry matches exactly.</jtok>
<jtok eid="13" type="primary_name_ref" span="215:17:215:21">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="215:24:215:28">disk</jtok>
<jtok eid="13" type="method_call" span="215:29:215:42">getEntryCount</jtok>
<jtok eid="13" type="local_variable_name" span="216:26:216:27">i</jtok>
<jtok eid="13" type="primary_name_ref" span="216:30:216:34">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="216:38:216:39">i</jtok>
<jtok eid="13" type="primary_name_ref" span="216:42:216:46">disk</jtok>
<jtok eid="13" type="method_call" span="216:47:216:60">getEntryCount</jtok>
<jtok eid="13" type="primary_name_ref" span="216:64:216:65">i</jtok>
<jtok eid="13" type="primary_name_ref" span="217:26:217:30">used</jtok>
<jtok eid="13" type="method_call" span="217:31:217:39">contains</jtok>
<jtok eid="13" type="string_literal" span="217:40:217:42">""</jtok>
<jtok eid="13" type="primary_name_ref" span="217:43:217:44">i</jtok>
<jtok eid="13" type="primary_name_ref" span="218:25:218:29">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="218:32:218:46">DuplicateCheck</jtok>
<jtok eid="13" type="method_call" span="218:47:218:69">compareEntriesStrictly</jtok>
<jtok eid="13" type="primary_name_ref" span="218:70:218:73">tmp</jtok>
<jtok eid="13" type="method_call" span="218:74:218:84">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="218:85:218:89">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="218:92:218:96">disk</jtok>
<jtok eid="13" type="method_call" span="218:97:218:107">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="218:108:218:109">i</jtok>
<jtok eid="13" type="primary_name_ref" span="220:25:220:29">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="222:25:222:29">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="223:25:223:29">used</jtok>
<jtok eid="13" type="method_call" span="223:30:223:33">add</jtok>
<jtok eid="13" type="string_literal" span="223:34:223:36">""</jtok>
<jtok eid="13" type="primary_name_ref" span="223:39:223:40">i</jtok>
<jtok eid="13" type="label_ref" span="224:34:224:42">mainLoop</jtok>
<jtok eid="13" type="line_comment" span="229:13:229:69">// No? Add this entry to the list of nonmatched entries.</jtok>
<jtok eid="13" type="primary_name_ref" span="230:13:230:23">notMatched</jtok>
<jtok eid="13" type="method_call" span="230:24:230:27">add</jtok>
<jtok eid="13" type="constructor_call" span="230:32:230:39">Integer</jtok>
<jtok eid="13" type="primary_name_ref" span="230:40:230:44">piv1</jtok>
<jtok eid="13" type="line_comment" span="234:9:234:90">// Now we've found all exact matches, look through the remaining entries, looking</jtok>
<jtok eid="13" type="line_comment" span="235:9:235:30">// for close matches.</jtok>
<jtok eid="13" type="primary_name_ref" span="236:13:236:23">notMatched</jtok>
<jtok eid="13" type="method_call" span="236:24:236:28">size</jtok>
<jtok eid="13" type="class_or_interface_ref" span="238:18:238:26">Iterator</jtok>
<jtok eid="13" type="class_or_interface_ref" span="238:27:238:34">Integer</jtok>
<jtok eid="13" type="local_variable_name" span="238:36:238:38">it</jtok>
<jtok eid="13" type="primary_name_ref" span="238:39:238:49">notMatched</jtok>
<jtok eid="13" type="method_call" span="238:50:238:58">iterator</jtok>
<jtok eid="13" type="primary_name_ref" span="238:62:238:64">it</jtok>
<jtok eid="13" type="method_call" span="238:65:238:72">hasNext</jtok>
<jtok eid="13" type="class_or_interface_ref" span="240:17:240:24">Integer</jtok>
<jtok eid="13" type="local_variable_name" span="240:25:240:30">integ</jtok>
<jtok eid="13" type="primary_name_ref" span="240:33:240:35">it</jtok>
<jtok eid="13" type="method_call" span="240:36:240:40">next</jtok>
<jtok eid="13" type="primary_name_ref" span="241:17:241:21">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="241:24:241:29">integ</jtok>
<jtok eid="13" type="method_call" span="241:30:241:38">intValue</jtok>
<jtok eid="13" type="line_comment" span="244:17:244:95">// These two variables will keep track of which entry most closely matches the</jtok>
<jtok eid="13" type="line_comment" span="245:17:245:74">// one we're looking at, in case none matches completely.</jtok>
<jtok eid="13" type="local_variable_name" span="246:21:246:31">bestMatchI</jtok>
<jtok eid="13" type="local_variable_name" span="247:24:247:33">bestMatch</jtok>
<jtok eid="13" type="local_variable_name" span="248:24:248:28">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="250:21:250:25">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="250:28:250:32">disk</jtok>
<jtok eid="13" type="method_call" span="250:33:250:46">getEntryCount</jtok>
<jtok eid="13" type="local_variable_name" span="251:30:251:31">i</jtok>
<jtok eid="13" type="primary_name_ref" span="251:34:251:38">piv2</jtok>
<jtok eid="13" type="primary_name_ref" span="251:40:251:41">i</jtok>
<jtok eid="13" type="primary_name_ref" span="251:44:251:48">disk</jtok>
<jtok eid="13" type="method_call" span="251:49:251:62">getEntryCount</jtok>
<jtok eid="13" type="primary_name_ref" span="251:66:251:67">i</jtok>
<jtok eid="13" type="primary_name_ref" span="252:30:252:34">used</jtok>
<jtok eid="13" type="method_call" span="252:35:252:43">contains</jtok>
<jtok eid="13" type="string_literal" span="252:44:252:46">""</jtok>
<jtok eid="13" type="primary_name_ref" span="252:47:252:48">i</jtok>
<jtok eid="13" type="primary_name_ref" span="253:29:253:33">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="253:36:253:50">DuplicateCheck</jtok>
<jtok eid="13" type="method_call" span="253:51:253:73">compareEntriesStrictly</jtok>
<jtok eid="13" type="primary_name_ref" span="253:74:253:77">tmp</jtok>
<jtok eid="13" type="method_call" span="253:78:253:88">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="253:89:253:93">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="254:29:254:33">disk</jtok>
<jtok eid="13" type="method_call" span="254:34:254:44">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="254:45:254:46">i</jtok>
<jtok eid="13" type="primary_name_ref" span="257:29:257:33">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="259:29:259:33">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="259:36:259:45">bestMatch</jtok>
<jtok eid="13" type="primary_name_ref" span="260:29:260:38">bestMatch</jtok>
<jtok eid="13" type="primary_name_ref" span="260:41:260:45">comp</jtok>
<jtok eid="13" type="primary_name_ref" span="261:29:261:39">bestMatchI</jtok>
<jtok eid="13" type="primary_name_ref" span="261:42:261:43">i</jtok>
<jtok eid="13" type="primary_name_ref" span="266:21:266:30">bestMatch</jtok>
<jtok eid="13" type="primary_name_ref" span="266:33:266:48">MATCH_THRESHOLD</jtok>
<jtok eid="13" type="primary_name_ref" span="267:21:267:25">used</jtok>
<jtok eid="13" type="method_call" span="267:26:267:29">add</jtok>
<jtok eid="13" type="string_literal" span="267:30:267:32">""</jtok>
<jtok eid="13" type="primary_name_ref" span="267:33:267:43">bestMatchI</jtok>
<jtok eid="13" type="primary_name_ref" span="268:21:268:23">it</jtok>
<jtok eid="13" type="method_call" span="268:24:268:30">remove</jtok>
<jtok eid="13" type="class_or_interface_ref" span="270:21:270:32">EntryChange</jtok>
<jtok eid="13" type="local_variable_name" span="270:33:270:35">ec</jtok>
<jtok eid="13" type="constructor_call" span="270:42:270:53">EntryChange</jtok>
<jtok eid="13" type="method_call" span="270:54:270:61">bestFit</jtok>
<jtok eid="13" type="primary_name_ref" span="270:62:270:65">tmp</jtok>
<jtok eid="13" type="primary_name_ref" span="270:67:270:70">mem</jtok>
<jtok eid="13" type="primary_name_ref" span="270:72:270:76">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="270:79:270:82">tmp</jtok>
<jtok eid="13" type="method_call" span="270:83:270:93">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="270:94:270:98">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="271:21:271:25">disk</jtok>
<jtok eid="13" type="method_call" span="271:26:271:36">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="271:37:271:47">bestMatchI</jtok>
<jtok eid="13" type="primary_name_ref" span="272:21:272:28">changes</jtok>
<jtok eid="13" type="method_call" span="272:29:272:32">add</jtok>
<jtok eid="13" type="primary_name_ref" span="272:33:272:35">ec</jtok>
<jtok eid="13" type="line_comment" span="274:21:274:69">// Create an undo edit to represent this change:</jtok>
<jtok eid="13" type="line_comment" span="275:21:275:78">//NamedCompound ce = new NamedCompound("Modified entry");</jtok>
<jtok eid="13" type="line_comment" span="276:21:276:102">//ce.addEdit(new UndoableRemoveEntry(inMem, disk.getEntryAt(bestMatchI), panel));</jtok>
<jtok eid="13" type="line_comment" span="277:21:277:95">//ce.addEdit(new UndoableInsertEntry(inMem, tmp.getEntryAt(piv1), panel));</jtok>
<jtok eid="13" type="line_comment" span="278:21:278:32">//ce.end();</jtok>
<jtok eid="13" type="line_comment" span="279:21:279:39">//changes.add(ce);</jtok>
<jtok eid="13" type="line_comment" span="281:21:281:71">//System.out.println("Possible match for entry:");</jtok>
<jtok eid="13" type="line_comment" span="282:21:282:92">//System.out.println("----------------------------------------------");</jtok>
<jtok eid="13" type="class_or_interface_ref" span="286:21:286:38">EntryDeleteChange</jtok>
<jtok eid="13" type="local_variable_name" span="286:39:286:41">ec</jtok>
<jtok eid="13" type="constructor_call" span="286:48:286:65">EntryDeleteChange</jtok>
<jtok eid="13" type="method_call" span="286:66:286:73">bestFit</jtok>
<jtok eid="13" type="primary_name_ref" span="286:74:286:77">tmp</jtok>
<jtok eid="13" type="primary_name_ref" span="286:79:286:82">mem</jtok>
<jtok eid="13" type="primary_name_ref" span="286:84:286:88">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="286:91:286:94">tmp</jtok>
<jtok eid="13" type="method_call" span="286:95:286:105">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="286:106:286:110">piv1</jtok>
<jtok eid="13" type="primary_name_ref" span="287:21:287:28">changes</jtok>
<jtok eid="13" type="method_call" span="287:29:287:32">add</jtok>
<jtok eid="13" type="primary_name_ref" span="287:33:287:35">ec</jtok>
<jtok eid="13" type="block_comment" span="288:11:291:29">/*NamedCompound ce = new NamedCompound("Removed entry");
          ce.addEdit(new UndoableInsertEntry(inMem, tmp.getEntryAt(piv1), panel));
          ce.end();
          changes.add(ce);*/</jtok>
<jtok eid="13" type="line_comment" span="299:9:299:90">// Finally, look if there are still untouched entries in the disk database. These</jtok>
<jtok eid="13" type="line_comment" span="300:9:300:31">// mayhave been added.</jtok>
<jtok eid="13" type="primary_name_ref" span="301:13:301:17">used</jtok>
<jtok eid="13" type="method_call" span="301:18:301:22">size</jtok>
<jtok eid="13" type="primary_name_ref" span="301:27:301:31">disk</jtok>
<jtok eid="13" type="method_call" span="301:32:301:45">getEntryCount</jtok>
<jtok eid="13" type="local_variable_name" span="302:22:302:23">i</jtok>
<jtok eid="13" type="primary_name_ref" span="302:27:302:28">i</jtok>
<jtok eid="13" type="primary_name_ref" span="302:29:302:33">disk</jtok>
<jtok eid="13" type="method_call" span="302:34:302:47">getEntryCount</jtok>
<jtok eid="13" type="primary_name_ref" span="302:51:302:52">i</jtok>
<jtok eid="13" type="primary_name_ref" span="303:22:303:26">used</jtok>
<jtok eid="13" type="method_call" span="303:27:303:35">contains</jtok>
<jtok eid="13" type="string_literal" span="303:36:303:38">""</jtok>
<jtok eid="13" type="primary_name_ref" span="303:39:303:40">i</jtok>
<jtok eid="13" type="line_comment" span="305:21:305:78">// See if there is an identical dupe in the mem database:</jtok>
<jtok eid="13" type="local_variable_name" span="306:29:306:39">hasAlready</jtok>
<jtok eid="13" type="local_variable_name" span="307:30:307:31">j</jtok>
<jtok eid="13" type="primary_name_ref" span="307:37:307:38">j</jtok>
<jtok eid="13" type="primary_name_ref" span="307:41:307:44">mem</jtok>
<jtok eid="13" type="method_call" span="307:45:307:58">getEntryCount</jtok>
<jtok eid="13" type="primary_name_ref" span="307:62:307:63">j</jtok>
<jtok eid="13" type="primary_name_ref" span="308:29:308:43">DuplicateCheck</jtok>
<jtok eid="13" type="method_call" span="308:44:308:66">compareEntriesStrictly</jtok>
<jtok eid="13" type="primary_name_ref" span="308:67:308:70">mem</jtok>
<jtok eid="13" type="method_call" span="308:71:308:81">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="308:82:308:83">j</jtok>
<jtok eid="13" type="primary_name_ref" span="309:29:309:33">disk</jtok>
<jtok eid="13" type="method_call" span="309:34:309:44">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="309:45:309:46">i</jtok>
<jtok eid="13" type="primary_name_ref" span="310:29:310:39">hasAlready</jtok>
<jtok eid="13" type="primary_name_ref" span="314:26:314:36">hasAlready</jtok>
<jtok eid="13" type="class_or_interface_ref" span="315:25:315:39">EntryAddChange</jtok>
<jtok eid="13" type="local_variable_name" span="315:40:315:42">ec</jtok>
<jtok eid="13" type="constructor_call" span="315:49:315:63">EntryAddChange</jtok>
<jtok eid="13" type="primary_name_ref" span="315:64:315:68">disk</jtok>
<jtok eid="13" type="method_call" span="315:69:315:79">getEntryAt</jtok>
<jtok eid="13" type="primary_name_ref" span="315:80:315:81">i</jtok>
<jtok eid="13" type="primary_name_ref" span="316:25:316:32">changes</jtok>
<jtok eid="13" type="method_call" span="316:33:316:36">add</jtok>
<jtok eid="13" type="primary_name_ref" span="316:37:316:39">ec</jtok>
<jtok eid="13" type="block_comment" span="318:11:321:29">/*NamedCompound ce = new NamedCompound("Added entry");
          ce.addEdit(new UndoableRemoveEntry(inMem, disk.getEntryAt(i), panel));
          ce.end();
          changes.add(ce);*/</jtok>
<jtok eid="13" type="line_comment" span="324:13:324:104">//System.out.println("Suspected new entries in file: "+(disk.getEntryCount()-used.size()));</jtok>
<jtok eid="1" type="block_comment" span="328:5:335:8">/**
     * Finds the entry in neu best fitting the specified entry in old. If no entries get a score
     * above zero, an entry is still returned.
     * @param old EntrySorter
     * @param neu EntrySorter
     * @param index int
     * @return BibtexEntry
     */</jtok>
<jtok eid="14" type="class_or_interface_ref" span="336:13:336:24">BibtexEntry</jtok>
<jtok eid="14" type="method_name" span="336:25:336:32">bestFit</jtok>
<jtok eid="14" type="parameter_type" span="336:33:336:44">EntrySorter</jtok>
<jtok eid="14" type="parameter_name" span="336:45:336:48">old</jtok>
<jtok eid="14" type="parameter_type" span="336:50:336:61">EntrySorter</jtok>
<jtok eid="14" type="parameter_name" span="336:62:336:65">neu</jtok>
<jtok eid="14" type="parameter_name" span="336:71:336:76">index</jtok>
<jtok eid="14" type="local_variable_name" span="337:16:337:20">comp</jtok>
<jtok eid="14" type="local_variable_name" span="338:13:338:18">found</jtok>
<jtok eid="14" type="label_name" span="339:9:339:13">loop</jtok>
<jtok eid="14" type="local_variable_name" span="339:24:339:25">i</jtok>
<jtok eid="14" type="primary_name_ref" span="339:29:339:30">i</jtok>
<jtok eid="14" type="primary_name_ref" span="339:31:339:34">neu</jtok>
<jtok eid="14" type="method_call" span="339:35:339:48">getEntryCount</jtok>
<jtok eid="14" type="primary_name_ref" span="339:52:339:53">i</jtok>
<jtok eid="14" type="local_variable_name" span="340:20:340:23">res</jtok>
<jtok eid="14" type="primary_name_ref" span="340:26:340:40">DuplicateCheck</jtok>
<jtok eid="14" type="method_call" span="340:41:340:63">compareEntriesStrictly</jtok>
<jtok eid="14" type="primary_name_ref" span="340:64:340:67">old</jtok>
<jtok eid="14" type="method_call" span="340:68:340:78">getEntryAt</jtok>
<jtok eid="14" type="primary_name_ref" span="340:79:340:84">index</jtok>
<jtok eid="14" type="primary_name_ref" span="341:13:341:16">neu</jtok>
<jtok eid="14" type="method_call" span="341:17:341:27">getEntryAt</jtok>
<jtok eid="14" type="primary_name_ref" span="341:28:341:29">i</jtok>
<jtok eid="14" type="primary_name_ref" span="342:17:342:20">res</jtok>
<jtok eid="14" type="primary_name_ref" span="342:23:342:27">comp</jtok>
<jtok eid="14" type="primary_name_ref" span="343:17:343:21">comp</jtok>
<jtok eid="14" type="primary_name_ref" span="343:24:343:27">res</jtok>
<jtok eid="14" type="primary_name_ref" span="344:17:344:22">found</jtok>
<jtok eid="14" type="primary_name_ref" span="344:25:344:26">i</jtok>
<jtok eid="14" type="primary_name_ref" span="346:17:346:21">comp</jtok>
<jtok eid="14" type="label_ref" span="347:23:347:27">loop</jtok>
<jtok eid="14" type="primary_name_ref" span="349:16:349:19">neu</jtok>
<jtok eid="14" type="method_call" span="349:20:349:30">getEntryAt</jtok>
<jtok eid="14" type="primary_name_ref" span="349:31:349:36">found</jtok>
<jtok eid="15" type="method_name" span="352:18:352:30">scanPreamble</jtok>
<jtok eid="15" type="parameter_type" span="352:31:352:45">BibtexDatabase</jtok>
<jtok eid="15" type="parameter_name" span="352:46:352:51">inMem</jtok>
<jtok eid="15" type="parameter_type" span="352:53:352:67">BibtexDatabase</jtok>
<jtok eid="15" type="parameter_name" span="352:68:352:73">onTmp</jtok>
<jtok eid="15" type="parameter_type" span="352:75:352:89">BibtexDatabase</jtok>
<jtok eid="15" type="parameter_name" span="352:90:352:96">onDisk</jtok>
<jtok eid="15" type="class_or_interface_ref" span="353:9:353:15">String</jtok>
<jtok eid="15" type="local_variable_name" span="353:16:353:19">mem</jtok>
<jtok eid="15" type="primary_name_ref" span="353:22:353:27">inMem</jtok>
<jtok eid="15" type="method_call" span="353:28:353:39">getPreamble</jtok>
<jtok eid="15" type="local_variable_name" span="354:9:354:12">tmp</jtok>
<jtok eid="15" type="primary_name_ref" span="354:15:354:20">onTmp</jtok>
<jtok eid="15" type="method_call" span="354:21:354:32">getPreamble</jtok>
<jtok eid="15" type="local_variable_name" span="355:9:355:13">disk</jtok>
<jtok eid="15" type="primary_name_ref" span="355:16:355:22">onDisk</jtok>
<jtok eid="15" type="method_call" span="355:23:355:34">getPreamble</jtok>
<jtok eid="15" type="primary_name_ref" span="356:13:356:16">tmp</jtok>
<jtok eid="15" type="primary_name_ref" span="357:18:357:22">disk</jtok>
<jtok eid="15" type="primary_name_ref" span="357:36:357:39">tmp</jtok>
<jtok eid="15" type="method_call" span="357:40:357:46">equals</jtok>
<jtok eid="15" type="primary_name_ref" span="357:47:357:51">disk</jtok>
<jtok eid="15" type="primary_name_ref" span="358:17:358:24">changes</jtok>
<jtok eid="15" type="method_call" span="358:25:358:28">add</jtok>
<jtok eid="15" type="constructor_call" span="358:33:358:47">PreambleChange</jtok>
<jtok eid="15" type="primary_name_ref" span="358:48:358:51">tmp</jtok>
<jtok eid="15" type="primary_name_ref" span="358:53:358:56">mem</jtok>
<jtok eid="15" type="primary_name_ref" span="358:58:358:62">disk</jtok>
<jtok eid="15" type="primary_name_ref" span="360:19:360:23">disk</jtok>
<jtok eid="15" type="primary_name_ref" span="360:37:360:41">disk</jtok>
<jtok eid="15" type="method_call" span="360:42:360:48">equals</jtok>
<jtok eid="15" type="string_literal" span="360:49:360:51">""</jtok>
<jtok eid="15" type="primary_name_ref" span="361:13:361:20">changes</jtok>
<jtok eid="15" type="method_call" span="361:21:361:24">add</jtok>
<jtok eid="15" type="constructor_call" span="361:29:361:43">PreambleChange</jtok>
<jtok eid="15" type="primary_name_ref" span="361:44:361:47">tmp</jtok>
<jtok eid="15" type="primary_name_ref" span="361:49:361:52">mem</jtok>
<jtok eid="15" type="primary_name_ref" span="361:54:361:58">disk</jtok>
<jtok eid="16" type="method_name" span="365:18:365:29">scanStrings</jtok>
<jtok eid="16" type="parameter_type" span="365:30:365:44">BibtexDatabase</jtok>
<jtok eid="16" type="parameter_name" span="365:45:365:50">inMem</jtok>
<jtok eid="16" type="parameter_type" span="365:52:365:66">BibtexDatabase</jtok>
<jtok eid="16" type="parameter_name" span="365:67:365:72">onTmp</jtok>
<jtok eid="16" type="parameter_type" span="365:74:365:88">BibtexDatabase</jtok>
<jtok eid="16" type="parameter_name" span="365:89:365:95">onDisk</jtok>
<jtok eid="16" type="local_variable_name" span="366:13:366:17">nTmp</jtok>
<jtok eid="16" type="primary_name_ref" span="366:20:366:25">onTmp</jtok>
<jtok eid="16" type="method_call" span="366:26:366:40">getStringCount</jtok>
<jtok eid="16" type="local_variable_name" span="367:9:367:14">nDisk</jtok>
<jtok eid="16" type="primary_name_ref" span="367:17:367:23">onDisk</jtok>
<jtok eid="16" type="method_call" span="367:24:367:38">getStringCount</jtok>
<jtok eid="16" type="primary_name_ref" span="368:14:368:18">nTmp</jtok>
<jtok eid="16" type="primary_name_ref" span="368:29:368:34">nDisk</jtok>
<jtok eid="16" type="class_or_interface_ref" span="371:9:371:16">HashSet</jtok>
<jtok eid="16" type="class_or_interface_ref" span="371:17:371:23">Object</jtok>
<jtok eid="16" type="local_variable_name" span="371:25:371:29">used</jtok>
<jtok eid="16" type="constructor_call" span="371:36:371:43">HashSet</jtok>
<jtok eid="16" type="constructor_call" span="371:44:371:50">Object</jtok>
<jtok eid="16" type="class_or_interface_ref" span="372:9:372:16">HashSet</jtok>
<jtok eid="16" type="class_or_interface_ref" span="372:17:372:23">Object</jtok>
<jtok eid="16" type="local_variable_name" span="372:25:372:34">usedInMem</jtok>
<jtok eid="16" type="constructor_call" span="372:41:372:48">HashSet</jtok>
<jtok eid="16" type="constructor_call" span="372:49:372:55">Object</jtok>
<jtok eid="16" type="class_or_interface_ref" span="373:9:373:16">HashSet</jtok>
<jtok eid="16" type="class_or_interface_ref" span="373:17:373:23">String</jtok>
<jtok eid="16" type="local_variable_name" span="373:25:373:35">notMatched</jtok>
<jtok eid="16" type="constructor_call" span="373:42:373:49">HashSet</jtok>
<jtok eid="16" type="constructor_call" span="373:50:373:56">String</jtok>
<jtok eid="16" type="primary_name_ref" span="373:58:373:63">onTmp</jtok>
<jtok eid="16" type="method_call" span="373:64:373:78">getStringCount</jtok>
<jtok eid="16" type="line_comment" span="375:9:375:47">// First try to match by string names.</jtok>
<jtok eid="16" type="line_comment" span="376:9:376:25">//int piv2 = -1;</jtok>
<jtok eid="16" type="label_name" span="377:9:377:17">mainLoop</jtok>
<jtok eid="16" type="class_or_interface_ref" span="377:24:377:30">String</jtok>
<jtok eid="16" type="local_variable_name" span="377:31:377:34">key</jtok>
<jtok eid="16" type="primary_name_ref" span="377:37:377:42">onTmp</jtok>
<jtok eid="16" type="method_call" span="377:43:377:58">getStringKeySet</jtok>
<jtok eid="16" type="class_or_interface_ref" span="378:13:378:25">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="378:26:378:29">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="378:32:378:37">onTmp</jtok>
<jtok eid="16" type="method_call" span="378:38:378:47">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="378:48:378:51">key</jtok>
<jtok eid="16" type="line_comment" span="380:13:380:53">//      for (int j=piv2+1; j&lt;nDisk; j++)</jtok>
<jtok eid="16" type="class_or_interface_ref" span="381:18:381:24">String</jtok>
<jtok eid="16" type="local_variable_name" span="381:25:381:31">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="381:34:381:40">onDisk</jtok>
<jtok eid="16" type="method_call" span="381:41:381:56">getStringKeySet</jtok>
<jtok eid="16" type="primary_name_ref" span="382:22:382:26">used</jtok>
<jtok eid="16" type="method_call" span="382:27:382:35">contains</jtok>
<jtok eid="16" type="primary_name_ref" span="382:36:382:42">diskId</jtok>
<jtok eid="16" type="class_or_interface_ref" span="383:21:383:33">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="383:34:383:38">disk</jtok>
<jtok eid="16" type="primary_name_ref" span="383:41:383:47">onDisk</jtok>
<jtok eid="16" type="method_call" span="383:48:383:57">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="383:58:383:64">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="384:25:384:29">disk</jtok>
<jtok eid="16" type="method_call" span="384:30:384:37">getName</jtok>
<jtok eid="16" type="method_call" span="384:40:384:46">equals</jtok>
<jtok eid="16" type="primary_name_ref" span="384:47:384:50">tmp</jtok>
<jtok eid="16" type="method_call" span="384:51:384:58">getName</jtok>
<jtok eid="16" type="line_comment" span="385:25:385:72">// We have found a string with a matching name.</jtok>
<jtok eid="16" type="primary_name_ref" span="386:30:386:33">tmp</jtok>
<jtok eid="16" type="method_call" span="386:34:386:44">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="386:60:386:63">tmp</jtok>
<jtok eid="16" type="method_call" span="386:64:386:74">getContent</jtok>
<jtok eid="16" type="method_call" span="386:77:386:83">equals</jtok>
<jtok eid="16" type="primary_name_ref" span="386:84:386:88">disk</jtok>
<jtok eid="16" type="method_call" span="386:89:386:99">getContent</jtok>
<jtok eid="16" type="line_comment" span="387:29:387:92">// But they have nonmatching contents, so we've found a change.</jtok>
<jtok eid="16" type="class_or_interface_ref" span="388:29:388:41">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="388:42:388:45">mem</jtok>
<jtok eid="16" type="method_call" span="388:48:388:58">findString</jtok>
<jtok eid="16" type="primary_name_ref" span="388:59:388:64">inMem</jtok>
<jtok eid="16" type="primary_name_ref" span="388:66:388:69">tmp</jtok>
<jtok eid="16" type="method_call" span="388:70:388:77">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="388:81:388:90">usedInMem</jtok>
<jtok eid="16" type="primary_name_ref" span="389:33:389:36">mem</jtok>
<jtok eid="16" type="primary_name_ref" span="390:33:390:40">changes</jtok>
<jtok eid="16" type="method_call" span="390:41:390:44">add</jtok>
<jtok eid="16" type="constructor_call" span="390:49:390:61">StringChange</jtok>
<jtok eid="16" type="primary_name_ref" span="390:62:390:65">mem</jtok>
<jtok eid="16" type="primary_name_ref" span="390:67:390:70">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="390:72:390:75">tmp</jtok>
<jtok eid="16" type="method_call" span="390:76:390:83">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="391:33:391:36">mem</jtok>
<jtok eid="16" type="method_call" span="391:37:391:47">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="392:33:392:36">tmp</jtok>
<jtok eid="16" type="method_call" span="392:37:392:47">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="392:51:392:55">disk</jtok>
<jtok eid="16" type="method_call" span="392:56:392:66">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="394:33:394:40">changes</jtok>
<jtok eid="16" type="method_call" span="394:41:394:44">add</jtok>
<jtok eid="16" type="constructor_call" span="394:49:394:61">StringChange</jtok>
<jtok eid="16" type="primary_name_ref" span="394:68:394:71">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="394:73:394:76">tmp</jtok>
<jtok eid="16" type="method_call" span="394:77:394:84">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="394:94:394:97">tmp</jtok>
<jtok eid="16" type="method_call" span="394:98:394:108">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="394:112:394:116">disk</jtok>
<jtok eid="16" type="method_call" span="394:117:394:127">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="396:25:396:29">used</jtok>
<jtok eid="16" type="method_call" span="396:30:396:33">add</jtok>
<jtok eid="16" type="primary_name_ref" span="396:34:396:40">diskId</jtok>
<jtok eid="16" type="line_comment" span="397:25:397:39">//if (j==piv2)</jtok>
<jtok eid="16" type="line_comment" span="398:25:398:36">//  piv2++;</jtok>
<jtok eid="16" type="label_ref" span="399:34:399:42">mainLoop</jtok>
<jtok eid="16" type="line_comment" span="404:13:404:67">// If we get here, there was no match for this string.</jtok>
<jtok eid="16" type="primary_name_ref" span="405:13:405:23">notMatched</jtok>
<jtok eid="16" type="method_call" span="405:24:405:27">add</jtok>
<jtok eid="16" type="primary_name_ref" span="405:28:405:31">tmp</jtok>
<jtok eid="16" type="method_call" span="405:32:405:37">getId</jtok>
<jtok eid="16" type="line_comment" span="408:9:408:88">// See if we can detect a name change for those entries that we couldn't match.</jtok>
<jtok eid="16" type="primary_name_ref" span="409:13:409:23">notMatched</jtok>
<jtok eid="16" type="method_call" span="409:24:409:28">size</jtok>
<jtok eid="16" type="class_or_interface_ref" span="410:18:410:26">Iterator</jtok>
<jtok eid="16" type="class_or_interface_ref" span="410:27:410:33">String</jtok>
<jtok eid="16" type="local_variable_name" span="410:35:410:36">i</jtok>
<jtok eid="16" type="primary_name_ref" span="410:39:410:49">notMatched</jtok>
<jtok eid="16" type="method_call" span="410:50:410:58">iterator</jtok>
<jtok eid="16" type="primary_name_ref" span="410:62:410:63">i</jtok>
<jtok eid="16" type="method_call" span="410:64:410:71">hasNext</jtok>
<jtok eid="16" type="class_or_interface_ref" span="411:17:411:29">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="411:30:411:33">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="411:36:411:41">onTmp</jtok>
<jtok eid="16" type="method_call" span="411:42:411:51">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="411:52:411:53">i</jtok>
<jtok eid="16" type="method_call" span="411:54:411:58">next</jtok>
<jtok eid="16" type="line_comment" span="413:17:413:93">// If we get to this point, we found no string with matching name. See if we</jtok>
<jtok eid="16" type="line_comment" span="414:17:414:55">// can find one with matching content.</jtok>
<jtok eid="16" type="class_or_interface_ref" span="415:22:415:28">String</jtok>
<jtok eid="16" type="local_variable_name" span="415:29:415:35">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="415:38:415:44">onDisk</jtok>
<jtok eid="16" type="method_call" span="415:45:415:60">getStringKeySet</jtok>
<jtok eid="16" type="primary_name_ref" span="417:23:417:27">used</jtok>
<jtok eid="16" type="method_call" span="417:28:417:36">contains</jtok>
<jtok eid="16" type="primary_name_ref" span="417:37:417:43">diskId</jtok>
<jtok eid="16" type="class_or_interface_ref" span="418:25:418:37">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="418:38:418:42">disk</jtok>
<jtok eid="16" type="primary_name_ref" span="418:45:418:51">onDisk</jtok>
<jtok eid="16" type="method_call" span="418:52:418:61">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="418:62:418:68">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="420:29:420:33">disk</jtok>
<jtok eid="16" type="method_call" span="420:34:420:44">getContent</jtok>
<jtok eid="16" type="method_call" span="420:47:420:53">equals</jtok>
<jtok eid="16" type="primary_name_ref" span="420:54:420:57">tmp</jtok>
<jtok eid="16" type="method_call" span="420:58:420:68">getContent</jtok>
<jtok eid="16" type="line_comment" span="421:29:421:101">// We have found a string with the same content. It cannot have the same</jtok>
<jtok eid="16" type="line_comment" span="422:29:422:70">// name, or we would have found it above.</jtok>
<jtok eid="16" type="line_comment" span="424:29:424:71">// Try to find the matching one in memory:</jtok>
<jtok eid="16" type="class_or_interface_ref" span="425:29:425:41">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="425:42:425:47">bsMem</jtok>
<jtok eid="16" type="class_or_interface_ref" span="427:34:427:40">String</jtok>
<jtok eid="16" type="local_variable_name" span="427:41:427:46">memId</jtok>
<jtok eid="16" type="primary_name_ref" span="427:49:427:54">inMem</jtok>
<jtok eid="16" type="method_call" span="427:55:427:70">getStringKeySet</jtok>
<jtok eid="16" type="class_or_interface_ref" span="428:33:428:45">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="428:46:428:56">bsMem_cand</jtok>
<jtok eid="16" type="primary_name_ref" span="428:59:428:64">inMem</jtok>
<jtok eid="16" type="method_call" span="428:65:428:74">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="428:75:428:80">memId</jtok>
<jtok eid="16" type="primary_name_ref" span="429:37:429:47">bsMem_cand</jtok>
<jtok eid="16" type="method_call" span="429:48:429:58">getContent</jtok>
<jtok eid="16" type="method_call" span="429:61:429:67">equals</jtok>
<jtok eid="16" type="primary_name_ref" span="429:68:429:72">disk</jtok>
<jtok eid="16" type="method_call" span="429:73:429:83">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="430:34:430:43">usedInMem</jtok>
<jtok eid="16" type="method_call" span="430:44:430:52">contains</jtok>
<jtok eid="16" type="primary_name_ref" span="430:53:430:58">memId</jtok>
<jtok eid="16" type="primary_name_ref" span="431:37:431:46">usedInMem</jtok>
<jtok eid="16" type="method_call" span="431:47:431:50">add</jtok>
<jtok eid="16" type="primary_name_ref" span="431:51:431:56">memId</jtok>
<jtok eid="16" type="primary_name_ref" span="432:37:432:42">bsMem</jtok>
<jtok eid="16" type="primary_name_ref" span="432:45:432:55">bsMem_cand</jtok>
<jtok eid="16" type="primary_name_ref" span="437:29:437:36">changes</jtok>
<jtok eid="16" type="method_call" span="437:37:437:40">add</jtok>
<jtok eid="16" type="constructor_call" span="437:45:437:61">StringNameChange</jtok>
<jtok eid="16" type="primary_name_ref" span="437:62:437:67">bsMem</jtok>
<jtok eid="16" type="primary_name_ref" span="437:69:437:72">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="437:74:437:79">bsMem</jtok>
<jtok eid="16" type="method_call" span="437:80:437:87">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="438:29:438:32">tmp</jtok>
<jtok eid="16" type="method_call" span="438:33:438:40">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="438:44:438:48">disk</jtok>
<jtok eid="16" type="method_call" span="438:49:438:56">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="439:29:439:32">tmp</jtok>
<jtok eid="16" type="method_call" span="439:33:439:43">getContent</jtok>
<jtok eid="16" type="primary_name_ref" span="440:29:440:30">i</jtok>
<jtok eid="16" type="method_call" span="440:31:440:37">remove</jtok>
<jtok eid="16" type="primary_name_ref" span="441:29:441:33">used</jtok>
<jtok eid="16" type="method_call" span="441:34:441:37">add</jtok>
<jtok eid="16" type="primary_name_ref" span="441:38:441:44">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="449:13:449:23">notMatched</jtok>
<jtok eid="16" type="method_call" span="449:24:449:28">size</jtok>
<jtok eid="16" type="line_comment" span="450:13:450:86">// Still one or more non-matched strings. So they must have been removed.</jtok>
<jtok eid="16" type="class_or_interface_ref" span="451:18:451:26">Iterator</jtok>
<jtok eid="16" type="class_or_interface_ref" span="451:27:451:33">String</jtok>
<jtok eid="16" type="local_variable_name" span="451:35:451:36">i</jtok>
<jtok eid="16" type="primary_name_ref" span="451:39:451:49">notMatched</jtok>
<jtok eid="16" type="method_call" span="451:50:451:58">iterator</jtok>
<jtok eid="16" type="primary_name_ref" span="451:62:451:63">i</jtok>
<jtok eid="16" type="method_call" span="451:64:451:71">hasNext</jtok>
<jtok eid="16" type="class_or_interface_ref" span="452:17:452:23">String</jtok>
<jtok eid="16" type="local_variable_name" span="452:24:452:28">nmId</jtok>
<jtok eid="16" type="primary_name_ref" span="452:31:452:32">i</jtok>
<jtok eid="16" type="method_call" span="452:33:452:37">next</jtok>
<jtok eid="16" type="class_or_interface_ref" span="453:17:453:29">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="453:30:453:33">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="453:36:453:41">onTmp</jtok>
<jtok eid="16" type="method_call" span="453:42:453:51">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="453:52:453:56">nmId</jtok>
<jtok eid="16" type="class_or_interface_ref" span="454:17:454:29">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="454:30:454:33">mem</jtok>
<jtok eid="16" type="method_call" span="454:36:454:46">findString</jtok>
<jtok eid="16" type="primary_name_ref" span="454:47:454:52">inMem</jtok>
<jtok eid="16" type="primary_name_ref" span="454:54:454:57">tmp</jtok>
<jtok eid="16" type="method_call" span="454:58:454:65">getName</jtok>
<jtok eid="16" type="primary_name_ref" span="454:69:454:78">usedInMem</jtok>
<jtok eid="16" type="primary_name_ref" span="455:21:455:24">mem</jtok>
<jtok eid="16" type="line_comment" span="455:36:455:94">// The removed string is not removed from the mem version.</jtok>
<jtok eid="16" type="primary_name_ref" span="456:21:456:28">changes</jtok>
<jtok eid="16" type="method_call" span="456:29:456:32">add</jtok>
<jtok eid="16" type="constructor_call" span="456:37:456:55">StringRemoveChange</jtok>
<jtok eid="16" type="primary_name_ref" span="456:56:456:59">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="456:61:456:64">tmp</jtok>
<jtok eid="16" type="primary_name_ref" span="456:66:456:69">mem</jtok>
<jtok eid="16" type="line_comment" span="462:9:462:82">// Finally, see if there are remaining strings in the disk database. They</jtok>
<jtok eid="16" type="line_comment" span="463:9:463:33">// must have been added.</jtok>
<jtok eid="16" type="class_or_interface_ref" span="464:14:464:22">Iterator</jtok>
<jtok eid="16" type="class_or_interface_ref" span="464:23:464:29">String</jtok>
<jtok eid="16" type="local_variable_name" span="464:31:464:32">i</jtok>
<jtok eid="16" type="primary_name_ref" span="464:33:464:39">onDisk</jtok>
<jtok eid="16" type="method_call" span="464:40:464:55">getStringKeySet</jtok>
<jtok eid="16" type="method_call" span="464:58:464:66">iterator</jtok>
<jtok eid="16" type="primary_name_ref" span="464:70:464:71">i</jtok>
<jtok eid="16" type="method_call" span="464:72:464:79">hasNext</jtok>
<jtok eid="16" type="class_or_interface_ref" span="465:13:465:19">String</jtok>
<jtok eid="16" type="local_variable_name" span="465:20:465:26">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="465:29:465:30">i</jtok>
<jtok eid="16" type="method_call" span="465:31:465:35">next</jtok>
<jtok eid="16" type="primary_name_ref" span="466:18:466:22">used</jtok>
<jtok eid="16" type="method_call" span="466:23:466:31">contains</jtok>
<jtok eid="16" type="primary_name_ref" span="466:32:466:38">diskId</jtok>
<jtok eid="16" type="class_or_interface_ref" span="467:17:467:29">BibtexString</jtok>
<jtok eid="16" type="local_variable_name" span="467:30:467:34">disk</jtok>
<jtok eid="16" type="primary_name_ref" span="467:37:467:43">onDisk</jtok>
<jtok eid="16" type="method_call" span="467:44:467:53">getString</jtok>
<jtok eid="16" type="primary_name_ref" span="467:54:467:60">diskId</jtok>
<jtok eid="16" type="line_comment" span="468:17:468:54">//System.out.println(disk.getName());</jtok>
<jtok eid="16" type="primary_name_ref" span="469:17:469:21">used</jtok>
<jtok eid="16" type="method_call" span="469:22:469:25">add</jtok>
<jtok eid="16" type="primary_name_ref" span="469:26:469:32">diskId</jtok>
<jtok eid="16" type="primary_name_ref" span="470:17:470:24">changes</jtok>
<jtok eid="16" type="method_call" span="470:25:470:28">add</jtok>
<jtok eid="16" type="constructor_call" span="470:33:470:48">StringAddChange</jtok>
<jtok eid="16" type="primary_name_ref" span="470:49:470:53">disk</jtok>
<jtok eid="17" type="class_or_interface_ref" span="475:13:475:25">BibtexString</jtok>
<jtok eid="17" type="method_name" span="475:26:475:36">findString</jtok>
<jtok eid="17" type="parameter_type" span="475:37:475:51">BibtexDatabase</jtok>
<jtok eid="17" type="parameter_name" span="475:52:475:56">base</jtok>
<jtok eid="17" type="parameter_type" span="475:58:475:64">String</jtok>
<jtok eid="17" type="parameter_name" span="475:65:475:69">name</jtok>
<jtok eid="17" type="parameter_type" span="475:71:475:78">HashSet</jtok>
<jtok eid="17" type="parameter_type" span="475:79:475:85">Object</jtok>
<jtok eid="17" type="parameter_name" span="475:87:475:91">used</jtok>
<jtok eid="17" type="primary_name_ref" span="476:14:476:18">base</jtok>
<jtok eid="17" type="method_call" span="476:19:476:33">hasStringLabel</jtok>
<jtok eid="17" type="primary_name_ref" span="476:34:476:38">name</jtok>
<jtok eid="17" type="class_or_interface_ref" span="478:14:478:22">Iterator</jtok>
<jtok eid="17" type="class_or_interface_ref" span="478:23:478:29">String</jtok>
<jtok eid="17" type="local_variable_name" span="478:31:478:32">i</jtok>
<jtok eid="17" type="primary_name_ref" span="478:33:478:37">base</jtok>
<jtok eid="17" type="method_call" span="478:38:478:53">getStringKeySet</jtok>
<jtok eid="17" type="method_call" span="478:56:478:64">iterator</jtok>
<jtok eid="17" type="primary_name_ref" span="478:68:478:69">i</jtok>
<jtok eid="17" type="method_call" span="478:70:478:77">hasNext</jtok>
<jtok eid="17" type="class_or_interface_ref" span="479:13:479:19">String</jtok>
<jtok eid="17" type="local_variable_name" span="479:20:479:23">key</jtok>
<jtok eid="17" type="primary_name_ref" span="479:26:479:27">i</jtok>
<jtok eid="17" type="method_call" span="479:28:479:32">next</jtok>
<jtok eid="17" type="class_or_interface_ref" span="480:13:480:25">BibtexString</jtok>
<jtok eid="17" type="local_variable_name" span="480:26:480:28">bs</jtok>
<jtok eid="17" type="primary_name_ref" span="480:31:480:35">base</jtok>
<jtok eid="17" type="method_call" span="480:36:480:45">getString</jtok>
<jtok eid="17" type="primary_name_ref" span="480:46:480:49">key</jtok>
<jtok eid="17" type="primary_name_ref" span="481:17:481:19">bs</jtok>
<jtok eid="17" type="method_call" span="481:20:481:27">getName</jtok>
<jtok eid="17" type="method_call" span="481:30:481:36">equals</jtok>
<jtok eid="17" type="primary_name_ref" span="481:37:481:41">name</jtok>
<jtok eid="17" type="primary_name_ref" span="481:47:481:51">used</jtok>
<jtok eid="17" type="method_call" span="481:52:481:60">contains</jtok>
<jtok eid="17" type="primary_name_ref" span="481:61:481:64">key</jtok>
<jtok eid="17" type="primary_name_ref" span="482:17:482:21">used</jtok>
<jtok eid="17" type="method_call" span="482:22:482:25">add</jtok>
<jtok eid="17" type="primary_name_ref" span="482:26:482:29">key</jtok>
<jtok eid="17" type="primary_name_ref" span="483:24:483:26">bs</jtok>
<jtok eid="1" type="block_comment" span="489:5:493:8">/**
     * This method only detects wheter a change took place or not. It does not
     * determine the type of change. This would be possible, but difficult to do
     * properly, so I rather only report the change.
     */</jtok>
<jtok eid="18" type="method_name" span="494:17:494:27">scanGroups</jtok>
<jtok eid="18" type="parameter_type" span="494:28:494:36">MetaData</jtok>
<jtok eid="18" type="parameter_name" span="494:37:494:42">inMem</jtok>
<jtok eid="18" type="parameter_type" span="494:44:494:52">MetaData</jtok>
<jtok eid="18" type="parameter_name" span="494:53:494:58">onTmp</jtok>
<jtok eid="18" type="parameter_type" span="494:60:494:68">MetaData</jtok>
<jtok eid="18" type="parameter_name" span="494:69:494:75">onDisk</jtok>
<jtok eid="18" type="class_or_interface_ref" span="495:15:495:28">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="495:29:495:38">groupsTmp</jtok>
<jtok eid="18" type="primary_name_ref" span="495:41:495:46">onTmp</jtok>
<jtok eid="18" type="method_call" span="495:47:495:56">getGroups</jtok>
<jtok eid="18" type="class_or_interface_ref" span="496:15:496:28">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="496:29:496:39">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="496:42:496:48">onDisk</jtok>
<jtok eid="18" type="method_call" span="496:49:496:58">getGroups</jtok>
<jtok eid="18" type="primary_name_ref" span="497:13:497:22">groupsTmp</jtok>
<jtok eid="18" type="primary_name_ref" span="497:34:497:44">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="499:14:499:23">groupsTmp</jtok>
<jtok eid="18" type="primary_name_ref" span="499:35:499:45">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="500:21:500:30">groupsTmp</jtok>
<jtok eid="18" type="primary_name_ref" span="500:42:500:52">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="501:13:501:20">changes</jtok>
<jtok eid="18" type="method_call" span="501:21:501:24">add</jtok>
<jtok eid="18" type="constructor_call" span="501:29:501:40">GroupChange</jtok>
<jtok eid="18" type="primary_name_ref" span="501:41:501:51">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="501:53:501:62">groupsTmp</jtok>
<jtok eid="18" type="primary_name_ref" span="504:13:504:22">groupsTmp</jtok>
<jtok eid="18" type="method_call" span="504:23:504:29">equals</jtok>
<jtok eid="18" type="primary_name_ref" span="504:30:504:40">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="506:9:506:16">changes</jtok>
<jtok eid="18" type="method_call" span="506:17:506:20">add</jtok>
<jtok eid="18" type="constructor_call" span="506:25:506:36">GroupChange</jtok>
<jtok eid="18" type="primary_name_ref" span="506:37:506:47">groupsDisk</jtok>
<jtok eid="18" type="primary_name_ref" span="506:49:506:58">groupsTmp</jtok>
<jtok eid="18" type="line_comment" span="509:1:509:3">//</jtok>
<jtok eid="18" type="line_comment" span="510:1:510:104">//        if (((vOnTmp == null) || (vOnTmp.size()==0)) &amp;&amp; ((vOnDisk == null) || (vOnDisk.size()==0))) {</jtok>
<jtok eid="18" type="line_comment" span="511:1:511:70">//            // No groups defined in either the tmp or disk version.</jtok>
<jtok eid="18" type="line_comment" span="512:1:512:22">//            return;</jtok>
<jtok eid="18" type="line_comment" span="513:1:513:12">//        }</jtok>
<jtok eid="18" type="line_comment" span="514:1:514:3">//</jtok>
<jtok eid="18" type="line_comment" span="515:1:515:104">//        // To avoid checking for null all the time, make empty vectors to replace null refs. We clone</jtok>
<jtok eid="18" type="line_comment" span="516:1:516:84">//        // non-null vectors so we can remove the elements as we finish with them.</jtok>
<jtok eid="18" type="line_comment" span="517:1:517:31">//        if (vOnDisk == null)</jtok>
<jtok eid="18" type="line_comment" span="518:1:518:39">//            vOnDisk = new Vector(0);</jtok>
<jtok eid="18" type="line_comment" span="519:1:519:15">//        else</jtok>
<jtok eid="18" type="line_comment" span="520:1:520:49">//            vOnDisk = (Vector)vOnDisk.clone();</jtok>
<jtok eid="18" type="line_comment" span="521:1:521:30">//        if (vOnTmp == null)</jtok>
<jtok eid="18" type="line_comment" span="522:1:522:38">//            vOnTmp = new Vector(0);</jtok>
<jtok eid="18" type="line_comment" span="523:1:523:15">//        else</jtok>
<jtok eid="18" type="line_comment" span="524:1:524:47">//            vOnTmp = (Vector)vOnTmp.clone();</jtok>
<jtok eid="18" type="line_comment" span="525:1:525:30">//        if (vInMem == null)</jtok>
<jtok eid="18" type="line_comment" span="526:1:526:38">//            vInMem = new Vector(0);</jtok>
<jtok eid="18" type="line_comment" span="527:1:527:15">//        else</jtok>
<jtok eid="18" type="line_comment" span="528:1:528:47">//            vInMem = (Vector)vInMem.clone();</jtok>
<jtok eid="18" type="line_comment" span="529:1:529:3">//</jtok>
<jtok eid="18" type="line_comment" span="530:1:530:97">//        // If the tmp version has groups, iterate through these and compare with disk version:</jtok>
<jtok eid="18" type="line_comment" span="531:1:531:39">//        while (vOnTmp.size() &gt;= 1) {</jtok>
<jtok eid="18" type="line_comment" span="532:1:532:74">//            AbstractGroup group = (AbstractGroup)vOnTmp.firstElement();</jtok>
<jtok eid="18" type="line_comment" span="533:1:533:41">//            vOnTmp.removeElementAt(0);</jtok>
<jtok eid="18" type="line_comment" span="534:1:534:80">//            int pos = GroupSelector.findGroupByName(vOnDisk,group.getName());</jtok>
<jtok eid="18" type="line_comment" span="535:1:535:31">//            if (pos == -1) {</jtok>
<jtok eid="18" type="line_comment" span="536:1:536:46">//                // Couldn't find the group.</jtok>
<jtok eid="18" type="line_comment" span="537:1:537:67">//                changes.add(new GroupAddOrRemove(group, false));</jtok>
<jtok eid="18" type="line_comment" span="538:1:538:23">//            } else {</jtok>
<jtok eid="18" type="line_comment" span="539:1:539:83">//                AbstractGroup diskGroup = (AbstractGroup)vOnDisk.elementAt(pos);</jtok>
<jtok eid="18" type="line_comment" span="540:1:540:3">//</jtok>
<jtok eid="18" type="line_comment" span="541:1:541:50">//                if (!diskGroup.equals(group)) {</jtok>
<jtok eid="18" type="line_comment" span="542:1:542:44">//                    // Group has changed.</jtok>
<jtok eid="18" type="line_comment" span="543:1:543:77">//                    changes.add(new GroupChange(inMem, group, diskGroup));</jtok>
<jtok eid="18" type="line_comment" span="544:1:544:20">//                }</jtok>
<jtok eid="18" type="line_comment" span="545:1:545:3">//</jtok>
<jtok eid="18" type="line_comment" span="546:1:546:71">//                // Remove this group, since it's been accounted for.</jtok>
<jtok eid="18" type="line_comment" span="547:1:547:39">//                vOnDisk.remove(pos);</jtok>
<jtok eid="18" type="line_comment" span="548:1:548:16">//            }</jtok>
<jtok eid="18" type="line_comment" span="549:1:549:12">//        }</jtok>
<jtok eid="18" type="line_comment" span="550:1:550:3">//</jtok>
<jtok eid="18" type="line_comment" span="551:1:551:88">//        // If there are entries left in the disk version, these must have been added.</jtok>
<jtok eid="18" type="line_comment" span="552:1:552:40">//        while (vOnDisk.size() &gt;= 1) {</jtok>
<jtok eid="18" type="line_comment" span="553:1:553:75">//            AbstractGroup group = (AbstractGroup)vOnDisk.firstElement();</jtok>
<jtok eid="18" type="line_comment" span="554:1:554:42">//            vOnDisk.removeElementAt(0);</jtok>
<jtok eid="18" type="line_comment" span="555:1:555:62">//            changes.add(new GroupAddOrRemove(group, true));</jtok>
<jtok eid="18" type="line_comment" span="556:1:556:12">//        }</jtok>
<jtok eid="19" type="interface_name" span="560:29:560:50">DisplayResultCallback</jtok>
<jtok eid="20" type="method_name" span="561:21:561:40">scanResultsResolved</jtok>
<jtok eid="20" type="parameter_name" span="561:49:561:57">resolved</jtok>
</jdoc>