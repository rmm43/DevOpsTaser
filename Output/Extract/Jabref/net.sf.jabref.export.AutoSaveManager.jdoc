<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.export.AutoSaveManager" jls="java5">
<jent id="0" type="file" span="0:0:130:1">Source/jabref/src/java/net/sf/jabref/export/AutoSaveManager.java</jent>
<jent id="1" pid="0" type="class" span="16:1:130:1">net.sf.jabref.export.AutoSaveManager</jent>
<jent id="2" pid="1" type="method" span="21:5:24:5">net.sf.jabref.export.AutoSaveManager.AutoSaveManager(JabRefFrame)</jent>
<jent id="3" pid="1" type="method" span="26:5:31:5">net.sf.jabref.export.AutoSaveManager.startAutoSaveTimer()</jent>
<jent id="4" pid="1" type="method" span="33:5:35:5">net.sf.jabref.export.AutoSaveManager.stopAutoSaveTimer()</jent>
<jent id="5" pid="1" type="class" span="37:5:58:5">net.sf.jabref.export.AutoSaveManager.AutoSaveTask</jent>
<jent id="6" pid="5" type="method" span="38:9:57:9">net.sf.jabref.export.AutoSaveManager.AutoSaveTask.run()</jent>
<jent id="7" pid="1" type="method" span="65:5:68:5">net.sf.jabref.export.AutoSaveManager.getAutoSaveFile(File)</jent>
<jent id="8" pid="1" type="method" span="75:5:90:5">net.sf.jabref.export.AutoSaveManager.autoSave(BasePanel)</jent>
<jent id="9" pid="1" type="method" span="97:5:105:5">net.sf.jabref.export.AutoSaveManager.deleteAutoSaveFile(BasePanel)</jent>
<jent id="10" pid="1" type="method" span="111:5:118:5">net.sf.jabref.export.AutoSaveManager.clearAutoSaves()</jent>
<jent id="11" pid="1" type="method" span="126:5:129:5">net.sf.jabref.export.AutoSaveManager.newerAutoSaveExists(File)</jent>
<jtok eid="0" type="block_comment" span="13:1:15:4">/**
 * Background task and utilities for autosave feature.
 */</jtok>
<jtok eid="1" type="class_name" span="16:14:16:29">AutoSaveManager</jtok>
<jtok eid="1" type="class_or_interface_ref" span="17:13:17:24">JabRefFrame</jtok>
<jtok eid="1" type="field_name" span="17:25:17:30">frame</jtok>
<jtok eid="1" type="class_or_interface_ref" span="18:13:18:18">Timer</jtok>
<jtok eid="1" type="field_name" span="18:19:18:20">t</jtok>
<jtok eid="1" type="class_or_interface_ref" span="19:13:19:22">TimerTask</jtok>
<jtok eid="1" type="field_name" span="19:23:19:27">task</jtok>
<jtok eid="2" type="method_name" span="21:12:21:27">AutoSaveManager</jtok>
<jtok eid="2" type="parameter_type" span="21:28:21:39">JabRefFrame</jtok>
<jtok eid="2" type="parameter_name" span="21:40:21:45">frame</jtok>
<jtok eid="2" type="qualified_name_ref" span="23:14:23:19">frame</jtok>
<jtok eid="2" type="primary_name_ref" span="23:22:23:27">frame</jtok>
<jtok eid="3" type="method_name" span="26:17:26:35">startAutoSaveTimer</jtok>
<jtok eid="3" type="primary_name_ref" span="27:9:27:13">task</jtok>
<jtok eid="3" type="constructor_call" span="27:20:27:32">AutoSaveTask</jtok>
<jtok eid="3" type="primary_name_ref" span="28:9:28:10">t</jtok>
<jtok eid="3" type="constructor_call" span="28:17:28:22">Timer</jtok>
<jtok eid="3" type="local_variable_name" span="29:14:29:22">interval</jtok>
<jtok eid="3" type="primary_name_ref" span="29:38:29:45">Globals</jtok>
<jtok eid="3" type="qualified_name_ref" span="29:46:29:51">prefs</jtok>
<jtok eid="3" type="method_call" span="29:52:29:58">getInt</jtok>
<jtok eid="3" type="string_literal" span="29:59:29:77">"autoSaveInterval"</jtok>
<jtok eid="3" type="primary_name_ref" span="30:9:30:10">t</jtok>
<jtok eid="3" type="method_call" span="30:11:30:30">scheduleAtFixedRate</jtok>
<jtok eid="3" type="primary_name_ref" span="30:31:30:35">task</jtok>
<jtok eid="3" type="primary_name_ref" span="30:37:30:45">interval</jtok>
<jtok eid="3" type="primary_name_ref" span="30:47:30:55">interval</jtok>
<jtok eid="4" type="method_name" span="33:17:33:34">stopAutoSaveTimer</jtok>
<jtok eid="4" type="primary_name_ref" span="34:9:34:10">t</jtok>
<jtok eid="4" type="method_call" span="34:11:34:17">cancel</jtok>
<jtok eid="5" type="class_name" span="37:11:37:23">AutoSaveTask</jtok>
<jtok eid="5" type="class_or_interface_ref" span="37:32:37:41">TimerTask</jtok>
<jtok eid="6" type="method_name" span="38:21:38:24">run</jtok>
<jtok eid="6" type="line_comment" span="39:13:39:88">// Since this method is running in the background, we must be prepared that</jtok>
<jtok eid="6" type="line_comment" span="40:13:40:85">// there could be changes done by the user while this method is running.</jtok>
<jtok eid="6" type="class_or_interface_ref" span="42:13:42:17">List</jtok>
<jtok eid="6" type="class_or_interface_ref" span="42:18:42:27">BasePanel</jtok>
<jtok eid="6" type="local_variable_name" span="42:29:42:35">panels</jtok>
<jtok eid="6" type="constructor_call" span="42:42:42:51">ArrayList</jtok>
<jtok eid="6" type="constructor_call" span="42:52:42:61">BasePanel</jtok>
<jtok eid="6" type="local_variable_name" span="43:22:43:23">i</jtok>
<jtok eid="6" type="primary_name_ref" span="43:27:43:28">i</jtok>
<jtok eid="6" type="primary_name_ref" span="43:29:43:34">frame</jtok>
<jtok eid="6" type="method_call" span="43:35:43:44">baseCount</jtok>
<jtok eid="6" type="primary_name_ref" span="43:48:43:49">i</jtok>
<jtok eid="6" type="primary_name_ref" span="44:17:44:23">panels</jtok>
<jtok eid="6" type="method_call" span="44:24:44:27">add</jtok>
<jtok eid="6" type="primary_name_ref" span="44:28:44:33">frame</jtok>
<jtok eid="6" type="method_call" span="44:34:44:40">baseAt</jtok>
<jtok eid="6" type="primary_name_ref" span="44:41:44:42">i</jtok>
<jtok eid="6" type="local_variable_name" span="46:17:46:18">i</jtok>
<jtok eid="6" type="class_or_interface_ref" span="47:18:47:27">BasePanel</jtok>
<jtok eid="6" type="local_variable_name" span="47:28:47:33">panel</jtok>
<jtok eid="6" type="primary_name_ref" span="47:36:47:42">panels</jtok>
<jtok eid="6" type="primary_name_ref" span="48:21:48:26">panel</jtok>
<jtok eid="6" type="method_call" span="48:27:48:40">isBaseChanged</jtok>
<jtok eid="6" type="primary_name_ref" span="49:25:49:30">panel</jtok>
<jtok eid="6" type="method_call" span="49:31:49:38">getFile</jtok>
<jtok eid="6" type="method_call" span="50:25:50:33">autoSave</jtok>
<jtok eid="6" type="primary_name_ref" span="50:34:50:39">panel</jtok>
<jtok eid="6" type="primary_name_ref" span="55:17:55:18">i</jtok>
<jtok eid="1" type="block_comment" span="60:5:64:8">/**
     * Get a File object pointing to the autosave file corresponding to the given file.
     * @param f The database file.
     * @return its corresponding autosave file.
     */</jtok>
<jtok eid="7" type="class_or_interface_ref" span="65:19:65:23">File</jtok>
<jtok eid="7" type="method_name" span="65:24:65:39">getAutoSaveFile</jtok>
<jtok eid="7" type="parameter_type" span="65:40:65:44">File</jtok>
<jtok eid="7" type="parameter_name" span="65:45:65:46">f</jtok>
<jtok eid="7" type="class_or_interface_ref" span="66:9:66:15">String</jtok>
<jtok eid="7" type="local_variable_name" span="66:16:66:17">n</jtok>
<jtok eid="7" type="primary_name_ref" span="66:20:66:21">f</jtok>
<jtok eid="7" type="method_call" span="66:22:66:29">getName</jtok>
<jtok eid="7" type="constructor_call" span="67:20:67:24">File</jtok>
<jtok eid="7" type="primary_name_ref" span="67:25:67:26">f</jtok>
<jtok eid="7" type="method_call" span="67:27:67:40">getParentFile</jtok>
<jtok eid="7" type="string_literal" span="67:44:67:48">".$"</jtok>
<jtok eid="7" type="primary_name_ref" span="67:49:67:50">n</jtok>
<jtok eid="7" type="string_literal" span="67:51:67:54">"$"</jtok>
<jtok eid="1" type="block_comment" span="70:5:74:8">/**
     * Perform an autosave.
     * @param panel The BasePanel to autosave for.
     * @return true if successful, false otherwise.
     */</jtok>
<jtok eid="8" type="method_name" span="75:27:75:35">autoSave</jtok>
<jtok eid="8" type="parameter_type" span="75:36:75:45">BasePanel</jtok>
<jtok eid="8" type="parameter_name" span="75:46:75:51">panel</jtok>
<jtok eid="8" type="class_or_interface_ref" span="76:9:76:13">File</jtok>
<jtok eid="8" type="local_variable_name" span="76:14:76:24">backupFile</jtok>
<jtok eid="8" type="method_call" span="76:27:76:42">getAutoSaveFile</jtok>
<jtok eid="8" type="primary_name_ref" span="76:43:76:48">panel</jtok>
<jtok eid="8" type="method_call" span="76:49:76:56">getFile</jtok>
<jtok eid="8" type="class_or_interface_ref" span="78:13:78:24">SaveSession</jtok>
<jtok eid="8" type="local_variable_name" span="78:25:78:27">ss</jtok>
<jtok eid="8" type="primary_name_ref" span="78:30:78:41">FileActions</jtok>
<jtok eid="8" type="method_call" span="78:42:78:54">saveDatabase</jtok>
<jtok eid="8" type="primary_name_ref" span="78:55:78:60">panel</jtok>
<jtok eid="8" type="method_call" span="78:61:78:69">database</jtok>
<jtok eid="8" type="primary_name_ref" span="78:73:78:78">panel</jtok>
<jtok eid="8" type="method_call" span="78:79:78:87">metaData</jtok>
<jtok eid="8" type="primary_name_ref" span="79:21:79:31">backupFile</jtok>
<jtok eid="8" type="primary_name_ref" span="79:33:79:40">Globals</jtok>
<jtok eid="8" type="qualified_name_ref" span="79:41:79:46">prefs</jtok>
<jtok eid="8" type="primary_name_ref" span="80:35:80:40">panel</jtok>
<jtok eid="8" type="method_call" span="80:41:80:52">getEncoding</jtok>
<jtok eid="8" type="primary_name_ref" span="81:13:81:15">ss</jtok>
<jtok eid="8" type="method_call" span="81:16:81:22">commit</jtok>
<jtok eid="8" type="class_or_interface_ref" span="82:18:82:31">SaveException</jtok>
<jtok eid="8" type="local_variable_name" span="82:32:82:33">e</jtok>
<jtok eid="8" type="primary_name_ref" span="83:13:83:14">e</jtok>
<jtok eid="8" type="method_call" span="83:15:83:30">printStackTrace</jtok>
<jtok eid="8" type="class_or_interface_ref" span="85:18:85:27">Throwable</jtok>
<jtok eid="8" type="local_variable_name" span="85:28:85:30">ex</jtok>
<jtok eid="8" type="primary_name_ref" span="86:13:86:15">ex</jtok>
<jtok eid="8" type="method_call" span="86:16:86:31">printStackTrace</jtok>
<jtok eid="1" type="block_comment" span="92:5:96:8">/**
     * Delete this BasePanel's autosave if it exists.
     * @param panel The BasePanel in question.
     * @return true if there was no autosave or if the autosave was successfully deleted, false otherwise.
     */</jtok>
<jtok eid="9" type="method_name" span="97:27:97:45">deleteAutoSaveFile</jtok>
<jtok eid="9" type="parameter_type" span="97:46:97:55">BasePanel</jtok>
<jtok eid="9" type="parameter_name" span="97:56:97:61">panel</jtok>
<jtok eid="9" type="primary_name_ref" span="98:13:98:18">panel</jtok>
<jtok eid="9" type="method_call" span="98:19:98:26">getFile</jtok>
<jtok eid="9" type="class_or_interface_ref" span="100:9:100:13">File</jtok>
<jtok eid="9" type="local_variable_name" span="100:14:100:24">backupFile</jtok>
<jtok eid="9" type="method_call" span="100:27:100:42">getAutoSaveFile</jtok>
<jtok eid="9" type="primary_name_ref" span="100:43:100:48">panel</jtok>
<jtok eid="9" type="method_call" span="100:49:100:56">getFile</jtok>
<jtok eid="9" type="primary_name_ref" span="101:13:101:23">backupFile</jtok>
<jtok eid="9" type="method_call" span="101:24:101:30">exists</jtok>
<jtok eid="9" type="primary_name_ref" span="102:20:102:30">backupFile</jtok>
<jtok eid="9" type="method_call" span="102:31:102:37">delete</jtok>
<jtok eid="1" type="block_comment" span="107:5:110:8">/**
     * Clean up by deleting the autosave files corresponding to all open files,
     * if they exist.
     */</jtok>
<jtok eid="10" type="method_name" span="111:17:111:31">clearAutoSaves</jtok>
<jtok eid="10" type="class_or_interface_ref" span="112:9:112:13">List</jtok>
<jtok eid="10" type="class_or_interface_ref" span="112:14:112:23">BasePanel</jtok>
<jtok eid="10" type="local_variable_name" span="112:25:112:31">panels</jtok>
<jtok eid="10" type="constructor_call" span="112:38:112:47">ArrayList</jtok>
<jtok eid="10" type="constructor_call" span="112:48:112:57">BasePanel</jtok>
<jtok eid="10" type="local_variable_name" span="113:18:113:19">i</jtok>
<jtok eid="10" type="primary_name_ref" span="113:23:113:24">i</jtok>
<jtok eid="10" type="primary_name_ref" span="113:25:113:30">frame</jtok>
<jtok eid="10" type="method_call" span="113:31:113:40">baseCount</jtok>
<jtok eid="10" type="primary_name_ref" span="113:44:113:45">i</jtok>
<jtok eid="10" type="primary_name_ref" span="114:13:114:19">panels</jtok>
<jtok eid="10" type="method_call" span="114:20:114:23">add</jtok>
<jtok eid="10" type="primary_name_ref" span="114:24:114:29">frame</jtok>
<jtok eid="10" type="method_call" span="114:30:114:36">baseAt</jtok>
<jtok eid="10" type="primary_name_ref" span="114:37:114:38">i</jtok>
<jtok eid="10" type="class_or_interface_ref" span="115:14:115:23">BasePanel</jtok>
<jtok eid="10" type="local_variable_name" span="115:24:115:29">panel</jtok>
<jtok eid="10" type="primary_name_ref" span="115:32:115:38">panels</jtok>
<jtok eid="10" type="method_call" span="116:13:116:31">deleteAutoSaveFile</jtok>
<jtok eid="10" type="primary_name_ref" span="116:32:116:37">panel</jtok>
<jtok eid="1" type="block_comment" span="120:5:125:8">/**
     * Check if a newer autosave exists for the given file.
     * @param f The file to check.
     * @return true if an autosave is found, and if the autosave is newer
     *   than the given file.
     */</jtok>
<jtok eid="11" type="method_name" span="126:27:126:46">newerAutoSaveExists</jtok>
<jtok eid="11" type="parameter_type" span="126:47:126:51">File</jtok>
<jtok eid="11" type="parameter_name" span="126:52:126:53">f</jtok>
<jtok eid="11" type="class_or_interface_ref" span="127:9:127:13">File</jtok>
<jtok eid="11" type="local_variable_name" span="127:14:127:20">asFile</jtok>
<jtok eid="11" type="method_call" span="127:23:127:38">getAutoSaveFile</jtok>
<jtok eid="11" type="primary_name_ref" span="127:39:127:40">f</jtok>
<jtok eid="11" type="primary_name_ref" span="128:16:128:22">asFile</jtok>
<jtok eid="11" type="method_call" span="128:23:128:29">exists</jtok>
<jtok eid="11" type="primary_name_ref" span="128:36:128:42">asFile</jtok>
<jtok eid="11" type="method_call" span="128:43:128:55">lastModified</jtok>
<jtok eid="11" type="primary_name_ref" span="128:60:128:61">f</jtok>
<jtok eid="11" type="method_call" span="128:62:128:74">lastModified</jtok>
</jdoc>