<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.export.FileActions" jls="java5">
<jent id="0" type="file" span="0:0:538:79">Source/jabref/src/java/net/sf/jabref/export/FileActions.java</jent>
<jent id="1" pid="0" type="class" span="66:1:532:1">net.sf.jabref.export.FileActions</jent>
<jent id="2" pid="1" type="method" span="72:5:78:5">net.sf.jabref.export.FileActions.writePreamble(Writer,String)</jent>
<jent id="3" pid="1" type="method" span="87:5:104:5">net.sf.jabref.export.FileActions.writeStrings(Writer,BibtexDatabase)</jent>
<jent id="4" pid="1" type="method" span="106:5:141:5">net.sf.jabref.export.FileActions.writeString(Writer,BibtexString,HashMap&lt;String,BibtexString&gt;)</jent>
<jent id="5" pid="1" type="method" span="148:5:153:5">net.sf.jabref.export.FileActions.writeBibFileHeader(Writer,String)</jent>
<jent id="6" pid="1" type="method" span="162:5:279:2">net.sf.jabref.export.FileActions.saveDatabase(BibtexDatabase,MetaData,File,JabRefPreferences,boolean,boolean,String,boolean)</jent>
<jent id="7" pid="1" type="method" span="288:2:419:5">net.sf.jabref.export.FileActions.savePartOfDatabase(BibtexDatabase,MetaData,File,JabRefPreferences,BibtexEntry[],String)</jent>
<jent id="8" pid="1" type="method" span="427:5:449:5">net.sf.jabref.export.FileActions.getReader(String)</jent>
<jent id="9" pid="1" type="method" span="458:2:522:5">net.sf.jabref.export.FileActions.getSortedEntries(BibtexDatabase,Set&lt;String&gt;,boolean)</jent>
<jent id="10" pid="1" type="method" span="526:5:531:5">net.sf.jabref.export.FileActions.nonZeroField(BibtexEntry,String)</jent>
<jtok eid="0" type="block_comment" span="1:1:26:3">/*
Copyright (C) 2003 Nizar N. Batada, Morten O. Alver

All programs in this directory and
subdirectories are published under the GNU General Public License as
described below.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or (at
your option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307
USA

Further information about the GNU GPL is available at:
http://www.gnu.org/copyleft/gpl.ja.html

*/</jtok>
<jtok eid="1" type="class_name" span="66:14:66:25">FileActions</jtok>
<jtok eid="1" type="class_or_interface_ref" span="69:20:69:27">Pattern</jtok>
<jtok eid="1" type="field_name" span="69:28:69:34">refPat</jtok>
<jtok eid="1" type="primary_name_ref" span="69:37:69:44">Pattern</jtok>
<jtok eid="1" type="method_call" span="69:45:69:52">compile</jtok>
<jtok eid="1" type="string_literal" span="69:53:69:68">"(#[A-Za-z]+#)"</jtok>
<jtok eid="1" type="line_comment" span="69:71:69:117">// Used to detect string references in strings</jtok>
<jtok eid="2" type="method_name" span="72:25:72:38">writePreamble</jtok>
<jtok eid="2" type="parameter_type" span="72:39:72:45">Writer</jtok>
<jtok eid="2" type="parameter_name" span="72:46:72:48">fw</jtok>
<jtok eid="2" type="parameter_type" span="72:50:72:56">String</jtok>
<jtok eid="2" type="parameter_name" span="72:57:72:65">preamble</jtok>
<jtok eid="2" type="throws" span="72:74:72:85">IOException</jtok>
<jtok eid="2" type="primary_name_ref" span="73:9:73:17">preamble</jtok>
<jtok eid="2" type="primary_name_ref" span="74:9:74:11">fw</jtok>
<jtok eid="2" type="method_call" span="74:12:74:17">write</jtok>
<jtok eid="2" type="string_literal" span="74:18:74:30">"@PREAMBLE{"</jtok>
<jtok eid="2" type="primary_name_ref" span="75:9:75:11">fw</jtok>
<jtok eid="2" type="method_call" span="75:12:75:17">write</jtok>
<jtok eid="2" type="primary_name_ref" span="75:18:75:26">preamble</jtok>
<jtok eid="2" type="primary_name_ref" span="76:9:76:11">fw</jtok>
<jtok eid="2" type="method_call" span="76:12:76:17">write</jtok>
<jtok eid="2" type="string_literal" span="76:18:76:21">"}"</jtok>
<jtok eid="2" type="primary_name_ref" span="76:22:76:29">Globals</jtok>
<jtok eid="2" type="qualified_name_ref" span="76:30:76:37">NEWLINE</jtok>
<jtok eid="2" type="primary_name_ref" span="76:39:76:46">Globals</jtok>
<jtok eid="2" type="qualified_name_ref" span="76:47:76:54">NEWLINE</jtok>
<jtok eid="1" type="block_comment" span="80:5:86:8">/**
     * Write all strings in alphabetical order, modified to produce a safe (for BibTeX) order of the strings
     * if they reference each other.
     * @param fw The Writer to send the output to.
     * @param database The database whose strings we should write.
     * @throws IOException If anthing goes wrong in writing.
     */</jtok>
<jtok eid="3" type="method_name" span="87:25:87:37">writeStrings</jtok>
<jtok eid="3" type="parameter_type" span="87:38:87:44">Writer</jtok>
<jtok eid="3" type="parameter_name" span="87:45:87:47">fw</jtok>
<jtok eid="3" type="parameter_type" span="87:49:87:63">BibtexDatabase</jtok>
<jtok eid="3" type="parameter_name" span="87:64:87:72">database</jtok>
<jtok eid="3" type="throws" span="87:81:87:92">IOException</jtok>
<jtok eid="3" type="class_or_interface_ref" span="88:9:88:13">List</jtok>
<jtok eid="3" type="class_or_interface_ref" span="88:14:88:26">BibtexString</jtok>
<jtok eid="3" type="local_variable_name" span="88:28:88:35">strings</jtok>
<jtok eid="3" type="constructor_call" span="88:42:88:51">ArrayList</jtok>
<jtok eid="3" type="constructor_call" span="88:52:88:64">BibtexString</jtok>
<jtok eid="3" type="class_or_interface_ref" span="89:14:89:20">String</jtok>
<jtok eid="3" type="local_variable_name" span="89:21:89:22">s</jtok>
<jtok eid="3" type="primary_name_ref" span="89:25:89:33">database</jtok>
<jtok eid="3" type="method_call" span="89:34:89:49">getStringKeySet</jtok>
<jtok eid="3" type="primary_name_ref" span="90:13:90:20">strings</jtok>
<jtok eid="3" type="method_call" span="90:21:90:24">add</jtok>
<jtok eid="3" type="primary_name_ref" span="90:25:90:33">database</jtok>
<jtok eid="3" type="method_call" span="90:34:90:43">getString</jtok>
<jtok eid="3" type="primary_name_ref" span="90:44:90:45">s</jtok>
<jtok eid="3" type="primary_name_ref" span="92:9:92:20">Collections</jtok>
<jtok eid="3" type="method_call" span="92:21:92:25">sort</jtok>
<jtok eid="3" type="primary_name_ref" span="92:26:92:33">strings</jtok>
<jtok eid="3" type="constructor_call" span="92:39:92:61">BibtexStringComparator</jtok>
<jtok eid="3" type="line_comment" span="93:9:93:45">// First, make a Map of all entries:</jtok>
<jtok eid="3" type="class_or_interface_ref" span="94:9:94:16">HashMap</jtok>
<jtok eid="3" type="class_or_interface_ref" span="94:17:94:23">String</jtok>
<jtok eid="3" type="class_or_interface_ref" span="94:25:94:37">BibtexString</jtok>
<jtok eid="3" type="local_variable_name" span="94:39:94:48">remaining</jtok>
<jtok eid="3" type="constructor_call" span="94:55:94:62">HashMap</jtok>
<jtok eid="3" type="constructor_call" span="94:63:94:69">String</jtok>
<jtok eid="3" type="constructor_call" span="94:71:94:83">BibtexString</jtok>
<jtok eid="3" type="class_or_interface_ref" span="95:14:95:22">Iterator</jtok>
<jtok eid="3" type="class_or_interface_ref" span="95:23:95:35">BibtexString</jtok>
<jtok eid="3" type="local_variable_name" span="95:37:95:38">i</jtok>
<jtok eid="3" type="primary_name_ref" span="95:39:95:46">strings</jtok>
<jtok eid="3" type="method_call" span="95:47:95:55">iterator</jtok>
<jtok eid="3" type="primary_name_ref" span="95:59:95:60">i</jtok>
<jtok eid="3" type="method_call" span="95:61:95:68">hasNext</jtok>
<jtok eid="3" type="class_or_interface_ref" span="96:13:96:25">BibtexString</jtok>
<jtok eid="3" type="local_variable_name" span="96:26:96:32">string</jtok>
<jtok eid="3" type="primary_name_ref" span="96:35:96:36">i</jtok>
<jtok eid="3" type="method_call" span="96:37:96:41">next</jtok>
<jtok eid="3" type="primary_name_ref" span="97:13:97:22">remaining</jtok>
<jtok eid="3" type="method_call" span="97:23:97:26">put</jtok>
<jtok eid="3" type="primary_name_ref" span="97:27:97:33">string</jtok>
<jtok eid="3" type="method_call" span="97:34:97:41">getName</jtok>
<jtok eid="3" type="primary_name_ref" span="97:45:97:51">string</jtok>
<jtok eid="3" type="class_or_interface_ref" span="99:14:99:22">Iterator</jtok>
<jtok eid="3" type="class_or_interface_ref" span="99:23:99:35">BibtexString</jtok>
<jtok eid="3" type="local_variable_name" span="99:37:99:38">i</jtok>
<jtok eid="3" type="primary_name_ref" span="99:41:99:48">strings</jtok>
<jtok eid="3" type="method_call" span="99:49:99:57">iterator</jtok>
<jtok eid="3" type="primary_name_ref" span="99:61:99:62">i</jtok>
<jtok eid="3" type="method_call" span="99:63:99:70">hasNext</jtok>
<jtok eid="3" type="class_or_interface_ref" span="100:13:100:25">BibtexString</jtok>
<jtok eid="3" type="local_variable_name" span="100:26:100:28">bs</jtok>
<jtok eid="3" type="primary_name_ref" span="100:31:100:32">i</jtok>
<jtok eid="3" type="method_call" span="100:33:100:37">next</jtok>
<jtok eid="3" type="primary_name_ref" span="101:17:101:26">remaining</jtok>
<jtok eid="3" type="method_call" span="101:27:101:38">containsKey</jtok>
<jtok eid="3" type="primary_name_ref" span="101:39:101:41">bs</jtok>
<jtok eid="3" type="method_call" span="101:42:101:49">getName</jtok>
<jtok eid="3" type="method_call" span="102:17:102:28">writeString</jtok>
<jtok eid="3" type="primary_name_ref" span="102:29:102:31">fw</jtok>
<jtok eid="3" type="primary_name_ref" span="102:33:102:35">bs</jtok>
<jtok eid="3" type="primary_name_ref" span="102:37:102:46">remaining</jtok>
<jtok eid="4" type="method_name" span="106:25:106:36">writeString</jtok>
<jtok eid="4" type="parameter_type" span="106:37:106:43">Writer</jtok>
<jtok eid="4" type="parameter_name" span="106:44:106:46">fw</jtok>
<jtok eid="4" type="parameter_type" span="106:48:106:60">BibtexString</jtok>
<jtok eid="4" type="parameter_name" span="106:61:106:63">bs</jtok>
<jtok eid="4" type="parameter_type" span="106:65:106:72">HashMap</jtok>
<jtok eid="4" type="parameter_type" span="106:73:106:79">String</jtok>
<jtok eid="4" type="parameter_type" span="106:81:106:93">BibtexString</jtok>
<jtok eid="4" type="parameter_name" span="106:95:106:104">remaining</jtok>
<jtok eid="4" type="throws" span="106:113:106:124">IOException</jtok>
<jtok eid="4" type="line_comment" span="107:9:107:101">// First remove this from the "remaining" list so it can't cause problem with circular refs:</jtok>
<jtok eid="4" type="primary_name_ref" span="108:9:108:18">remaining</jtok>
<jtok eid="4" type="method_call" span="108:19:108:25">remove</jtok>
<jtok eid="4" type="primary_name_ref" span="108:26:108:28">bs</jtok>
<jtok eid="4" type="method_call" span="108:29:108:36">getName</jtok>
<jtok eid="4" type="line_comment" span="110:9:110:104">// Then we go through the string looking for references to other strings. If we find references</jtok>
<jtok eid="4" type="line_comment" span="111:9:111:108">// to strings that we will write, but still haven't, we write those before proceeding. This ensures</jtok>
<jtok eid="4" type="line_comment" span="112:9:112:64">// that the string order will be acceptable for BibTeX.</jtok>
<jtok eid="4" type="class_or_interface_ref" span="113:9:113:15">String</jtok>
<jtok eid="4" type="local_variable_name" span="113:16:113:23">content</jtok>
<jtok eid="4" type="primary_name_ref" span="113:26:113:28">bs</jtok>
<jtok eid="4" type="method_call" span="113:29:113:39">getContent</jtok>
<jtok eid="4" type="class_or_interface_ref" span="114:9:114:16">Matcher</jtok>
<jtok eid="4" type="local_variable_name" span="114:17:114:18">m</jtok>
<jtok eid="4" type="primary_name_ref" span="115:17:115:18">m</jtok>
<jtok eid="4" type="primary_name_ref" span="115:21:115:27">refPat</jtok>
<jtok eid="4" type="method_call" span="115:28:115:35">matcher</jtok>
<jtok eid="4" type="primary_name_ref" span="115:36:115:43">content</jtok>
<jtok eid="4" type="method_call" span="115:46:115:50">find</jtok>
<jtok eid="4" type="class_or_interface_ref" span="116:13:116:19">String</jtok>
<jtok eid="4" type="local_variable_name" span="116:20:116:30">foundLabel</jtok>
<jtok eid="4" type="primary_name_ref" span="116:33:116:34">m</jtok>
<jtok eid="4" type="method_call" span="116:35:116:40">group</jtok>
<jtok eid="4" type="local_variable_name" span="117:17:117:26">restIndex</jtok>
<jtok eid="4" type="primary_name_ref" span="117:29:117:36">content</jtok>
<jtok eid="4" type="method_call" span="117:37:117:44">indexOf</jtok>
<jtok eid="4" type="primary_name_ref" span="117:45:117:55">foundLabel</jtok>
<jtok eid="4" type="primary_name_ref" span="117:57:117:67">foundLabel</jtok>
<jtok eid="4" type="method_call" span="117:68:117:74">length</jtok>
<jtok eid="4" type="primary_name_ref" span="118:13:118:20">content</jtok>
<jtok eid="4" type="primary_name_ref" span="118:23:118:30">content</jtok>
<jtok eid="4" type="method_call" span="118:31:118:40">substring</jtok>
<jtok eid="4" type="primary_name_ref" span="118:41:118:50">restIndex</jtok>
<jtok eid="4" type="class_or_interface_ref" span="119:13:119:19">Object</jtok>
<jtok eid="4" type="local_variable_name" span="119:20:119:28">referred</jtok>
<jtok eid="4" type="primary_name_ref" span="119:31:119:40">remaining</jtok>
<jtok eid="4" type="method_call" span="119:41:119:44">get</jtok>
<jtok eid="4" type="primary_name_ref" span="119:45:119:55">foundLabel</jtok>
<jtok eid="4" type="method_call" span="119:56:119:65">substring</jtok>
<jtok eid="4" type="primary_name_ref" span="119:69:119:79">foundLabel</jtok>
<jtok eid="4" type="method_call" span="119:80:119:86">length</jtok>
<jtok eid="4" type="line_comment" span="120:13:120:104">// If the label we found exists as a key in the "remaining" Map, we go on and write it now:</jtok>
<jtok eid="4" type="primary_name_ref" span="121:17:121:25">referred</jtok>
<jtok eid="4" type="method_call" span="122:17:122:28">writeString</jtok>
<jtok eid="4" type="primary_name_ref" span="122:29:122:31">fw</jtok>
<jtok eid="4" type="class_or_interface_ref" span="122:34:122:46">BibtexString</jtok>
<jtok eid="4" type="primary_name_ref" span="122:47:122:55">referred</jtok>
<jtok eid="4" type="primary_name_ref" span="122:57:122:66">remaining</jtok>
<jtok eid="4" type="primary_name_ref" span="125:9:125:11">fw</jtok>
<jtok eid="4" type="method_call" span="125:12:125:17">write</jtok>
<jtok eid="4" type="string_literal" span="125:18:125:28">"@STRING{"</jtok>
<jtok eid="4" type="primary_name_ref" span="125:31:125:33">bs</jtok>
<jtok eid="4" type="method_call" span="125:34:125:41">getName</jtok>
<jtok eid="4" type="string_literal" span="125:46:125:51">" = "</jtok>
<jtok eid="4" type="primary_name_ref" span="126:14:126:16">bs</jtok>
<jtok eid="4" type="method_call" span="126:17:126:27">getContent</jtok>
<jtok eid="4" type="method_call" span="126:30:126:36">equals</jtok>
<jtok eid="4" type="string_literal" span="126:37:126:39">""</jtok>
<jtok eid="4" type="class_or_interface_ref" span="128:17:128:23">String</jtok>
<jtok eid="4" type="local_variable_name" span="128:24:128:33">formatted</jtok>
<jtok eid="4" type="constructor_call" span="128:41:128:60">LatexFieldFormatter</jtok>
<jtok eid="4" type="method_call" span="128:64:128:70">format</jtok>
<jtok eid="4" type="primary_name_ref" span="128:71:128:73">bs</jtok>
<jtok eid="4" type="method_call" span="128:74:128:84">getContent</jtok>
<jtok eid="4" type="primary_name_ref" span="128:88:128:95">Globals</jtok>
<jtok eid="4" type="qualified_name_ref" span="128:96:128:109">BIBTEX_STRING</jtok>
<jtok eid="4" type="primary_name_ref" span="129:17:129:19">fw</jtok>
<jtok eid="4" type="method_call" span="129:20:129:25">write</jtok>
<jtok eid="4" type="primary_name_ref" span="129:26:129:35">formatted</jtok>
<jtok eid="4" type="class_or_interface_ref" span="130:22:130:46">IllegalArgumentException</jtok>
<jtok eid="4" type="local_variable_name" span="130:47:130:49">ex</jtok>
<jtok eid="4" type="constructor_call" span="131:27:131:51">IllegalArgumentException</jtok>
<jtok eid="4" type="primary_name_ref" span="132:25:132:32">Globals</jtok>
<jtok eid="4" type="method_call" span="132:33:132:37">lang</jtok>
<jtok eid="4" type="string_literal" span="132:38:132:116">"The # character is not allowed in BibTeX strings unless escaped as in '\\#'."</jtok>
<jtok eid="4" type="string_literal" span="132:120:132:124">"\n"</jtok>
<jtok eid="4" type="primary_name_ref" span="133:25:133:32">Globals</jtok>
<jtok eid="4" type="method_call" span="133:33:133:37">lang</jtok>
<jtok eid="4" type="string_literal" span="133:38:133:106">"Before saving, please edit any strings containing the # character."</jtok>
<jtok eid="4" type="primary_name_ref" span="138:13:138:15">fw</jtok>
<jtok eid="4" type="method_call" span="138:16:138:21">write</jtok>
<jtok eid="4" type="string_literal" span="138:22:138:26">"{}"</jtok>
<jtok eid="4" type="primary_name_ref" span="140:9:140:11">fw</jtok>
<jtok eid="4" type="method_call" span="140:12:140:17">write</jtok>
<jtok eid="4" type="string_literal" span="140:18:140:21">"}"</jtok>
<jtok eid="4" type="primary_name_ref" span="140:24:140:31">Globals</jtok>
<jtok eid="4" type="qualified_name_ref" span="140:32:140:39">NEWLINE</jtok>
<jtok eid="4" type="primary_name_ref" span="140:42:140:49">Globals</jtok>
<jtok eid="4" type="qualified_name_ref" span="140:50:140:57">NEWLINE</jtok>
<jtok eid="1" type="block_comment" span="143:5:147:8">/**
     * Writes the JabRef signature and the encoding.
     *
     * @param encoding String the name of the encoding, which is part of the header.
     */</jtok>
<jtok eid="5" type="method_name" span="148:25:148:43">writeBibFileHeader</jtok>
<jtok eid="5" type="parameter_type" span="148:44:148:50">Writer</jtok>
<jtok eid="5" type="parameter_name" span="148:51:148:54">out</jtok>
<jtok eid="5" type="parameter_type" span="148:56:148:62">String</jtok>
<jtok eid="5" type="parameter_name" span="148:63:148:71">encoding</jtok>
<jtok eid="5" type="throws" span="148:80:148:91">IOException</jtok>
<jtok eid="5" type="primary_name_ref" span="149:9:149:12">out</jtok>
<jtok eid="5" type="method_call" span="149:13:149:18">write</jtok>
<jtok eid="5" type="string_literal" span="149:19:149:23">"% "</jtok>
<jtok eid="5" type="primary_name_ref" span="150:7:150:10">out</jtok>
<jtok eid="5" type="method_call" span="150:11:150:16">write</jtok>
<jtok eid="5" type="primary_name_ref" span="150:17:150:27">GUIGlobals</jtok>
<jtok eid="5" type="qualified_name_ref" span="150:28:150:37">SIGNATURE</jtok>
<jtok eid="5" type="primary_name_ref" span="151:7:151:10">out</jtok>
<jtok eid="5" type="method_call" span="151:11:151:16">write</jtok>
<jtok eid="5" type="string_literal" span="151:17:151:20">" "</jtok>
<jtok eid="5" type="primary_name_ref" span="151:21:151:31">GUIGlobals</jtok>
<jtok eid="5" type="qualified_name_ref" span="151:32:151:39">version</jtok>
<jtok eid="5" type="string_literal" span="151:40:151:43">"."</jtok>
<jtok eid="5" type="primary_name_ref" span="151:44:151:51">Globals</jtok>
<jtok eid="5" type="qualified_name_ref" span="151:52:151:59">NEWLINE</jtok>
<jtok eid="5" type="string_literal" span="151:62:151:66">"% "</jtok>
<jtok eid="5" type="primary_name_ref" span="152:15:152:25">GUIGlobals</jtok>
<jtok eid="5" type="qualified_name_ref" span="152:26:152:35">encPrefix</jtok>
<jtok eid="5" type="primary_name_ref" span="152:36:152:44">encoding</jtok>
<jtok eid="5" type="primary_name_ref" span="152:45:152:52">Globals</jtok>
<jtok eid="5" type="qualified_name_ref" span="152:53:152:60">NEWLINE</jtok>
<jtok eid="5" type="primary_name_ref" span="152:62:152:69">Globals</jtok>
<jtok eid="5" type="qualified_name_ref" span="152:70:152:77">NEWLINE</jtok>
<jtok eid="1" type="block_comment" span="155:5:161:8">/**
     * Saves the database to file. Two boolean values indicate whether
     * only entries with a nonzero Globals.SEARCH value and only
     * entries with a nonzero Globals.GROUPSEARCH value should be
     * saved. This can be used to let the user save only the results of
     * a search. False and false means all entries are saved.
     */</jtok>
<jtok eid="6" type="class_or_interface_ref" span="162:19:162:30">SaveSession</jtok>
<jtok eid="6" type="method_name" span="162:31:162:43">saveDatabase</jtok>
<jtok eid="6" type="parameter_type" span="162:44:162:58">BibtexDatabase</jtok>
<jtok eid="6" type="parameter_name" span="162:59:162:67">database</jtok>
<jtok eid="6" type="parameter_type" span="163:3:163:11">MetaData</jtok>
<jtok eid="6" type="parameter_name" span="163:12:163:20">metaData</jtok>
<jtok eid="6" type="parameter_type" span="163:22:163:26">File</jtok>
<jtok eid="6" type="parameter_name" span="163:27:163:31">file</jtok>
<jtok eid="6" type="parameter_type" span="163:33:163:50">JabRefPreferences</jtok>
<jtok eid="6" type="parameter_name" span="163:51:163:56">prefs</jtok>
<jtok eid="6" type="parameter_name" span="164:11:164:22">checkSearch</jtok>
<jtok eid="6" type="parameter_name" span="164:32:164:42">checkGroup</jtok>
<jtok eid="6" type="parameter_type" span="164:44:164:50">String</jtok>
<jtok eid="6" type="parameter_name" span="164:51:164:59">encoding</jtok>
<jtok eid="6" type="parameter_name" span="164:69:164:83">suppressBackup</jtok>
<jtok eid="6" type="throws" span="165:10:165:23">SaveException</jtok>
<jtok eid="6" type="class_or_interface_ref" span="167:3:167:10">TreeMap</jtok>
<jtok eid="6" type="class_or_interface_ref" span="167:11:167:17">String</jtok>
<jtok eid="6" type="class_or_interface_ref" span="167:19:167:34">BibtexEntryType</jtok>
<jtok eid="6" type="local_variable_name" span="167:36:167:41">types</jtok>
<jtok eid="6" type="constructor_call" span="167:48:167:55">TreeMap</jtok>
<jtok eid="6" type="constructor_call" span="167:56:167:62">String</jtok>
<jtok eid="6" type="constructor_call" span="167:64:167:79">BibtexEntryType</jtok>
<jtok eid="6" type="local_variable_name" span="169:11:169:17">backup</jtok>
<jtok eid="6" type="primary_name_ref" span="169:20:169:25">prefs</jtok>
<jtok eid="6" type="method_call" span="169:26:169:36">getBoolean</jtok>
<jtok eid="6" type="string_literal" span="169:37:169:45">"backup"</jtok>
<jtok eid="6" type="primary_name_ref" span="170:13:170:27">suppressBackup</jtok>
<jtok eid="6" type="primary_name_ref" span="171:13:171:19">backup</jtok>
<jtok eid="6" type="class_or_interface_ref" span="173:3:173:14">SaveSession</jtok>
<jtok eid="6" type="local_variable_name" span="173:15:173:22">session</jtok>
<jtok eid="6" type="class_or_interface_ref" span="174:3:174:14">BibtexEntry</jtok>
<jtok eid="6" type="local_variable_name" span="174:15:174:29">exceptionCause</jtok>
<jtok eid="6" type="primary_name_ref" span="176:4:176:11">session</jtok>
<jtok eid="6" type="constructor_call" span="176:18:176:29">SaveSession</jtok>
<jtok eid="6" type="primary_name_ref" span="176:30:176:34">file</jtok>
<jtok eid="6" type="primary_name_ref" span="176:36:176:44">encoding</jtok>
<jtok eid="6" type="primary_name_ref" span="176:46:176:52">backup</jtok>
<jtok eid="6" type="class_or_interface_ref" span="177:12:177:21">Throwable</jtok>
<jtok eid="6" type="local_variable_name" span="177:22:177:23">e</jtok>
<jtok eid="6" type="primary_name_ref" span="178:4:178:10">System</jtok>
<jtok eid="6" type="qualified_name_ref" span="178:11:178:14">err</jtok>
<jtok eid="6" type="method_call" span="178:15:178:22">println</jtok>
<jtok eid="6" type="string_literal" span="178:23:178:47">"Error from encoding: '"</jtok>
<jtok eid="6" type="primary_name_ref" span="178:50:178:58">encoding</jtok>
<jtok eid="6" type="string_literal" span="178:61:178:70">"' Len: "</jtok>
<jtok eid="6" type="primary_name_ref" span="179:7:179:15">encoding</jtok>
<jtok eid="6" type="method_call" span="179:16:179:22">length</jtok>
<jtok eid="6" type="line_comment" span="180:4:180:64">// we must catch all exceptions to be able notify users that</jtok>
<jtok eid="6" type="line_comment" span="181:4:181:51">// saving failed, no matter what the reason was</jtok>
<jtok eid="6" type="line_comment" span="182:4:182:48">// (and they won't just quit JabRef thinking</jtok>
<jtok eid="6" type="line_comment" span="183:4:183:41">// everyting worked and loosing data)</jtok>
<jtok eid="6" type="primary_name_ref" span="184:4:184:5">e</jtok>
<jtok eid="6" type="method_call" span="184:6:184:21">printStackTrace</jtok>
<jtok eid="6" type="constructor_call" span="185:14:185:27">SaveException</jtok>
<jtok eid="6" type="primary_name_ref" span="185:28:185:29">e</jtok>
<jtok eid="6" type="method_call" span="185:30:185:40">getMessage</jtok>
<jtok eid="6" type="line_comment" span="190:4:190:72">// Get our data stream. This stream writes only to a temporary file,</jtok>
<jtok eid="6" type="line_comment" span="191:4:191:23">// until committed.</jtok>
<jtok eid="6" type="class_or_interface_ref" span="192:4:192:19">VerifyingWriter</jtok>
<jtok eid="6" type="local_variable_name" span="192:20:192:22">fw</jtok>
<jtok eid="6" type="primary_name_ref" span="192:25:192:32">session</jtok>
<jtok eid="6" type="method_call" span="192:33:192:42">getWriter</jtok>
<jtok eid="6" type="line_comment" span="194:4:194:23">// Write signature.</jtok>
<jtok eid="6" type="method_call" span="195:4:195:22">writeBibFileHeader</jtok>
<jtok eid="6" type="primary_name_ref" span="195:23:195:25">fw</jtok>
<jtok eid="6" type="primary_name_ref" span="195:27:195:35">encoding</jtok>
<jtok eid="6" type="line_comment" span="197:4:197:38">// Write preamble if there is one.</jtok>
<jtok eid="6" type="method_call" span="198:4:198:17">writePreamble</jtok>
<jtok eid="6" type="primary_name_ref" span="198:18:198:20">fw</jtok>
<jtok eid="6" type="primary_name_ref" span="198:22:198:30">database</jtok>
<jtok eid="6" type="method_call" span="198:31:198:42">getPreamble</jtok>
<jtok eid="6" type="line_comment" span="200:4:200:38">// Write strings if there are any.</jtok>
<jtok eid="6" type="method_call" span="201:4:201:16">writeStrings</jtok>
<jtok eid="6" type="primary_name_ref" span="201:17:201:19">fw</jtok>
<jtok eid="6" type="primary_name_ref" span="201:21:201:29">database</jtok>
<jtok eid="6" type="line_comment" span="203:4:203:62">// Write database entries. Take care, using CrossRefEntry-</jtok>
<jtok eid="6" type="line_comment" span="204:4:204:62">// Comparator, that referred entries occur after referring</jtok>
<jtok eid="6" type="line_comment" span="205:4:205:62">// ones. Apart from crossref requirements, entries will be</jtok>
<jtok eid="6" type="line_comment" span="206:4:206:43">// sorted as they appear on the screen.</jtok>
<jtok eid="6" type="class_or_interface_ref" span="207:4:207:8">List</jtok>
<jtok eid="6" type="class_or_interface_ref" span="207:9:207:20">BibtexEntry</jtok>
<jtok eid="6" type="local_variable_name" span="207:22:207:28">sorter</jtok>
<jtok eid="6" type="method_call" span="207:31:207:47">getSortedEntries</jtok>
<jtok eid="6" type="primary_name_ref" span="207:48:207:56">database</jtok>
<jtok eid="6" type="class_or_interface_ref" span="209:4:209:18">FieldFormatter</jtok>
<jtok eid="6" type="local_variable_name" span="209:19:209:21">ff</jtok>
<jtok eid="6" type="constructor_call" span="209:28:209:47">LatexFieldFormatter</jtok>
<jtok eid="6" type="class_or_interface_ref" span="211:9:211:20">BibtexEntry</jtok>
<jtok eid="6" type="local_variable_name" span="211:21:211:23">be</jtok>
<jtok eid="6" type="primary_name_ref" span="211:26:211:32">sorter</jtok>
<jtok eid="6" type="primary_name_ref" span="212:5:212:19">exceptionCause</jtok>
<jtok eid="6" type="primary_name_ref" span="212:22:212:24">be</jtok>
<jtok eid="6" type="line_comment" span="214:5:214:59">// Check if we must write the type definition for this</jtok>
<jtok eid="6" type="line_comment" span="215:5:215:62">// entry, as well. Our criterion is that all non-standard</jtok>
<jtok eid="6" type="line_comment" span="216:5:216:64">// types (*not* customized standard types) must be written.</jtok>
<jtok eid="6" type="class_or_interface_ref" span="217:5:217:20">BibtexEntryType</jtok>
<jtok eid="6" type="local_variable_name" span="217:21:217:23">tp</jtok>
<jtok eid="6" type="primary_name_ref" span="217:26:217:28">be</jtok>
<jtok eid="6" type="method_call" span="217:29:217:36">getType</jtok>
<jtok eid="6" type="primary_name_ref" span="219:9:219:24">BibtexEntryType</jtok>
<jtok eid="6" type="method_call" span="219:25:219:40">getStandardType</jtok>
<jtok eid="6" type="primary_name_ref" span="219:41:219:43">tp</jtok>
<jtok eid="6" type="method_call" span="219:44:219:51">getName</jtok>
<jtok eid="6" type="primary_name_ref" span="220:6:220:11">types</jtok>
<jtok eid="6" type="method_call" span="220:12:220:15">put</jtok>
<jtok eid="6" type="primary_name_ref" span="220:16:220:18">tp</jtok>
<jtok eid="6" type="method_call" span="220:19:220:26">getName</jtok>
<jtok eid="6" type="primary_name_ref" span="220:30:220:32">tp</jtok>
<jtok eid="6" type="line_comment" span="223:5:223:45">// Check if the entry should be written.</jtok>
<jtok eid="6" type="local_variable_name" span="224:13:224:18">write</jtok>
<jtok eid="6" type="primary_name_ref" span="226:9:226:20">checkSearch</jtok>
<jtok eid="6" type="method_call" span="226:25:226:37">nonZeroField</jtok>
<jtok eid="6" type="primary_name_ref" span="226:38:226:40">be</jtok>
<jtok eid="6" type="primary_name_ref" span="226:42:226:54">BibtexFields</jtok>
<jtok eid="6" type="qualified_name_ref" span="226:55:226:61">SEARCH</jtok>
<jtok eid="6" type="primary_name_ref" span="227:6:227:11">write</jtok>
<jtok eid="6" type="primary_name_ref" span="230:9:230:19">checkGroup</jtok>
<jtok eid="6" type="method_call" span="230:24:230:36">nonZeroField</jtok>
<jtok eid="6" type="primary_name_ref" span="230:37:230:39">be</jtok>
<jtok eid="6" type="primary_name_ref" span="230:41:230:53">BibtexFields</jtok>
<jtok eid="6" type="qualified_name_ref" span="230:54:230:65">GROUPSEARCH</jtok>
<jtok eid="6" type="primary_name_ref" span="231:6:231:11">write</jtok>
<jtok eid="6" type="primary_name_ref" span="234:9:234:14">write</jtok>
<jtok eid="6" type="primary_name_ref" span="235:6:235:8">be</jtok>
<jtok eid="6" type="method_call" span="235:9:235:14">write</jtok>
<jtok eid="6" type="primary_name_ref" span="235:15:235:17">fw</jtok>
<jtok eid="6" type="primary_name_ref" span="235:19:235:21">ff</jtok>
<jtok eid="6" type="primary_name_ref" span="236:6:236:8">fw</jtok>
<jtok eid="6" type="method_call" span="236:9:236:14">write</jtok>
<jtok eid="6" type="primary_name_ref" span="236:15:236:22">Globals</jtok>
<jtok eid="6" type="qualified_name_ref" span="236:23:236:30">NEWLINE</jtok>
<jtok eid="6" type="line_comment" span="240:4:240:23">// Write meta data.</jtok>
<jtok eid="6" type="primary_name_ref" span="241:8:241:16">metaData</jtok>
<jtok eid="6" type="primary_name_ref" span="242:5:242:13">metaData</jtok>
<jtok eid="6" type="method_call" span="242:14:242:27">writeMetaData</jtok>
<jtok eid="6" type="primary_name_ref" span="242:28:242:30">fw</jtok>
<jtok eid="6" type="line_comment" span="245:4:245:38">// Write type definitions, if any:</jtok>
<jtok eid="6" type="primary_name_ref" span="246:8:246:13">types</jtok>
<jtok eid="6" type="method_call" span="246:14:246:18">size</jtok>
<jtok eid="6" type="class_or_interface_ref" span="247:10:247:18">Iterator</jtok>
<jtok eid="6" type="class_or_interface_ref" span="247:19:247:25">String</jtok>
<jtok eid="6" type="local_variable_name" span="247:27:247:28">i</jtok>
<jtok eid="6" type="primary_name_ref" span="247:31:247:36">types</jtok>
<jtok eid="6" type="method_call" span="247:37:247:43">keySet</jtok>
<jtok eid="6" type="method_call" span="247:46:247:54">iterator</jtok>
<jtok eid="6" type="primary_name_ref" span="247:58:247:59">i</jtok>
<jtok eid="6" type="method_call" span="248:7:248:14">hasNext</jtok>
<jtok eid="6" type="class_or_interface_ref" span="249:21:249:36">BibtexEntryType</jtok>
<jtok eid="6" type="local_variable_name" span="249:37:249:41">type</jtok>
<jtok eid="6" type="primary_name_ref" span="249:44:249:49">types</jtok>
<jtok eid="6" type="method_call" span="249:50:249:53">get</jtok>
<jtok eid="6" type="primary_name_ref" span="249:54:249:55">i</jtok>
<jtok eid="6" type="method_call" span="249:56:249:60">next</jtok>
<jtok eid="6" type="primary_name_ref" span="250:25:250:29">type</jtok>
<jtok eid="6" type="class_or_interface_ref" span="250:41:250:56">CustomEntryType</jtok>
<jtok eid="6" type="class_or_interface_ref" span="251:25:251:40">CustomEntryType</jtok>
<jtok eid="6" type="local_variable_name" span="251:41:251:43">tp</jtok>
<jtok eid="6" type="class_or_interface_ref" span="251:47:251:62">CustomEntryType</jtok>
<jtok eid="6" type="primary_name_ref" span="251:63:251:67">type</jtok>
<jtok eid="6" type="primary_name_ref" span="252:25:252:27">tp</jtok>
<jtok eid="6" type="method_call" span="252:28:252:32">save</jtok>
<jtok eid="6" type="primary_name_ref" span="252:33:252:35">fw</jtok>
<jtok eid="6" type="primary_name_ref" span="253:25:253:27">fw</jtok>
<jtok eid="6" type="method_call" span="253:28:253:33">write</jtok>
<jtok eid="6" type="primary_name_ref" span="253:34:253:41">Globals</jtok>
<jtok eid="6" type="qualified_name_ref" span="253:42:253:49">NEWLINE</jtok>
<jtok eid="6" type="primary_name_ref" span="259:4:259:6">fw</jtok>
<jtok eid="6" type="method_call" span="259:7:259:12">close</jtok>
<jtok eid="6" type="class_or_interface_ref" span="260:12:260:21">Throwable</jtok>
<jtok eid="6" type="local_variable_name" span="260:22:260:24">ex</jtok>
<jtok eid="6" type="primary_name_ref" span="261:4:261:6">ex</jtok>
<jtok eid="6" type="method_call" span="261:7:261:22">printStackTrace</jtok>
<jtok eid="6" type="primary_name_ref" span="263:5:263:12">session</jtok>
<jtok eid="6" type="method_call" span="263:13:263:19">cancel</jtok>
<jtok eid="6" type="line_comment" span="264:5:264:48">// repairAfterError(file, backup, INIT_OK);</jtok>
<jtok eid="6" type="class_or_interface_ref" span="265:13:265:24">IOException</jtok>
<jtok eid="6" type="local_variable_name" span="265:25:265:26">e</jtok>
<jtok eid="6" type="line_comment" span="266:5:266:48">// Argh, another error? Can we do anything?</jtok>
<jtok eid="6" type="primary_name_ref" span="267:5:267:6">e</jtok>
<jtok eid="6" type="method_call" span="267:7:267:22">printStackTrace</jtok>
<jtok eid="6" type="constructor_call" span="268:27:268:40">SaveException</jtok>
<jtok eid="6" type="primary_name_ref" span="268:41:268:43">ex</jtok>
<jtok eid="6" type="method_call" span="268:44:268:54">getMessage</jtok>
<jtok eid="6" type="string_literal" span="268:57:268:61">"\n"</jtok>
<jtok eid="6" type="primary_name_ref" span="269:25:269:32">Globals</jtok>
<jtok eid="6" type="method_call" span="269:33:269:37">lang</jtok>
<jtok eid="6" type="string_literal" span="269:38:269:95">"Warning: could not complete file repair; your file may "</jtok>
<jtok eid="6" type="string_literal" span="270:26:270:62">"have been corrupted. Error message"</jtok>
<jtok eid="6" type="string_literal" span="270:64:270:68">": "</jtok>
<jtok eid="6" type="primary_name_ref" span="270:69:270:70">e</jtok>
<jtok eid="6" type="method_call" span="270:71:270:81">getMessage</jtok>
<jtok eid="6" type="constructor_call" span="273:14:273:27">SaveException</jtok>
<jtok eid="6" type="primary_name_ref" span="273:28:273:30">ex</jtok>
<jtok eid="6" type="method_call" span="273:31:273:41">getMessage</jtok>
<jtok eid="6" type="primary_name_ref" span="273:45:273:59">exceptionCause</jtok>
<jtok eid="6" type="primary_name_ref" span="276:10:276:17">session</jtok>
<jtok eid="1" type="block_comment" span="281:5:286:5">/**
	 * Saves the database to file, including only the entries included in the
	 * supplied input array bes.
	 * 
	 * @return A List containing warnings, if any.
	 */</jtok>
<jtok eid="1" type="annotation_ref" span="287:6:287:22">SuppressWarnings</jtok>
<jtok eid="1" type="string_literal" span="287:23:287:34">"unchecked"</jtok>
<jtok eid="7" type="class_or_interface_ref" span="288:16:288:27">SaveSession</jtok>
<jtok eid="7" type="method_name" span="288:28:288:46">savePartOfDatabase</jtok>
<jtok eid="7" type="parameter_type" span="288:47:288:61">BibtexDatabase</jtok>
<jtok eid="7" type="parameter_name" span="288:62:288:70">database</jtok>
<jtok eid="7" type="parameter_type" span="288:72:288:80">MetaData</jtok>
<jtok eid="7" type="parameter_name" span="288:81:288:89">metaData</jtok>
<jtok eid="7" type="parameter_type" span="289:50:289:54">File</jtok>
<jtok eid="7" type="parameter_name" span="289:55:289:59">file</jtok>
<jtok eid="7" type="parameter_type" span="289:61:289:78">JabRefPreferences</jtok>
<jtok eid="7" type="parameter_name" span="289:79:289:84">prefs</jtok>
<jtok eid="7" type="parameter_type" span="289:86:289:97">BibtexEntry</jtok>
<jtok eid="7" type="parameter_name" span="289:100:289:103">bes</jtok>
<jtok eid="7" type="parameter_type" span="289:105:289:111">String</jtok>
<jtok eid="7" type="parameter_name" span="289:112:289:120">encoding</jtok>
<jtok eid="7" type="throws" span="289:129:289:142">SaveException</jtok>
<jtok eid="7" type="class_or_interface_ref" span="292:5:292:12">TreeMap</jtok>
<jtok eid="7" type="class_or_interface_ref" span="292:13:292:19">String</jtok>
<jtok eid="7" type="class_or_interface_ref" span="292:21:292:36">BibtexEntryType</jtok>
<jtok eid="7" type="local_variable_name" span="292:38:292:43">types</jtok>
<jtok eid="7" type="constructor_call" span="292:50:292:57">TreeMap</jtok>
<jtok eid="7" type="constructor_call" span="292:58:292:64">String</jtok>
<jtok eid="7" type="constructor_call" span="292:66:292:81">BibtexEntryType</jtok>
<jtok eid="7" type="line_comment" span="292:86:292:92">// Map</jtok>
<jtok eid="7" type="line_comment" span="293:23:293:28">// to</jtok>
<jtok eid="7" type="line_comment" span="294:23:294:33">// collect</jtok>
<jtok eid="7" type="line_comment" span="295:23:295:31">// entry</jtok>
<jtok eid="7" type="line_comment" span="296:23:296:30">// type</jtok>
<jtok eid="7" type="line_comment" span="297:23:297:37">// definitions</jtok>
<jtok eid="7" type="line_comment" span="298:5:298:56">// that we must save along with entries using them.</jtok>
<jtok eid="7" type="class_or_interface_ref" span="300:9:300:20">BibtexEntry</jtok>
<jtok eid="7" type="local_variable_name" span="300:21:300:23">be</jtok>
<jtok eid="7" type="local_variable_name" span="301:17:301:23">backup</jtok>
<jtok eid="7" type="primary_name_ref" span="301:26:301:31">prefs</jtok>
<jtok eid="7" type="method_call" span="301:32:301:42">getBoolean</jtok>
<jtok eid="7" type="string_literal" span="301:43:301:51">"backup"</jtok>
<jtok eid="7" type="class_or_interface_ref" span="303:9:303:20">SaveSession</jtok>
<jtok eid="7" type="local_variable_name" span="303:21:303:28">session</jtok>
<jtok eid="7" type="primary_name_ref" span="305:13:305:20">session</jtok>
<jtok eid="7" type="constructor_call" span="305:27:305:38">SaveSession</jtok>
<jtok eid="7" type="primary_name_ref" span="305:39:305:43">file</jtok>
<jtok eid="7" type="primary_name_ref" span="305:45:305:53">encoding</jtok>
<jtok eid="7" type="primary_name_ref" span="305:55:305:61">backup</jtok>
<jtok eid="7" type="class_or_interface_ref" span="306:18:306:29">IOException</jtok>
<jtok eid="7" type="local_variable_name" span="306:30:306:31">e</jtok>
<jtok eid="7" type="constructor_call" span="307:23:307:36">SaveException</jtok>
<jtok eid="7" type="primary_name_ref" span="307:37:307:38">e</jtok>
<jtok eid="7" type="method_call" span="307:39:307:49">getMessage</jtok>
<jtok eid="7" type="line_comment" span="313:13:313:39">// Define our data stream.</jtok>
<jtok eid="7" type="class_or_interface_ref" span="314:13:314:28">VerifyingWriter</jtok>
<jtok eid="7" type="local_variable_name" span="314:29:314:31">fw</jtok>
<jtok eid="7" type="primary_name_ref" span="314:34:314:41">session</jtok>
<jtok eid="7" type="method_call" span="314:42:314:51">getWriter</jtok>
<jtok eid="7" type="line_comment" span="316:13:316:32">// Write signature.</jtok>
<jtok eid="7" type="method_call" span="317:13:317:31">writeBibFileHeader</jtok>
<jtok eid="7" type="primary_name_ref" span="317:32:317:34">fw</jtok>
<jtok eid="7" type="primary_name_ref" span="317:36:317:44">encoding</jtok>
<jtok eid="7" type="line_comment" span="319:13:319:47">// Write preamble if there is one.</jtok>
<jtok eid="7" type="method_call" span="320:13:320:26">writePreamble</jtok>
<jtok eid="7" type="primary_name_ref" span="320:27:320:29">fw</jtok>
<jtok eid="7" type="primary_name_ref" span="320:31:320:39">database</jtok>
<jtok eid="7" type="method_call" span="320:40:320:51">getPreamble</jtok>
<jtok eid="7" type="line_comment" span="322:13:322:47">// Write strings if there are any.</jtok>
<jtok eid="7" type="method_call" span="323:9:323:21">writeStrings</jtok>
<jtok eid="7" type="primary_name_ref" span="323:22:323:24">fw</jtok>
<jtok eid="7" type="primary_name_ref" span="323:26:323:34">database</jtok>
<jtok eid="7" type="line_comment" span="325:13:325:71">// Write database entries. Take care, using CrossRefEntry-</jtok>
<jtok eid="7" type="line_comment" span="326:13:326:71">// Comparator, that referred entries occur after referring</jtok>
<jtok eid="7" type="line_comment" span="327:13:327:71">// ones. Apart from crossref requirements, entries will be</jtok>
<jtok eid="7" type="line_comment" span="328:13:328:52">// sorted as they appear on the screen.</jtok>
<jtok eid="7" type="class_or_interface_ref" span="329:9:329:15">String</jtok>
<jtok eid="7" type="local_variable_name" span="329:16:329:19">pri</jtok>
<jtok eid="7" type="local_variable_name" span="329:21:329:24">sec</jtok>
<jtok eid="7" type="local_variable_name" span="329:26:329:29">ter</jtok>
<jtok eid="7" type="local_variable_name" span="331:17:331:21">priD</jtok>
<jtok eid="7" type="local_variable_name" span="331:23:331:27">secD</jtok>
<jtok eid="7" type="local_variable_name" span="331:29:331:33">terD</jtok>
<jtok eid="7" type="primary_name_ref" span="332:14:332:19">prefs</jtok>
<jtok eid="7" type="method_call" span="332:20:332:30">getBoolean</jtok>
<jtok eid="7" type="string_literal" span="332:31:332:52">"saveInStandardOrder"</jtok>
<jtok eid="7" type="line_comment" span="333:9:333:72">// The setting is to save according to the current table order.</jtok>
<jtok eid="7" type="primary_name_ref" span="334:9:334:12">pri</jtok>
<jtok eid="7" type="primary_name_ref" span="334:15:334:20">prefs</jtok>
<jtok eid="7" type="method_call" span="334:21:334:24">get</jtok>
<jtok eid="7" type="string_literal" span="334:25:334:34">"priSort"</jtok>
<jtok eid="7" type="primary_name_ref" span="335:9:335:12">sec</jtok>
<jtok eid="7" type="primary_name_ref" span="335:15:335:20">prefs</jtok>
<jtok eid="7" type="method_call" span="335:21:335:24">get</jtok>
<jtok eid="7" type="string_literal" span="335:25:335:34">"secSort"</jtok>
<jtok eid="7" type="line_comment" span="336:9:336:48">// sorted as they appear on the screen.</jtok>
<jtok eid="7" type="primary_name_ref" span="337:9:337:12">ter</jtok>
<jtok eid="7" type="primary_name_ref" span="337:15:337:20">prefs</jtok>
<jtok eid="7" type="method_call" span="337:21:337:24">get</jtok>
<jtok eid="7" type="string_literal" span="337:25:337:34">"terSort"</jtok>
<jtok eid="7" type="primary_name_ref" span="338:9:338:13">priD</jtok>
<jtok eid="7" type="primary_name_ref" span="338:16:338:21">prefs</jtok>
<jtok eid="7" type="method_call" span="338:22:338:32">getBoolean</jtok>
<jtok eid="7" type="string_literal" span="338:33:338:48">"priDescending"</jtok>
<jtok eid="7" type="primary_name_ref" span="339:9:339:13">secD</jtok>
<jtok eid="7" type="primary_name_ref" span="339:16:339:21">prefs</jtok>
<jtok eid="7" type="method_call" span="339:22:339:32">getBoolean</jtok>
<jtok eid="7" type="string_literal" span="339:33:339:48">"secDescending"</jtok>
<jtok eid="7" type="primary_name_ref" span="340:9:340:13">terD</jtok>
<jtok eid="7" type="primary_name_ref" span="340:16:340:21">prefs</jtok>
<jtok eid="7" type="method_call" span="340:22:340:32">getBoolean</jtok>
<jtok eid="7" type="string_literal" span="340:33:340:48">"terDescending"</jtok>
<jtok eid="7" type="line_comment" span="342:9:342:74">// The setting is to save in standard order: author, editor, year</jtok>
<jtok eid="7" type="primary_name_ref" span="343:9:343:12">pri</jtok>
<jtok eid="7" type="string_literal" span="343:15:343:23">"author"</jtok>
<jtok eid="7" type="primary_name_ref" span="344:9:344:12">sec</jtok>
<jtok eid="7" type="string_literal" span="344:15:344:23">"editor"</jtok>
<jtok eid="7" type="primary_name_ref" span="345:9:345:12">ter</jtok>
<jtok eid="7" type="string_literal" span="345:15:345:21">"year"</jtok>
<jtok eid="7" type="primary_name_ref" span="346:9:346:13">priD</jtok>
<jtok eid="7" type="primary_name_ref" span="347:9:347:13">secD</jtok>
<jtok eid="7" type="primary_name_ref" span="348:9:348:13">terD</jtok>
<jtok eid="7" type="class_or_interface_ref" span="351:9:351:13">List</jtok>
<jtok eid="7" type="class_or_interface_ref" span="351:14:351:24">Comparator</jtok>
<jtok eid="7" type="class_or_interface_ref" span="351:25:351:36">BibtexEntry</jtok>
<jtok eid="7" type="local_variable_name" span="351:39:351:50">comparators</jtok>
<jtok eid="7" type="constructor_call" span="351:57:351:66">ArrayList</jtok>
<jtok eid="7" type="constructor_call" span="351:67:351:77">Comparator</jtok>
<jtok eid="7" type="constructor_call" span="351:78:351:89">BibtexEntry</jtok>
<jtok eid="7" type="primary_name_ref" span="352:9:352:20">comparators</jtok>
<jtok eid="7" type="method_call" span="352:21:352:24">add</jtok>
<jtok eid="7" type="constructor_call" span="352:29:352:52">CrossRefEntryComparator</jtok>
<jtok eid="7" type="primary_name_ref" span="353:9:353:20">comparators</jtok>
<jtok eid="7" type="method_call" span="353:21:353:24">add</jtok>
<jtok eid="7" type="constructor_call" span="353:29:353:44">FieldComparator</jtok>
<jtok eid="7" type="primary_name_ref" span="353:45:353:48">pri</jtok>
<jtok eid="7" type="primary_name_ref" span="353:50:353:54">priD</jtok>
<jtok eid="7" type="primary_name_ref" span="354:9:354:20">comparators</jtok>
<jtok eid="7" type="method_call" span="354:21:354:24">add</jtok>
<jtok eid="7" type="constructor_call" span="354:29:354:44">FieldComparator</jtok>
<jtok eid="7" type="primary_name_ref" span="354:45:354:48">sec</jtok>
<jtok eid="7" type="primary_name_ref" span="354:50:354:54">secD</jtok>
<jtok eid="7" type="primary_name_ref" span="355:9:355:20">comparators</jtok>
<jtok eid="7" type="method_call" span="355:21:355:24">add</jtok>
<jtok eid="7" type="constructor_call" span="355:29:355:44">FieldComparator</jtok>
<jtok eid="7" type="primary_name_ref" span="355:45:355:48">ter</jtok>
<jtok eid="7" type="primary_name_ref" span="355:50:355:54">terD</jtok>
<jtok eid="7" type="primary_name_ref" span="356:9:356:20">comparators</jtok>
<jtok eid="7" type="method_call" span="356:21:356:24">add</jtok>
<jtok eid="7" type="constructor_call" span="356:29:356:44">FieldComparator</jtok>
<jtok eid="7" type="primary_name_ref" span="356:45:356:57">BibtexFields</jtok>
<jtok eid="7" type="qualified_name_ref" span="356:58:356:67">KEY_FIELD</jtok>
<jtok eid="7" type="line_comment" span="357:9:357:65">// Use glazed lists to get a sorted view of the entries:</jtok>
<jtok eid="7" type="class_or_interface_ref" span="358:9:358:23">BasicEventList</jtok>
<jtok eid="7" type="local_variable_name" span="358:24:358:33">entryList</jtok>
<jtok eid="7" type="constructor_call" span="358:40:358:54">BasicEventList</jtok>
<jtok eid="7" type="class_or_interface_ref" span="359:9:359:19">SortedList</jtok>
<jtok eid="7" type="local_variable_name" span="359:20:359:26">sorter</jtok>
<jtok eid="7" type="constructor_call" span="359:33:359:43">SortedList</jtok>
<jtok eid="7" type="primary_name_ref" span="359:44:359:53">entryList</jtok>
<jtok eid="7" type="constructor_call" span="359:59:359:79">FieldComparatorStack</jtok>
<jtok eid="7" type="constructor_call" span="359:80:359:91">BibtexEntry</jtok>
<jtok eid="7" type="primary_name_ref" span="359:93:359:104">comparators</jtok>
<jtok eid="7" type="primary_name_ref" span="361:14:361:17">bes</jtok>
<jtok eid="7" type="primary_name_ref" span="361:31:361:34">bes</jtok>
<jtok eid="7" type="qualified_name_ref" span="361:35:361:41">length</jtok>
<jtok eid="7" type="local_variable_name" span="362:18:362:19">i</jtok>
<jtok eid="7" type="primary_name_ref" span="362:23:362:24">i</jtok>
<jtok eid="7" type="primary_name_ref" span="362:25:362:28">bes</jtok>
<jtok eid="7" type="qualified_name_ref" span="362:29:362:35">length</jtok>
<jtok eid="7" type="primary_name_ref" span="362:37:362:38">i</jtok>
<jtok eid="7" type="primary_name_ref" span="363:13:363:19">sorter</jtok>
<jtok eid="7" type="method_call" span="363:20:363:23">add</jtok>
<jtok eid="7" type="primary_name_ref" span="363:24:363:27">bes</jtok>
<jtok eid="7" type="primary_name_ref" span="363:28:363:29">i</jtok>
<jtok eid="7" type="class_or_interface_ref" span="366:13:366:27">FieldFormatter</jtok>
<jtok eid="7" type="local_variable_name" span="366:28:366:30">ff</jtok>
<jtok eid="7" type="constructor_call" span="366:37:366:56">LatexFieldFormatter</jtok>
<jtok eid="7" type="class_or_interface_ref" span="368:18:368:26">Iterator</jtok>
<jtok eid="7" type="class_or_interface_ref" span="368:27:368:38">BibtexEntry</jtok>
<jtok eid="7" type="local_variable_name" span="368:40:368:41">i</jtok>
<jtok eid="7" type="primary_name_ref" span="368:44:368:50">sorter</jtok>
<jtok eid="7" type="method_call" span="368:51:368:59">iterator</jtok>
<jtok eid="7" type="primary_name_ref" span="368:63:368:64">i</jtok>
<jtok eid="7" type="method_call" span="368:65:368:72">hasNext</jtok>
<jtok eid="7" type="primary_name_ref" span="370:17:370:19">be</jtok>
<jtok eid="7" type="primary_name_ref" span="370:23:370:24">i</jtok>
<jtok eid="7" type="method_call" span="370:25:370:29">next</jtok>
<jtok eid="7" type="line_comment" span="372:9:372:63">// Check if we must write the type definition for this</jtok>
<jtok eid="7" type="line_comment" span="373:9:373:66">// entry, as well. Our criterion is that all non-standard</jtok>
<jtok eid="7" type="line_comment" span="374:9:374:68">// types (*not* customized standard types) must be written.</jtok>
<jtok eid="7" type="class_or_interface_ref" span="375:9:375:24">BibtexEntryType</jtok>
<jtok eid="7" type="local_variable_name" span="375:25:375:27">tp</jtok>
<jtok eid="7" type="primary_name_ref" span="375:30:375:32">be</jtok>
<jtok eid="7" type="method_call" span="375:33:375:40">getType</jtok>
<jtok eid="7" type="primary_name_ref" span="376:13:376:28">BibtexEntryType</jtok>
<jtok eid="7" type="method_call" span="376:29:376:44">getStandardType</jtok>
<jtok eid="7" type="primary_name_ref" span="376:45:376:47">tp</jtok>
<jtok eid="7" type="method_call" span="376:48:376:55">getName</jtok>
<jtok eid="7" type="primary_name_ref" span="377:13:377:18">types</jtok>
<jtok eid="7" type="method_call" span="377:19:377:22">put</jtok>
<jtok eid="7" type="primary_name_ref" span="377:23:377:25">tp</jtok>
<jtok eid="7" type="method_call" span="377:26:377:33">getName</jtok>
<jtok eid="7" type="primary_name_ref" span="377:37:377:39">tp</jtok>
<jtok eid="7" type="primary_name_ref" span="380:9:380:11">be</jtok>
<jtok eid="7" type="method_call" span="380:12:380:17">write</jtok>
<jtok eid="7" type="primary_name_ref" span="380:18:380:20">fw</jtok>
<jtok eid="7" type="primary_name_ref" span="380:22:380:24">ff</jtok>
<jtok eid="7" type="primary_name_ref" span="381:9:381:11">fw</jtok>
<jtok eid="7" type="method_call" span="381:12:381:17">write</jtok>
<jtok eid="7" type="primary_name_ref" span="381:18:381:25">Globals</jtok>
<jtok eid="7" type="qualified_name_ref" span="381:26:381:33">NEWLINE</jtok>
<jtok eid="7" type="line_comment" span="384:13:384:32">// Write meta data.</jtok>
<jtok eid="7" type="primary_name_ref" span="385:17:385:25">metaData</jtok>
<jtok eid="7" type="primary_name_ref" span="387:17:387:25">metaData</jtok>
<jtok eid="7" type="method_call" span="387:26:387:39">writeMetaData</jtok>
<jtok eid="7" type="primary_name_ref" span="387:40:387:42">fw</jtok>
<jtok eid="7" type="line_comment" span="390:9:390:43">// Write type definitions, if any:</jtok>
<jtok eid="7" type="primary_name_ref" span="391:13:391:18">types</jtok>
<jtok eid="7" type="method_call" span="391:19:391:23">size</jtok>
<jtok eid="7" type="class_or_interface_ref" span="392:14:392:22">Iterator</jtok>
<jtok eid="7" type="class_or_interface_ref" span="392:23:392:29">String</jtok>
<jtok eid="7" type="local_variable_name" span="392:31:392:32">i</jtok>
<jtok eid="7" type="primary_name_ref" span="392:33:392:38">types</jtok>
<jtok eid="7" type="method_call" span="392:39:392:45">keySet</jtok>
<jtok eid="7" type="method_call" span="392:48:392:56">iterator</jtok>
<jtok eid="7" type="primary_name_ref" span="392:60:392:61">i</jtok>
<jtok eid="7" type="method_call" span="392:62:392:69">hasNext</jtok>
<jtok eid="7" type="class_or_interface_ref" span="393:13:393:28">CustomEntryType</jtok>
<jtok eid="7" type="local_variable_name" span="393:29:393:31">tp</jtok>
<jtok eid="7" type="class_or_interface_ref" span="393:35:393:50">CustomEntryType</jtok>
<jtok eid="7" type="primary_name_ref" span="393:51:393:56">types</jtok>
<jtok eid="7" type="method_call" span="393:57:393:60">get</jtok>
<jtok eid="7" type="primary_name_ref" span="393:61:393:62">i</jtok>
<jtok eid="7" type="method_call" span="393:63:393:67">next</jtok>
<jtok eid="7" type="primary_name_ref" span="394:13:394:15">tp</jtok>
<jtok eid="7" type="method_call" span="394:16:394:20">save</jtok>
<jtok eid="7" type="primary_name_ref" span="394:21:394:23">fw</jtok>
<jtok eid="7" type="primary_name_ref" span="395:13:395:15">fw</jtok>
<jtok eid="7" type="method_call" span="395:16:395:21">write</jtok>
<jtok eid="7" type="primary_name_ref" span="395:22:395:29">Globals</jtok>
<jtok eid="7" type="qualified_name_ref" span="395:30:395:37">NEWLINE</jtok>
<jtok eid="7" type="primary_name_ref" span="400:13:400:15">fw</jtok>
<jtok eid="7" type="method_call" span="400:16:400:21">close</jtok>
<jtok eid="7" type="class_or_interface_ref" span="402:17:402:26">Throwable</jtok>
<jtok eid="7" type="local_variable_name" span="402:27:402:29">ex</jtok>
<jtok eid="7" type="primary_name_ref" span="405:17:405:24">session</jtok>
<jtok eid="7" type="method_call" span="405:25:405:31">cancel</jtok>
<jtok eid="7" type="line_comment" span="406:17:406:58">//repairAfterError(file, backup, status);</jtok>
<jtok eid="7" type="class_or_interface_ref" span="407:22:407:33">IOException</jtok>
<jtok eid="7" type="local_variable_name" span="407:34:407:35">e</jtok>
<jtok eid="7" type="line_comment" span="408:17:408:60">// Argh, another error? Can we do anything?</jtok>
<jtok eid="7" type="primary_name_ref" span="409:17:409:18">e</jtok>
<jtok eid="7" type="method_call" span="409:19:409:34">printStackTrace</jtok>
<jtok eid="7" type="constructor_call" span="410:27:410:40">SaveException</jtok>
<jtok eid="7" type="primary_name_ref" span="410:41:410:43">ex</jtok>
<jtok eid="7" type="method_call" span="410:44:410:54">getMessage</jtok>
<jtok eid="7" type="string_literal" span="410:57:410:61">"\n"</jtok>
<jtok eid="7" type="primary_name_ref" span="411:25:411:32">Globals</jtok>
<jtok eid="7" type="method_call" span="411:33:411:37">lang</jtok>
<jtok eid="7" type="string_literal" span="411:38:411:95">"Warning: could not complete file repair; your file may "</jtok>
<jtok eid="7" type="string_literal" span="412:26:412:64">"have been corrupted. Error message: "</jtok>
<jtok eid="7" type="primary_name_ref" span="412:66:412:67">e</jtok>
<jtok eid="7" type="method_call" span="412:68:412:78">getMessage</jtok>
<jtok eid="7" type="constructor_call" span="414:23:414:36">SaveException</jtok>
<jtok eid="7" type="primary_name_ref" span="414:37:414:39">ex</jtok>
<jtok eid="7" type="method_call" span="414:40:414:50">getMessage</jtok>
<jtok eid="7" type="primary_name_ref" span="414:54:414:56">be</jtok>
<jtok eid="7" type="primary_name_ref" span="417:16:417:23">session</jtok>
<jtok eid="1" type="block_comment" span="422:5:426:8">/**
     * This method attempts to get a Reader for the file path given, either by
     * loading it as a resource (from within jar), or as a normal file.
     * If unsuccessful (e.g. file not found), an IOException is thrown.
     */</jtok>
<jtok eid="8" type="class_or_interface_ref" span="427:19:427:25">Reader</jtok>
<jtok eid="8" type="method_name" span="427:26:427:35">getReader</jtok>
<jtok eid="8" type="parameter_type" span="427:36:427:42">String</jtok>
<jtok eid="8" type="parameter_name" span="427:43:427:47">name</jtok>
<jtok eid="8" type="throws" span="427:56:427:67">IOException</jtok>
<jtok eid="8" type="class_or_interface_ref" span="428:7:428:13">Reader</jtok>
<jtok eid="8" type="local_variable_name" span="428:14:428:20">reader</jtok>
<jtok eid="8" type="line_comment" span="429:7:429:79">// Try loading as a resource first. This works for files inside the jar:</jtok>
<jtok eid="8" type="class_or_interface_ref" span="430:7:430:10">URL</jtok>
<jtok eid="8" type="local_variable_name" span="430:11:430:15">reso</jtok>
<jtok eid="8" type="primary_name_ref" span="430:18:430:25">Globals</jtok>
<jtok eid="8" type="method_call" span="430:32:430:43">getResource</jtok>
<jtok eid="8" type="primary_name_ref" span="430:44:430:48">name</jtok>
<jtok eid="8" type="line_comment" span="432:7:432:64">// If that didn't work, try loading as a normal file URL:</jtok>
<jtok eid="8" type="primary_name_ref" span="433:11:433:15">reso</jtok>
<jtok eid="8" type="primary_name_ref" span="435:11:435:17">reader</jtok>
<jtok eid="8" type="constructor_call" span="435:24:435:41">InputStreamReader</jtok>
<jtok eid="8" type="primary_name_ref" span="435:42:435:46">reso</jtok>
<jtok eid="8" type="method_call" span="435:47:435:57">openStream</jtok>
<jtok eid="8" type="class_or_interface_ref" span="436:18:436:39">FileNotFoundException</jtok>
<jtok eid="8" type="local_variable_name" span="436:40:436:42">ex</jtok>
<jtok eid="8" type="constructor_call" span="437:21:437:32">IOException</jtok>
<jtok eid="8" type="primary_name_ref" span="437:33:437:40">Globals</jtok>
<jtok eid="8" type="method_call" span="437:41:437:45">lang</jtok>
<jtok eid="8" type="string_literal" span="437:46:437:74">"Could not find layout file"</jtok>
<jtok eid="8" type="string_literal" span="437:76:437:81">": '"</jtok>
<jtok eid="8" type="primary_name_ref" span="437:82:437:86">name</jtok>
<jtok eid="8" type="string_literal" span="437:87:437:91">"'."</jtok>
<jtok eid="8" type="class_or_interface_ref" span="440:9:440:13">File</jtok>
<jtok eid="8" type="local_variable_name" span="440:14:440:15">f</jtok>
<jtok eid="8" type="constructor_call" span="440:22:440:26">File</jtok>
<jtok eid="8" type="primary_name_ref" span="440:27:440:31">name</jtok>
<jtok eid="8" type="primary_name_ref" span="442:11:442:17">reader</jtok>
<jtok eid="8" type="constructor_call" span="442:24:442:34">FileReader</jtok>
<jtok eid="8" type="primary_name_ref" span="442:35:442:36">f</jtok>
<jtok eid="8" type="class_or_interface_ref" span="443:18:443:39">FileNotFoundException</jtok>
<jtok eid="8" type="local_variable_name" span="443:40:443:42">ex</jtok>
<jtok eid="8" type="constructor_call" span="444:21:444:32">IOException</jtok>
<jtok eid="8" type="primary_name_ref" span="444:33:444:40">Globals</jtok>
<jtok eid="8" type="method_call" span="444:41:444:45">lang</jtok>
<jtok eid="8" type="string_literal" span="444:46:444:74">"Could not find layout file"</jtok>
<jtok eid="8" type="string_literal" span="444:76:444:81">": '"</jtok>
<jtok eid="8" type="primary_name_ref" span="444:82:444:86">name</jtok>
<jtok eid="8" type="string_literal" span="444:87:444:91">"'."</jtok>
<jtok eid="8" type="primary_name_ref" span="448:14:448:20">reader</jtok>
<jtok eid="1" type="block_comment" span="451:5:456:7">/*
    * We have begun to use getSortedEntries() for both database save operations
    * and non-database save operations.  In a non-database save operation
    * (such as the exportDatabase call), we do not wish to use the
    * global preference of saving in standard order.
    */</jtok>
<jtok eid="1" type="annotation_ref" span="457:6:457:22">SuppressWarnings</jtok>
<jtok eid="1" type="string_literal" span="457:23:457:34">"unchecked"</jtok>
<jtok eid="9" type="class_or_interface_ref" span="458:16:458:20">List</jtok>
<jtok eid="9" type="class_or_interface_ref" span="458:21:458:32">BibtexEntry</jtok>
<jtok eid="9" type="method_name" span="458:34:458:50">getSortedEntries</jtok>
<jtok eid="9" type="parameter_type" span="458:51:458:65">BibtexDatabase</jtok>
<jtok eid="9" type="parameter_name" span="458:66:458:74">database</jtok>
<jtok eid="9" type="parameter_type" span="458:76:458:79">Set</jtok>
<jtok eid="9" type="parameter_type" span="458:80:458:86">String</jtok>
<jtok eid="9" type="parameter_name" span="458:88:458:94">keySet</jtok>
<jtok eid="9" type="parameter_name" span="458:104:458:119">isSaveOperation</jtok>
<jtok eid="9" type="class_or_interface_ref" span="459:9:459:29">FieldComparatorStack</jtok>
<jtok eid="9" type="class_or_interface_ref" span="459:30:459:41">BibtexEntry</jtok>
<jtok eid="9" type="local_variable_name" span="459:43:459:58">comparatorStack</jtok>
<jtok eid="9" type="local_variable_name" span="461:17:461:32">inOriginalOrder</jtok>
<jtok eid="9" type="primary_name_ref" span="461:35:461:50">isSaveOperation</jtok>
<jtok eid="9" type="primary_name_ref" span="461:53:461:60">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="461:61:461:66">prefs</jtok>
<jtok eid="9" type="method_call" span="461:67:461:77">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="461:78:461:99">"saveInOriginalOrder"</jtok>
<jtok eid="9" type="primary_name_ref" span="462:13:462:20">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="462:21:462:26">prefs</jtok>
<jtok eid="9" type="method_call" span="462:27:462:37">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="462:38:462:61">"exportInOriginalOrder"</jtok>
<jtok eid="9" type="primary_name_ref" span="463:13:463:28">inOriginalOrder</jtok>
<jtok eid="9" type="line_comment" span="464:13:464:78">// Sort entries based on their creation order, utilizing the fact</jtok>
<jtok eid="9" type="line_comment" span="465:13:465:75">// that IDs used for entries are increasing, sortable numbers.</jtok>
<jtok eid="9" type="class_or_interface_ref" span="466:13:466:17">List</jtok>
<jtok eid="9" type="class_or_interface_ref" span="466:18:466:28">Comparator</jtok>
<jtok eid="9" type="class_or_interface_ref" span="466:29:466:40">BibtexEntry</jtok>
<jtok eid="9" type="local_variable_name" span="466:43:466:54">comparators</jtok>
<jtok eid="9" type="constructor_call" span="466:61:466:70">ArrayList</jtok>
<jtok eid="9" type="constructor_call" span="466:71:466:81">Comparator</jtok>
<jtok eid="9" type="constructor_call" span="466:82:466:93">BibtexEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="467:13:467:24">comparators</jtok>
<jtok eid="9" type="method_call" span="467:25:467:28">add</jtok>
<jtok eid="9" type="constructor_call" span="467:33:467:56">CrossRefEntryComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="468:13:468:24">comparators</jtok>
<jtok eid="9" type="method_call" span="468:25:468:28">add</jtok>
<jtok eid="9" type="constructor_call" span="468:33:468:45">IdComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="469:13:469:28">comparatorStack</jtok>
<jtok eid="9" type="constructor_call" span="469:35:469:55">FieldComparatorStack</jtok>
<jtok eid="9" type="constructor_call" span="469:56:469:67">BibtexEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="469:69:469:80">comparators</jtok>
<jtok eid="9" type="class_or_interface_ref" span="472:13:472:19">String</jtok>
<jtok eid="9" type="local_variable_name" span="472:20:472:23">pri</jtok>
<jtok eid="9" type="local_variable_name" span="472:25:472:28">sec</jtok>
<jtok eid="9" type="local_variable_name" span="472:30:472:33">ter</jtok>
<jtok eid="9" type="local_variable_name" span="473:21:473:25">priD</jtok>
<jtok eid="9" type="local_variable_name" span="473:27:473:31">secD</jtok>
<jtok eid="9" type="local_variable_name" span="473:33:473:37">terD</jtok>
<jtok eid="9" type="local_variable_name" span="475:21:475:36">inStandardOrder</jtok>
<jtok eid="9" type="primary_name_ref" span="475:39:475:54">isSaveOperation</jtok>
<jtok eid="9" type="primary_name_ref" span="475:57:475:64">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="475:65:475:70">prefs</jtok>
<jtok eid="9" type="method_call" span="475:71:475:81">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="475:82:475:103">"saveInStandardOrder"</jtok>
<jtok eid="9" type="primary_name_ref" span="476:17:476:24">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="476:25:476:30">prefs</jtok>
<jtok eid="9" type="method_call" span="476:31:476:41">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="476:42:476:65">"exportInStandardOrder"</jtok>
<jtok eid="9" type="primary_name_ref" span="477:18:477:33">inStandardOrder</jtok>
<jtok eid="9" type="line_comment" span="478:17:478:80">// The setting is to save according to the current table order.</jtok>
<jtok eid="9" type="primary_name_ref" span="479:17:479:20">pri</jtok>
<jtok eid="9" type="primary_name_ref" span="479:23:479:30">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="479:31:479:36">prefs</jtok>
<jtok eid="9" type="method_call" span="479:37:479:40">get</jtok>
<jtok eid="9" type="string_literal" span="479:41:479:50">"priSort"</jtok>
<jtok eid="9" type="primary_name_ref" span="480:17:480:20">sec</jtok>
<jtok eid="9" type="primary_name_ref" span="480:23:480:30">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="480:31:480:36">prefs</jtok>
<jtok eid="9" type="method_call" span="480:37:480:40">get</jtok>
<jtok eid="9" type="string_literal" span="480:41:480:50">"secSort"</jtok>
<jtok eid="9" type="line_comment" span="481:17:481:56">// sorted as they appear on the screen.</jtok>
<jtok eid="9" type="primary_name_ref" span="482:17:482:20">ter</jtok>
<jtok eid="9" type="primary_name_ref" span="482:23:482:30">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="482:31:482:36">prefs</jtok>
<jtok eid="9" type="method_call" span="482:37:482:40">get</jtok>
<jtok eid="9" type="string_literal" span="482:41:482:50">"terSort"</jtok>
<jtok eid="9" type="primary_name_ref" span="483:17:483:21">priD</jtok>
<jtok eid="9" type="primary_name_ref" span="483:24:483:31">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="483:32:483:37">prefs</jtok>
<jtok eid="9" type="method_call" span="483:38:483:48">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="483:49:483:64">"priDescending"</jtok>
<jtok eid="9" type="primary_name_ref" span="484:17:484:21">secD</jtok>
<jtok eid="9" type="primary_name_ref" span="484:24:484:31">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="484:32:484:37">prefs</jtok>
<jtok eid="9" type="method_call" span="484:38:484:48">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="484:49:484:64">"secDescending"</jtok>
<jtok eid="9" type="primary_name_ref" span="485:17:485:21">terD</jtok>
<jtok eid="9" type="primary_name_ref" span="485:24:485:31">Globals</jtok>
<jtok eid="9" type="qualified_name_ref" span="485:32:485:37">prefs</jtok>
<jtok eid="9" type="method_call" span="485:38:485:48">getBoolean</jtok>
<jtok eid="9" type="string_literal" span="485:49:485:64">"terDescending"</jtok>
<jtok eid="9" type="line_comment" span="488:17:488:82">// The setting is to save in standard order: author, editor, year</jtok>
<jtok eid="9" type="primary_name_ref" span="489:17:489:20">pri</jtok>
<jtok eid="9" type="string_literal" span="489:23:489:31">"author"</jtok>
<jtok eid="9" type="primary_name_ref" span="490:17:490:20">sec</jtok>
<jtok eid="9" type="string_literal" span="490:23:490:31">"editor"</jtok>
<jtok eid="9" type="primary_name_ref" span="491:17:491:20">ter</jtok>
<jtok eid="9" type="string_literal" span="491:23:491:29">"year"</jtok>
<jtok eid="9" type="primary_name_ref" span="492:17:492:21">priD</jtok>
<jtok eid="9" type="primary_name_ref" span="493:17:493:21">secD</jtok>
<jtok eid="9" type="primary_name_ref" span="494:17:494:21">terD</jtok>
<jtok eid="9" type="class_or_interface_ref" span="497:13:497:17">List</jtok>
<jtok eid="9" type="class_or_interface_ref" span="497:18:497:28">Comparator</jtok>
<jtok eid="9" type="class_or_interface_ref" span="497:29:497:40">BibtexEntry</jtok>
<jtok eid="9" type="local_variable_name" span="497:43:497:54">comparators</jtok>
<jtok eid="9" type="constructor_call" span="497:61:497:70">ArrayList</jtok>
<jtok eid="9" type="constructor_call" span="497:71:497:81">Comparator</jtok>
<jtok eid="9" type="constructor_call" span="497:82:497:93">BibtexEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="498:17:498:32">isSaveOperation</jtok>
<jtok eid="9" type="primary_name_ref" span="499:17:499:28">comparators</jtok>
<jtok eid="9" type="method_call" span="499:29:499:32">add</jtok>
<jtok eid="9" type="constructor_call" span="499:37:499:60">CrossRefEntryComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="500:13:500:24">comparators</jtok>
<jtok eid="9" type="method_call" span="500:25:500:28">add</jtok>
<jtok eid="9" type="constructor_call" span="500:33:500:48">FieldComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="500:49:500:52">pri</jtok>
<jtok eid="9" type="primary_name_ref" span="500:54:500:58">priD</jtok>
<jtok eid="9" type="primary_name_ref" span="501:13:501:24">comparators</jtok>
<jtok eid="9" type="method_call" span="501:25:501:28">add</jtok>
<jtok eid="9" type="constructor_call" span="501:33:501:48">FieldComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="501:49:501:52">sec</jtok>
<jtok eid="9" type="primary_name_ref" span="501:54:501:58">secD</jtok>
<jtok eid="9" type="primary_name_ref" span="502:13:502:24">comparators</jtok>
<jtok eid="9" type="method_call" span="502:25:502:28">add</jtok>
<jtok eid="9" type="constructor_call" span="502:33:502:48">FieldComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="502:49:502:52">ter</jtok>
<jtok eid="9" type="primary_name_ref" span="502:54:502:58">terD</jtok>
<jtok eid="9" type="primary_name_ref" span="503:13:503:24">comparators</jtok>
<jtok eid="9" type="method_call" span="503:25:503:28">add</jtok>
<jtok eid="9" type="constructor_call" span="503:33:503:48">FieldComparator</jtok>
<jtok eid="9" type="primary_name_ref" span="503:49:503:61">BibtexFields</jtok>
<jtok eid="9" type="qualified_name_ref" span="503:62:503:71">KEY_FIELD</jtok>
<jtok eid="9" type="primary_name_ref" span="505:13:505:28">comparatorStack</jtok>
<jtok eid="9" type="constructor_call" span="505:35:505:55">FieldComparatorStack</jtok>
<jtok eid="9" type="constructor_call" span="505:56:505:67">BibtexEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="505:69:505:80">comparators</jtok>
<jtok eid="9" type="line_comment" span="507:9:507:65">// Use glazed lists to get a sorted view of the entries:</jtok>
<jtok eid="9" type="class_or_interface_ref" span="508:9:508:23">BasicEventList</jtok>
<jtok eid="9" type="local_variable_name" span="508:24:508:33">entryList</jtok>
<jtok eid="9" type="constructor_call" span="508:40:508:54">BasicEventList</jtok>
<jtok eid="9" type="class_or_interface_ref" span="509:9:509:19">SortedList</jtok>
<jtok eid="9" type="local_variable_name" span="509:20:509:26">sorter</jtok>
<jtok eid="9" type="constructor_call" span="509:33:509:43">SortedList</jtok>
<jtok eid="9" type="primary_name_ref" span="509:44:509:53">entryList</jtok>
<jtok eid="9" type="primary_name_ref" span="509:55:509:70">comparatorStack</jtok>
<jtok eid="9" type="primary_name_ref" span="511:13:511:19">keySet</jtok>
<jtok eid="9" type="primary_name_ref" span="512:13:512:19">keySet</jtok>
<jtok eid="9" type="primary_name_ref" span="512:22:512:30">database</jtok>
<jtok eid="9" type="method_call" span="512:31:512:40">getKeySet</jtok>
<jtok eid="9" type="primary_name_ref" span="514:13:514:19">keySet</jtok>
<jtok eid="9" type="class_or_interface_ref" span="515:13:515:21">Iterator</jtok>
<jtok eid="9" type="class_or_interface_ref" span="515:22:515:28">String</jtok>
<jtok eid="9" type="local_variable_name" span="515:30:515:31">i</jtok>
<jtok eid="9" type="primary_name_ref" span="515:34:515:40">keySet</jtok>
<jtok eid="9" type="method_call" span="515:41:515:49">iterator</jtok>
<jtok eid="9" type="primary_name_ref" span="517:20:517:21">i</jtok>
<jtok eid="9" type="method_call" span="517:22:517:29">hasNext</jtok>
<jtok eid="9" type="primary_name_ref" span="518:17:518:23">sorter</jtok>
<jtok eid="9" type="method_call" span="518:24:518:27">add</jtok>
<jtok eid="9" type="primary_name_ref" span="518:28:518:36">database</jtok>
<jtok eid="9" type="method_call" span="518:37:518:49">getEntryById</jtok>
<jtok eid="9" type="primary_name_ref" span="518:51:518:52">i</jtok>
<jtok eid="9" type="method_call" span="518:53:518:57">next</jtok>
<jtok eid="9" type="primary_name_ref" span="521:16:521:22">sorter</jtok>
<jtok eid="1" type="block_comment" span="524:5:525:8">/** Returns true iff the entry has a nonzero value in its field.
     */</jtok>
<jtok eid="10" type="method_name" span="526:28:526:40">nonZeroField</jtok>
<jtok eid="10" type="parameter_type" span="526:41:526:52">BibtexEntry</jtok>
<jtok eid="10" type="parameter_name" span="526:53:526:55">be</jtok>
<jtok eid="10" type="parameter_type" span="526:57:526:63">String</jtok>
<jtok eid="10" type="parameter_name" span="526:64:526:69">field</jtok>
<jtok eid="10" type="class_or_interface_ref" span="528:9:528:15">String</jtok>
<jtok eid="10" type="local_variable_name" span="528:16:528:17">o</jtok>
<jtok eid="10" type="primary_name_ref" span="528:21:528:23">be</jtok>
<jtok eid="10" type="method_call" span="528:24:528:32">getField</jtok>
<jtok eid="10" type="primary_name_ref" span="528:33:528:38">field</jtok>
<jtok eid="10" type="primary_name_ref" span="530:18:530:19">o</jtok>
<jtok eid="10" type="primary_name_ref" span="530:33:530:34">o</jtok>
<jtok eid="10" type="method_call" span="530:35:530:41">equals</jtok>
<jtok eid="10" type="string_literal" span="530:42:530:45">"0"</jtok>
<jtok eid="0" type="line_comment" span="536:1:536:80">///////////////////////////////////////////////////////////////////////////////</jtok>
<jtok eid="0" type="line_comment" span="537:1:537:17">//  END OF FILE.</jtok>
<jtok eid="0" type="line_comment" span="538:1:538:80">///////////////////////////////////////////////////////////////////////////////</jtok>
</jdoc>