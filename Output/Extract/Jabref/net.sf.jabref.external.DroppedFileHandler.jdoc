<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.external.DroppedFileHandler" jls="java5">
<jent id="0" type="file" span="0:0:458:1">Source/jabref/src/java/net/sf/jabref/external/DroppedFileHandler.java</jent>
<jent id="1" pid="0" type="class" span="38:1:458:1">net.sf.jabref.external.DroppedFileHandler</jent>
<jent id="2" pid="1" type="method" span="54:5:78:5">net.sf.jabref.external.DroppedFileHandler.DroppedFileHandler(JabRefFrame,BasePanel)</jent>
<jent id="3" pid="1" type="method" span="96:5:101:5">net.sf.jabref.external.DroppedFileHandler.handleDroppedfile(String,ExternalFileType,boolean,MainTable,int)</jent>
<jent id="4" pid="1" type="method" span="115:5:159:5">net.sf.jabref.external.DroppedFileHandler.handleDroppedfile(String,ExternalFileType,boolean,BibtexEntry)</jent>
<jent id="5" pid="1" type="method" span="161:5:248:5">net.sf.jabref.external.DroppedFileHandler.tryXmpImport(String,ExternalFileType,boolean,NamedCompound)</jent>
<jent id="6" pid="1" type="method" span="250:5:306:5">net.sf.jabref.external.DroppedFileHandler.showLinkMoveCopyRenameDialog(String,ExternalFileType,String,boolean,boolean)</jent>
<jent id="7" pid="6" type="class" span="271:50:279:3">net.sf.jabref.external.DroppedFileHandler.showLinkMoveCopyRenameDialog(String,ExternalFileType,String,boolean,boolean).$1</jent>
<jent id="8" pid="7" type="method" span="272:4:278:4">net.sf.jabref.external.DroppedFileHandler.showLinkMoveCopyRenameDialog(String,ExternalFileType,String,boolean,boolean).$1.stateChanged(ChangeEvent)</jent>
<jent id="9" pid="1" type="method" span="321:5:361:5">net.sf.jabref.external.DroppedFileHandler.doLink(BibtexEntry,ExternalFileType,String,boolean,NamedCompound)</jent>
<jent id="10" pid="1" type="method" span="377:5:406:5">net.sf.jabref.external.DroppedFileHandler.doMove(String,ExternalFileType,String,NamedCompound)</jent>
<jent id="11" pid="1" type="method" span="422:5:456:5">net.sf.jabref.external.DroppedFileHandler.doCopy(String,ExternalFileType,String,NamedCompound)</jent>
<jtok eid="0" type="block_comment" span="26:1:37:4">/**
 * This class holds the functionality of autolinking to a file that's dropped
 * onto an entry.
 * 
 * Options for handling the files are:
 * 
 * 1) Link to the file in its current position (disabled if the file is remote)
 * 
 * 2) Copy the file to ??? directory, rename after bibtex key, and extension
 * 
 * 3) Move the file to ??? directory, rename after bibtex key, and extension
 */</jtok>
<jtok eid="1" type="class_name" span="38:14:38:32">DroppedFileHandler</jtok>
<jtok eid="1" type="class_or_interface_ref" span="39:13:39:24">JabRefFrame</jtok>
<jtok eid="1" type="field_name" span="39:25:39:30">frame</jtok>
<jtok eid="1" type="class_or_interface_ref" span="41:13:41:22">BasePanel</jtok>
<jtok eid="1" type="field_name" span="41:23:41:28">panel</jtok>
<jtok eid="1" type="class_or_interface_ref" span="43:13:43:25">JRadioButton</jtok>
<jtok eid="1" type="field_name" span="43:26:43:37">linkInPlace</jtok>
<jtok eid="1" type="constructor_call" span="43:44:43:56">JRadioButton</jtok>
<jtok eid="1" type="field_name" span="43:60:43:75">copyRadioButton</jtok>
<jtok eid="1" type="constructor_call" span="43:82:43:94">JRadioButton</jtok>
<jtok eid="1" type="field_name" span="44:9:44:24">moveRadioButton</jtok>
<jtok eid="1" type="constructor_call" span="44:31:44:43">JRadioButton</jtok>
<jtok eid="1" type="class_or_interface_ref" span="46:13:46:19">JLabel</jtok>
<jtok eid="1" type="field_name" span="46:20:46:32">destDirLabel</jtok>
<jtok eid="1" type="constructor_call" span="46:39:46:45">JLabel</jtok>
<jtok eid="1" type="class_or_interface_ref" span="48:13:48:22">JCheckBox</jtok>
<jtok eid="1" type="field_name" span="48:23:48:37">renameCheckBox</jtok>
<jtok eid="1" type="constructor_call" span="48:44:48:53">JCheckBox</jtok>
<jtok eid="1" type="class_or_interface_ref" span="50:13:50:23">JTextField</jtok>
<jtok eid="1" type="field_name" span="50:24:50:39">renameToTextBox</jtok>
<jtok eid="1" type="constructor_call" span="50:46:50:56">JTextField</jtok>
<jtok eid="1" type="class_or_interface_ref" span="52:13:52:19">JPanel</jtok>
<jtok eid="1" type="field_name" span="52:20:52:32">optionsPanel</jtok>
<jtok eid="1" type="constructor_call" span="52:39:52:45">JPanel</jtok>
<jtok eid="2" type="method_name" span="54:12:54:30">DroppedFileHandler</jtok>
<jtok eid="2" type="parameter_type" span="54:31:54:42">JabRefFrame</jtok>
<jtok eid="2" type="parameter_name" span="54:43:54:48">frame</jtok>
<jtok eid="2" type="parameter_type" span="54:50:54:59">BasePanel</jtok>
<jtok eid="2" type="parameter_name" span="54:60:54:65">panel</jtok>
<jtok eid="2" type="qualified_name_ref" span="56:14:56:19">frame</jtok>
<jtok eid="2" type="primary_name_ref" span="56:22:56:27">frame</jtok>
<jtok eid="2" type="qualified_name_ref" span="57:14:57:19">panel</jtok>
<jtok eid="2" type="primary_name_ref" span="57:22:57:27">panel</jtok>
<jtok eid="2" type="class_or_interface_ref" span="59:9:59:20">ButtonGroup</jtok>
<jtok eid="2" type="local_variable_name" span="59:21:59:24">grp</jtok>
<jtok eid="2" type="constructor_call" span="59:31:59:42">ButtonGroup</jtok>
<jtok eid="2" type="primary_name_ref" span="60:9:60:12">grp</jtok>
<jtok eid="2" type="method_call" span="60:13:60:16">add</jtok>
<jtok eid="2" type="primary_name_ref" span="60:17:60:28">linkInPlace</jtok>
<jtok eid="2" type="primary_name_ref" span="61:9:61:12">grp</jtok>
<jtok eid="2" type="method_call" span="61:13:61:16">add</jtok>
<jtok eid="2" type="primary_name_ref" span="61:17:61:32">copyRadioButton</jtok>
<jtok eid="2" type="primary_name_ref" span="62:9:62:12">grp</jtok>
<jtok eid="2" type="method_call" span="62:13:62:16">add</jtok>
<jtok eid="2" type="primary_name_ref" span="62:17:62:32">moveRadioButton</jtok>
<jtok eid="2" type="primary_name_ref" span="63:9:63:24">copyRadioButton</jtok>
<jtok eid="2" type="method_call" span="63:25:63:36">setSelected</jtok>
<jtok eid="2" type="class_or_interface_ref" span="65:9:65:19">FormLayout</jtok>
<jtok eid="2" type="local_variable_name" span="65:20:65:26">layout</jtok>
<jtok eid="2" type="constructor_call" span="65:33:65:43">FormLayout</jtok>
<jtok eid="2" type="string_literal" span="65:44:65:71">"left:15dlu,pref,pref,pref"</jtok>
<jtok eid="2" type="string_literal" span="65:72:65:105">"bottom:14pt,pref,pref,pref,pref"</jtok>
<jtok eid="2" type="primary_name_ref" span="66:9:66:15">layout</jtok>
<jtok eid="2" type="method_call" span="66:16:66:28">setRowGroups</jtok>
<jtok eid="2" type="class_or_interface_ref" span="67:9:67:27">DefaultFormBuilder</jtok>
<jtok eid="2" type="local_variable_name" span="67:28:67:35">builder</jtok>
<jtok eid="2" type="constructor_call" span="67:42:67:60">DefaultFormBuilder</jtok>
<jtok eid="2" type="primary_name_ref" span="67:61:67:67">layout</jtok>
<jtok eid="2" type="primary_name_ref" span="67:69:67:81">optionsPanel</jtok>
<jtok eid="2" type="primary_name_ref" span="68:9:68:16">builder</jtok>
<jtok eid="2" type="method_call" span="68:17:68:39">setDefaultDialogBorder</jtok>
<jtok eid="2" type="class_or_interface_ref" span="69:9:69:24">CellConstraints</jtok>
<jtok eid="2" type="local_variable_name" span="69:25:69:27">cc</jtok>
<jtok eid="2" type="constructor_call" span="69:34:69:49">CellConstraints</jtok>
<jtok eid="2" type="primary_name_ref" span="71:9:71:16">builder</jtok>
<jtok eid="2" type="method_call" span="71:17:71:20">add</jtok>
<jtok eid="2" type="primary_name_ref" span="71:21:71:32">linkInPlace</jtok>
<jtok eid="2" type="primary_name_ref" span="71:34:71:36">cc</jtok>
<jtok eid="2" type="method_call" span="71:37:71:40">xyw</jtok>
<jtok eid="2" type="primary_name_ref" span="72:9:72:16">builder</jtok>
<jtok eid="2" type="method_call" span="72:17:72:20">add</jtok>
<jtok eid="2" type="primary_name_ref" span="72:21:72:33">destDirLabel</jtok>
<jtok eid="2" type="primary_name_ref" span="72:35:72:37">cc</jtok>
<jtok eid="2" type="method_call" span="72:38:72:41">xyw</jtok>
<jtok eid="2" type="primary_name_ref" span="73:9:73:16">builder</jtok>
<jtok eid="2" type="method_call" span="73:17:73:20">add</jtok>
<jtok eid="2" type="primary_name_ref" span="73:21:73:36">copyRadioButton</jtok>
<jtok eid="2" type="primary_name_ref" span="73:38:73:40">cc</jtok>
<jtok eid="2" type="method_call" span="73:41:73:44">xyw</jtok>
<jtok eid="2" type="primary_name_ref" span="74:9:74:16">builder</jtok>
<jtok eid="2" type="method_call" span="74:17:74:20">add</jtok>
<jtok eid="2" type="primary_name_ref" span="74:21:74:36">moveRadioButton</jtok>
<jtok eid="2" type="primary_name_ref" span="74:38:74:40">cc</jtok>
<jtok eid="2" type="method_call" span="74:41:74:44">xyw</jtok>
<jtok eid="2" type="primary_name_ref" span="75:9:75:16">builder</jtok>
<jtok eid="2" type="method_call" span="75:17:75:20">add</jtok>
<jtok eid="2" type="primary_name_ref" span="75:21:75:35">renameCheckBox</jtok>
<jtok eid="2" type="primary_name_ref" span="75:37:75:39">cc</jtok>
<jtok eid="2" type="method_call" span="75:40:75:43">xyw</jtok>
<jtok eid="2" type="primary_name_ref" span="76:9:76:16">builder</jtok>
<jtok eid="2" type="method_call" span="76:17:76:20">add</jtok>
<jtok eid="2" type="primary_name_ref" span="76:21:76:36">renameToTextBox</jtok>
<jtok eid="2" type="primary_name_ref" span="76:38:76:40">cc</jtok>
<jtok eid="2" type="method_call" span="76:41:76:44">xyw</jtok>
<jtok eid="1" type="block_comment" span="80:5:95:8">/**
     * Offer copy/move/linking options for a dragged external file. Perform the
     * chosen operation, if any.
     * 
     * @param fileName
     *            The name of the dragged file.
     * @param fileType
     *            The FileType associated with the file.
     * @param localFile
     *            Indicate whether this is a local file, or a remote file copied
     *            to a local temporary file.
     * @param mainTable
     *            The MainTable the file was dragged to.
     * @param dropRow
     *            The row where the file was dropped.
     */</jtok>
<jtok eid="3" type="method_name" span="96:17:96:34">handleDroppedfile</jtok>
<jtok eid="3" type="parameter_type" span="96:35:96:41">String</jtok>
<jtok eid="3" type="parameter_name" span="96:42:96:50">fileName</jtok>
<jtok eid="3" type="parameter_type" span="96:52:96:68">ExternalFileType</jtok>
<jtok eid="3" type="parameter_name" span="96:69:96:77">fileType</jtok>
<jtok eid="3" type="parameter_name" span="96:87:96:96">localFile</jtok>
<jtok eid="3" type="parameter_type" span="97:9:97:18">MainTable</jtok>
<jtok eid="3" type="parameter_name" span="97:19:97:28">mainTable</jtok>
<jtok eid="3" type="parameter_name" span="97:34:97:41">dropRow</jtok>
<jtok eid="3" type="class_or_interface_ref" span="99:9:99:20">BibtexEntry</jtok>
<jtok eid="3" type="local_variable_name" span="99:21:99:26">entry</jtok>
<jtok eid="3" type="primary_name_ref" span="99:29:99:38">mainTable</jtok>
<jtok eid="3" type="method_call" span="99:39:99:49">getEntryAt</jtok>
<jtok eid="3" type="primary_name_ref" span="99:50:99:57">dropRow</jtok>
<jtok eid="3" type="method_call" span="100:9:100:26">handleDroppedfile</jtok>
<jtok eid="3" type="primary_name_ref" span="100:27:100:35">fileName</jtok>
<jtok eid="3" type="primary_name_ref" span="100:37:100:45">fileType</jtok>
<jtok eid="3" type="primary_name_ref" span="100:47:100:56">localFile</jtok>
<jtok eid="3" type="primary_name_ref" span="100:58:100:63">entry</jtok>
<jtok eid="1" type="block_comment" span="103:5:114:8">/**
     *
     * @param fileName
     *        The name of the dragged file.
     * @param fileType
     *        The FileType associated with the file.
     * @param localFile
 *            Indicate whether this is a local file, or a remote file copied
 *            to a local temporary file.
     * @param entry
     *        The target entry for the drop.
     */</jtok>
<jtok eid="4" type="method_name" span="115:17:115:34">handleDroppedfile</jtok>
<jtok eid="4" type="parameter_type" span="115:35:115:41">String</jtok>
<jtok eid="4" type="parameter_name" span="115:42:115:50">fileName</jtok>
<jtok eid="4" type="parameter_type" span="115:52:115:68">ExternalFileType</jtok>
<jtok eid="4" type="parameter_name" span="115:69:115:77">fileType</jtok>
<jtok eid="4" type="parameter_name" span="115:87:115:96">localFile</jtok>
<jtok eid="4" type="parameter_type" span="116:9:116:20">BibtexEntry</jtok>
<jtok eid="4" type="parameter_name" span="116:21:116:26">entry</jtok>
<jtok eid="4" type="class_or_interface_ref" span="117:9:117:22">NamedCompound</jtok>
<jtok eid="4" type="local_variable_name" span="117:23:117:28">edits</jtok>
<jtok eid="4" type="constructor_call" span="117:35:117:48">NamedCompound</jtok>
<jtok eid="4" type="primary_name_ref" span="117:49:117:56">Globals</jtok>
<jtok eid="4" type="method_call" span="117:57:117:61">lang</jtok>
<jtok eid="4" type="string_literal" span="117:62:117:71">"Drop %0"</jtok>
<jtok eid="4" type="primary_name_ref" span="117:73:117:81">fileType</jtok>
<jtok eid="4" type="qualified_name_ref" span="117:82:117:91">extension</jtok>
<jtok eid="4" type="method_call" span="119:13:119:25">tryXmpImport</jtok>
<jtok eid="4" type="primary_name_ref" span="119:26:119:34">fileName</jtok>
<jtok eid="4" type="primary_name_ref" span="119:36:119:44">fileType</jtok>
<jtok eid="4" type="primary_name_ref" span="119:46:119:55">localFile</jtok>
<jtok eid="4" type="primary_name_ref" span="119:57:119:62">edits</jtok>
<jtok eid="4" type="primary_name_ref" span="120:13:120:18">edits</jtok>
<jtok eid="4" type="method_call" span="120:19:120:22">end</jtok>
<jtok eid="4" type="primary_name_ref" span="121:13:121:18">panel</jtok>
<jtok eid="4" type="qualified_name_ref" span="121:19:121:30">undoManager</jtok>
<jtok eid="4" type="method_call" span="121:31:121:38">addEdit</jtok>
<jtok eid="4" type="primary_name_ref" span="121:39:121:44">edits</jtok>
<jtok eid="4" type="line_comment" span="125:9:125:23">// Show dialog</jtok>
<jtok eid="4" type="local_variable_name" span="126:17:126:25">newEntry</jtok>
<jtok eid="4" type="class_or_interface_ref" span="127:9:127:15">String</jtok>
<jtok eid="4" type="local_variable_name" span="127:16:127:23">citeKey</jtok>
<jtok eid="4" type="primary_name_ref" span="127:26:127:31">entry</jtok>
<jtok eid="4" type="method_call" span="127:32:127:42">getCiteKey</jtok>
<jtok eid="4" type="local_variable_name" span="128:13:128:18">reply</jtok>
<jtok eid="4" type="method_call" span="128:21:128:49">showLinkMoveCopyRenameDialog</jtok>
<jtok eid="4" type="primary_name_ref" span="128:50:128:58">fileName</jtok>
<jtok eid="4" type="primary_name_ref" span="128:60:128:68">fileType</jtok>
<jtok eid="4" type="primary_name_ref" span="128:70:128:77">citeKey</jtok>
<jtok eid="4" type="primary_name_ref" span="128:79:128:87">newEntry</jtok>
<jtok eid="4" type="primary_name_ref" span="130:13:130:18">reply</jtok>
<jtok eid="4" type="primary_name_ref" span="130:22:130:33">JOptionPane</jtok>
<jtok eid="4" type="qualified_name_ref" span="130:34:130:43">OK_OPTION</jtok>
<jtok eid="4" type="block_comment" span="133:9:136:12">/*
         * Ok, we're ready to go. See first if we need to do a file copy before
         * linking:
         */</jtok>
<jtok eid="4" type="local_variable_name" span="138:17:138:24">success</jtok>
<jtok eid="4" type="class_or_interface_ref" span="139:9:139:15">String</jtok>
<jtok eid="4" type="local_variable_name" span="139:16:139:28">destFilename</jtok>
<jtok eid="4" type="primary_name_ref" span="141:13:141:24">linkInPlace</jtok>
<jtok eid="4" type="method_call" span="141:25:141:35">isSelected</jtok>
<jtok eid="4" type="primary_name_ref" span="142:13:142:25">destFilename</jtok>
<jtok eid="4" type="primary_name_ref" span="142:28:142:36">fileName</jtok>
<jtok eid="4" type="primary_name_ref" span="144:13:144:25">destFilename</jtok>
<jtok eid="4" type="primary_name_ref" span="144:29:144:43">renameCheckBox</jtok>
<jtok eid="4" type="method_call" span="144:44:144:54">isSelected</jtok>
<jtok eid="4" type="primary_name_ref" span="144:59:144:74">renameToTextBox</jtok>
<jtok eid="4" type="method_call" span="144:75:144:82">getText</jtok>
<jtok eid="4" type="constructor_call" span="144:91:144:95">File</jtok>
<jtok eid="4" type="primary_name_ref" span="144:96:144:104">fileName</jtok>
<jtok eid="4" type="method_call" span="144:106:144:113">getName</jtok>
<jtok eid="4" type="primary_name_ref" span="145:17:145:32">copyRadioButton</jtok>
<jtok eid="4" type="method_call" span="145:33:145:43">isSelected</jtok>
<jtok eid="4" type="primary_name_ref" span="146:17:146:24">success</jtok>
<jtok eid="4" type="method_call" span="146:27:146:33">doCopy</jtok>
<jtok eid="4" type="primary_name_ref" span="146:34:146:42">fileName</jtok>
<jtok eid="4" type="primary_name_ref" span="146:44:146:52">fileType</jtok>
<jtok eid="4" type="primary_name_ref" span="146:54:146:66">destFilename</jtok>
<jtok eid="4" type="primary_name_ref" span="146:68:146:73">edits</jtok>
<jtok eid="4" type="primary_name_ref" span="147:24:147:39">moveRadioButton</jtok>
<jtok eid="4" type="method_call" span="147:40:147:50">isSelected</jtok>
<jtok eid="4" type="primary_name_ref" span="148:17:148:24">success</jtok>
<jtok eid="4" type="method_call" span="148:27:148:33">doMove</jtok>
<jtok eid="4" type="primary_name_ref" span="148:34:148:42">fileName</jtok>
<jtok eid="4" type="primary_name_ref" span="148:44:148:52">fileType</jtok>
<jtok eid="4" type="primary_name_ref" span="148:54:148:66">destFilename</jtok>
<jtok eid="4" type="primary_name_ref" span="148:68:148:73">edits</jtok>
<jtok eid="4" type="primary_name_ref" span="152:13:152:20">success</jtok>
<jtok eid="4" type="method_call" span="153:13:153:19">doLink</jtok>
<jtok eid="4" type="primary_name_ref" span="153:20:153:25">entry</jtok>
<jtok eid="4" type="primary_name_ref" span="153:27:153:35">fileType</jtok>
<jtok eid="4" type="primary_name_ref" span="153:37:153:49">destFilename</jtok>
<jtok eid="4" type="primary_name_ref" span="153:58:153:63">edits</jtok>
<jtok eid="4" type="primary_name_ref" span="154:13:154:18">panel</jtok>
<jtok eid="4" type="method_call" span="154:19:154:34">markBaseChanged</jtok>
<jtok eid="4" type="primary_name_ref" span="156:9:156:14">edits</jtok>
<jtok eid="4" type="method_call" span="156:15:156:18">end</jtok>
<jtok eid="4" type="primary_name_ref" span="157:9:157:14">panel</jtok>
<jtok eid="4" type="qualified_name_ref" span="157:15:157:26">undoManager</jtok>
<jtok eid="4" type="method_call" span="157:27:157:34">addEdit</jtok>
<jtok eid="4" type="primary_name_ref" span="157:35:157:40">edits</jtok>
<jtok eid="5" type="method_name" span="161:21:161:33">tryXmpImport</jtok>
<jtok eid="5" type="parameter_type" span="161:34:161:40">String</jtok>
<jtok eid="5" type="parameter_name" span="161:41:161:49">fileName</jtok>
<jtok eid="5" type="parameter_type" span="161:51:161:67">ExternalFileType</jtok>
<jtok eid="5" type="parameter_name" span="161:68:161:76">fileType</jtok>
<jtok eid="5" type="parameter_name" span="161:86:161:95">localFile</jtok>
<jtok eid="5" type="parameter_type" span="162:9:162:22">NamedCompound</jtok>
<jtok eid="5" type="parameter_name" span="162:23:162:28">edits</jtok>
<jtok eid="5" type="primary_name_ref" span="164:14:164:22">fileType</jtok>
<jtok eid="5" type="qualified_name_ref" span="164:23:164:32">extension</jtok>
<jtok eid="5" type="method_call" span="164:33:164:39">equals</jtok>
<jtok eid="5" type="string_literal" span="164:40:164:45">"pdf"</jtok>
<jtok eid="5" type="class_or_interface_ref" span="168:9:168:13">List</jtok>
<jtok eid="5" type="class_or_interface_ref" span="168:14:168:25">BibtexEntry</jtok>
<jtok eid="5" type="local_variable_name" span="168:27:168:43">xmpEntriesInFile</jtok>
<jtok eid="5" type="primary_name_ref" span="170:13:170:29">xmpEntriesInFile</jtok>
<jtok eid="5" type="primary_name_ref" span="170:32:170:39">XMPUtil</jtok>
<jtok eid="5" type="method_call" span="170:40:170:47">readXMP</jtok>
<jtok eid="5" type="primary_name_ref" span="170:48:170:56">fileName</jtok>
<jtok eid="5" type="class_or_interface_ref" span="171:18:171:27">Exception</jtok>
<jtok eid="5" type="local_variable_name" span="171:28:171:29">e</jtok>
<jtok eid="5" type="primary_name_ref" span="175:14:175:30">xmpEntriesInFile</jtok>
<jtok eid="5" type="primary_name_ref" span="175:44:175:60">xmpEntriesInFile</jtok>
<jtok eid="5" type="method_call" span="175:61:175:65">size</jtok>
<jtok eid="5" type="class_or_interface_ref" span="179:9:179:15">JLabel</jtok>
<jtok eid="5" type="local_variable_name" span="179:16:179:35">confirmationMessage</jtok>
<jtok eid="5" type="constructor_call" span="179:42:179:48">JLabel</jtok>
<jtok eid="5" type="primary_name_ref" span="180:13:180:20">Globals</jtok>
<jtok eid="5" type="method_call" span="181:18:181:22">lang</jtok>
<jtok eid="5" type="string_literal" span="181:23:181:143">"The PDF contains one or several bibtex-records.\nDo you want to import these as new entries into the current database?"</jtok>
<jtok eid="5" type="local_variable_name" span="183:13:183:18">reply</jtok>
<jtok eid="5" type="primary_name_ref" span="183:21:183:32">JOptionPane</jtok>
<jtok eid="5" type="method_call" span="183:33:183:50">showConfirmDialog</jtok>
<jtok eid="5" type="primary_name_ref" span="183:51:183:56">frame</jtok>
<jtok eid="5" type="primary_name_ref" span="183:58:183:77">confirmationMessage</jtok>
<jtok eid="5" type="primary_name_ref" span="183:79:183:86">Globals</jtok>
<jtok eid="5" type="method_call" span="183:87:183:91">lang</jtok>
<jtok eid="5" type="string_literal" span="184:13:184:44">"XMP metadata found in PDF: %0"</jtok>
<jtok eid="5" type="primary_name_ref" span="184:46:184:54">fileName</jtok>
<jtok eid="5" type="primary_name_ref" span="184:57:184:68">JOptionPane</jtok>
<jtok eid="5" type="qualified_name_ref" span="184:69:184:89">YES_NO_CANCEL_OPTION</jtok>
<jtok eid="5" type="primary_name_ref" span="185:13:185:24">JOptionPane</jtok>
<jtok eid="5" type="qualified_name_ref" span="185:25:185:41">QUESTION_MESSAGE</jtok>
<jtok eid="5" type="primary_name_ref" span="187:13:187:18">reply</jtok>
<jtok eid="5" type="primary_name_ref" span="187:22:187:33">JOptionPane</jtok>
<jtok eid="5" type="qualified_name_ref" span="187:34:187:47">CANCEL_OPTION</jtok>
<jtok eid="5" type="line_comment" span="188:26:188:69">// The user canceled thus that we are done.</jtok>
<jtok eid="5" type="primary_name_ref" span="190:13:190:18">reply</jtok>
<jtok eid="5" type="primary_name_ref" span="190:22:190:33">JOptionPane</jtok>
<jtok eid="5" type="qualified_name_ref" span="190:34:190:43">NO_OPTION</jtok>
<jtok eid="5" type="line_comment" span="194:9:194:44">// reply == JOptionPane.YES_OPTION)</jtok>
<jtok eid="5" type="block_comment" span="196:9:204:12">/*
         * TODO Extract Import functionality from ImportMenuItem then we could
         * do:
         * 
         * ImportMenuItem importer = new ImportMenuItem(frame, (mainTable ==
         * null), new PdfXmpImporter());
         * 
         * importer.automatedImport(new String[] { fileName });
         */</jtok>
<jtok eid="5" type="local_variable_name" span="206:17:206:25">isSingle</jtok>
<jtok eid="5" type="primary_name_ref" span="206:28:206:44">xmpEntriesInFile</jtok>
<jtok eid="5" type="method_call" span="206:45:206:49">size</jtok>
<jtok eid="5" type="class_or_interface_ref" span="207:9:207:20">BibtexEntry</jtok>
<jtok eid="5" type="local_variable_name" span="207:21:207:27">single</jtok>
<jtok eid="5" type="primary_name_ref" span="207:31:207:39">isSingle</jtok>
<jtok eid="5" type="primary_name_ref" span="207:42:207:58">xmpEntriesInFile</jtok>
<jtok eid="5" type="method_call" span="207:59:207:62">get</jtok>
<jtok eid="5" type="local_variable_name" span="210:17:210:24">success</jtok>
<jtok eid="5" type="class_or_interface_ref" span="212:9:212:15">String</jtok>
<jtok eid="5" type="local_variable_name" span="212:16:212:28">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="214:13:214:24">linkInPlace</jtok>
<jtok eid="5" type="method_call" span="214:25:214:35">isSelected</jtok>
<jtok eid="5" type="primary_name_ref" span="215:13:215:25">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="215:28:215:36">fileName</jtok>
<jtok eid="5" type="primary_name_ref" span="217:17:217:31">renameCheckBox</jtok>
<jtok eid="5" type="method_call" span="217:32:217:42">isSelected</jtok>
<jtok eid="5" type="primary_name_ref" span="218:17:218:29">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="218:32:218:40">fileName</jtok>
<jtok eid="5" type="primary_name_ref" span="220:17:220:29">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="220:32:220:38">single</jtok>
<jtok eid="5" type="method_call" span="220:39:220:49">getCiteKey</jtok>
<jtok eid="5" type="string_literal" span="220:54:220:57">"."</jtok>
<jtok eid="5" type="primary_name_ref" span="220:60:220:68">fileType</jtok>
<jtok eid="5" type="qualified_name_ref" span="220:69:220:78">extension</jtok>
<jtok eid="5" type="primary_name_ref" span="223:17:223:32">copyRadioButton</jtok>
<jtok eid="5" type="method_call" span="223:33:223:43">isSelected</jtok>
<jtok eid="5" type="primary_name_ref" span="224:17:224:24">success</jtok>
<jtok eid="5" type="method_call" span="224:27:224:33">doCopy</jtok>
<jtok eid="5" type="primary_name_ref" span="224:34:224:42">fileName</jtok>
<jtok eid="5" type="primary_name_ref" span="224:44:224:52">fileType</jtok>
<jtok eid="5" type="primary_name_ref" span="224:54:224:66">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="224:68:224:73">edits</jtok>
<jtok eid="5" type="primary_name_ref" span="225:24:225:39">moveRadioButton</jtok>
<jtok eid="5" type="method_call" span="225:40:225:50">isSelected</jtok>
<jtok eid="5" type="primary_name_ref" span="226:17:226:24">success</jtok>
<jtok eid="5" type="method_call" span="226:27:226:33">doMove</jtok>
<jtok eid="5" type="primary_name_ref" span="226:34:226:42">fileName</jtok>
<jtok eid="5" type="primary_name_ref" span="226:44:226:52">fileType</jtok>
<jtok eid="5" type="primary_name_ref" span="226:54:226:66">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="226:68:226:73">edits</jtok>
<jtok eid="5" type="primary_name_ref" span="229:13:229:20">success</jtok>
<jtok eid="5" type="class_or_interface_ref" span="231:13:231:21">Iterator</jtok>
<jtok eid="5" type="class_or_interface_ref" span="231:22:231:33">BibtexEntry</jtok>
<jtok eid="5" type="local_variable_name" span="231:35:231:37">it</jtok>
<jtok eid="5" type="primary_name_ref" span="231:40:231:56">xmpEntriesInFile</jtok>
<jtok eid="5" type="method_call" span="231:57:231:65">iterator</jtok>
<jtok eid="5" type="primary_name_ref" span="233:20:233:22">it</jtok>
<jtok eid="5" type="method_call" span="233:23:233:30">hasNext</jtok>
<jtok eid="5" type="class_or_interface_ref" span="235:21:235:32">BibtexEntry</jtok>
<jtok eid="5" type="local_variable_name" span="235:33:235:38">entry</jtok>
<jtok eid="5" type="primary_name_ref" span="235:41:235:43">it</jtok>
<jtok eid="5" type="method_call" span="235:44:235:48">next</jtok>
<jtok eid="5" type="primary_name_ref" span="236:21:236:26">entry</jtok>
<jtok eid="5" type="method_call" span="236:27:236:32">setId</jtok>
<jtok eid="5" type="primary_name_ref" span="236:33:236:37">Util</jtok>
<jtok eid="5" type="method_call" span="236:38:236:53">createNeutralId</jtok>
<jtok eid="5" type="primary_name_ref" span="237:21:237:26">edits</jtok>
<jtok eid="5" type="method_call" span="237:27:237:34">addEdit</jtok>
<jtok eid="5" type="constructor_call" span="237:39:237:58">UndoableInsertEntry</jtok>
<jtok eid="5" type="primary_name_ref" span="237:59:237:64">panel</jtok>
<jtok eid="5" type="method_call" span="237:65:237:76">getDatabase</jtok>
<jtok eid="5" type="primary_name_ref" span="237:80:237:85">entry</jtok>
<jtok eid="5" type="primary_name_ref" span="237:87:237:92">panel</jtok>
<jtok eid="5" type="primary_name_ref" span="238:21:238:26">panel</jtok>
<jtok eid="5" type="method_call" span="238:27:238:38">getDatabase</jtok>
<jtok eid="5" type="method_call" span="238:41:238:52">insertEntry</jtok>
<jtok eid="5" type="primary_name_ref" span="238:53:238:58">entry</jtok>
<jtok eid="5" type="method_call" span="239:21:239:27">doLink</jtok>
<jtok eid="5" type="primary_name_ref" span="239:28:239:33">entry</jtok>
<jtok eid="5" type="primary_name_ref" span="239:35:239:43">fileType</jtok>
<jtok eid="5" type="primary_name_ref" span="239:45:239:57">destFilename</jtok>
<jtok eid="5" type="primary_name_ref" span="239:65:239:70">edits</jtok>
<jtok eid="5" type="class_or_interface_ref" span="240:26:240:47">KeyCollisionException</jtok>
<jtok eid="5" type="local_variable_name" span="240:48:240:50">ex</jtok>
<jtok eid="5" type="primary_name_ref" span="244:13:244:18">panel</jtok>
<jtok eid="5" type="method_call" span="244:19:244:34">markBaseChanged</jtok>
<jtok eid="5" type="primary_name_ref" span="245:13:245:18">panel</jtok>
<jtok eid="5" type="method_call" span="245:19:245:45">updateEntryEditorIfShowing</jtok>
<jtok eid="6" type="method_name" span="250:16:250:44">showLinkMoveCopyRenameDialog</jtok>
<jtok eid="6" type="parameter_type" span="250:45:250:51">String</jtok>
<jtok eid="6" type="parameter_name" span="250:52:250:64">linkFileName</jtok>
<jtok eid="6" type="parameter_type" span="250:66:250:82">ExternalFileType</jtok>
<jtok eid="6" type="parameter_name" span="250:83:250:91">fileType</jtok>
<jtok eid="6" type="parameter_type" span="251:9:251:15">String</jtok>
<jtok eid="6" type="parameter_name" span="251:16:251:23">citeKey</jtok>
<jtok eid="6" type="parameter_name" span="251:33:251:41">newEntry</jtok>
<jtok eid="6" type="parameter_name" span="251:57:251:72">multipleEntries</jtok>
<jtok eid="6" type="class_or_interface_ref" span="253:6:253:12">String</jtok>
<jtok eid="6" type="local_variable_name" span="253:13:253:24">dialogTitle</jtok>
<jtok eid="6" type="primary_name_ref" span="253:27:253:34">Globals</jtok>
<jtok eid="6" type="method_call" span="253:35:253:39">lang</jtok>
<jtok eid="6" type="string_literal" span="253:40:253:57">"Link to file %0"</jtok>
<jtok eid="6" type="primary_name_ref" span="253:59:253:71">linkFileName</jtok>
<jtok eid="6" type="line_comment" span="254:9:254:83">//String dir = panel.metaData().getFileDirectory(fileType.getFieldName());</jtok>
<jtok eid="6" type="class_or_interface_ref" span="255:9:255:15">String</jtok>
<jtok eid="6" type="local_variable_name" span="255:16:255:19">dir</jtok>
<jtok eid="6" type="primary_name_ref" span="255:22:255:27">panel</jtok>
<jtok eid="6" type="method_call" span="255:28:255:36">metaData</jtok>
<jtok eid="6" type="method_call" span="255:39:255:55">getFileDirectory</jtok>
<jtok eid="6" type="primary_name_ref" span="255:56:255:66">GUIGlobals</jtok>
<jtok eid="6" type="qualified_name_ref" span="255:67:255:77">FILE_FIELD</jtok>
<jtok eid="6" type="primary_name_ref" span="256:14:256:17">dir</jtok>
<jtok eid="6" type="constructor_call" span="256:36:256:40">File</jtok>
<jtok eid="6" type="primary_name_ref" span="256:41:256:44">dir</jtok>
<jtok eid="6" type="method_call" span="256:47:256:53">exists</jtok>
<jtok eid="6" type="primary_name_ref" span="257:13:257:25">destDirLabel</jtok>
<jtok eid="6" type="method_call" span="257:26:257:33">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="257:34:257:41">Globals</jtok>
<jtok eid="6" type="method_call" span="257:42:257:46">lang</jtok>
<jtok eid="6" type="string_literal" span="257:47:257:93">"File directory is not set or does not exist."</jtok>
<jtok eid="6" type="primary_name_ref" span="258:13:258:28">copyRadioButton</jtok>
<jtok eid="6" type="method_call" span="258:29:258:39">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="259:13:259:28">moveRadioButton</jtok>
<jtok eid="6" type="method_call" span="259:29:259:39">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="260:13:260:28">renameToTextBox</jtok>
<jtok eid="6" type="method_call" span="260:29:260:39">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="261:13:261:27">renameCheckBox</jtok>
<jtok eid="6" type="method_call" span="261:28:261:38">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="262:13:262:24">linkInPlace</jtok>
<jtok eid="6" type="method_call" span="262:25:262:36">setSelected</jtok>
<jtok eid="6" type="primary_name_ref" span="264:13:264:25">destDirLabel</jtok>
<jtok eid="6" type="method_call" span="264:26:264:33">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="264:34:264:41">Globals</jtok>
<jtok eid="6" type="method_call" span="264:42:264:46">lang</jtok>
<jtok eid="6" type="string_literal" span="264:47:264:72">"File directory is '%0':"</jtok>
<jtok eid="6" type="primary_name_ref" span="264:74:264:77">dir</jtok>
<jtok eid="6" type="primary_name_ref" span="265:13:265:28">copyRadioButton</jtok>
<jtok eid="6" type="method_call" span="265:29:265:39">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="266:13:266:28">moveRadioButton</jtok>
<jtok eid="6" type="method_call" span="266:29:266:39">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="267:13:267:28">renameToTextBox</jtok>
<jtok eid="6" type="method_call" span="267:29:267:39">setEnabled</jtok>
<jtok eid="6" type="primary_name_ref" span="268:13:268:27">renameCheckBox</jtok>
<jtok eid="6" type="method_call" span="268:28:268:38">setEnabled</jtok>
<jtok eid="6" type="class_or_interface_ref" span="271:9:271:23">ChangeListener</jtok>
<jtok eid="6" type="local_variable_name" span="271:24:271:26">cl</jtok>
<jtok eid="6" type="constructor_call" span="271:33:271:47">ChangeListener</jtok>
<jtok eid="8" type="method_name" span="272:16:272:28">stateChanged</jtok>
<jtok eid="8" type="parameter_type" span="272:29:272:40">ChangeEvent</jtok>
<jtok eid="8" type="parameter_name" span="272:41:272:45">arg0</jtok>
<jtok eid="8" type="primary_name_ref" span="273:5:273:19">renameCheckBox</jtok>
<jtok eid="8" type="method_call" span="273:20:273:30">setEnabled</jtok>
<jtok eid="8" type="primary_name_ref" span="273:32:273:43">linkInPlace</jtok>
<jtok eid="8" type="method_call" span="273:44:273:54">isSelected</jtok>
<jtok eid="8" type="primary_name_ref" span="274:13:274:28">multipleEntries</jtok>
<jtok eid="8" type="primary_name_ref" span="275:5:275:20">renameToTextBox</jtok>
<jtok eid="8" type="method_call" span="275:21:275:31">setEnabled</jtok>
<jtok eid="8" type="primary_name_ref" span="275:33:275:44">linkInPlace</jtok>
<jtok eid="8" type="method_call" span="275:45:275:55">isSelected</jtok>
<jtok eid="8" type="primary_name_ref" span="276:13:276:28">multipleEntries</jtok>
<jtok eid="8" type="primary_name_ref" span="277:9:277:24">multipleEntries</jtok>
<jtok eid="8" type="primary_name_ref" span="277:28:277:43">renameToTextBox</jtok>
<jtok eid="8" type="method_call" span="277:44:277:51">setText</jtok>
<jtok eid="8" type="string_literal" span="277:52:277:70">"Multiple entries"</jtok>
<jtok eid="6" type="primary_name_ref" span="281:7:281:22">multipleEntries</jtok>
<jtok eid="6" type="primary_name_ref" span="282:4:282:15">linkInPlace</jtok>
<jtok eid="6" type="method_call" span="282:16:282:23">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="282:24:282:31">Globals</jtok>
<jtok eid="6" type="method_call" span="283:7:283:11">lang</jtok>
<jtok eid="6" type="string_literal" span="283:12:283:53">"Leave files in their current directory."</jtok>
<jtok eid="6" type="primary_name_ref" span="284:4:284:19">copyRadioButton</jtok>
<jtok eid="6" type="method_call" span="284:20:284:27">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="284:28:284:35">Globals</jtok>
<jtok eid="6" type="method_call" span="284:36:284:40">lang</jtok>
<jtok eid="6" type="string_literal" span="284:41:284:72">"Copy files to file directory."</jtok>
<jtok eid="6" type="primary_name_ref" span="286:4:286:19">moveRadioButton</jtok>
<jtok eid="6" type="method_call" span="286:20:286:27">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="286:28:286:35">Globals</jtok>
<jtok eid="6" type="method_call" span="286:36:286:40">lang</jtok>
<jtok eid="6" type="string_literal" span="286:41:286:72">"Move files to file directory."</jtok>
<jtok eid="6" type="primary_name_ref" span="288:4:288:15">linkInPlace</jtok>
<jtok eid="6" type="method_call" span="288:16:288:23">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="288:24:288:31">Globals</jtok>
<jtok eid="6" type="method_call" span="289:7:289:11">lang</jtok>
<jtok eid="6" type="string_literal" span="289:12:289:50">"Leave file in its current directory."</jtok>
<jtok eid="6" type="primary_name_ref" span="290:4:290:19">copyRadioButton</jtok>
<jtok eid="6" type="method_call" span="290:20:290:27">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="290:28:290:35">Globals</jtok>
<jtok eid="6" type="method_call" span="290:36:290:40">lang</jtok>
<jtok eid="6" type="string_literal" span="290:41:290:71">"Copy file to file directory."</jtok>
<jtok eid="6" type="primary_name_ref" span="291:4:291:19">moveRadioButton</jtok>
<jtok eid="6" type="method_call" span="291:20:291:27">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="291:28:291:35">Globals</jtok>
<jtok eid="6" type="method_call" span="291:36:291:40">lang</jtok>
<jtok eid="6" type="string_literal" span="291:41:291:71">"Move file to file directory."</jtok>
<jtok eid="6" type="primary_name_ref" span="294:9:294:23">renameCheckBox</jtok>
<jtok eid="6" type="method_call" span="294:24:294:31">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="294:32:294:39">Globals</jtok>
<jtok eid="6" type="method_call" span="294:40:294:44">lang</jtok>
<jtok eid="6" type="string_literal" span="294:45:294:61">"Rename file to"</jtok>
<jtok eid="6" type="string_literal" span="294:65:294:69">": "</jtok>
<jtok eid="6" type="primary_name_ref" span="295:9:295:24">renameToTextBox</jtok>
<jtok eid="6" type="method_call" span="295:25:295:32">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="295:33:295:40">citeKey</jtok>
<jtok eid="6" type="string_literal" span="295:51:295:60">"default"</jtok>
<jtok eid="6" type="primary_name_ref" span="295:63:295:70">citeKey</jtok>
<jtok eid="6" type="string_literal" span="295:73:295:76">"."</jtok>
<jtok eid="6" type="primary_name_ref" span="295:79:295:87">fileType</jtok>
<jtok eid="6" type="qualified_name_ref" span="295:88:295:97">extension</jtok>
<jtok eid="6" type="primary_name_ref" span="296:9:296:20">linkInPlace</jtok>
<jtok eid="6" type="method_call" span="296:21:296:38">addChangeListener</jtok>
<jtok eid="6" type="primary_name_ref" span="296:39:296:41">cl</jtok>
<jtok eid="6" type="primary_name_ref" span="297:9:297:11">cl</jtok>
<jtok eid="6" type="method_call" span="297:12:297:24">stateChanged</jtok>
<jtok eid="6" type="constructor_call" span="297:29:297:40">ChangeEvent</jtok>
<jtok eid="6" type="primary_name_ref" span="297:41:297:52">linkInPlace</jtok>
<jtok eid="6" type="class_or_interface_ref" span="300:10:300:16">Object</jtok>
<jtok eid="6" type="local_variable_name" span="300:19:300:27">messages</jtok>
<jtok eid="6" type="string_literal" span="300:31:300:63">"How would you like to link to "</jtok>
<jtok eid="6" type="primary_name_ref" span="300:66:300:78">linkFileName</jtok>
<jtok eid="6" type="string_literal" span="300:81:300:84">"?"</jtok>
<jtok eid="6" type="primary_name_ref" span="300:86:300:98">optionsPanel</jtok>
<jtok eid="6" type="primary_name_ref" span="301:20:301:31">JOptionPane</jtok>
<jtok eid="6" type="method_call" span="301:32:301:49">showConfirmDialog</jtok>
<jtok eid="6" type="primary_name_ref" span="301:50:301:55">frame</jtok>
<jtok eid="6" type="primary_name_ref" span="301:57:301:65">messages</jtok>
<jtok eid="6" type="primary_name_ref" span="301:67:301:78">dialogTitle</jtok>
<jtok eid="6" type="primary_name_ref" span="302:17:302:28">JOptionPane</jtok>
<jtok eid="6" type="qualified_name_ref" span="302:29:302:45">OK_CANCEL_OPTION</jtok>
<jtok eid="6" type="primary_name_ref" span="302:47:302:58">JOptionPane</jtok>
<jtok eid="6" type="qualified_name_ref" span="302:59:302:75">QUESTION_MESSAGE</jtok>
<jtok eid="6" type="primary_name_ref" span="304:13:304:24">linkInPlace</jtok>
<jtok eid="6" type="method_call" span="304:25:304:45">removeChangeListener</jtok>
<jtok eid="6" type="primary_name_ref" span="304:46:304:48">cl</jtok>
<jtok eid="1" type="block_comment" span="308:5:320:8">/**
     * Make a extension to the file.
     * 
     * @param entry
     *            The entry to extension from.
     * @param fileType
     *            The FileType associated with the file.
     * @param filename
     *            The path to the file.
     * @param edits
     *            An NamedCompound action this action is to be added to. If none
     *            is given, the edit is added to the panel's undoManager.
     */</jtok>
<jtok eid="9" type="method_name" span="321:18:321:24">doLink</jtok>
<jtok eid="9" type="parameter_type" span="321:25:321:36">BibtexEntry</jtok>
<jtok eid="9" type="parameter_name" span="321:37:321:42">entry</jtok>
<jtok eid="9" type="parameter_type" span="321:44:321:60">ExternalFileType</jtok>
<jtok eid="9" type="parameter_name" span="321:61:321:69">fileType</jtok>
<jtok eid="9" type="parameter_type" span="321:71:321:77">String</jtok>
<jtok eid="9" type="parameter_name" span="321:78:321:86">filename</jtok>
<jtok eid="9" type="parameter_name" span="322:17:322:31">avoidDuplicate</jtok>
<jtok eid="9" type="parameter_type" span="322:33:322:46">NamedCompound</jtok>
<jtok eid="9" type="parameter_name" span="322:47:322:52">edits</jtok>
<jtok eid="9" type="class_or_interface_ref" span="325:9:325:15">String</jtok>
<jtok eid="9" type="local_variable_name" span="325:16:325:24">oldValue</jtok>
<jtok eid="9" type="primary_name_ref" span="325:27:325:32">entry</jtok>
<jtok eid="9" type="method_call" span="325:33:325:41">getField</jtok>
<jtok eid="9" type="primary_name_ref" span="325:42:325:52">GUIGlobals</jtok>
<jtok eid="9" type="qualified_name_ref" span="325:53:325:63">FILE_FIELD</jtok>
<jtok eid="9" type="class_or_interface_ref" span="326:9:326:27">FileListTableModel</jtok>
<jtok eid="9" type="local_variable_name" span="326:28:326:30">tm</jtok>
<jtok eid="9" type="constructor_call" span="326:37:326:55">FileListTableModel</jtok>
<jtok eid="9" type="primary_name_ref" span="327:13:327:21">oldValue</jtok>
<jtok eid="9" type="primary_name_ref" span="328:13:328:15">tm</jtok>
<jtok eid="9" type="method_call" span="328:16:328:26">setContent</jtok>
<jtok eid="9" type="primary_name_ref" span="328:27:328:35">oldValue</jtok>
<jtok eid="9" type="line_comment" span="330:9:330:84">// If avoidDuplicate==true, we should check if this file is already linked:</jtok>
<jtok eid="9" type="primary_name_ref" span="331:13:331:27">avoidDuplicate</jtok>
<jtok eid="9" type="line_comment" span="332:13:332:59">// For comparison, find the absolute filename:</jtok>
<jtok eid="9" type="class_or_interface_ref" span="333:13:333:19">String</jtok>
<jtok eid="9" type="local_variable_name" span="333:20:333:27">fileDir</jtok>
<jtok eid="9" type="primary_name_ref" span="333:30:333:35">panel</jtok>
<jtok eid="9" type="method_call" span="333:36:333:44">metaData</jtok>
<jtok eid="9" type="method_call" span="333:47:333:63">getFileDirectory</jtok>
<jtok eid="9" type="primary_name_ref" span="333:64:333:74">GUIGlobals</jtok>
<jtok eid="9" type="qualified_name_ref" span="333:75:333:85">FILE_FIELD</jtok>
<jtok eid="9" type="class_or_interface_ref" span="334:13:334:19">String</jtok>
<jtok eid="9" type="local_variable_name" span="334:20:334:31">absFilename</jtok>
<jtok eid="9" type="constructor_call" span="334:41:334:45">File</jtok>
<jtok eid="9" type="primary_name_ref" span="334:46:334:54">filename</jtok>
<jtok eid="9" type="method_call" span="334:56:334:66">isAbsolute</jtok>
<jtok eid="9" type="primary_name_ref" span="334:74:334:81">fileDir</jtok>
<jtok eid="9" type="constructor_call" span="335:25:335:29">File</jtok>
<jtok eid="9" type="primary_name_ref" span="335:30:335:37">fileDir</jtok>
<jtok eid="9" type="primary_name_ref" span="335:39:335:47">filename</jtok>
<jtok eid="9" type="method_call" span="335:49:335:64">getAbsolutePath</jtok>
<jtok eid="9" type="primary_name_ref" span="335:69:335:77">filename</jtok>
<jtok eid="9" type="primary_name_ref" span="336:13:336:19">System</jtok>
<jtok eid="9" type="qualified_name_ref" span="336:20:336:23">out</jtok>
<jtok eid="9" type="method_call" span="336:24:336:31">println</jtok>
<jtok eid="9" type="string_literal" span="336:32:336:47">"absFilename: "</jtok>
<jtok eid="9" type="primary_name_ref" span="336:48:336:59">absFilename</jtok>
<jtok eid="9" type="local_variable_name" span="338:22:338:23">i</jtok>
<jtok eid="9" type="primary_name_ref" span="338:27:338:28">i</jtok>
<jtok eid="9" type="primary_name_ref" span="338:29:338:31">tm</jtok>
<jtok eid="9" type="method_call" span="338:32:338:43">getRowCount</jtok>
<jtok eid="9" type="primary_name_ref" span="338:47:338:48">i</jtok>
<jtok eid="9" type="class_or_interface_ref" span="339:17:339:30">FileListEntry</jtok>
<jtok eid="9" type="local_variable_name" span="339:31:339:38">flEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="339:41:339:43">tm</jtok>
<jtok eid="9" type="method_call" span="339:44:339:52">getEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="339:53:339:54">i</jtok>
<jtok eid="9" type="line_comment" span="340:17:340:70">// Find the absolute filename for this existing link:</jtok>
<jtok eid="9" type="class_or_interface_ref" span="341:17:341:23">String</jtok>
<jtok eid="9" type="local_variable_name" span="341:24:341:31">absName</jtok>
<jtok eid="9" type="constructor_call" span="341:41:341:45">File</jtok>
<jtok eid="9" type="primary_name_ref" span="341:46:341:53">flEntry</jtok>
<jtok eid="9" type="method_call" span="341:54:341:61">getLink</jtok>
<jtok eid="9" type="method_call" span="341:65:341:75">isAbsolute</jtok>
<jtok eid="9" type="primary_name_ref" span="341:83:341:90">fileDir</jtok>
<jtok eid="9" type="constructor_call" span="342:29:342:33">File</jtok>
<jtok eid="9" type="primary_name_ref" span="342:34:342:41">fileDir</jtok>
<jtok eid="9" type="primary_name_ref" span="342:43:342:50">flEntry</jtok>
<jtok eid="9" type="method_call" span="342:51:342:58">getLink</jtok>
<jtok eid="9" type="method_call" span="342:62:342:77">getAbsolutePath</jtok>
<jtok eid="9" type="primary_name_ref" span="342:82:342:89">flEntry</jtok>
<jtok eid="9" type="method_call" span="342:90:342:97">getLink</jtok>
<jtok eid="9" type="primary_name_ref" span="343:17:343:23">System</jtok>
<jtok eid="9" type="qualified_name_ref" span="343:24:343:27">out</jtok>
<jtok eid="9" type="method_call" span="343:28:343:35">println</jtok>
<jtok eid="9" type="string_literal" span="343:36:343:47">"absName: "</jtok>
<jtok eid="9" type="primary_name_ref" span="343:48:343:55">absName</jtok>
<jtok eid="9" type="line_comment" span="344:17:344:91">// If the filenames are equal, we don't need to link, so we simply return:</jtok>
<jtok eid="9" type="primary_name_ref" span="345:21:345:32">absFilename</jtok>
<jtok eid="9" type="method_call" span="345:33:345:39">equals</jtok>
<jtok eid="9" type="primary_name_ref" span="345:40:345:47">absName</jtok>
<jtok eid="9" type="primary_name_ref" span="350:9:350:11">tm</jtok>
<jtok eid="9" type="method_call" span="350:12:350:20">addEntry</jtok>
<jtok eid="9" type="primary_name_ref" span="350:21:350:23">tm</jtok>
<jtok eid="9" type="method_call" span="350:24:350:35">getRowCount</jtok>
<jtok eid="9" type="constructor_call" span="350:43:350:56">FileListEntry</jtok>
<jtok eid="9" type="string_literal" span="350:57:350:59">""</jtok>
<jtok eid="9" type="primary_name_ref" span="350:61:350:69">filename</jtok>
<jtok eid="9" type="primary_name_ref" span="350:71:350:79">fileType</jtok>
<jtok eid="9" type="class_or_interface_ref" span="351:9:351:15">String</jtok>
<jtok eid="9" type="local_variable_name" span="351:16:351:24">newValue</jtok>
<jtok eid="9" type="primary_name_ref" span="351:27:351:29">tm</jtok>
<jtok eid="9" type="method_call" span="351:30:351:53">getStringRepresentation</jtok>
<jtok eid="9" type="class_or_interface_ref" span="352:9:352:28">UndoableFieldChange</jtok>
<jtok eid="9" type="local_variable_name" span="352:29:352:33">edit</jtok>
<jtok eid="9" type="constructor_call" span="352:40:352:59">UndoableFieldChange</jtok>
<jtok eid="9" type="primary_name_ref" span="352:60:352:65">entry</jtok>
<jtok eid="9" type="primary_name_ref" span="352:67:352:77">GUIGlobals</jtok>
<jtok eid="9" type="qualified_name_ref" span="352:78:352:88">FILE_FIELD</jtok>
<jtok eid="9" type="primary_name_ref" span="353:17:353:25">oldValue</jtok>
<jtok eid="9" type="primary_name_ref" span="353:27:353:35">newValue</jtok>
<jtok eid="9" type="primary_name_ref" span="354:9:354:14">entry</jtok>
<jtok eid="9" type="method_call" span="354:15:354:23">setField</jtok>
<jtok eid="9" type="primary_name_ref" span="354:24:354:34">GUIGlobals</jtok>
<jtok eid="9" type="qualified_name_ref" span="354:35:354:45">FILE_FIELD</jtok>
<jtok eid="9" type="primary_name_ref" span="354:47:354:55">newValue</jtok>
<jtok eid="9" type="primary_name_ref" span="356:13:356:18">edits</jtok>
<jtok eid="9" type="primary_name_ref" span="357:13:357:18">panel</jtok>
<jtok eid="9" type="qualified_name_ref" span="357:19:357:30">undoManager</jtok>
<jtok eid="9" type="method_call" span="357:31:357:38">addEdit</jtok>
<jtok eid="9" type="primary_name_ref" span="357:39:357:43">edit</jtok>
<jtok eid="9" type="primary_name_ref" span="359:13:359:18">edits</jtok>
<jtok eid="9" type="method_call" span="359:19:359:26">addEdit</jtok>
<jtok eid="9" type="primary_name_ref" span="359:27:359:31">edit</jtok>
<jtok eid="1" type="block_comment" span="363:5:376:8">/**
     * Move the given file to the base directory for its file type, and rename
     * it to the given filename.
     * 
     * @param fileName
     *            The name of the source file.
     * @param fileType
     *            The FileType associated with the file.
     * @param destFilename
     *            The destination filename.
     * @param edits
     *            TODO we should be able to undo this action
     * @return true if the operation succeeded.
     */</jtok>
<jtok eid="10" type="method_name" span="377:21:377:27">doMove</jtok>
<jtok eid="10" type="parameter_type" span="377:28:377:34">String</jtok>
<jtok eid="10" type="parameter_name" span="377:35:377:43">fileName</jtok>
<jtok eid="10" type="parameter_type" span="377:45:377:61">ExternalFileType</jtok>
<jtok eid="10" type="parameter_name" span="377:62:377:70">fileType</jtok>
<jtok eid="10" type="parameter_type" span="377:72:377:78">String</jtok>
<jtok eid="10" type="parameter_name" span="377:79:377:91">destFilename</jtok>
<jtok eid="10" type="parameter_type" span="378:9:378:22">NamedCompound</jtok>
<jtok eid="10" type="parameter_name" span="378:23:378:28">edits</jtok>
<jtok eid="10" type="class_or_interface_ref" span="379:9:379:15">String</jtok>
<jtok eid="10" type="local_variable_name" span="379:16:379:19">dir</jtok>
<jtok eid="10" type="primary_name_ref" span="379:22:379:27">panel</jtok>
<jtok eid="10" type="method_call" span="379:28:379:36">metaData</jtok>
<jtok eid="10" type="method_call" span="379:39:379:55">getFileDirectory</jtok>
<jtok eid="10" type="primary_name_ref" span="379:56:379:66">GUIGlobals</jtok>
<jtok eid="10" type="qualified_name_ref" span="379:67:379:77">FILE_FIELD</jtok>
<jtok eid="10" type="primary_name_ref" span="380:14:380:17">dir</jtok>
<jtok eid="10" type="constructor_call" span="380:36:380:40">File</jtok>
<jtok eid="10" type="primary_name_ref" span="380:41:380:44">dir</jtok>
<jtok eid="10" type="method_call" span="380:47:380:53">exists</jtok>
<jtok eid="10" type="line_comment" span="381:13:381:78">// OOps, we don't know which directory to put it in, or the given</jtok>
<jtok eid="10" type="line_comment" span="382:13:382:37">// dir doesn't exist....</jtok>
<jtok eid="10" type="line_comment" span="383:13:383:40">// This should not happen!!</jtok>
<jtok eid="10" type="class_or_interface_ref" span="386:9:386:13">File</jtok>
<jtok eid="10" type="local_variable_name" span="386:14:386:22">fromFile</jtok>
<jtok eid="10" type="constructor_call" span="386:29:386:33">File</jtok>
<jtok eid="10" type="primary_name_ref" span="386:34:386:42">fileName</jtok>
<jtok eid="10" type="class_or_interface_ref" span="387:9:387:13">File</jtok>
<jtok eid="10" type="local_variable_name" span="387:14:387:20">toFile</jtok>
<jtok eid="10" type="constructor_call" span="387:27:387:31">File</jtok>
<jtok eid="10" type="primary_name_ref" span="387:32:387:35">dir</jtok>
<jtok eid="10" type="primary_name_ref" span="387:38:387:44">System</jtok>
<jtok eid="10" type="method_call" span="387:45:387:56">getProperty</jtok>
<jtok eid="10" type="string_literal" span="387:57:387:73">"file.separator"</jtok>
<jtok eid="10" type="primary_name_ref" span="387:77:387:89">destFilename</jtok>
<jtok eid="10" type="primary_name_ref" span="388:13:388:19">toFile</jtok>
<jtok eid="10" type="method_call" span="388:20:388:26">exists</jtok>
<jtok eid="10" type="local_variable_name" span="389:14:389:20">answer</jtok>
<jtok eid="10" type="primary_name_ref" span="389:23:389:34">JOptionPane</jtok>
<jtok eid="10" type="method_call" span="389:35:389:52">showConfirmDialog</jtok>
<jtok eid="10" type="primary_name_ref" span="389:53:389:58">frame</jtok>
<jtok eid="10" type="primary_name_ref" span="390:12:390:18">toFile</jtok>
<jtok eid="10" type="method_call" span="390:19:390:34">getAbsolutePath</jtok>
<jtok eid="10" type="string_literal" span="390:39:390:60">" exists. Overwrite?"</jtok>
<jtok eid="10" type="string_literal" span="390:62:390:79">"Overwrite file?"</jtok>
<jtok eid="10" type="primary_name_ref" span="391:12:391:23">JOptionPane</jtok>
<jtok eid="10" type="qualified_name_ref" span="391:24:391:37">YES_NO_OPTION</jtok>
<jtok eid="10" type="primary_name_ref" span="392:14:392:20">answer</jtok>
<jtok eid="10" type="primary_name_ref" span="392:24:392:35">JOptionPane</jtok>
<jtok eid="10" type="qualified_name_ref" span="392:36:392:45">NO_OPTION</jtok>
<jtok eid="10" type="primary_name_ref" span="397:14:397:22">fromFile</jtok>
<jtok eid="10" type="method_call" span="397:23:397:31">renameTo</jtok>
<jtok eid="10" type="primary_name_ref" span="397:32:397:38">toFile</jtok>
<jtok eid="10" type="primary_name_ref" span="398:10:398:21">JOptionPane</jtok>
<jtok eid="10" type="method_call" span="398:22:398:39">showMessageDialog</jtok>
<jtok eid="10" type="primary_name_ref" span="398:40:398:45">frame</jtok>
<jtok eid="10" type="string_literal" span="399:12:399:98">"There was an error moving the file. Please move the file manually and link in place."</jtok>
<jtok eid="10" type="string_literal" span="400:12:400:31">"Error moving file"</jtok>
<jtok eid="10" type="primary_name_ref" span="400:33:400:44">JOptionPane</jtok>
<jtok eid="10" type="qualified_name_ref" span="400:45:400:58">ERROR_MESSAGE</jtok>
<jtok eid="1" type="block_comment" span="408:5:421:8">/**
     * Copy the given file to the base directory for its file type, and give it
     * the given name.
     * 
     * @param fileName
     *            The name of the source file.
     * @param fileType
     *            The FileType associated with the file.
     * @param toFile
     *            The destination filename. An existing path-component will be removed.
     * @param edits
     *            TODO we should be able to undo this!
     * @return
     */</jtok>
<jtok eid="11" type="method_name" span="422:21:422:27">doCopy</jtok>
<jtok eid="11" type="parameter_type" span="422:28:422:34">String</jtok>
<jtok eid="11" type="parameter_name" span="422:35:422:43">fileName</jtok>
<jtok eid="11" type="parameter_type" span="422:45:422:61">ExternalFileType</jtok>
<jtok eid="11" type="parameter_name" span="422:62:422:70">fileType</jtok>
<jtok eid="11" type="parameter_type" span="422:72:422:78">String</jtok>
<jtok eid="11" type="parameter_name" span="422:79:422:85">toFile</jtok>
<jtok eid="11" type="parameter_type" span="423:9:423:22">NamedCompound</jtok>
<jtok eid="11" type="parameter_name" span="423:23:423:28">edits</jtok>
<jtok eid="11" type="class_or_interface_ref" span="425:9:425:15">String</jtok>
<jtok eid="11" type="local_variable_name" span="425:16:425:19">dir</jtok>
<jtok eid="11" type="primary_name_ref" span="425:22:425:27">panel</jtok>
<jtok eid="11" type="method_call" span="425:28:425:36">metaData</jtok>
<jtok eid="11" type="method_call" span="425:39:425:55">getFileDirectory</jtok>
<jtok eid="11" type="primary_name_ref" span="425:56:425:66">GUIGlobals</jtok>
<jtok eid="11" type="qualified_name_ref" span="425:67:425:77">FILE_FIELD</jtok>
<jtok eid="11" type="primary_name_ref" span="426:14:426:17">dir</jtok>
<jtok eid="11" type="constructor_call" span="426:36:426:40">File</jtok>
<jtok eid="11" type="primary_name_ref" span="426:41:426:44">dir</jtok>
<jtok eid="11" type="method_call" span="426:47:426:53">exists</jtok>
<jtok eid="11" type="line_comment" span="427:13:427:78">// OOps, we don't know which directory to put it in, or the given</jtok>
<jtok eid="11" type="line_comment" span="428:13:428:37">// dir doesn't exist....</jtok>
<jtok eid="11" type="primary_name_ref" span="429:13:429:19">System</jtok>
<jtok eid="11" type="qualified_name_ref" span="429:20:429:23">out</jtok>
<jtok eid="11" type="method_call" span="429:24:429:31">println</jtok>
<jtok eid="11" type="string_literal" span="429:32:429:39">"dir: "</jtok>
<jtok eid="11" type="primary_name_ref" span="429:42:429:45">dir</jtok>
<jtok eid="11" type="string_literal" span="429:48:429:58">"\t ext: "</jtok>
<jtok eid="11" type="primary_name_ref" span="429:61:429:69">fileType</jtok>
<jtok eid="11" type="method_call" span="429:70:429:82">getExtension</jtok>
<jtok eid="11" type="primary_name_ref" span="432:9:432:15">toFile</jtok>
<jtok eid="11" type="constructor_call" span="432:22:432:26">File</jtok>
<jtok eid="11" type="primary_name_ref" span="432:27:432:33">toFile</jtok>
<jtok eid="11" type="method_call" span="432:35:432:42">getName</jtok>
<jtok eid="11" type="class_or_interface_ref" span="434:9:434:13">File</jtok>
<jtok eid="11" type="local_variable_name" span="434:14:434:22">destFile</jtok>
<jtok eid="11" type="constructor_call" span="434:29:434:33">File</jtok>
<jtok eid="11" type="constructor_call" span="434:38:434:50">StringBuffer</jtok>
<jtok eid="11" type="primary_name_ref" span="434:51:434:54">dir</jtok>
<jtok eid="11" type="method_call" span="434:56:434:62">append</jtok>
<jtok eid="11" type="primary_name_ref" span="434:63:434:69">System</jtok>
<jtok eid="11" type="method_call" span="434:70:434:81">getProperty</jtok>
<jtok eid="11" type="string_literal" span="434:82:434:98">"file.separator"</jtok>
<jtok eid="11" type="method_call" span="435:14:435:20">append</jtok>
<jtok eid="11" type="primary_name_ref" span="435:21:435:27">toFile</jtok>
<jtok eid="11" type="method_call" span="435:29:435:37">toString</jtok>
<jtok eid="11" type="primary_name_ref" span="436:13:436:21">destFile</jtok>
<jtok eid="11" type="method_call" span="436:22:436:28">equals</jtok>
<jtok eid="11" type="constructor_call" span="436:33:436:37">File</jtok>
<jtok eid="11" type="primary_name_ref" span="436:38:436:46">fileName</jtok>
<jtok eid="11" type="line_comment" span="437:13:437:72">// File is already in the correct position. Don't override!</jtok>
<jtok eid="11" type="primary_name_ref" span="441:13:441:21">destFile</jtok>
<jtok eid="11" type="method_call" span="441:22:441:28">exists</jtok>
<jtok eid="11" type="local_variable_name" span="442:17:442:23">answer</jtok>
<jtok eid="11" type="primary_name_ref" span="442:26:442:37">JOptionPane</jtok>
<jtok eid="11" type="method_call" span="442:38:442:55">showConfirmDialog</jtok>
<jtok eid="11" type="primary_name_ref" span="442:56:442:61">frame</jtok>
<jtok eid="11" type="string_literal" span="442:63:442:66">"'"</jtok>
<jtok eid="11" type="primary_name_ref" span="442:69:442:77">destFile</jtok>
<jtok eid="11" type="method_call" span="442:78:442:85">getPath</jtok>
<jtok eid="11" type="string_literal" span="442:90:442:94">"' "</jtok>
<jtok eid="11" type="primary_name_ref" span="443:19:443:26">Globals</jtok>
<jtok eid="11" type="method_call" span="443:27:443:31">lang</jtok>
<jtok eid="11" type="string_literal" span="443:32:443:52">"exists. Overwrite?"</jtok>
<jtok eid="11" type="primary_name_ref" span="443:55:443:62">Globals</jtok>
<jtok eid="11" type="method_call" span="443:63:443:67">lang</jtok>
<jtok eid="11" type="string_literal" span="443:68:443:81">"File exists"</jtok>
<jtok eid="11" type="primary_name_ref" span="444:17:444:28">JOptionPane</jtok>
<jtok eid="11" type="qualified_name_ref" span="444:29:444:42">YES_NO_OPTION</jtok>
<jtok eid="11" type="primary_name_ref" span="444:44:444:55">JOptionPane</jtok>
<jtok eid="11" type="qualified_name_ref" span="444:56:444:72">QUESTION_MESSAGE</jtok>
<jtok eid="11" type="primary_name_ref" span="445:17:445:23">answer</jtok>
<jtok eid="11" type="primary_name_ref" span="445:27:445:38">JOptionPane</jtok>
<jtok eid="11" type="qualified_name_ref" span="445:39:445:48">NO_OPTION</jtok>
<jtok eid="11" type="primary_name_ref" span="449:13:449:17">Util</jtok>
<jtok eid="11" type="method_call" span="449:18:449:26">copyFile</jtok>
<jtok eid="11" type="constructor_call" span="449:31:449:35">File</jtok>
<jtok eid="11" type="primary_name_ref" span="449:36:449:44">fileName</jtok>
<jtok eid="11" type="primary_name_ref" span="449:47:449:55">destFile</jtok>
<jtok eid="11" type="class_or_interface_ref" span="450:18:450:29">IOException</jtok>
<jtok eid="11" type="local_variable_name" span="450:30:450:31">e</jtok>
<jtok eid="11" type="primary_name_ref" span="451:13:451:14">e</jtok>
<jtok eid="11" type="method_call" span="451:15:451:30">printStackTrace</jtok>
</jdoc>