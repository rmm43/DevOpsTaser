<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.external.TransferableFileLinkSelection" jls="java5">
<jent id="0" type="file" span="0:0:111:1">Source/jabref/src/java/net/sf/jabref/external/TransferableFileLinkSelection.java</jent>
<jent id="1" pid="0" type="class" span="22:1:111:1">net.sf.jabref.external.TransferableFileLinkSelection</jent>
<jent id="2" pid="1" type="method" span="26:5:49:5">net.sf.jabref.external.TransferableFileLinkSelection.TransferableFileLinkSelection(BasePanel,BibtexEntry[])</jent>
<jent id="3" pid="1" type="method" span="51:5:53:5">net.sf.jabref.external.TransferableFileLinkSelection.getTransferDataFlavors()</jent>
<jent id="4" pid="1" type="method" span="55:5:60:5">net.sf.jabref.external.TransferableFileLinkSelection.isDataFlavorSupported(DataFlavor)</jent>
<jent id="5" pid="1" type="method" span="62:5:67:5">net.sf.jabref.external.TransferableFileLinkSelection.getTransferData(DataFlavor)</jent>
<jtok eid="0" type="block_comment" span="19:1:21:4">/**
 * 
 */</jtok>
<jtok eid="1" type="class_name" span="22:14:22:43">TransferableFileLinkSelection</jtok>
<jtok eid="1" type="class_or_interface_ref" span="22:55:22:67">Transferable</jtok>
<jtok eid="1" type="class_or_interface_ref" span="24:5:24:9">List</jtok>
<jtok eid="1" type="class_or_interface_ref" span="24:10:24:14">File</jtok>
<jtok eid="1" type="field_name" span="24:16:24:24">fileList</jtok>
<jtok eid="1" type="constructor_call" span="24:31:24:40">ArrayList</jtok>
<jtok eid="1" type="constructor_call" span="24:41:24:45">File</jtok>
<jtok eid="2" type="method_name" span="26:12:26:41">TransferableFileLinkSelection</jtok>
<jtok eid="2" type="parameter_type" span="26:42:26:51">BasePanel</jtok>
<jtok eid="2" type="parameter_name" span="26:52:26:57">panel</jtok>
<jtok eid="2" type="parameter_type" span="26:59:26:70">BibtexEntry</jtok>
<jtok eid="2" type="parameter_name" span="26:73:26:82">selection</jtok>
<jtok eid="2" type="class_or_interface_ref" span="27:9:27:15">String</jtok>
<jtok eid="2" type="local_variable_name" span="27:16:27:17">s</jtok>
<jtok eid="2" type="primary_name_ref" span="27:20:27:29">selection</jtok>
<jtok eid="2" type="method_call" span="27:33:27:41">getField</jtok>
<jtok eid="2" type="primary_name_ref" span="27:42:27:52">GUIGlobals</jtok>
<jtok eid="2" type="qualified_name_ref" span="27:53:27:63">FILE_FIELD</jtok>
<jtok eid="2" type="class_or_interface_ref" span="28:9:28:27">FileListTableModel</jtok>
<jtok eid="2" type="local_variable_name" span="28:28:28:30">tm</jtok>
<jtok eid="2" type="constructor_call" span="28:37:28:55">FileListTableModel</jtok>
<jtok eid="2" type="primary_name_ref" span="29:13:29:14">s</jtok>
<jtok eid="2" type="primary_name_ref" span="30:13:30:15">tm</jtok>
<jtok eid="2" type="method_call" span="30:16:30:26">setContent</jtok>
<jtok eid="2" type="primary_name_ref" span="30:27:30:28">s</jtok>
<jtok eid="2" type="primary_name_ref" span="31:13:31:15">tm</jtok>
<jtok eid="2" type="method_call" span="31:16:31:27">getRowCount</jtok>
<jtok eid="2" type="line_comment" span="32:13:32:71">// Find the default directory for this field type, if any:</jtok>
<jtok eid="2" type="class_or_interface_ref" span="33:13:33:19">String</jtok>
<jtok eid="2" type="local_variable_name" span="33:20:33:23">dir</jtok>
<jtok eid="2" type="primary_name_ref" span="33:26:33:31">panel</jtok>
<jtok eid="2" type="method_call" span="33:32:33:40">metaData</jtok>
<jtok eid="2" type="method_call" span="33:43:33:59">getFileDirectory</jtok>
<jtok eid="2" type="primary_name_ref" span="33:60:33:70">GUIGlobals</jtok>
<jtok eid="2" type="qualified_name_ref" span="33:71:33:81">FILE_FIELD</jtok>
<jtok eid="2" type="line_comment" span="34:13:34:54">// Include the standard "file" directory:</jtok>
<jtok eid="2" type="class_or_interface_ref" span="35:13:35:19">String</jtok>
<jtok eid="2" type="local_variable_name" span="35:20:35:27">fileDir</jtok>
<jtok eid="2" type="primary_name_ref" span="35:30:35:35">panel</jtok>
<jtok eid="2" type="method_call" span="35:36:35:44">metaData</jtok>
<jtok eid="2" type="method_call" span="35:47:35:63">getFileDirectory</jtok>
<jtok eid="2" type="primary_name_ref" span="35:64:35:74">GUIGlobals</jtok>
<jtok eid="2" type="qualified_name_ref" span="35:75:35:85">FILE_FIELD</jtok>
<jtok eid="2" type="line_comment" span="36:13:36:54">// Include the directory of the bib file:</jtok>
<jtok eid="2" type="class_or_interface_ref" span="37:13:37:19">String</jtok>
<jtok eid="2" type="local_variable_name" span="37:22:37:26">dirs</jtok>
<jtok eid="2" type="primary_name_ref" span="38:17:38:22">panel</jtok>
<jtok eid="2" type="method_call" span="38:23:38:31">metaData</jtok>
<jtok eid="2" type="method_call" span="38:34:38:41">getFile</jtok>
<jtok eid="2" type="class_or_interface_ref" span="39:17:39:23">String</jtok>
<jtok eid="2" type="local_variable_name" span="39:24:39:35">databaseDir</jtok>
<jtok eid="2" type="primary_name_ref" span="39:38:39:43">panel</jtok>
<jtok eid="2" type="method_call" span="39:44:39:52">metaData</jtok>
<jtok eid="2" type="method_call" span="39:55:39:62">getFile</jtok>
<jtok eid="2" type="method_call" span="39:65:39:74">getParent</jtok>
<jtok eid="2" type="primary_name_ref" span="40:17:40:21">dirs</jtok>
<jtok eid="2" type="constructor_call" span="40:28:40:34">String</jtok>
<jtok eid="2" type="primary_name_ref" span="40:39:40:42">dir</jtok>
<jtok eid="2" type="primary_name_ref" span="40:44:40:51">fileDir</jtok>
<jtok eid="2" type="primary_name_ref" span="40:53:40:64">databaseDir</jtok>
<jtok eid="2" type="primary_name_ref" span="43:17:43:21">dirs</jtok>
<jtok eid="2" type="constructor_call" span="43:28:43:34">String</jtok>
<jtok eid="2" type="primary_name_ref" span="43:39:43:42">dir</jtok>
<jtok eid="2" type="primary_name_ref" span="43:44:43:51">fileDir</jtok>
<jtok eid="2" type="class_or_interface_ref" span="44:13:44:17">File</jtok>
<jtok eid="2" type="local_variable_name" span="44:18:44:25">expLink</jtok>
<jtok eid="2" type="primary_name_ref" span="44:28:44:32">Util</jtok>
<jtok eid="2" type="method_call" span="44:33:44:47">expandFilename</jtok>
<jtok eid="2" type="primary_name_ref" span="44:48:44:50">tm</jtok>
<jtok eid="2" type="method_call" span="44:51:44:59">getEntry</jtok>
<jtok eid="2" type="method_call" span="44:63:44:70">getLink</jtok>
<jtok eid="2" type="primary_name_ref" span="44:74:44:78">dirs</jtok>
<jtok eid="2" type="primary_name_ref" span="45:13:45:21">fileList</jtok>
<jtok eid="2" type="method_call" span="45:22:45:25">add</jtok>
<jtok eid="2" type="primary_name_ref" span="45:26:45:33">expLink</jtok>
<jtok eid="3" type="class_or_interface_ref" span="51:12:51:22">DataFlavor</jtok>
<jtok eid="3" type="method_name" span="51:25:51:47">getTransferDataFlavors</jtok>
<jtok eid="3" type="constructor_call" span="52:20:52:30">DataFlavor</jtok>
<jtok eid="3" type="primary_name_ref" span="52:34:52:44">DataFlavor</jtok>
<jtok eid="3" type="qualified_name_ref" span="52:45:52:63">javaFileListFlavor</jtok>
<jtok eid="3" type="line_comment" span="52:65:52:94">//, DataFlavor.stringFlavor};</jtok>
<jtok eid="4" type="method_name" span="55:20:55:41">isDataFlavorSupported</jtok>
<jtok eid="4" type="parameter_type" span="55:42:55:52">DataFlavor</jtok>
<jtok eid="4" type="parameter_name" span="55:53:55:63">dataFlavor</jtok>
<jtok eid="4" type="primary_name_ref" span="56:9:56:15">System</jtok>
<jtok eid="4" type="qualified_name_ref" span="56:16:56:19">out</jtok>
<jtok eid="4" type="method_call" span="56:20:56:27">println</jtok>
<jtok eid="4" type="string_literal" span="56:28:56:37">"Query: "</jtok>
<jtok eid="4" type="primary_name_ref" span="56:38:56:48">dataFlavor</jtok>
<jtok eid="4" type="method_call" span="56:49:56:72">getHumanPresentableName</jtok>
<jtok eid="4" type="string_literal" span="56:75:56:80">" , "</jtok>
<jtok eid="4" type="primary_name_ref" span="57:13:57:23">dataFlavor</jtok>
<jtok eid="4" type="method_call" span="57:24:57:53">getDefaultRepresentationClass</jtok>
<jtok eid="4" type="string_literal" span="57:56:57:61">" , "</jtok>
<jtok eid="4" type="primary_name_ref" span="57:62:57:72">dataFlavor</jtok>
<jtok eid="4" type="method_call" span="57:73:57:84">getMimeType</jtok>
<jtok eid="4" type="primary_name_ref" span="58:16:58:26">dataFlavor</jtok>
<jtok eid="4" type="method_call" span="58:27:58:33">equals</jtok>
<jtok eid="4" type="primary_name_ref" span="58:34:58:44">DataFlavor</jtok>
<jtok eid="4" type="qualified_name_ref" span="58:45:58:63">javaFileListFlavor</jtok>
<jtok eid="4" type="primary_name_ref" span="59:20:59:30">dataFlavor</jtok>
<jtok eid="4" type="method_call" span="59:31:59:37">equals</jtok>
<jtok eid="4" type="primary_name_ref" span="59:38:59:48">DataFlavor</jtok>
<jtok eid="4" type="qualified_name_ref" span="59:49:59:61">stringFlavor</jtok>
<jtok eid="5" type="class_or_interface_ref" span="62:12:62:18">Object</jtok>
<jtok eid="5" type="method_name" span="62:19:62:34">getTransferData</jtok>
<jtok eid="5" type="parameter_type" span="62:35:62:45">DataFlavor</jtok>
<jtok eid="5" type="parameter_name" span="62:46:62:56">dataFlavor</jtok>
<jtok eid="5" type="throws" span="62:65:62:91">UnsupportedFlavorException</jtok>
<jtok eid="5" type="throws" span="62:93:62:104">IOException</jtok>
<jtok eid="5" type="line_comment" span="63:9:63:64">//if (dataFlavor.equals(DataFlavor.javaFileListFlavor))</jtok>
<jtok eid="5" type="primary_name_ref" span="64:20:64:28">fileList</jtok>
<jtok eid="5" type="line_comment" span="65:9:65:15">//else</jtok>
<jtok eid="5" type="line_comment" span="66:9:66:29">//    return "test";</jtok>
<jtok eid="1" type="block_comment" span="68:5:110:9">/*
    private StringSelection ss;

    public TransferableFileLinkSelection(BasePanel panel, BibtexEntry[] selection) {
        String s = selection[0].getField(GUIGlobals.FILE_FIELD);
        FileListTableModel tm = new FileListTableModel();
        if (s != null)
            tm.setContent(s);
        if (tm.getRowCount() &gt; 0) {
            // Find the default directory for this field type, if any:
            String dir = panel.metaData().getFileDirectory(GUIGlobals.FILE_FIELD);
            // Include the standard "file" directory:
            String fileDir = panel.metaData().getFileDirectory(GUIGlobals.FILE_FIELD);
            // Include the directory of the bib file:
            String[] dirs;
            if (panel.metaData().getFile() != null) {
                String databaseDir = panel.metaData().getFile().getParent();
                dirs = new String[] { dir, fileDir, databaseDir };
            }
            else
                dirs = new String[] { dir, fileDir };
            System.out.println(tm.getEntry(0).getLink());
            for (int i = 0; i &lt; dirs.length; i++) {
                String dir1 = dirs[i];
                System.out.println("dir:"+dir1);
            }
            File expLink = Util.expandFilename(tm.getEntry(0).getLink(), dirs);
            try { 
                System.out.println(expLink.toURI().toURL().toString());
                ss = new StringSelection(expLink.toURI().toURL().toString());
                
            } catch (MalformedURLException ex) {
                ss = new StringSelection("");
            }
        }
        else
            ss = new StringSelection("");

    }

    public Transferable getTransferable() {
        return ss;
    } */</jtok>
</jdoc>