<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.gui.AutoCompleteListener" jls="java5">
<jent id="0" type="file" span="0:0:273:1">Source/jabref/src/java/net/sf/jabref/gui/AutoCompleteListener.java</jent>
<jent id="1" pid="0" type="class" span="16:1:273:1">net.sf.jabref.gui.AutoCompleteListener</jent>
<jent id="2" pid="1" type="method" span="33:5:35:5">net.sf.jabref.gui.AutoCompleteListener.AutoCompleteListener(AbstractAutoCompleter)</jent>
<jent id="3" pid="1" type="method" span="44:5:46:5">net.sf.jabref.gui.AutoCompleteListener.setNextFocusListener(FocusListener)</jent>
<jent id="4" pid="1" type="method" span="48:5:65:5">net.sf.jabref.gui.AutoCompleteListener.keyPressed(KeyEvent)</jent>
<jent id="5" pid="1" type="method" span="67:5:86:5">net.sf.jabref.gui.AutoCompleteListener.cycle(JTextComponent,int)</jent>
<jent id="6" pid="1" type="method" span="88:5:188:5">net.sf.jabref.gui.AutoCompleteListener.keyTyped(KeyEvent)</jent>
<jent id="7" pid="1" type="method" span="190:5:192:5">net.sf.jabref.gui.AutoCompleteListener.findCompletions(String,JTextComponent)</jent>
<jent id="8" pid="1" type="method" span="194:5:226:5">net.sf.jabref.gui.AutoCompleteListener.getCurrentWord(JTextComponent)</jent>
<jent id="9" pid="1" type="method" span="229:5:245:5">net.sf.jabref.gui.AutoCompleteListener.findNamePositionStatus(JTextComponent)</jent>
<jent id="10" pid="1" type="method" span="247:5:250:5">net.sf.jabref.gui.AutoCompleteListener.focusGained(FocusEvent)</jent>
<jent id="11" pid="1" type="method" span="252:5:259:5">net.sf.jabref.gui.AutoCompleteListener.focusLost(FocusEvent)</jent>
<jent id="12" pid="1" type="method" span="261:5:272:5">net.sf.jabref.gui.AutoCompleteListener.clearCurrentSuggestion(JTextComponent)</jent>
<jtok eid="0" type="block_comment" span="13:1:15:4">/**
 * Created by Morten O. Alver, 16 Feb. 2007
 */</jtok>
<jtok eid="1" type="class_name" span="16:14:16:34">AutoCompleteListener</jtok>
<jtok eid="1" type="class_or_interface_ref" span="16:43:16:53">KeyAdapter</jtok>
<jtok eid="1" type="class_or_interface_ref" span="16:65:16:78">FocusListener</jtok>
<jtok eid="1" type="class_or_interface_ref" span="19:5:19:26">AbstractAutoCompleter</jtok>
<jtok eid="1" type="field_name" span="19:27:19:36">completer</jtok>
<jtok eid="1" type="class_or_interface_ref" span="20:15:20:21">String</jtok>
<jtok eid="1" type="field_name" span="20:22:20:29">toSetIn</jtok>
<jtok eid="1" type="field_name" span="21:13:21:26">lastBeginning</jtok>
<jtok eid="1" type="field_name" span="22:19:22:36">lastCaretPosition</jtok>
<jtok eid="1" type="class_or_interface_ref" span="23:15:23:21">Object</jtok>
<jtok eid="1" type="field_name" span="23:24:23:39">lastCompletions</jtok>
<jtok eid="1" type="field_name" span="24:19:24:38">lastShownCompletion</jtok>
<jtok eid="1" type="line_comment" span="26:5:26:82">// This field is set if the focus listener should call another focus listener</jtok>
<jtok eid="1" type="line_comment" span="27:5:27:78">// after finishing. This is needed because the autocomplete listener must</jtok>
<jtok eid="1" type="line_comment" span="28:5:28:79">// run before the focus listener responsible for storing the current edit.</jtok>
<jtok eid="1" type="class_or_interface_ref" span="29:15:29:28">FocusListener</jtok>
<jtok eid="1" type="field_name" span="29:29:29:46">nextFocusListener</jtok>
<jtok eid="1" type="line_comment" span="31:5:31:70">// These variables keep track of the situation from time to time.</jtok>
<jtok eid="2" type="method_name" span="33:12:33:32">AutoCompleteListener</jtok>
<jtok eid="2" type="parameter_type" span="33:33:33:54">AbstractAutoCompleter</jtok>
<jtok eid="2" type="parameter_name" span="33:55:33:64">completer</jtok>
<jtok eid="2" type="qualified_name_ref" span="34:14:34:23">completer</jtok>
<jtok eid="2" type="primary_name_ref" span="34:26:34:35">completer</jtok>
<jtok eid="1" type="block_comment" span="37:5:43:8">/**
     * This method is used if the focus listener should call another focus listener
     * after finishing. This is needed because the autocomplete listener must
     * run before the focus listener responsible for storing the current edit.
     *
     * @param listener The listener to call.
     */</jtok>
<jtok eid="3" type="method_name" span="44:17:44:37">setNextFocusListener</jtok>
<jtok eid="3" type="parameter_type" span="44:38:44:51">FocusListener</jtok>
<jtok eid="3" type="parameter_name" span="44:52:44:60">listener</jtok>
<jtok eid="3" type="qualified_name_ref" span="45:14:45:31">nextFocusListener</jtok>
<jtok eid="3" type="primary_name_ref" span="45:34:45:42">listener</jtok>
<jtok eid="4" type="method_name" span="48:17:48:27">keyPressed</jtok>
<jtok eid="4" type="parameter_type" span="48:28:48:36">KeyEvent</jtok>
<jtok eid="4" type="parameter_name" span="48:37:48:38">e</jtok>
<jtok eid="4" type="primary_name_ref" span="49:11:49:18">toSetIn</jtok>
<jtok eid="4" type="primary_name_ref" span="49:32:49:33">e</jtok>
<jtok eid="4" type="method_call" span="49:34:49:44">getKeyCode</jtok>
<jtok eid="4" type="primary_name_ref" span="49:50:49:58">KeyEvent</jtok>
<jtok eid="4" type="qualified_name_ref" span="49:59:49:67">VK_ENTER</jtok>
<jtok eid="4" type="class_or_interface_ref" span="50:13:50:27">JTextComponent</jtok>
<jtok eid="4" type="local_variable_name" span="50:28:50:32">comp</jtok>
<jtok eid="4" type="class_or_interface_ref" span="50:36:50:50">JTextComponent</jtok>
<jtok eid="4" type="primary_name_ref" span="50:52:50:53">e</jtok>
<jtok eid="4" type="method_call" span="50:54:50:63">getSource</jtok>
<jtok eid="4" type="local_variable_name" span="51:17:51:20">end</jtok>
<jtok eid="4" type="primary_name_ref" span="51:23:51:27">comp</jtok>
<jtok eid="4" type="method_call" span="51:28:51:43">getSelectionEnd</jtok>
<jtok eid="4" type="primary_name_ref" span="52:13:52:17">comp</jtok>
<jtok eid="4" type="method_call" span="52:18:52:24">select</jtok>
<jtok eid="4" type="primary_name_ref" span="52:25:52:28">end</jtok>
<jtok eid="4" type="primary_name_ref" span="52:30:52:33">end</jtok>
<jtok eid="4" type="primary_name_ref" span="53:13:53:14">e</jtok>
<jtok eid="4" type="method_call" span="53:15:53:22">consume</jtok>
<jtok eid="4" type="line_comment" span="56:9:56:78">// Cycle through alternative completions when user presses PGUP/PGDN:</jtok>
<jtok eid="4" type="primary_name_ref" span="57:19:57:20">e</jtok>
<jtok eid="4" type="method_call" span="57:21:57:31">getKeyCode</jtok>
<jtok eid="4" type="primary_name_ref" span="57:37:57:45">KeyEvent</jtok>
<jtok eid="4" type="qualified_name_ref" span="57:46:57:58">VK_PAGE_DOWN</jtok>
<jtok eid="4" type="primary_name_ref" span="57:64:57:79">lastCompletions</jtok>
<jtok eid="4" type="method_call" span="58:13:58:18">cycle</jtok>
<jtok eid="4" type="class_or_interface_ref" span="58:20:58:34">JTextComponent</jtok>
<jtok eid="4" type="primary_name_ref" span="58:36:58:37">e</jtok>
<jtok eid="4" type="method_call" span="58:38:58:47">getSource</jtok>
<jtok eid="4" type="primary_name_ref" span="59:13:59:14">e</jtok>
<jtok eid="4" type="method_call" span="59:15:59:22">consume</jtok>
<jtok eid="4" type="primary_name_ref" span="61:19:61:20">e</jtok>
<jtok eid="4" type="method_call" span="61:21:61:31">getKeyCode</jtok>
<jtok eid="4" type="primary_name_ref" span="61:37:61:45">KeyEvent</jtok>
<jtok eid="4" type="qualified_name_ref" span="61:46:61:56">VK_PAGE_UP</jtok>
<jtok eid="4" type="primary_name_ref" span="61:62:61:77">lastCompletions</jtok>
<jtok eid="4" type="method_call" span="62:13:62:18">cycle</jtok>
<jtok eid="4" type="class_or_interface_ref" span="62:20:62:34">JTextComponent</jtok>
<jtok eid="4" type="primary_name_ref" span="62:36:62:37">e</jtok>
<jtok eid="4" type="method_call" span="62:38:62:47">getSource</jtok>
<jtok eid="4" type="primary_name_ref" span="63:13:63:14">e</jtok>
<jtok eid="4" type="method_call" span="63:15:63:22">consume</jtok>
<jtok eid="5" type="method_name" span="67:18:67:23">cycle</jtok>
<jtok eid="5" type="parameter_type" span="67:24:67:38">JTextComponent</jtok>
<jtok eid="5" type="parameter_name" span="67:39:67:43">comp</jtok>
<jtok eid="5" type="parameter_name" span="67:49:67:58">increment</jtok>
<jtok eid="5" type="primary_name_ref" span="68:9:68:28">lastShownCompletion</jtok>
<jtok eid="5" type="primary_name_ref" span="68:32:68:41">increment</jtok>
<jtok eid="5" type="primary_name_ref" span="69:13:69:32">lastShownCompletion</jtok>
<jtok eid="5" type="primary_name_ref" span="69:36:69:51">lastCompletions</jtok>
<jtok eid="5" type="qualified_name_ref" span="69:52:69:58">length</jtok>
<jtok eid="5" type="primary_name_ref" span="70:13:70:32">lastShownCompletion</jtok>
<jtok eid="5" type="primary_name_ref" span="71:18:71:37">lastShownCompletion</jtok>
<jtok eid="5" type="primary_name_ref" span="72:13:72:32">lastShownCompletion</jtok>
<jtok eid="5" type="primary_name_ref" span="72:35:72:50">lastCompletions</jtok>
<jtok eid="5" type="qualified_name_ref" span="72:51:72:57">length</jtok>
<jtok eid="5" type="class_or_interface_ref" span="73:9:73:15">String</jtok>
<jtok eid="5" type="local_variable_name" span="73:16:73:19">sno</jtok>
<jtok eid="5" type="class_or_interface_ref" span="73:23:73:29">String</jtok>
<jtok eid="5" type="primary_name_ref" span="73:31:73:46">lastCompletions</jtok>
<jtok eid="5" type="primary_name_ref" span="73:47:73:66">lastShownCompletion</jtok>
<jtok eid="5" type="primary_name_ref" span="74:9:74:16">toSetIn</jtok>
<jtok eid="5" type="primary_name_ref" span="74:19:74:22">sno</jtok>
<jtok eid="5" type="method_call" span="74:23:74:32">substring</jtok>
<jtok eid="5" type="primary_name_ref" span="74:33:74:46">lastBeginning</jtok>
<jtok eid="5" type="method_call" span="74:47:74:53">length</jtok>
<jtok eid="5" type="class_or_interface_ref" span="75:9:75:21">StringBuffer</jtok>
<jtok eid="5" type="local_variable_name" span="75:22:75:29">alltext</jtok>
<jtok eid="5" type="constructor_call" span="75:36:75:48">StringBuffer</jtok>
<jtok eid="5" type="primary_name_ref" span="75:49:75:53">comp</jtok>
<jtok eid="5" type="method_call" span="75:54:75:61">getText</jtok>
<jtok eid="5" type="local_variable_name" span="76:13:76:25">deletedChars</jtok>
<jtok eid="5" type="primary_name_ref" span="76:28:76:32">comp</jtok>
<jtok eid="5" type="method_call" span="76:33:76:48">getSelectionEnd</jtok>
<jtok eid="5" type="primary_name_ref" span="76:53:76:57">comp</jtok>
<jtok eid="5" type="method_call" span="76:58:76:75">getSelectionStart</jtok>
<jtok eid="5" type="primary_name_ref" span="77:9:77:16">alltext</jtok>
<jtok eid="5" type="method_call" span="77:17:77:23">delete</jtok>
<jtok eid="5" type="primary_name_ref" span="77:24:77:28">comp</jtok>
<jtok eid="5" type="method_call" span="77:29:77:46">getSelectionStart</jtok>
<jtok eid="5" type="primary_name_ref" span="77:50:77:54">comp</jtok>
<jtok eid="5" type="method_call" span="77:55:77:70">getSelectionEnd</jtok>
<jtok eid="5" type="local_variable_name" span="78:13:78:15">cp</jtok>
<jtok eid="5" type="primary_name_ref" span="78:18:78:22">comp</jtok>
<jtok eid="5" type="method_call" span="78:23:78:39">getCaretPosition</jtok>
<jtok eid="5" type="primary_name_ref" span="78:44:78:56">deletedChars</jtok>
<jtok eid="5" type="primary_name_ref" span="79:9:79:16">alltext</jtok>
<jtok eid="5" type="method_call" span="79:17:79:23">insert</jtok>
<jtok eid="5" type="primary_name_ref" span="79:24:79:26">cp</jtok>
<jtok eid="5" type="primary_name_ref" span="79:28:79:35">toSetIn</jtok>
<jtok eid="5" type="method_call" span="79:36:79:45">substring</jtok>
<jtok eid="5" type="line_comment" span="80:9:80:39">//Util.pr(alltext.toString());</jtok>
<jtok eid="5" type="primary_name_ref" span="81:9:81:13">comp</jtok>
<jtok eid="5" type="method_call" span="81:14:81:21">setText</jtok>
<jtok eid="5" type="primary_name_ref" span="81:22:81:29">alltext</jtok>
<jtok eid="5" type="method_call" span="81:30:81:38">toString</jtok>
<jtok eid="5" type="primary_name_ref" span="82:9:82:13">comp</jtok>
<jtok eid="5" type="method_call" span="82:14:82:30">setCaretPosition</jtok>
<jtok eid="5" type="primary_name_ref" span="82:31:82:33">cp</jtok>
<jtok eid="5" type="primary_name_ref" span="82:34:82:41">toSetIn</jtok>
<jtok eid="5" type="method_call" span="82:42:82:48">length</jtok>
<jtok eid="5" type="primary_name_ref" span="83:9:83:13">comp</jtok>
<jtok eid="5" type="method_call" span="83:14:83:20">select</jtok>
<jtok eid="5" type="primary_name_ref" span="83:21:83:23">cp</jtok>
<jtok eid="5" type="primary_name_ref" span="83:25:83:27">cp</jtok>
<jtok eid="5" type="primary_name_ref" span="83:30:83:33">sno</jtok>
<jtok eid="5" type="method_call" span="83:34:83:40">length</jtok>
<jtok eid="5" type="primary_name_ref" span="83:45:83:58">lastBeginning</jtok>
<jtok eid="5" type="method_call" span="83:59:83:65">length</jtok>
<jtok eid="5" type="primary_name_ref" span="84:9:84:26">lastCaretPosition</jtok>
<jtok eid="5" type="primary_name_ref" span="84:29:84:33">comp</jtok>
<jtok eid="5" type="method_call" span="84:34:84:50">getCaretPosition</jtok>
<jtok eid="5" type="line_comment" span="85:9:85:56">//System.out.println("ToSetIn: '"+toSetIn+"'");</jtok>
<jtok eid="6" type="method_name" span="88:17:88:25">keyTyped</jtok>
<jtok eid="6" type="parameter_type" span="88:26:88:34">KeyEvent</jtok>
<jtok eid="6" type="parameter_name" span="88:35:88:36">e</jtok>
<jtok eid="6" type="local_variable_name" span="89:14:89:16">ch</jtok>
<jtok eid="6" type="primary_name_ref" span="89:19:89:20">e</jtok>
<jtok eid="6" type="method_call" span="89:21:89:31">getKeyChar</jtok>
<jtok eid="6" type="primary_name_ref" span="90:13:90:22">Character</jtok>
<jtok eid="6" type="method_call" span="90:23:90:31">isLetter</jtok>
<jtok eid="6" type="primary_name_ref" span="90:32:90:34">ch</jtok>
<jtok eid="6" type="class_or_interface_ref" span="91:13:91:27">JTextComponent</jtok>
<jtok eid="6" type="local_variable_name" span="91:28:91:32">comp</jtok>
<jtok eid="6" type="class_or_interface_ref" span="91:36:91:50">JTextComponent</jtok>
<jtok eid="6" type="primary_name_ref" span="91:52:91:53">e</jtok>
<jtok eid="6" type="method_call" span="91:54:91:63">getSource</jtok>
<jtok eid="6" type="primary_name_ref" span="93:18:93:25">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="93:39:93:46">toSetIn</jtok>
<jtok eid="6" type="method_call" span="93:47:93:53">length</jtok>
<jtok eid="6" type="primary_name_ref" span="94:22:94:24">ch</jtok>
<jtok eid="6" type="primary_name_ref" span="94:28:94:35">toSetIn</jtok>
<jtok eid="6" type="method_call" span="94:36:94:42">charAt</jtok>
<jtok eid="6" type="line_comment" span="95:17:95:66">// User continues on the word that was suggested.</jtok>
<jtok eid="6" type="primary_name_ref" span="96:17:96:24">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="96:27:96:34">toSetIn</jtok>
<jtok eid="6" type="method_call" span="96:35:96:44">substring</jtok>
<jtok eid="6" type="primary_name_ref" span="97:21:97:28">toSetIn</jtok>
<jtok eid="6" type="method_call" span="97:29:97:35">length</jtok>
<jtok eid="6" type="local_variable_name" span="98:25:98:27">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="98:30:98:34">comp</jtok>
<jtok eid="6" type="method_call" span="98:35:98:51">getCaretPosition</jtok>
<jtok eid="6" type="line_comment" span="99:21:99:60">//comp.setCaretPosition(cp+1-toSetIn.);</jtok>
<jtok eid="6" type="line_comment" span="100:21:100:72">//System.out.println(cp-toSetIn.length()+" - "+cp);</jtok>
<jtok eid="6" type="primary_name_ref" span="101:21:101:25">comp</jtok>
<jtok eid="6" type="method_call" span="101:26:101:32">select</jtok>
<jtok eid="6" type="primary_name_ref" span="101:33:101:35">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="101:42:101:49">toSetIn</jtok>
<jtok eid="6" type="method_call" span="101:50:101:56">length</jtok>
<jtok eid="6" type="primary_name_ref" span="101:60:101:62">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="102:21:102:34">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="102:37:102:50">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="102:53:102:55">ch</jtok>
<jtok eid="6" type="primary_name_ref" span="104:21:104:22">e</jtok>
<jtok eid="6" type="method_call" span="104:23:104:30">consume</jtok>
<jtok eid="6" type="primary_name_ref" span="105:21:105:38">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="105:41:105:45">comp</jtok>
<jtok eid="6" type="method_call" span="105:46:105:62">getCaretPosition</jtok>
<jtok eid="6" type="line_comment" span="107:21:107:71">//System.out.println("Added char: '"+toSetIn+"'");</jtok>
<jtok eid="6" type="line_comment" span="108:21:108:80">//System.out.println("LastBeginning: '"+lastBeginning+"'");</jtok>
<jtok eid="6" type="primary_name_ref" span="110:21:110:36">lastCompletions</jtok>
<jtok eid="6" type="method_call" span="110:39:110:54">findCompletions</jtok>
<jtok eid="6" type="primary_name_ref" span="110:55:110:68">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="110:70:110:74">comp</jtok>
<jtok eid="6" type="primary_name_ref" span="111:21:111:40">lastShownCompletion</jtok>
<jtok eid="6" type="local_variable_name" span="112:30:112:31">i</jtok>
<jtok eid="6" type="primary_name_ref" span="112:37:112:38">i</jtok>
<jtok eid="6" type="primary_name_ref" span="112:41:112:56">lastCompletions</jtok>
<jtok eid="6" type="qualified_name_ref" span="112:57:112:63">length</jtok>
<jtok eid="6" type="primary_name_ref" span="112:65:112:66">i</jtok>
<jtok eid="6" type="class_or_interface_ref" span="113:25:113:31">Object</jtok>
<jtok eid="6" type="local_variable_name" span="113:32:113:46">lastCompletion</jtok>
<jtok eid="6" type="primary_name_ref" span="113:49:113:64">lastCompletions</jtok>
<jtok eid="6" type="primary_name_ref" span="113:65:113:66">i</jtok>
<jtok eid="6" type="line_comment" span="114:25:114:85">//System.out.println("Completion["+i+"] = "+lastCompletion);</jtok>
<jtok eid="6" type="class_or_interface_ref" span="115:31:115:37">String</jtok>
<jtok eid="6" type="primary_name_ref" span="115:38:115:52">lastCompletion</jtok>
<jtok eid="6" type="method_call" span="115:54:115:62">endsWith</jtok>
<jtok eid="6" type="primary_name_ref" span="115:63:115:70">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="116:29:116:48">lastShownCompletion</jtok>
<jtok eid="6" type="primary_name_ref" span="116:51:116:52">i</jtok>
<jtok eid="6" type="line_comment" span="121:21:121:77">//System.out.println("Index now: "+lastShownCompletion);</jtok>
<jtok eid="6" type="primary_name_ref" span="122:25:122:32">toSetIn</jtok>
<jtok eid="6" type="method_call" span="122:33:122:39">length</jtok>
<jtok eid="6" type="primary_name_ref" span="123:25:123:32">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="128:18:128:25">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="128:40:128:47">toSetIn</jtok>
<jtok eid="6" type="method_call" span="128:48:128:54">length</jtok>
<jtok eid="6" type="primary_name_ref" span="129:22:129:24">ch</jtok>
<jtok eid="6" type="primary_name_ref" span="129:28:129:35">toSetIn</jtok>
<jtok eid="6" type="method_call" span="129:36:129:42">charAt</jtok>
<jtok eid="6" type="line_comment" span="130:17:130:66">// User discontinues the word that was suggested.</jtok>
<jtok eid="6" type="primary_name_ref" span="131:17:131:30">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="131:33:131:46">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="131:49:131:51">ch</jtok>
<jtok eid="6" type="class_or_interface_ref" span="132:17:132:23">Object</jtok>
<jtok eid="6" type="local_variable_name" span="132:26:132:35">completed</jtok>
<jtok eid="6" type="method_call" span="132:38:132:53">findCompletions</jtok>
<jtok eid="6" type="primary_name_ref" span="132:54:132:67">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="132:69:132:73">comp</jtok>
<jtok eid="6" type="primary_name_ref" span="133:22:133:31">completed</jtok>
<jtok eid="6" type="primary_name_ref" span="133:45:133:54">completed</jtok>
<jtok eid="6" type="qualified_name_ref" span="133:55:133:61">length</jtok>
<jtok eid="6" type="primary_name_ref" span="134:21:134:40">lastShownCompletion</jtok>
<jtok eid="6" type="primary_name_ref" span="135:21:135:36">lastCompletions</jtok>
<jtok eid="6" type="primary_name_ref" span="135:39:135:48">completed</jtok>
<jtok eid="6" type="class_or_interface_ref" span="136:21:136:27">String</jtok>
<jtok eid="6" type="local_variable_name" span="136:28:136:31">sno</jtok>
<jtok eid="6" type="class_or_interface_ref" span="136:35:136:41">String</jtok>
<jtok eid="6" type="primary_name_ref" span="136:44:136:53">completed</jtok>
<jtok eid="6" type="local_variable_name" span="137:25:137:32">lastLen</jtok>
<jtok eid="6" type="primary_name_ref" span="137:35:137:42">toSetIn</jtok>
<jtok eid="6" type="method_call" span="137:43:137:49">length</jtok>
<jtok eid="6" type="primary_name_ref" span="138:21:138:28">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="138:31:138:34">sno</jtok>
<jtok eid="6" type="method_call" span="138:35:138:44">substring</jtok>
<jtok eid="6" type="primary_name_ref" span="138:45:138:58">lastBeginning</jtok>
<jtok eid="6" type="method_call" span="138:59:138:65">length</jtok>
<jtok eid="6" type="class_or_interface_ref" span="139:21:139:27">String</jtok>
<jtok eid="6" type="local_variable_name" span="139:28:139:32">text</jtok>
<jtok eid="6" type="primary_name_ref" span="139:35:139:39">comp</jtok>
<jtok eid="6" type="method_call" span="139:40:139:47">getText</jtok>
<jtok eid="6" type="line_comment" span="140:21:140:43">//Util.pr(""+lastLen);</jtok>
<jtok eid="6" type="primary_name_ref" span="141:21:141:25">comp</jtok>
<jtok eid="6" type="method_call" span="141:26:141:33">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="141:34:141:38">text</jtok>
<jtok eid="6" type="method_call" span="141:39:141:48">substring</jtok>
<jtok eid="6" type="primary_name_ref" span="141:52:141:69">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="141:72:141:79">lastLen</jtok>
<jtok eid="6" type="primary_name_ref" span="142:31:142:38">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="143:31:143:35">text</jtok>
<jtok eid="6" type="method_call" span="143:36:143:45">substring</jtok>
<jtok eid="6" type="primary_name_ref" span="143:46:143:63">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="144:21:144:25">comp</jtok>
<jtok eid="6" type="method_call" span="144:26:144:32">select</jtok>
<jtok eid="6" type="primary_name_ref" span="144:33:144:50">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="144:57:144:64">lastLen</jtok>
<jtok eid="6" type="primary_name_ref" span="145:29:145:46">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="145:49:145:56">toSetIn</jtok>
<jtok eid="6" type="method_call" span="145:57:145:63">length</jtok>
<jtok eid="6" type="primary_name_ref" span="145:68:145:75">lastLen</jtok>
<jtok eid="6" type="primary_name_ref" span="147:21:147:38">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="147:41:147:45">comp</jtok>
<jtok eid="6" type="method_call" span="147:46:147:62">getCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="148:21:148:22">e</jtok>
<jtok eid="6" type="method_call" span="148:23:148:30">consume</jtok>
<jtok eid="6" type="primary_name_ref" span="151:21:151:28">toSetIn</jtok>
<jtok eid="6" type="class_or_interface_ref" span="157:13:157:25">StringBuffer</jtok>
<jtok eid="6" type="local_variable_name" span="157:26:157:37">currentword</jtok>
<jtok eid="6" type="method_call" span="157:40:157:54">getCurrentWord</jtok>
<jtok eid="6" type="primary_name_ref" span="157:55:157:59">comp</jtok>
<jtok eid="6" type="primary_name_ref" span="158:17:158:28">currentword</jtok>
<jtok eid="6" type="primary_name_ref" span="160:13:160:24">currentword</jtok>
<jtok eid="6" type="method_call" span="160:25:160:31">append</jtok>
<jtok eid="6" type="primary_name_ref" span="160:32:160:34">ch</jtok>
<jtok eid="6" type="class_or_interface_ref" span="162:13:162:19">Object</jtok>
<jtok eid="6" type="local_variable_name" span="162:22:162:31">completed</jtok>
<jtok eid="6" type="method_call" span="162:34:162:49">findCompletions</jtok>
<jtok eid="6" type="primary_name_ref" span="162:50:162:61">currentword</jtok>
<jtok eid="6" type="method_call" span="162:62:162:70">toString</jtok>
<jtok eid="6" type="primary_name_ref" span="162:74:162:78">comp</jtok>
<jtok eid="6" type="local_variable_name" span="164:17:164:19">no</jtok>
<jtok eid="6" type="line_comment" span="164:25:164:78">// We use the first word in the array of completions.</jtok>
<jtok eid="6" type="primary_name_ref" span="165:18:165:27">completed</jtok>
<jtok eid="6" type="primary_name_ref" span="165:41:165:50">completed</jtok>
<jtok eid="6" type="qualified_name_ref" span="165:51:165:57">length</jtok>
<jtok eid="6" type="primary_name_ref" span="166:17:166:36">lastShownCompletion</jtok>
<jtok eid="6" type="primary_name_ref" span="167:17:167:32">lastCompletions</jtok>
<jtok eid="6" type="primary_name_ref" span="167:35:167:44">completed</jtok>
<jtok eid="6" type="class_or_interface_ref" span="168:17:168:23">String</jtok>
<jtok eid="6" type="local_variable_name" span="168:24:168:27">sno</jtok>
<jtok eid="6" type="class_or_interface_ref" span="168:31:168:37">String</jtok>
<jtok eid="6" type="primary_name_ref" span="168:40:168:49">completed</jtok>
<jtok eid="6" type="primary_name_ref" span="168:50:168:52">no</jtok>
<jtok eid="6" type="primary_name_ref" span="169:17:169:24">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="169:27:169:30">sno</jtok>
<jtok eid="6" type="method_call" span="169:31:169:40">substring</jtok>
<jtok eid="6" type="primary_name_ref" span="169:41:169:52">currentword</jtok>
<jtok eid="6" type="method_call" span="169:53:169:59">length</jtok>
<jtok eid="6" type="line_comment" span="170:17:170:68">//Util.pr("AutoCompListener: Found "+completed[0]);</jtok>
<jtok eid="6" type="class_or_interface_ref" span="171:17:171:29">StringBuffer</jtok>
<jtok eid="6" type="local_variable_name" span="171:30:171:37">alltext</jtok>
<jtok eid="6" type="constructor_call" span="171:44:171:56">StringBuffer</jtok>
<jtok eid="6" type="primary_name_ref" span="171:57:171:61">comp</jtok>
<jtok eid="6" type="method_call" span="171:62:171:69">getText</jtok>
<jtok eid="6" type="local_variable_name" span="172:21:172:23">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="172:26:172:30">comp</jtok>
<jtok eid="6" type="method_call" span="172:31:172:47">getCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="173:17:173:24">alltext</jtok>
<jtok eid="6" type="method_call" span="173:25:173:31">insert</jtok>
<jtok eid="6" type="primary_name_ref" span="173:32:173:34">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="173:36:173:43">toSetIn</jtok>
<jtok eid="6" type="line_comment" span="174:17:174:47">//Util.pr(alltext.toString());</jtok>
<jtok eid="6" type="primary_name_ref" span="175:17:175:21">comp</jtok>
<jtok eid="6" type="method_call" span="175:22:175:29">setText</jtok>
<jtok eid="6" type="primary_name_ref" span="175:30:175:37">alltext</jtok>
<jtok eid="6" type="method_call" span="175:38:175:46">toString</jtok>
<jtok eid="6" type="primary_name_ref" span="176:17:176:21">comp</jtok>
<jtok eid="6" type="method_call" span="176:22:176:38">setCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="176:39:176:41">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="177:17:177:21">comp</jtok>
<jtok eid="6" type="method_call" span="177:22:177:28">select</jtok>
<jtok eid="6" type="primary_name_ref" span="177:29:177:31">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="177:37:177:39">cp</jtok>
<jtok eid="6" type="primary_name_ref" span="177:46:177:49">sno</jtok>
<jtok eid="6" type="method_call" span="177:50:177:56">length</jtok>
<jtok eid="6" type="primary_name_ref" span="177:61:177:72">currentword</jtok>
<jtok eid="6" type="method_call" span="177:73:177:79">length</jtok>
<jtok eid="6" type="primary_name_ref" span="178:17:178:18">e</jtok>
<jtok eid="6" type="method_call" span="178:19:178:26">consume</jtok>
<jtok eid="6" type="primary_name_ref" span="179:17:179:34">lastCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="179:37:179:41">comp</jtok>
<jtok eid="6" type="method_call" span="179:42:179:58">getCaretPosition</jtok>
<jtok eid="6" type="primary_name_ref" span="180:17:180:30">lastBeginning</jtok>
<jtok eid="6" type="primary_name_ref" span="180:33:180:44">currentword</jtok>
<jtok eid="6" type="method_call" span="180:45:180:53">toString</jtok>
<jtok eid="6" type="line_comment" span="184:9:184:26">//Util.pr("#hm");</jtok>
<jtok eid="6" type="primary_name_ref" span="185:9:185:16">toSetIn</jtok>
<jtok eid="6" type="primary_name_ref" span="186:9:186:24">lastCompletions</jtok>
<jtok eid="7" type="class_or_interface_ref" span="190:15:190:21">Object</jtok>
<jtok eid="7" type="method_name" span="190:24:190:39">findCompletions</jtok>
<jtok eid="7" type="parameter_type" span="190:40:190:46">String</jtok>
<jtok eid="7" type="parameter_name" span="190:47:190:56">beginning</jtok>
<jtok eid="7" type="parameter_type" span="190:58:190:72">JTextComponent</jtok>
<jtok eid="7" type="parameter_name" span="190:73:190:77">comp</jtok>
<jtok eid="7" type="primary_name_ref" span="191:16:191:25">completer</jtok>
<jtok eid="7" type="method_call" span="191:26:191:34">complete</jtok>
<jtok eid="7" type="primary_name_ref" span="191:35:191:44">beginning</jtok>
<jtok eid="8" type="class_or_interface_ref" span="194:15:194:27">StringBuffer</jtok>
<jtok eid="8" type="method_name" span="194:28:194:42">getCurrentWord</jtok>
<jtok eid="8" type="parameter_type" span="194:43:194:57">JTextComponent</jtok>
<jtok eid="8" type="parameter_name" span="194:58:194:62">comp</jtok>
<jtok eid="8" type="class_or_interface_ref" span="195:9:195:21">StringBuffer</jtok>
<jtok eid="8" type="local_variable_name" span="195:22:195:25">res</jtok>
<jtok eid="8" type="constructor_call" span="195:32:195:44">StringBuffer</jtok>
<jtok eid="8" type="class_or_interface_ref" span="196:9:196:15">String</jtok>
<jtok eid="8" type="local_variable_name" span="196:16:196:25">upToCaret</jtok>
<jtok eid="8" type="primary_name_ref" span="199:13:199:22">upToCaret</jtok>
<jtok eid="8" type="primary_name_ref" span="199:25:199:29">comp</jtok>
<jtok eid="8" type="method_call" span="199:30:199:37">getText</jtok>
<jtok eid="8" type="primary_name_ref" span="199:41:199:45">comp</jtok>
<jtok eid="8" type="method_call" span="199:46:199:62">getCaretPosition</jtok>
<jtok eid="8" type="line_comment" span="200:13:200:90">// We now have the text from the start of the field up to the caret position.</jtok>
<jtok eid="8" type="line_comment" span="201:13:201:90">// In most fields, we are only interested in the currently edited word, so we</jtok>
<jtok eid="8" type="line_comment" span="202:13:202:66">// seek from the caret backward to the closest space:</jtok>
<jtok eid="8" type="primary_name_ref" span="203:18:203:27">completer</jtok>
<jtok eid="8" type="method_call" span="203:28:203:45">isSingleUnitField</jtok>
<jtok eid="8" type="primary_name_ref" span="204:22:204:26">comp</jtok>
<jtok eid="8" type="method_call" span="204:27:204:43">getCaretPosition</jtok>
<jtok eid="8" type="primary_name_ref" span="204:48:204:52">comp</jtok>
<jtok eid="8" type="method_call" span="204:53:204:60">getText</jtok>
<jtok eid="8" type="method_call" span="204:63:204:69">length</jtok>
<jtok eid="8" type="primary_name_ref" span="205:29:205:38">Character</jtok>
<jtok eid="8" type="method_call" span="205:39:205:51">isWhitespace</jtok>
<jtok eid="8" type="primary_name_ref" span="205:52:205:56">comp</jtok>
<jtok eid="8" type="method_call" span="205:57:205:64">getText</jtok>
<jtok eid="8" type="method_call" span="205:67:205:73">charAt</jtok>
<jtok eid="8" type="primary_name_ref" span="205:74:205:78">comp</jtok>
<jtok eid="8" type="method_call" span="205:79:205:95">getCaretPosition</jtok>
<jtok eid="8" type="local_variable_name" span="207:25:207:30">found</jtok>
<jtok eid="8" type="local_variable_name" span="208:21:208:24">piv</jtok>
<jtok eid="8" type="primary_name_ref" span="208:27:208:36">upToCaret</jtok>
<jtok eid="8" type="method_call" span="208:37:208:43">length</jtok>
<jtok eid="8" type="primary_name_ref" span="209:25:209:30">found</jtok>
<jtok eid="8" type="primary_name_ref" span="209:35:209:38">piv</jtok>
<jtok eid="8" type="primary_name_ref" span="210:25:210:34">Character</jtok>
<jtok eid="8" type="method_call" span="210:35:210:47">isWhitespace</jtok>
<jtok eid="8" type="primary_name_ref" span="210:48:210:57">upToCaret</jtok>
<jtok eid="8" type="method_call" span="210:58:210:64">charAt</jtok>
<jtok eid="8" type="primary_name_ref" span="210:65:210:68">piv</jtok>
<jtok eid="8" type="primary_name_ref" span="211:25:211:30">found</jtok>
<jtok eid="8" type="primary_name_ref" span="212:26:212:29">piv</jtok>
<jtok eid="8" type="line_comment" span="214:17:214:31">//if (piv &lt; 0)</jtok>
<jtok eid="8" type="line_comment" span="215:17:215:27">//piv = 0;</jtok>
<jtok eid="8" type="primary_name_ref" span="216:17:216:20">res</jtok>
<jtok eid="8" type="method_call" span="216:21:216:27">append</jtok>
<jtok eid="8" type="primary_name_ref" span="216:28:216:37">upToCaret</jtok>
<jtok eid="8" type="method_call" span="216:38:216:47">substring</jtok>
<jtok eid="8" type="primary_name_ref" span="216:48:216:51">piv</jtok>
<jtok eid="8" type="line_comment" span="218:13:218:99">// For fields such as "journal" it is more reasonable to try to complete on the entire</jtok>
<jtok eid="8" type="line_comment" span="219:13:219:102">// text field content, so we skip the searching and keep the entire part up to the caret:</jtok>
<jtok eid="8" type="primary_name_ref" span="220:18:220:21">res</jtok>
<jtok eid="8" type="method_call" span="220:22:220:28">append</jtok>
<jtok eid="8" type="primary_name_ref" span="220:29:220:38">upToCaret</jtok>
<jtok eid="8" type="line_comment" span="221:13:221:60">//Util.pr("AutoCompListener: "+res.toString());</jtok>
<jtok eid="8" type="class_or_interface_ref" span="222:18:222:38">BadLocationException</jtok>
<jtok eid="8" type="local_variable_name" span="222:39:222:41">ex</jtok>
<jtok eid="8" type="primary_name_ref" span="225:16:225:19">res</jtok>
<jtok eid="1" type="field_name" span="228:22:228:30">ANY_NAME</jtok>
<jtok eid="1" type="field_name" span="228:36:228:46">FIRST_NAME</jtok>
<jtok eid="1" type="field_name" span="228:52:228:61">LAST_NAME</jtok>
<jtok eid="9" type="method_name" span="229:19:229:41">findNamePositionStatus</jtok>
<jtok eid="9" type="parameter_type" span="229:42:229:56">JTextComponent</jtok>
<jtok eid="9" type="parameter_name" span="229:57:229:61">comp</jtok>
<jtok eid="9" type="class_or_interface_ref" span="230:9:230:15">String</jtok>
<jtok eid="9" type="local_variable_name" span="230:16:230:25">upToCaret</jtok>
<jtok eid="9" type="primary_name_ref" span="232:13:232:22">upToCaret</jtok>
<jtok eid="9" type="primary_name_ref" span="232:25:232:29">comp</jtok>
<jtok eid="9" type="method_call" span="232:30:232:37">getText</jtok>
<jtok eid="9" type="primary_name_ref" span="232:41:232:45">comp</jtok>
<jtok eid="9" type="method_call" span="232:46:232:62">getCaretPosition</jtok>
<jtok eid="9" type="line_comment" span="233:13:233:80">// Clip off evertyhing up to and including the last " and " before:</jtok>
<jtok eid="9" type="primary_name_ref" span="234:13:234:22">upToCaret</jtok>
<jtok eid="9" type="primary_name_ref" span="234:25:234:34">upToCaret</jtok>
<jtok eid="9" type="method_call" span="234:35:234:44">substring</jtok>
<jtok eid="9" type="primary_name_ref" span="234:45:234:54">upToCaret</jtok>
<jtok eid="9" type="method_call" span="234:55:234:66">lastIndexOf</jtok>
<jtok eid="9" type="string_literal" span="234:67:234:74">" and "</jtok>
<jtok eid="9" type="local_variable_name" span="235:17:235:27">commaIndex</jtok>
<jtok eid="9" type="primary_name_ref" span="235:30:235:39">upToCaret</jtok>
<jtok eid="9" type="method_call" span="235:40:235:47">indexOf</jtok>
<jtok eid="9" type="primary_name_ref" span="236:17:236:27">commaIndex</jtok>
<jtok eid="9" type="primary_name_ref" span="237:24:237:32">ANY_NAME</jtok>
<jtok eid="9" type="primary_name_ref" span="239:24:239:34">FIRST_NAME</jtok>
<jtok eid="9" type="class_or_interface_ref" span="241:18:241:38">BadLocationException</jtok>
<jtok eid="9" type="local_variable_name" span="241:39:241:41">ex</jtok>
<jtok eid="9" type="primary_name_ref" span="242:20:242:28">ANY_NAME</jtok>
<jtok eid="10" type="method_name" span="247:17:247:28">focusGained</jtok>
<jtok eid="10" type="parameter_type" span="247:29:247:39">FocusEvent</jtok>
<jtok eid="10" type="parameter_name" span="247:40:247:45">event</jtok>
<jtok eid="10" type="primary_name_ref" span="248:13:248:30">nextFocusListener</jtok>
<jtok eid="10" type="primary_name_ref" span="249:13:249:30">nextFocusListener</jtok>
<jtok eid="10" type="method_call" span="249:31:249:42">focusGained</jtok>
<jtok eid="10" type="primary_name_ref" span="249:43:249:48">event</jtok>
<jtok eid="11" type="method_name" span="252:17:252:26">focusLost</jtok>
<jtok eid="11" type="parameter_type" span="252:27:252:37">FocusEvent</jtok>
<jtok eid="11" type="parameter_name" span="252:38:252:43">event</jtok>
<jtok eid="11" type="primary_name_ref" span="253:13:253:28">lastCompletions</jtok>
<jtok eid="11" type="class_or_interface_ref" span="254:13:254:27">JTextComponent</jtok>
<jtok eid="11" type="local_variable_name" span="254:28:254:32">comp</jtok>
<jtok eid="11" type="class_or_interface_ref" span="254:36:254:50">JTextComponent</jtok>
<jtok eid="11" type="primary_name_ref" span="254:51:254:56">event</jtok>
<jtok eid="11" type="method_call" span="254:57:254:66">getSource</jtok>
<jtok eid="11" type="method_call" span="255:13:255:35">clearCurrentSuggestion</jtok>
<jtok eid="11" type="primary_name_ref" span="255:36:255:40">comp</jtok>
<jtok eid="11" type="primary_name_ref" span="257:13:257:30">nextFocusListener</jtok>
<jtok eid="11" type="primary_name_ref" span="258:13:258:30">nextFocusListener</jtok>
<jtok eid="11" type="method_call" span="258:31:258:40">focusLost</jtok>
<jtok eid="11" type="primary_name_ref" span="258:41:258:46">event</jtok>
<jtok eid="12" type="method_name" span="261:17:261:39">clearCurrentSuggestion</jtok>
<jtok eid="12" type="parameter_type" span="261:40:261:54">JTextComponent</jtok>
<jtok eid="12" type="parameter_name" span="261:55:261:59">comp</jtok>
<jtok eid="12" type="primary_name_ref" span="262:14:262:29">lastCompletions</jtok>
<jtok eid="12" type="local_variable_name" span="263:17:263:25">selStart</jtok>
<jtok eid="12" type="primary_name_ref" span="263:28:263:32">comp</jtok>
<jtok eid="12" type="method_call" span="263:33:263:50">getSelectionStart</jtok>
<jtok eid="12" type="class_or_interface_ref" span="264:13:264:19">String</jtok>
<jtok eid="12" type="local_variable_name" span="264:20:264:24">text</jtok>
<jtok eid="12" type="primary_name_ref" span="264:27:264:31">comp</jtok>
<jtok eid="12" type="method_call" span="264:32:264:39">getText</jtok>
<jtok eid="12" type="primary_name_ref" span="265:13:265:17">comp</jtok>
<jtok eid="12" type="method_call" span="265:18:265:25">setText</jtok>
<jtok eid="12" type="primary_name_ref" span="265:26:265:30">text</jtok>
<jtok eid="12" type="method_call" span="265:31:265:40">substring</jtok>
<jtok eid="12" type="primary_name_ref" span="265:44:265:52">selStart</jtok>
<jtok eid="12" type="primary_name_ref" span="265:56:265:60">text</jtok>
<jtok eid="12" type="method_call" span="265:61:265:70">substring</jtok>
<jtok eid="12" type="primary_name_ref" span="265:71:265:75">comp</jtok>
<jtok eid="12" type="method_call" span="265:76:265:91">getSelectionEnd</jtok>
<jtok eid="12" type="primary_name_ref" span="266:13:266:17">comp</jtok>
<jtok eid="12" type="method_call" span="266:18:266:34">setCaretPosition</jtok>
<jtok eid="12" type="primary_name_ref" span="266:35:266:43">selStart</jtok>
<jtok eid="12" type="primary_name_ref" span="267:13:267:28">lastCompletions</jtok>
<jtok eid="12" type="primary_name_ref" span="268:13:268:32">lastShownCompletion</jtok>
<jtok eid="12" type="primary_name_ref" span="269:13:269:30">lastCaretPosition</jtok>
<jtok eid="12" type="primary_name_ref" span="270:13:270:20">toSetIn</jtok>
</jdoc>