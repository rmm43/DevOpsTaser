<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.imports.ImportFormatReader" jls="java5">
<jent id="0" type="file" span="0:0:491:1">Source/jabref/src/java/net/sf/jabref/imports/ImportFormatReader.java</jent>
<jent id="1" pid="0" type="class" span="37:1:491:1">net.sf.jabref.imports.ImportFormatReader</jent>
<jent id="2" pid="1" type="method" span="44:3:46:3">net.sf.jabref.imports.ImportFormatReader.ImportFormatReader()</jent>
<jent id="3" pid="1" type="method" span="48:3:96:3">net.sf.jabref.imports.ImportFormatReader.resetImportFormats()</jent>
<jent id="4" pid="1" type="method" span="107:3:114:3">net.sf.jabref.imports.ImportFormatReader.getByCliId(String)</jent>
<jent id="5" pid="1" type="method" span="116:3:130:3">net.sf.jabref.imports.ImportFormatReader.importFromStream(String,InputStream)</jent>
<jent id="6" pid="1" type="method" span="132:3:140:3">net.sf.jabref.imports.ImportFormatReader.importFromFile(String,String)</jent>
<jent id="7" pid="1" type="method" span="142:5:166:5">net.sf.jabref.imports.ImportFormatReader.importFromFile(ImportFormat,String)</jent>
<jent id="8" pid="1" type="method" span="168:3:185:3">net.sf.jabref.imports.ImportFormatReader.createDatabase(Collection&lt;BibtexEntry&gt;)</jent>
<jent id="9" pid="1" type="method" span="194:3:202:3">net.sf.jabref.imports.ImportFormatReader.getCustomImportFormats()</jent>
<jent id="10" pid="1" type="method" span="211:3:219:2">net.sf.jabref.imports.ImportFormatReader.getBuiltInInputFormats()</jent>
<jent id="11" pid="1" type="method" span="230:3:232:3">net.sf.jabref.imports.ImportFormatReader.getImportFormats()</jent>
<jent id="12" pid="1" type="method" span="241:3:260:3">net.sf.jabref.imports.ImportFormatReader.getImportFormatList()</jent>
<jent id="13" pid="1" type="method" span="268:5:298:3">net.sf.jabref.imports.ImportFormatReader.expandAuthorInitials(String)</jent>
<jent id="14" pid="1" type="method" span="303:5:335:5">net.sf.jabref.imports.ImportFormatReader.expandAll(String)</jent>
<jent id="15" pid="1" type="method" span="338:3:350:3">net.sf.jabref.imports.ImportFormatReader.checkAndCreateFile(String)</jent>
<jent id="16" pid="1" type="method" span="355:3:358:3">net.sf.jabref.imports.ImportFormatReader.setIfNecessary(BibtexEntry,String,String)</jent>
<jent id="17" pid="1" type="method" span="362:5:368:5">net.sf.jabref.imports.ImportFormatReader.getReader(File,String)</jent>
<jent id="18" pid="1" type="method" span="370:3:376:3">net.sf.jabref.imports.ImportFormatReader.getReaderDefaultEncoding(InputStream)</jent>
<jent id="19" pid="1" type="method" span="378:3:418:3">net.sf.jabref.imports.ImportFormatReader.import_File(String,String)</jent>
<jent id="20" pid="1" type="method" span="425:3:433:3">net.sf.jabref.imports.ImportFormatReader.purgeEmptyEntries(Collection&lt;BibtexEntry&gt;)</jent>
<jent id="21" pid="1" type="method" span="443:2:490:2">net.sf.jabref.imports.ImportFormatReader.importUnknownFormat(String)</jent>
<jtok eid="0" type="block_comment" span="1:1:24:4">/*
 * Copyright (C) 2003 Morten O. Alver and Nizar N. Batada
 *
 * All programs in this directory and subdirectories are published under the GNU
 * General Public License as described below.
 *
 * This program is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation; either version 2 of the License, or (at your option) any later
 * version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 *
 * You should have received a copy of the GNU General Public License along with
 * this program; if not, write to the Free Software Foundation, Inc., 59 Temple
 * Place, Suite 330, Boston, MA 02111-1307 USA
 *
 * Further information about the GNU GPL is available at:
 * http://www.gnu.org/copyleft/gpl.ja.html
 *
 */</jtok>
<jtok eid="1" type="class_name" span="37:14:37:32">ImportFormatReader</jtok>
<jtok eid="1" type="class_or_interface_ref" span="39:19:39:25">String</jtok>
<jtok eid="1" type="field_name" span="39:26:39:39">BIBTEX_FORMAT</jtok>
<jtok eid="1" type="string_literal" span="39:42:39:50">"BibTeX"</jtok>
<jtok eid="1" type="block_comment" span="41:3:41:68">/** all import formats, in the default order of import formats */</jtok>
<jtok eid="1" type="class_or_interface_ref" span="42:11:42:20">SortedSet</jtok>
<jtok eid="1" type="class_or_interface_ref" span="42:21:42:33">ImportFormat</jtok>
<jtok eid="1" type="field_name" span="42:35:42:42">formats</jtok>
<jtok eid="1" type="constructor_call" span="42:49:42:56">TreeSet</jtok>
<jtok eid="1" type="constructor_call" span="42:57:42:69">ImportFormat</jtok>
<jtok eid="2" type="method_name" span="44:10:44:28">ImportFormatReader</jtok>
<jtok eid="3" type="method_name" span="48:15:48:33">resetImportFormats</jtok>
<jtok eid="3" type="primary_name_ref" span="49:5:49:12">formats</jtok>
<jtok eid="3" type="method_call" span="49:13:49:18">clear</jtok>
<jtok eid="3" type="line_comment" span="51:5:51:81">// Add all our importers to the TreeMap. The map is used to build the import</jtok>
<jtok eid="3" type="line_comment" span="52:5:52:20">// menus, and .</jtok>
<jtok eid="3" type="primary_name_ref" span="53:5:53:12">formats</jtok>
<jtok eid="3" type="method_call" span="53:13:53:16">add</jtok>
<jtok eid="3" type="constructor_call" span="53:21:53:32">CsaImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="54:5:54:12">formats</jtok>
<jtok eid="3" type="method_call" span="54:13:54:16">add</jtok>
<jtok eid="3" type="constructor_call" span="54:21:54:32">IsiImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="55:5:55:12">formats</jtok>
<jtok eid="3" type="method_call" span="55:13:55:16">add</jtok>
<jtok eid="3" type="constructor_call" span="55:21:55:36">EndnoteImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="56:5:56:12">formats</jtok>
<jtok eid="3" type="method_call" span="56:13:56:16">add</jtok>
<jtok eid="3" type="constructor_call" span="56:21:56:37">BibteXMLImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="57:5:57:12">formats</jtok>
<jtok eid="3" type="method_call" span="57:13:57:16">add</jtok>
<jtok eid="3" type="constructor_call" span="57:21:57:40">BiblioscapeImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="58:5:58:12">formats</jtok>
<jtok eid="3" type="method_call" span="58:13:58:16">add</jtok>
<jtok eid="3" type="constructor_call" span="58:21:58:36">SixpackImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="59:5:59:12">formats</jtok>
<jtok eid="3" type="method_call" span="59:13:59:16">add</jtok>
<jtok eid="3" type="constructor_call" span="59:21:59:35">InspecImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="60:5:60:12">formats</jtok>
<jtok eid="3" type="method_call" span="60:13:60:16">add</jtok>
<jtok eid="3" type="constructor_call" span="60:21:60:38">ScifinderImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="61:5:61:12">formats</jtok>
<jtok eid="3" type="method_call" span="61:13:61:16">add</jtok>
<jtok eid="3" type="constructor_call" span="61:21:61:33">OvidImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="62:5:62:12">formats</jtok>
<jtok eid="3" type="method_call" span="62:13:62:16">add</jtok>
<jtok eid="3" type="constructor_call" span="62:21:62:32">RisImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="63:5:63:12">formats</jtok>
<jtok eid="3" type="method_call" span="63:13:63:16">add</jtok>
<jtok eid="3" type="constructor_call" span="63:21:63:34">JstorImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="64:5:64:12">formats</jtok>
<jtok eid="3" type="method_call" span="64:13:64:16">add</jtok>
<jtok eid="3" type="constructor_call" span="64:21:64:42">SilverPlatterImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="65:5:65:12">formats</jtok>
<jtok eid="3" type="method_call" span="65:13:65:16">add</jtok>
<jtok eid="3" type="constructor_call" span="65:21:65:36">BiomailImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="66:5:66:12">formats</jtok>
<jtok eid="3" type="method_call" span="66:13:66:16">add</jtok>
<jtok eid="3" type="constructor_call" span="66:21:66:37">RepecNepImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="67:5:67:12">formats</jtok>
<jtok eid="3" type="method_call" span="67:13:67:16">add</jtok>
<jtok eid="3" type="constructor_call" span="67:21:67:35">PdfXmpImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="68:5:68:12">formats</jtok>
<jtok eid="3" type="method_call" span="68:13:68:16">add</jtok>
<jtok eid="3" type="constructor_call" span="68:21:68:34">CopacImporter</jtok>
<jtok eid="3" type="primary_name_ref" span="69:5:69:12">formats</jtok>
<jtok eid="3" type="method_call" span="69:13:69:16">add</jtok>
<jtok eid="3" type="constructor_call" span="69:21:69:34">MsBibImporter</jtok>
<jtok eid="3" type="block_comment" span="71:5:73:8">/**
     * Get import formats that are plug-ins
     */</jtok>
<jtok eid="3" type="class_or_interface_ref" span="74:5:74:17">JabRefPlugin</jtok>
<jtok eid="3" type="local_variable_name" span="74:18:74:30">jabrefPlugin</jtok>
<jtok eid="3" type="primary_name_ref" span="74:33:74:45">JabRefPlugin</jtok>
<jtok eid="3" type="method_call" span="74:46:74:57">getInstance</jtok>
<jtok eid="3" type="primary_name_ref" span="74:58:74:68">PluginCore</jtok>
<jtok eid="3" type="method_call" span="74:69:74:79">getManager</jtok>
<jtok eid="3" type="primary_name_ref" span="75:6:75:18">jabrefPlugin</jtok>
<jtok eid="3" type="class_or_interface_ref" span="76:8:76:29">ImportFormatExtension</jtok>
<jtok eid="3" type="local_variable_name" span="76:30:76:33">ext</jtok>
<jtok eid="3" type="primary_name_ref" span="76:36:76:48">jabrefPlugin</jtok>
<jtok eid="3" type="method_call" span="76:49:76:74">getImportFormatExtensions</jtok>
<jtok eid="3" type="class_or_interface_ref" span="77:4:77:16">ImportFormat</jtok>
<jtok eid="3" type="local_variable_name" span="77:17:77:29">importFormat</jtok>
<jtok eid="3" type="primary_name_ref" span="77:32:77:35">ext</jtok>
<jtok eid="3" type="method_call" span="77:36:77:51">getImportFormat</jtok>
<jtok eid="3" type="primary_name_ref" span="78:8:78:20">importFormat</jtok>
<jtok eid="3" type="primary_name_ref" span="79:5:79:12">formats</jtok>
<jtok eid="3" type="method_call" span="79:13:79:16">add</jtok>
<jtok eid="3" type="primary_name_ref" span="79:17:79:29">importFormat</jtok>
<jtok eid="3" type="block_comment" span="84:2:86:5">/**
	 * Get custom import formats
	 */</jtok>
<jtok eid="3" type="class_or_interface_ref" span="87:10:87:26">CustomImportList</jtok>
<jtok eid="3" type="class_or_interface_ref" span="87:27:87:35">Importer</jtok>
<jtok eid="3" type="local_variable_name" span="87:36:87:44">importer</jtok>
<jtok eid="3" type="primary_name_ref" span="87:47:87:54">Globals</jtok>
<jtok eid="3" type="qualified_name_ref" span="87:55:87:60">prefs</jtok>
<jtok eid="3" type="qualified_name_ref" span="87:61:87:74">customImports</jtok>
<jtok eid="3" type="class_or_interface_ref" span="89:9:89:21">ImportFormat</jtok>
<jtok eid="3" type="local_variable_name" span="89:22:89:26">imFo</jtok>
<jtok eid="3" type="primary_name_ref" span="89:29:89:37">importer</jtok>
<jtok eid="3" type="method_call" span="89:38:89:49">getInstance</jtok>
<jtok eid="3" type="primary_name_ref" span="90:9:90:16">formats</jtok>
<jtok eid="3" type="method_call" span="90:17:90:20">add</jtok>
<jtok eid="3" type="primary_name_ref" span="90:21:90:25">imFo</jtok>
<jtok eid="3" type="class_or_interface_ref" span="91:15:91:24">Exception</jtok>
<jtok eid="3" type="local_variable_name" span="91:25:91:26">e</jtok>
<jtok eid="3" type="primary_name_ref" span="92:9:92:15">System</jtok>
<jtok eid="3" type="qualified_name_ref" span="92:16:92:19">err</jtok>
<jtok eid="3" type="method_call" span="92:20:92:27">println</jtok>
<jtok eid="3" type="string_literal" span="92:28:92:52">"Could not instantiate "</jtok>
<jtok eid="3" type="primary_name_ref" span="92:55:92:63">importer</jtok>
<jtok eid="3" type="method_call" span="92:64:92:71">getName</jtok>
<jtok eid="3" type="string_literal" span="92:76:92:150">" importer, will ignore it. Please check if the class is still available."</jtok>
<jtok eid="3" type="primary_name_ref" span="93:9:93:10">e</jtok>
<jtok eid="3" type="method_call" span="93:11:93:26">printStackTrace</jtok>
<jtok eid="1" type="block_comment" span="98:3:106:6">/**
   * Format for a given CLI-ID.
   * 
   * &lt;p&gt;Will return the first format according to the default-order of
   * format that matches the given ID.&lt;/p&gt;
   * 
   * @param cliId  CLI-Id
   * @return  Import Format or &lt;code&gt;null&lt;/code&gt; if none matches
   */</jtok>
<jtok eid="4" type="class_or_interface_ref" span="107:10:107:22">ImportFormat</jtok>
<jtok eid="4" type="method_name" span="107:23:107:33">getByCliId</jtok>
<jtok eid="4" type="parameter_type" span="107:34:107:40">String</jtok>
<jtok eid="4" type="parameter_name" span="107:41:107:46">cliId</jtok>
<jtok eid="4" type="class_or_interface_ref" span="108:10:108:22">ImportFormat</jtok>
<jtok eid="4" type="local_variable_name" span="108:23:108:29">format</jtok>
<jtok eid="4" type="primary_name_ref" span="108:32:108:39">formats</jtok>
<jtok eid="4" type="primary_name_ref" span="109:11:109:17">format</jtok>
<jtok eid="4" type="method_call" span="109:18:109:26">getCLIId</jtok>
<jtok eid="4" type="method_call" span="109:29:109:35">equals</jtok>
<jtok eid="4" type="primary_name_ref" span="109:36:109:41">cliId</jtok>
<jtok eid="4" type="primary_name_ref" span="110:16:110:22">format</jtok>
<jtok eid="5" type="class_or_interface_ref" span="116:10:116:14">List</jtok>
<jtok eid="5" type="class_or_interface_ref" span="116:15:116:26">BibtexEntry</jtok>
<jtok eid="5" type="method_name" span="116:28:116:44">importFromStream</jtok>
<jtok eid="5" type="parameter_type" span="116:45:116:51">String</jtok>
<jtok eid="5" type="parameter_name" span="116:52:116:58">format</jtok>
<jtok eid="5" type="parameter_type" span="116:60:116:71">InputStream</jtok>
<jtok eid="5" type="parameter_name" span="116:72:116:74">in</jtok>
<jtok eid="5" type="throws" span="117:12:117:23">IOException</jtok>
<jtok eid="5" type="class_or_interface_ref" span="118:5:118:17">ImportFormat</jtok>
<jtok eid="5" type="local_variable_name" span="118:18:118:26">importer</jtok>
<jtok eid="5" type="method_call" span="118:29:118:39">getByCliId</jtok>
<jtok eid="5" type="primary_name_ref" span="118:40:118:46">format</jtok>
<jtok eid="5" type="primary_name_ref" span="120:9:120:17">importer</jtok>
<jtok eid="5" type="constructor_call" span="121:17:121:41">IllegalArgumentException</jtok>
<jtok eid="5" type="string_literal" span="121:42:121:67">"Unknown import format: "</jtok>
<jtok eid="5" type="primary_name_ref" span="121:70:121:76">format</jtok>
<jtok eid="5" type="class_or_interface_ref" span="123:5:123:9">List</jtok>
<jtok eid="5" type="class_or_interface_ref" span="123:10:123:21">BibtexEntry</jtok>
<jtok eid="5" type="local_variable_name" span="123:23:123:26">res</jtok>
<jtok eid="5" type="primary_name_ref" span="123:29:123:37">importer</jtok>
<jtok eid="5" type="method_call" span="123:38:123:51">importEntries</jtok>
<jtok eid="5" type="primary_name_ref" span="123:52:123:54">in</jtok>
<jtok eid="5" type="line_comment" span="125:5:125:32">// Remove all empty entries</jtok>
<jtok eid="5" type="primary_name_ref" span="126:9:126:12">res</jtok>
<jtok eid="5" type="method_call" span="127:7:127:24">purgeEmptyEntries</jtok>
<jtok eid="5" type="primary_name_ref" span="127:25:127:28">res</jtok>
<jtok eid="5" type="primary_name_ref" span="129:12:129:15">res</jtok>
<jtok eid="6" type="class_or_interface_ref" span="132:10:132:14">List</jtok>
<jtok eid="6" type="class_or_interface_ref" span="132:15:132:26">BibtexEntry</jtok>
<jtok eid="6" type="method_name" span="132:28:132:42">importFromFile</jtok>
<jtok eid="6" type="parameter_type" span="132:43:132:49">String</jtok>
<jtok eid="6" type="parameter_name" span="132:50:132:56">format</jtok>
<jtok eid="6" type="parameter_type" span="132:58:132:64">String</jtok>
<jtok eid="6" type="parameter_name" span="132:65:132:73">filename</jtok>
<jtok eid="6" type="throws" span="133:12:133:23">IOException</jtok>
<jtok eid="6" type="class_or_interface_ref" span="134:5:134:17">ImportFormat</jtok>
<jtok eid="6" type="local_variable_name" span="134:18:134:26">importer</jtok>
<jtok eid="6" type="method_call" span="134:29:134:39">getByCliId</jtok>
<jtok eid="6" type="primary_name_ref" span="134:40:134:46">format</jtok>
<jtok eid="6" type="primary_name_ref" span="136:9:136:17">importer</jtok>
<jtok eid="6" type="constructor_call" span="137:17:137:41">IllegalArgumentException</jtok>
<jtok eid="6" type="string_literal" span="137:42:137:67">"Unknown import format: "</jtok>
<jtok eid="6" type="primary_name_ref" span="137:70:137:76">format</jtok>
<jtok eid="6" type="method_call" span="139:12:139:26">importFromFile</jtok>
<jtok eid="6" type="primary_name_ref" span="139:27:139:35">importer</jtok>
<jtok eid="6" type="primary_name_ref" span="139:37:139:45">filename</jtok>
<jtok eid="7" type="class_or_interface_ref" span="142:12:142:16">List</jtok>
<jtok eid="7" type="class_or_interface_ref" span="142:17:142:28">BibtexEntry</jtok>
<jtok eid="7" type="method_name" span="142:30:142:44">importFromFile</jtok>
<jtok eid="7" type="parameter_type" span="142:45:142:57">ImportFormat</jtok>
<jtok eid="7" type="parameter_name" span="142:58:142:66">importer</jtok>
<jtok eid="7" type="parameter_type" span="142:68:142:74">String</jtok>
<jtok eid="7" type="parameter_name" span="142:75:142:83">filename</jtok>
<jtok eid="7" type="throws" span="142:92:142:103">IOException</jtok>
<jtok eid="7" type="class_or_interface_ref" span="143:9:143:13">List</jtok>
<jtok eid="7" type="class_or_interface_ref" span="143:14:143:25">BibtexEntry</jtok>
<jtok eid="7" type="local_variable_name" span="143:27:143:33">result</jtok>
<jtok eid="7" type="class_or_interface_ref" span="144:9:144:20">InputStream</jtok>
<jtok eid="7" type="local_variable_name" span="144:21:144:27">stream</jtok>
<jtok eid="7" type="class_or_interface_ref" span="146:13:146:17">File</jtok>
<jtok eid="7" type="local_variable_name" span="146:18:146:22">file</jtok>
<jtok eid="7" type="constructor_call" span="146:29:146:33">File</jtok>
<jtok eid="7" type="primary_name_ref" span="146:34:146:42">filename</jtok>
<jtok eid="7" type="primary_name_ref" span="147:13:147:19">stream</jtok>
<jtok eid="7" type="constructor_call" span="147:26:147:41">FileInputStream</jtok>
<jtok eid="7" type="primary_name_ref" span="147:42:147:46">file</jtok>
<jtok eid="7" type="primary_name_ref" span="149:18:149:26">importer</jtok>
<jtok eid="7" type="method_call" span="149:27:149:45">isRecognizedFormat</jtok>
<jtok eid="7" type="primary_name_ref" span="149:46:149:52">stream</jtok>
<jtok eid="7" type="constructor_call" span="150:27:150:38">IOException</jtok>
<jtok eid="7" type="primary_name_ref" span="150:39:150:46">Globals</jtok>
<jtok eid="7" type="method_call" span="150:47:150:51">lang</jtok>
<jtok eid="7" type="string_literal" span="150:52:150:71">"Wrong file format"</jtok>
<jtok eid="7" type="primary_name_ref" span="152:13:152:19">stream</jtok>
<jtok eid="7" type="constructor_call" span="152:26:152:41">FileInputStream</jtok>
<jtok eid="7" type="primary_name_ref" span="152:42:152:46">file</jtok>
<jtok eid="7" type="primary_name_ref" span="154:13:154:19">result</jtok>
<jtok eid="7" type="primary_name_ref" span="154:22:154:30">importer</jtok>
<jtok eid="7" type="method_call" span="154:31:154:44">importEntries</jtok>
<jtok eid="7" type="primary_name_ref" span="154:45:154:51">stream</jtok>
<jtok eid="7" type="primary_name_ref" span="158:21:158:27">stream</jtok>
<jtok eid="7" type="primary_name_ref" span="159:21:159:27">stream</jtok>
<jtok eid="7" type="method_call" span="159:28:159:33">close</jtok>
<jtok eid="7" type="class_or_interface_ref" span="160:22:160:33">IOException</jtok>
<jtok eid="7" type="local_variable_name" span="160:34:160:36">ex</jtok>
<jtok eid="7" type="primary_name_ref" span="161:23:161:25">ex</jtok>
<jtok eid="7" type="primary_name_ref" span="165:16:165:22">result</jtok>
<jtok eid="8" type="class_or_interface_ref" span="168:17:168:31">BibtexDatabase</jtok>
<jtok eid="8" type="method_name" span="168:32:168:46">createDatabase</jtok>
<jtok eid="8" type="parameter_type" span="168:47:168:57">Collection</jtok>
<jtok eid="8" type="parameter_type" span="168:58:168:69">BibtexEntry</jtok>
<jtok eid="8" type="parameter_name" span="168:71:168:81">bibentries</jtok>
<jtok eid="8" type="method_call" span="169:5:169:22">purgeEmptyEntries</jtok>
<jtok eid="8" type="primary_name_ref" span="169:23:169:33">bibentries</jtok>
<jtok eid="8" type="class_or_interface_ref" span="171:5:171:19">BibtexDatabase</jtok>
<jtok eid="8" type="local_variable_name" span="171:20:171:28">database</jtok>
<jtok eid="8" type="constructor_call" span="171:35:171:49">BibtexDatabase</jtok>
<jtok eid="8" type="class_or_interface_ref" span="173:10:173:18">Iterator</jtok>
<jtok eid="8" type="class_or_interface_ref" span="173:19:173:30">BibtexEntry</jtok>
<jtok eid="8" type="local_variable_name" span="173:32:173:33">i</jtok>
<jtok eid="8" type="primary_name_ref" span="173:36:173:46">bibentries</jtok>
<jtok eid="8" type="method_call" span="173:47:173:55">iterator</jtok>
<jtok eid="8" type="primary_name_ref" span="173:59:173:60">i</jtok>
<jtok eid="8" type="method_call" span="173:61:173:68">hasNext</jtok>
<jtok eid="8" type="class_or_interface_ref" span="174:7:174:18">BibtexEntry</jtok>
<jtok eid="8" type="local_variable_name" span="174:19:174:24">entry</jtok>
<jtok eid="8" type="primary_name_ref" span="174:27:174:28">i</jtok>
<jtok eid="8" type="method_call" span="174:29:174:33">next</jtok>
<jtok eid="8" type="primary_name_ref" span="177:9:177:14">entry</jtok>
<jtok eid="8" type="method_call" span="177:15:177:20">setId</jtok>
<jtok eid="8" type="primary_name_ref" span="177:21:177:25">Util</jtok>
<jtok eid="8" type="method_call" span="177:26:177:41">createNeutralId</jtok>
<jtok eid="8" type="primary_name_ref" span="178:9:178:17">database</jtok>
<jtok eid="8" type="method_call" span="178:18:178:29">insertEntry</jtok>
<jtok eid="8" type="primary_name_ref" span="178:30:178:35">entry</jtok>
<jtok eid="8" type="class_or_interface_ref" span="179:16:179:37">KeyCollisionException</jtok>
<jtok eid="8" type="local_variable_name" span="179:38:179:40">ex</jtok>
<jtok eid="8" type="primary_name_ref" span="180:9:180:15">System</jtok>
<jtok eid="8" type="qualified_name_ref" span="180:16:180:19">err</jtok>
<jtok eid="8" type="method_call" span="180:20:180:27">println</jtok>
<jtok eid="8" type="string_literal" span="180:28:180:74">"KeyCollisionException [ addBibEntries(...) ]"</jtok>
<jtok eid="8" type="primary_name_ref" span="184:12:184:20">database</jtok>
<jtok eid="1" type="block_comment" span="187:3:193:6">/**
   * All custom importers.
   * 
   * &lt;p&gt;Elements are in default order.&lt;/p&gt;
   * 
   * @return all custom importers, elements are of type InputFormat
   */</jtok>
<jtok eid="9" type="class_or_interface_ref" span="194:10:194:19">SortedSet</jtok>
<jtok eid="9" type="class_or_interface_ref" span="194:20:194:32">ImportFormat</jtok>
<jtok eid="9" type="method_name" span="194:34:194:56">getCustomImportFormats</jtok>
<jtok eid="9" type="class_or_interface_ref" span="195:5:195:14">SortedSet</jtok>
<jtok eid="9" type="class_or_interface_ref" span="195:15:195:27">ImportFormat</jtok>
<jtok eid="9" type="local_variable_name" span="195:29:195:35">result</jtok>
<jtok eid="9" type="constructor_call" span="195:42:195:49">TreeSet</jtok>
<jtok eid="9" type="constructor_call" span="195:50:195:62">ImportFormat</jtok>
<jtok eid="9" type="class_or_interface_ref" span="196:10:196:22">ImportFormat</jtok>
<jtok eid="9" type="local_variable_name" span="196:23:196:29">format</jtok>
<jtok eid="9" type="primary_name_ref" span="196:32:196:39">formats</jtok>
<jtok eid="9" type="primary_name_ref" span="197:11:197:17">format</jtok>
<jtok eid="9" type="method_call" span="197:18:197:37">getIsCustomImporter</jtok>
<jtok eid="9" type="primary_name_ref" span="198:9:198:15">result</jtok>
<jtok eid="9" type="method_call" span="198:16:198:19">add</jtok>
<jtok eid="9" type="primary_name_ref" span="198:20:198:26">format</jtok>
<jtok eid="9" type="primary_name_ref" span="201:12:201:18">result</jtok>
<jtok eid="1" type="block_comment" span="204:3:210:6">/**
   * All built-in importers.
   * 
   * &lt;p&gt;Elements are in default order.&lt;/p&gt;
   * 
   * @return all custom importers, elements are of type InputFormat
   */</jtok>
<jtok eid="10" type="class_or_interface_ref" span="211:10:211:19">SortedSet</jtok>
<jtok eid="10" type="class_or_interface_ref" span="211:20:211:32">ImportFormat</jtok>
<jtok eid="10" type="method_name" span="211:34:211:56">getBuiltInInputFormats</jtok>
<jtok eid="10" type="class_or_interface_ref" span="212:3:212:12">SortedSet</jtok>
<jtok eid="10" type="class_or_interface_ref" span="212:13:212:25">ImportFormat</jtok>
<jtok eid="10" type="local_variable_name" span="212:27:212:33">result</jtok>
<jtok eid="10" type="constructor_call" span="212:40:212:47">TreeSet</jtok>
<jtok eid="10" type="constructor_call" span="212:48:212:60">ImportFormat</jtok>
<jtok eid="10" type="class_or_interface_ref" span="213:8:213:20">ImportFormat</jtok>
<jtok eid="10" type="local_variable_name" span="213:21:213:27">format</jtok>
<jtok eid="10" type="primary_name_ref" span="213:30:213:37">formats</jtok>
<jtok eid="10" type="primary_name_ref" span="214:9:214:15">format</jtok>
<jtok eid="10" type="method_call" span="214:16:214:35">getIsCustomImporter</jtok>
<jtok eid="10" type="primary_name_ref" span="215:5:215:11">result</jtok>
<jtok eid="10" type="method_call" span="215:12:215:15">add</jtok>
<jtok eid="10" type="primary_name_ref" span="215:16:215:22">format</jtok>
<jtok eid="10" type="primary_name_ref" span="218:10:218:16">result</jtok>
<jtok eid="1" type="block_comment" span="221:3:229:5">/**
	 * All importers.
	 * 
	 * &lt;p&gt;
	 * Elements are in default order.
	 * &lt;/p&gt;
	 * 
	 * @return all custom importers, elements are of type InputFormat
	 */</jtok>
<jtok eid="11" type="class_or_interface_ref" span="230:10:230:19">SortedSet</jtok>
<jtok eid="11" type="class_or_interface_ref" span="230:20:230:32">ImportFormat</jtok>
<jtok eid="11" type="method_name" span="230:34:230:50">getImportFormats</jtok>
<jtok eid="11" type="qualified_name_ref" span="231:17:231:24">formats</jtok>
<jtok eid="1" type="block_comment" span="234:3:240:6">/**
   * Human readable list of all known import formats (name and CLI Id).
   * 
   * &lt;p&gt;List is in default-order.&lt;/p&gt;
   * 
   * @return  human readable list of all known import formats
   */</jtok>
<jtok eid="12" type="class_or_interface_ref" span="241:10:241:16">String</jtok>
<jtok eid="12" type="method_name" span="241:17:241:36">getImportFormatList</jtok>
<jtok eid="12" type="class_or_interface_ref" span="242:5:242:17">StringBuffer</jtok>
<jtok eid="12" type="local_variable_name" span="242:18:242:20">sb</jtok>
<jtok eid="12" type="constructor_call" span="242:27:242:39">StringBuffer</jtok>
<jtok eid="12" type="class_or_interface_ref" span="244:10:244:22">ImportFormat</jtok>
<jtok eid="12" type="local_variable_name" span="244:23:244:27">imFo</jtok>
<jtok eid="12" type="primary_name_ref" span="244:30:244:37">formats</jtok>
<jtok eid="12" type="local_variable_name" span="245:11:245:14">pad</jtok>
<jtok eid="12" type="primary_name_ref" span="245:17:245:21">Math</jtok>
<jtok eid="12" type="method_call" span="245:22:245:25">max</jtok>
<jtok eid="12" type="primary_name_ref" span="245:34:245:38">imFo</jtok>
<jtok eid="12" type="method_call" span="245:39:245:52">getFormatName</jtok>
<jtok eid="12" type="method_call" span="245:55:245:61">length</jtok>
<jtok eid="12" type="primary_name_ref" span="246:7:246:9">sb</jtok>
<jtok eid="12" type="method_call" span="246:10:246:16">append</jtok>
<jtok eid="12" type="string_literal" span="246:17:246:21">"  "</jtok>
<jtok eid="12" type="primary_name_ref" span="247:7:247:9">sb</jtok>
<jtok eid="12" type="method_call" span="247:10:247:16">append</jtok>
<jtok eid="12" type="primary_name_ref" span="247:17:247:21">imFo</jtok>
<jtok eid="12" type="method_call" span="247:22:247:35">getFormatName</jtok>
<jtok eid="12" type="local_variable_name" span="249:16:249:17">j</jtok>
<jtok eid="12" type="primary_name_ref" span="249:23:249:24">j</jtok>
<jtok eid="12" type="primary_name_ref" span="249:27:249:30">pad</jtok>
<jtok eid="12" type="primary_name_ref" span="249:32:249:33">j</jtok>
<jtok eid="12" type="primary_name_ref" span="250:9:250:11">sb</jtok>
<jtok eid="12" type="method_call" span="250:12:250:18">append</jtok>
<jtok eid="12" type="string_literal" span="250:19:250:22">" "</jtok>
<jtok eid="12" type="primary_name_ref" span="252:7:252:9">sb</jtok>
<jtok eid="12" type="method_call" span="252:10:252:16">append</jtok>
<jtok eid="12" type="string_literal" span="252:17:252:22">" : "</jtok>
<jtok eid="12" type="primary_name_ref" span="253:7:253:9">sb</jtok>
<jtok eid="12" type="method_call" span="253:10:253:16">append</jtok>
<jtok eid="12" type="primary_name_ref" span="253:17:253:21">imFo</jtok>
<jtok eid="12" type="method_call" span="253:22:253:30">getCLIId</jtok>
<jtok eid="12" type="primary_name_ref" span="254:7:254:9">sb</jtok>
<jtok eid="12" type="method_call" span="254:10:254:16">append</jtok>
<jtok eid="12" type="string_literal" span="254:17:254:21">"\n"</jtok>
<jtok eid="12" type="class_or_interface_ref" span="257:5:257:11">String</jtok>
<jtok eid="12" type="local_variable_name" span="257:12:257:15">res</jtok>
<jtok eid="12" type="primary_name_ref" span="257:18:257:20">sb</jtok>
<jtok eid="12" type="method_call" span="257:21:257:29">toString</jtok>
<jtok eid="12" type="primary_name_ref" span="259:12:259:15">res</jtok>
<jtok eid="12" type="line_comment" span="259:17:259:49">//.substring(0, res.length()-1);</jtok>
<jtok eid="1" type="block_comment" span="263:5:267:8">/**
     * Expand initials, e.g. EH Wissler -&gt; E. H. Wissler or Wissler, EH -&gt; Wissler, E. H.
     * @param name
     * @return The name after expanding initials.
     */</jtok>
<jtok eid="13" type="class_or_interface_ref" span="268:19:268:25">String</jtok>
<jtok eid="13" type="method_name" span="268:26:268:46">expandAuthorInitials</jtok>
<jtok eid="13" type="parameter_type" span="268:47:268:53">String</jtok>
<jtok eid="13" type="parameter_name" span="268:54:268:58">name</jtok>
<jtok eid="13" type="class_or_interface_ref" span="269:7:269:13">String</jtok>
<jtok eid="13" type="local_variable_name" span="269:16:269:23">authors</jtok>
<jtok eid="13" type="primary_name_ref" span="269:26:269:30">name</jtok>
<jtok eid="13" type="method_call" span="269:31:269:36">split</jtok>
<jtok eid="13" type="string_literal" span="269:37:269:44">" and "</jtok>
<jtok eid="13" type="class_or_interface_ref" span="270:7:270:19">StringBuffer</jtok>
<jtok eid="13" type="local_variable_name" span="270:20:270:22">sb</jtok>
<jtok eid="13" type="constructor_call" span="270:29:270:41">StringBuffer</jtok>
<jtok eid="13" type="local_variable_name" span="271:16:271:17">i</jtok>
<jtok eid="13" type="primary_name_ref" span="271:21:271:22">i</jtok>
<jtok eid="13" type="primary_name_ref" span="271:23:271:30">authors</jtok>
<jtok eid="13" type="qualified_name_ref" span="271:31:271:37">length</jtok>
<jtok eid="13" type="primary_name_ref" span="271:39:271:40">i</jtok>
<jtok eid="13" type="primary_name_ref" span="272:15:272:22">authors</jtok>
<jtok eid="13" type="primary_name_ref" span="272:23:272:24">i</jtok>
<jtok eid="13" type="method_call" span="272:26:272:33">indexOf</jtok>
<jtok eid="13" type="string_literal" span="272:34:272:38">", "</jtok>
<jtok eid="13" type="class_or_interface_ref" span="273:15:273:21">String</jtok>
<jtok eid="13" type="local_variable_name" span="273:24:273:29">names</jtok>
<jtok eid="13" type="primary_name_ref" span="273:32:273:39">authors</jtok>
<jtok eid="13" type="primary_name_ref" span="273:40:273:41">i</jtok>
<jtok eid="13" type="method_call" span="273:43:273:48">split</jtok>
<jtok eid="13" type="string_literal" span="273:49:273:53">", "</jtok>
<jtok eid="13" type="primary_name_ref" span="274:19:274:24">names</jtok>
<jtok eid="13" type="qualified_name_ref" span="274:25:274:31">length</jtok>
<jtok eid="13" type="primary_name_ref" span="275:19:275:21">sb</jtok>
<jtok eid="13" type="method_call" span="275:22:275:28">append</jtok>
<jtok eid="13" type="primary_name_ref" span="275:29:275:34">names</jtok>
<jtok eid="13" type="primary_name_ref" span="276:23:276:28">names</jtok>
<jtok eid="13" type="qualified_name_ref" span="276:29:276:35">length</jtok>
<jtok eid="13" type="primary_name_ref" span="277:21:277:23">sb</jtok>
<jtok eid="13" type="method_call" span="277:24:277:30">append</jtok>
<jtok eid="13" type="string_literal" span="277:31:277:35">", "</jtok>
<jtok eid="13" type="local_variable_name" span="279:24:279:25">j</jtok>
<jtok eid="13" type="primary_name_ref" span="279:29:279:30">j</jtok>
<jtok eid="13" type="primary_name_ref" span="279:31:279:36">names</jtok>
<jtok eid="13" type="qualified_name_ref" span="279:37:279:43">length</jtok>
<jtok eid="13" type="primary_name_ref" span="279:45:279:46">j</jtok>
<jtok eid="13" type="primary_name_ref" span="280:19:280:21">sb</jtok>
<jtok eid="13" type="method_call" span="280:22:280:28">append</jtok>
<jtok eid="13" type="method_call" span="280:29:280:38">expandAll</jtok>
<jtok eid="13" type="primary_name_ref" span="280:39:280:44">names</jtok>
<jtok eid="13" type="primary_name_ref" span="280:45:280:46">j</jtok>
<jtok eid="13" type="class_or_interface_ref" span="284:15:284:21">String</jtok>
<jtok eid="13" type="local_variable_name" span="284:24:284:29">names</jtok>
<jtok eid="13" type="primary_name_ref" span="284:32:284:39">authors</jtok>
<jtok eid="13" type="primary_name_ref" span="284:40:284:41">i</jtok>
<jtok eid="13" type="method_call" span="284:43:284:48">split</jtok>
<jtok eid="13" type="string_literal" span="284:49:284:52">" "</jtok>
<jtok eid="13" type="primary_name_ref" span="285:19:285:24">names</jtok>
<jtok eid="13" type="qualified_name_ref" span="285:25:285:31">length</jtok>
<jtok eid="13" type="primary_name_ref" span="286:19:286:21">sb</jtok>
<jtok eid="13" type="method_call" span="286:22:286:28">append</jtok>
<jtok eid="13" type="method_call" span="286:29:286:38">expandAll</jtok>
<jtok eid="13" type="primary_name_ref" span="286:39:286:44">names</jtok>
<jtok eid="13" type="local_variable_name" span="288:24:288:25">j</jtok>
<jtok eid="13" type="primary_name_ref" span="288:29:288:30">j</jtok>
<jtok eid="13" type="primary_name_ref" span="288:31:288:36">names</jtok>
<jtok eid="13" type="qualified_name_ref" span="288:37:288:43">length</jtok>
<jtok eid="13" type="primary_name_ref" span="288:45:288:46">j</jtok>
<jtok eid="13" type="primary_name_ref" span="289:19:289:21">sb</jtok>
<jtok eid="13" type="method_call" span="289:22:289:28">append</jtok>
<jtok eid="13" type="string_literal" span="289:29:289:32">" "</jtok>
<jtok eid="13" type="primary_name_ref" span="290:19:290:21">sb</jtok>
<jtok eid="13" type="method_call" span="290:22:290:28">append</jtok>
<jtok eid="13" type="primary_name_ref" span="290:29:290:34">names</jtok>
<jtok eid="13" type="primary_name_ref" span="290:35:290:36">j</jtok>
<jtok eid="13" type="primary_name_ref" span="293:15:293:16">i</jtok>
<jtok eid="13" type="primary_name_ref" span="293:19:293:26">authors</jtok>
<jtok eid="13" type="qualified_name_ref" span="293:27:293:33">length</jtok>
<jtok eid="13" type="primary_name_ref" span="294:15:294:17">sb</jtok>
<jtok eid="13" type="method_call" span="294:18:294:24">append</jtok>
<jtok eid="13" type="string_literal" span="294:25:294:32">" and "</jtok>
<jtok eid="13" type="primary_name_ref" span="297:14:297:16">sb</jtok>
<jtok eid="13" type="method_call" span="297:17:297:25">toString</jtok>
<jtok eid="13" type="method_call" span="297:28:297:32">trim</jtok>
<jtok eid="1" type="line_comment" span="300:1:300:81">//------------------------------------------------------------------------------</jtok>
<jtok eid="14" type="class_or_interface_ref" span="303:19:303:25">String</jtok>
<jtok eid="14" type="method_name" span="303:26:303:35">expandAll</jtok>
<jtok eid="14" type="parameter_type" span="303:36:303:42">String</jtok>
<jtok eid="14" type="parameter_name" span="303:43:303:44">s</jtok>
<jtok eid="14" type="line_comment" span="304:9:304:41">//System.out.println("'"+s+"'");</jtok>
<jtok eid="14" type="line_comment" span="305:9:305:39">// Avoid arrayindexoutof.... :</jtok>
<jtok eid="14" type="primary_name_ref" span="306:13:306:14">s</jtok>
<jtok eid="14" type="method_call" span="306:15:306:21">length</jtok>
<jtok eid="14" type="primary_name_ref" span="307:18:307:19">s</jtok>
<jtok eid="14" type="line_comment" span="308:9:308:87">// If only one character (uppercase letter), add a dot and return immediately:</jtok>
<jtok eid="14" type="primary_name_ref" span="309:14:309:15">s</jtok>
<jtok eid="14" type="method_call" span="309:16:309:22">length</jtok>
<jtok eid="14" type="primary_name_ref" span="309:35:309:44">Character</jtok>
<jtok eid="14" type="method_call" span="309:45:309:53">isLetter</jtok>
<jtok eid="14" type="primary_name_ref" span="309:54:309:55">s</jtok>
<jtok eid="14" type="method_call" span="309:56:309:62">charAt</jtok>
<jtok eid="14" type="primary_name_ref" span="310:17:310:26">Character</jtok>
<jtok eid="14" type="method_call" span="310:27:310:38">isUpperCase</jtok>
<jtok eid="14" type="primary_name_ref" span="310:39:310:40">s</jtok>
<jtok eid="14" type="method_call" span="310:41:310:47">charAt</jtok>
<jtok eid="14" type="primary_name_ref" span="311:18:311:19">s</jtok>
<jtok eid="14" type="string_literal" span="311:20:311:23">"."</jtok>
<jtok eid="14" type="class_or_interface_ref" span="312:9:312:21">StringBuffer</jtok>
<jtok eid="14" type="local_variable_name" span="312:22:312:24">sb</jtok>
<jtok eid="14" type="constructor_call" span="312:31:312:43">StringBuffer</jtok>
<jtok eid="14" type="local_variable_name" span="313:14:313:15">c</jtok>
<jtok eid="14" type="primary_name_ref" span="313:18:313:19">s</jtok>
<jtok eid="14" type="method_call" span="313:20:313:26">charAt</jtok>
<jtok eid="14" type="local_variable_name" span="313:31:313:32">d</jtok>
<jtok eid="14" type="local_variable_name" span="314:18:314:19">i</jtok>
<jtok eid="14" type="primary_name_ref" span="314:23:314:24">i</jtok>
<jtok eid="14" type="primary_name_ref" span="314:25:314:26">s</jtok>
<jtok eid="14" type="method_call" span="314:27:314:33">length</jtok>
<jtok eid="14" type="primary_name_ref" span="314:37:314:38">i</jtok>
<jtok eid="14" type="primary_name_ref" span="315:13:315:14">d</jtok>
<jtok eid="14" type="primary_name_ref" span="315:17:315:18">s</jtok>
<jtok eid="14" type="method_call" span="315:19:315:25">charAt</jtok>
<jtok eid="14" type="primary_name_ref" span="315:26:315:27">i</jtok>
<jtok eid="14" type="primary_name_ref" span="316:17:316:26">Character</jtok>
<jtok eid="14" type="method_call" span="316:27:316:35">isLetter</jtok>
<jtok eid="14" type="primary_name_ref" span="316:36:316:37">c</jtok>
<jtok eid="14" type="primary_name_ref" span="316:42:316:51">Character</jtok>
<jtok eid="14" type="method_call" span="316:52:316:63">isUpperCase</jtok>
<jtok eid="14" type="primary_name_ref" span="316:64:316:65">c</jtok>
<jtok eid="14" type="primary_name_ref" span="317:21:317:30">Character</jtok>
<jtok eid="14" type="method_call" span="317:31:317:39">isLetter</jtok>
<jtok eid="14" type="primary_name_ref" span="317:40:317:41">d</jtok>
<jtok eid="14" type="primary_name_ref" span="317:46:317:55">Character</jtok>
<jtok eid="14" type="method_call" span="317:56:317:67">isUpperCase</jtok>
<jtok eid="14" type="primary_name_ref" span="317:68:317:69">d</jtok>
<jtok eid="14" type="primary_name_ref" span="318:17:318:19">sb</jtok>
<jtok eid="14" type="method_call" span="318:20:318:26">append</jtok>
<jtok eid="14" type="primary_name_ref" span="318:27:318:28">c</jtok>
<jtok eid="14" type="primary_name_ref" span="319:17:319:19">sb</jtok>
<jtok eid="14" type="method_call" span="319:20:319:26">append</jtok>
<jtok eid="14" type="string_literal" span="319:27:319:31">". "</jtok>
<jtok eid="14" type="primary_name_ref" span="322:17:322:19">sb</jtok>
<jtok eid="14" type="method_call" span="322:20:322:26">append</jtok>
<jtok eid="14" type="primary_name_ref" span="322:27:322:28">c</jtok>
<jtok eid="14" type="primary_name_ref" span="324:13:324:14">c</jtok>
<jtok eid="14" type="primary_name_ref" span="324:17:324:18">d</jtok>
<jtok eid="14" type="primary_name_ref" span="326:13:326:22">Character</jtok>
<jtok eid="14" type="method_call" span="326:23:326:31">isLetter</jtok>
<jtok eid="14" type="primary_name_ref" span="326:32:326:33">c</jtok>
<jtok eid="14" type="primary_name_ref" span="326:38:326:47">Character</jtok>
<jtok eid="14" type="method_call" span="326:48:326:59">isUpperCase</jtok>
<jtok eid="14" type="primary_name_ref" span="326:60:326:61">c</jtok>
<jtok eid="14" type="primary_name_ref" span="327:15:327:24">Character</jtok>
<jtok eid="14" type="method_call" span="327:25:327:33">isLetter</jtok>
<jtok eid="14" type="primary_name_ref" span="327:34:327:35">d</jtok>
<jtok eid="14" type="primary_name_ref" span="327:40:327:49">Character</jtok>
<jtok eid="14" type="method_call" span="327:50:327:61">isUpperCase</jtok>
<jtok eid="14" type="primary_name_ref" span="327:62:327:63">d</jtok>
<jtok eid="14" type="primary_name_ref" span="328:13:328:15">sb</jtok>
<jtok eid="14" type="method_call" span="328:16:328:22">append</jtok>
<jtok eid="14" type="primary_name_ref" span="328:23:328:24">c</jtok>
<jtok eid="14" type="primary_name_ref" span="329:13:329:15">sb</jtok>
<jtok eid="14" type="method_call" span="329:16:329:22">append</jtok>
<jtok eid="14" type="string_literal" span="329:23:329:27">". "</jtok>
<jtok eid="14" type="primary_name_ref" span="332:13:332:15">sb</jtok>
<jtok eid="14" type="method_call" span="332:16:332:22">append</jtok>
<jtok eid="14" type="primary_name_ref" span="332:23:332:24">c</jtok>
<jtok eid="14" type="primary_name_ref" span="334:16:334:18">sb</jtok>
<jtok eid="14" type="method_call" span="334:19:334:27">toString</jtok>
<jtok eid="14" type="method_call" span="334:30:334:34">trim</jtok>
<jtok eid="15" type="class_or_interface_ref" span="338:10:338:14">File</jtok>
<jtok eid="15" type="method_name" span="338:15:338:33">checkAndCreateFile</jtok>
<jtok eid="15" type="parameter_type" span="338:34:338:40">String</jtok>
<jtok eid="15" type="parameter_name" span="338:41:338:49">filename</jtok>
<jtok eid="15" type="class_or_interface_ref" span="339:5:339:9">File</jtok>
<jtok eid="15" type="local_variable_name" span="339:10:339:11">f</jtok>
<jtok eid="15" type="constructor_call" span="339:18:339:22">File</jtok>
<jtok eid="15" type="primary_name_ref" span="339:23:339:31">filename</jtok>
<jtok eid="15" type="primary_name_ref" span="341:10:341:11">f</jtok>
<jtok eid="15" type="method_call" span="341:12:341:18">exists</jtok>
<jtok eid="15" type="primary_name_ref" span="341:25:341:26">f</jtok>
<jtok eid="15" type="method_call" span="341:27:341:34">canRead</jtok>
<jtok eid="15" type="primary_name_ref" span="341:41:341:42">f</jtok>
<jtok eid="15" type="method_call" span="341:43:341:49">isFile</jtok>
<jtok eid="15" type="primary_name_ref" span="342:7:342:13">System</jtok>
<jtok eid="15" type="qualified_name_ref" span="342:14:342:17">err</jtok>
<jtok eid="15" type="method_call" span="342:18:342:25">println</jtok>
<jtok eid="15" type="string_literal" span="342:26:342:34">"Error "</jtok>
<jtok eid="15" type="primary_name_ref" span="342:37:342:45">filename</jtok>
<jtok eid="15" type="string_literal" span="343:11:343:57">" is not a valid file and|or is not readable."</jtok>
<jtok eid="15" type="primary_name_ref" span="344:7:344:14">Globals</jtok>
<jtok eid="15" type="method_call" span="344:15:344:21">logger</jtok>
<jtok eid="15" type="string_literal" span="344:22:344:30">"Error "</jtok>
<jtok eid="15" type="primary_name_ref" span="344:33:344:41">filename</jtok>
<jtok eid="15" type="string_literal" span="344:44:344:90">" is not a valid file and|or is not readable."</jtok>
<jtok eid="15" type="primary_name_ref" span="349:14:349:15">f</jtok>
<jtok eid="1" type="line_comment" span="352:3:352:55">//==================================================</jtok>
<jtok eid="1" type="line_comment" span="353:3:353:53">// Set a field, unless the string to set is empty.</jtok>
<jtok eid="1" type="line_comment" span="354:3:354:55">//==================================================</jtok>
<jtok eid="16" type="method_name" span="355:22:355:36">setIfNecessary</jtok>
<jtok eid="16" type="parameter_type" span="355:37:355:48">BibtexEntry</jtok>
<jtok eid="16" type="parameter_name" span="355:49:355:51">be</jtok>
<jtok eid="16" type="parameter_type" span="355:53:355:59">String</jtok>
<jtok eid="16" type="parameter_name" span="355:60:355:65">field</jtok>
<jtok eid="16" type="parameter_type" span="355:67:355:73">String</jtok>
<jtok eid="16" type="parameter_name" span="355:74:355:81">content</jtok>
<jtok eid="16" type="primary_name_ref" span="356:10:356:17">content</jtok>
<jtok eid="16" type="method_call" span="356:18:356:24">equals</jtok>
<jtok eid="16" type="string_literal" span="356:25:356:27">""</jtok>
<jtok eid="16" type="primary_name_ref" span="357:7:357:9">be</jtok>
<jtok eid="16" type="method_call" span="357:10:357:18">setField</jtok>
<jtok eid="16" type="primary_name_ref" span="357:19:357:24">field</jtok>
<jtok eid="16" type="primary_name_ref" span="357:26:357:33">content</jtok>
<jtok eid="17" type="class_or_interface_ref" span="362:19:362:25">Reader</jtok>
<jtok eid="17" type="method_name" span="362:26:362:35">getReader</jtok>
<jtok eid="17" type="parameter_type" span="362:36:362:40">File</jtok>
<jtok eid="17" type="parameter_name" span="362:41:362:42">f</jtok>
<jtok eid="17" type="parameter_type" span="362:44:362:50">String</jtok>
<jtok eid="17" type="parameter_name" span="362:51:362:59">encoding</jtok>
<jtok eid="17" type="throws" span="363:14:363:25">IOException</jtok>
<jtok eid="17" type="class_or_interface_ref" span="364:7:364:24">InputStreamReader</jtok>
<jtok eid="17" type="local_variable_name" span="364:25:364:31">reader</jtok>
<jtok eid="17" type="primary_name_ref" span="365:7:365:13">reader</jtok>
<jtok eid="17" type="constructor_call" span="365:20:365:37">InputStreamReader</jtok>
<jtok eid="17" type="constructor_call" span="365:42:365:57">FileInputStream</jtok>
<jtok eid="17" type="primary_name_ref" span="365:58:365:59">f</jtok>
<jtok eid="17" type="primary_name_ref" span="365:62:365:70">encoding</jtok>
<jtok eid="17" type="primary_name_ref" span="367:14:367:20">reader</jtok>
<jtok eid="18" type="class_or_interface_ref" span="370:17:370:23">Reader</jtok>
<jtok eid="18" type="method_name" span="370:24:370:48">getReaderDefaultEncoding</jtok>
<jtok eid="18" type="parameter_type" span="370:49:370:60">InputStream</jtok>
<jtok eid="18" type="parameter_name" span="370:61:370:63">in</jtok>
<jtok eid="18" type="throws" span="371:12:371:23">IOException</jtok>
<jtok eid="18" type="class_or_interface_ref" span="372:5:372:22">InputStreamReader</jtok>
<jtok eid="18" type="local_variable_name" span="372:23:372:29">reader</jtok>
<jtok eid="18" type="primary_name_ref" span="373:5:373:11">reader</jtok>
<jtok eid="18" type="constructor_call" span="373:18:373:35">InputStreamReader</jtok>
<jtok eid="18" type="primary_name_ref" span="373:36:373:38">in</jtok>
<jtok eid="18" type="primary_name_ref" span="373:40:373:47">Globals</jtok>
<jtok eid="18" type="qualified_name_ref" span="373:48:373:53">prefs</jtok>
<jtok eid="18" type="method_call" span="373:54:373:57">get</jtok>
<jtok eid="18" type="string_literal" span="373:58:373:75">"defaultEncoding"</jtok>
<jtok eid="18" type="primary_name_ref" span="375:12:375:18">reader</jtok>
<jtok eid="19" type="class_or_interface_ref" span="378:17:378:31">BibtexDatabase</jtok>
<jtok eid="19" type="method_name" span="378:32:378:43">import_File</jtok>
<jtok eid="19" type="parameter_type" span="378:44:378:50">String</jtok>
<jtok eid="19" type="parameter_name" span="378:51:378:57">format</jtok>
<jtok eid="19" type="parameter_type" span="378:59:378:65">String</jtok>
<jtok eid="19" type="parameter_name" span="378:66:378:74">filename</jtok>
<jtok eid="19" type="throws" span="379:12:379:23">IOException</jtok>
<jtok eid="19" type="class_or_interface_ref" span="380:5:380:19">BibtexDatabase</jtok>
<jtok eid="19" type="local_variable_name" span="380:20:380:28">database</jtok>
<jtok eid="19" type="class_or_interface_ref" span="381:5:381:9">List</jtok>
<jtok eid="19" type="class_or_interface_ref" span="381:10:381:21">BibtexEntry</jtok>
<jtok eid="19" type="local_variable_name" span="381:23:381:33">bibentries</jtok>
<jtok eid="19" type="class_or_interface_ref" span="382:5:382:9">File</jtok>
<jtok eid="19" type="local_variable_name" span="382:10:382:11">f</jtok>
<jtok eid="19" type="constructor_call" span="382:18:382:22">File</jtok>
<jtok eid="19" type="primary_name_ref" span="382:23:382:31">filename</jtok>
<jtok eid="19" type="primary_name_ref" span="384:10:384:11">f</jtok>
<jtok eid="19" type="method_call" span="384:12:384:18">exists</jtok>
<jtok eid="19" type="constructor_call" span="385:17:385:28">IOException</jtok>
<jtok eid="19" type="primary_name_ref" span="385:29:385:36">Globals</jtok>
<jtok eid="19" type="method_call" span="385:37:385:41">lang</jtok>
<jtok eid="19" type="string_literal" span="385:42:385:58">"File not found"</jtok>
<jtok eid="19" type="string_literal" span="385:62:385:66">": "</jtok>
<jtok eid="19" type="primary_name_ref" span="385:69:385:77">filename</jtok>
<jtok eid="19" type="primary_name_ref" span="388:7:388:17">bibentries</jtok>
<jtok eid="19" type="primary_name_ref" span="388:20:388:27">Globals</jtok>
<jtok eid="19" type="qualified_name_ref" span="388:28:388:46">importFormatReader</jtok>
<jtok eid="19" type="method_call" span="388:47:388:61">importFromFile</jtok>
<jtok eid="19" type="primary_name_ref" span="388:62:388:68">format</jtok>
<jtok eid="19" type="primary_name_ref" span="388:70:388:78">filename</jtok>
<jtok eid="19" type="class_or_interface_ref" span="389:14:389:38">IllegalArgumentException</jtok>
<jtok eid="19" type="local_variable_name" span="389:39:389:41">ex</jtok>
<jtok eid="19" type="constructor_call" span="390:17:390:28">IOException</jtok>
<jtok eid="19" type="primary_name_ref" span="390:29:390:36">Globals</jtok>
<jtok eid="19" type="method_call" span="390:37:390:41">lang</jtok>
<jtok eid="19" type="string_literal" span="390:42:390:75">"Could not resolve import format"</jtok>
<jtok eid="19" type="string_literal" span="390:79:390:83">" '"</jtok>
<jtok eid="19" type="primary_name_ref" span="391:11:391:17">format</jtok>
<jtok eid="19" type="string_literal" span="391:20:391:23">"'"</jtok>
<jtok eid="19" type="primary_name_ref" span="394:9:394:19">bibentries</jtok>
<jtok eid="19" type="constructor_call" span="395:17:395:28">IOException</jtok>
<jtok eid="19" type="primary_name_ref" span="395:29:395:36">Globals</jtok>
<jtok eid="19" type="method_call" span="395:37:395:41">lang</jtok>
<jtok eid="19" type="string_literal" span="395:42:395:57">"Import failed"</jtok>
<jtok eid="19" type="line_comment" span="397:5:397:33">// Remove all empty entries:</jtok>
<jtok eid="19" type="method_call" span="398:5:398:22">purgeEmptyEntries</jtok>
<jtok eid="19" type="primary_name_ref" span="398:23:398:33">bibentries</jtok>
<jtok eid="19" type="line_comment" span="400:5:400:32">// Add entries to database.</jtok>
<jtok eid="19" type="primary_name_ref" span="401:5:401:13">database</jtok>
<jtok eid="19" type="constructor_call" span="401:20:401:34">BibtexDatabase</jtok>
<jtok eid="19" type="class_or_interface_ref" span="403:5:403:13">Iterator</jtok>
<jtok eid="19" type="class_or_interface_ref" span="403:14:403:25">BibtexEntry</jtok>
<jtok eid="19" type="local_variable_name" span="403:27:403:29">it</jtok>
<jtok eid="19" type="primary_name_ref" span="403:32:403:42">bibentries</jtok>
<jtok eid="19" type="method_call" span="403:43:403:51">iterator</jtok>
<jtok eid="19" type="primary_name_ref" span="405:12:405:14">it</jtok>
<jtok eid="19" type="method_call" span="405:15:405:22">hasNext</jtok>
<jtok eid="19" type="class_or_interface_ref" span="406:7:406:18">BibtexEntry</jtok>
<jtok eid="19" type="local_variable_name" span="406:19:406:24">entry</jtok>
<jtok eid="19" type="primary_name_ref" span="406:27:406:29">it</jtok>
<jtok eid="19" type="method_call" span="406:30:406:34">next</jtok>
<jtok eid="19" type="primary_name_ref" span="409:9:409:14">entry</jtok>
<jtok eid="19" type="method_call" span="409:15:409:20">setId</jtok>
<jtok eid="19" type="primary_name_ref" span="409:21:409:25">Util</jtok>
<jtok eid="19" type="method_call" span="409:26:409:41">createNeutralId</jtok>
<jtok eid="19" type="primary_name_ref" span="410:9:410:17">database</jtok>
<jtok eid="19" type="method_call" span="410:18:410:29">insertEntry</jtok>
<jtok eid="19" type="primary_name_ref" span="410:30:410:35">entry</jtok>
<jtok eid="19" type="class_or_interface_ref" span="411:16:411:37">KeyCollisionException</jtok>
<jtok eid="19" type="local_variable_name" span="411:38:411:40">ex</jtok>
<jtok eid="19" type="line_comment" span="412:9:412:17">//ignore</jtok>
<jtok eid="19" type="primary_name_ref" span="413:9:413:15">System</jtok>
<jtok eid="19" type="qualified_name_ref" span="413:16:413:19">err</jtok>
<jtok eid="19" type="method_call" span="413:20:413:27">println</jtok>
<jtok eid="19" type="string_literal" span="413:28:413:74">"KeyCollisionException [ addBibEntries(...) ]"</jtok>
<jtok eid="19" type="primary_name_ref" span="417:12:417:20">database</jtok>
<jtok eid="1" type="block_comment" span="420:3:424:6">/**
   * Receives an ArrayList of BibtexEntry instances, iterates through them, and
   * removes all entries that have no fields set. This is useful for rooting out
   * an unsucessful import (wrong format) that returns a number of empty entries.
   */</jtok>
<jtok eid="20" type="method_name" span="425:22:425:39">purgeEmptyEntries</jtok>
<jtok eid="20" type="parameter_type" span="425:40:425:50">Collection</jtok>
<jtok eid="20" type="parameter_type" span="425:51:425:62">BibtexEntry</jtok>
<jtok eid="20" type="parameter_name" span="425:64:425:71">entries</jtok>
<jtok eid="20" type="class_or_interface_ref" span="426:10:426:18">Iterator</jtok>
<jtok eid="20" type="class_or_interface_ref" span="426:19:426:30">BibtexEntry</jtok>
<jtok eid="20" type="local_variable_name" span="426:32:426:33">i</jtok>
<jtok eid="20" type="primary_name_ref" span="426:36:426:43">entries</jtok>
<jtok eid="20" type="method_call" span="426:44:426:52">iterator</jtok>
<jtok eid="20" type="primary_name_ref" span="426:56:426:57">i</jtok>
<jtok eid="20" type="method_call" span="426:58:426:65">hasNext</jtok>
<jtok eid="20" type="class_or_interface_ref" span="427:7:427:18">BibtexEntry</jtok>
<jtok eid="20" type="local_variable_name" span="427:19:427:24">entry</jtok>
<jtok eid="20" type="primary_name_ref" span="427:27:427:28">i</jtok>
<jtok eid="20" type="method_call" span="427:29:427:33">next</jtok>
<jtok eid="20" type="line_comment" span="429:7:429:51">// If there are no fields, remove the entry:</jtok>
<jtok eid="20" type="primary_name_ref" span="430:11:430:16">entry</jtok>
<jtok eid="20" type="method_call" span="430:17:430:29">getAllFields</jtok>
<jtok eid="20" type="method_call" span="430:32:430:36">size</jtok>
<jtok eid="20" type="primary_name_ref" span="431:9:431:10">i</jtok>
<jtok eid="20" type="method_call" span="431:11:431:17">remove</jtok>
<jtok eid="1" type="block_comment" span="435:3:442:5">/**
	 * Tries to import a file by iterating through the available import filters,
	 * and keeping the import that seems most promising.
	 * 
	 * If all fails this method attempts to read this file as bibtex.
	 * 
	 * @throws IOException 
	 */</jtok>
<jtok eid="21" type="class_or_interface_ref" span="443:9:443:13">Pair</jtok>
<jtok eid="21" type="class_or_interface_ref" span="443:14:443:20">String</jtok>
<jtok eid="21" type="class_or_interface_ref" span="443:22:443:34">ParserResult</jtok>
<jtok eid="21" type="method_name" span="443:36:443:55">importUnknownFormat</jtok>
<jtok eid="21" type="parameter_type" span="443:56:443:62">String</jtok>
<jtok eid="21" type="parameter_name" span="443:63:443:71">filename</jtok>
<jtok eid="21" type="throws" span="443:80:443:91">IOException</jtok>
<jtok eid="21" type="class_or_interface_ref" span="445:3:445:7">Pair</jtok>
<jtok eid="21" type="class_or_interface_ref" span="445:8:445:14">String</jtok>
<jtok eid="21" type="class_or_interface_ref" span="445:16:445:28">ParserResult</jtok>
<jtok eid="21" type="local_variable_name" span="445:30:445:36">result</jtok>
<jtok eid="21" type="line_comment" span="447:3:447:34">// Cycle through all importers:</jtok>
<jtok eid="21" type="local_variable_name" span="448:7:448:17">bestResult</jtok>
<jtok eid="21" type="class_or_interface_ref" span="450:14:450:26">ImportFormat</jtok>
<jtok eid="21" type="local_variable_name" span="450:27:450:31">imFo</jtok>
<jtok eid="21" type="method_call" span="450:34:450:50">getImportFormats</jtok>
<jtok eid="21" type="class_or_interface_ref" span="454:17:454:21">List</jtok>
<jtok eid="21" type="class_or_interface_ref" span="454:22:454:33">BibtexEntry</jtok>
<jtok eid="21" type="local_variable_name" span="454:35:454:42">entries</jtok>
<jtok eid="21" type="method_call" span="454:45:454:59">importFromFile</jtok>
<jtok eid="21" type="primary_name_ref" span="454:60:454:64">imFo</jtok>
<jtok eid="21" type="primary_name_ref" span="454:66:454:74">filename</jtok>
<jtok eid="21" type="primary_name_ref" span="456:21:456:28">entries</jtok>
<jtok eid="21" type="method_call" span="457:21:457:38">purgeEmptyEntries</jtok>
<jtok eid="21" type="primary_name_ref" span="457:39:457:46">entries</jtok>
<jtok eid="21" type="local_variable_name" span="459:21:459:31">entryCount</jtok>
<jtok eid="21" type="primary_name_ref" span="459:36:459:43">entries</jtok>
<jtok eid="21" type="primary_name_ref" span="459:55:459:62">entries</jtok>
<jtok eid="21" type="method_call" span="459:63:459:67">size</jtok>
<jtok eid="21" type="primary_name_ref" span="461:21:461:31">entryCount</jtok>
<jtok eid="21" type="primary_name_ref" span="461:34:461:44">bestResult</jtok>
<jtok eid="21" type="primary_name_ref" span="462:21:462:31">bestResult</jtok>
<jtok eid="21" type="primary_name_ref" span="462:34:462:44">entryCount</jtok>
<jtok eid="21" type="primary_name_ref" span="464:21:464:27">result</jtok>
<jtok eid="21" type="constructor_call" span="464:34:464:38">Pair</jtok>
<jtok eid="21" type="constructor_call" span="464:39:464:45">String</jtok>
<jtok eid="21" type="constructor_call" span="464:47:464:59">ParserResult</jtok>
<jtok eid="21" type="primary_name_ref" span="464:61:464:65">imFo</jtok>
<jtok eid="21" type="method_call" span="464:66:464:79">getFormatName</jtok>
<jtok eid="21" type="constructor_call" span="465:25:465:37">ParserResult</jtok>
<jtok eid="21" type="primary_name_ref" span="465:38:465:45">entries</jtok>
<jtok eid="21" type="class_or_interface_ref" span="467:22:467:33">IOException</jtok>
<jtok eid="21" type="local_variable_name" span="467:34:467:36">ex</jtok>
<jtok eid="21" type="line_comment" span="468:17:468:53">// The import didn't succeed. Go on.</jtok>
<jtok eid="21" type="primary_name_ref" span="472:7:472:13">result</jtok>
<jtok eid="21" type="primary_name_ref" span="473:11:473:17">result</jtok>
<jtok eid="21" type="line_comment" span="475:7:475:65">// Finally, if all else fails, see if it is a BibTeX file:</jtok>
<jtok eid="21" type="class_or_interface_ref" span="477:11:477:23">ParserResult</jtok>
<jtok eid="21" type="local_variable_name" span="477:24:477:26">pr</jtok>
<jtok eid="21" type="primary_name_ref" span="477:29:477:47">OpenDatabaseAction</jtok>
<jtok eid="21" type="method_call" span="477:48:477:60">loadDatabase</jtok>
<jtok eid="21" type="constructor_call" span="477:65:477:69">File</jtok>
<jtok eid="21" type="primary_name_ref" span="477:70:477:78">filename</jtok>
<jtok eid="21" type="primary_name_ref" span="478:19:478:26">Globals</jtok>
<jtok eid="21" type="qualified_name_ref" span="478:27:478:32">prefs</jtok>
<jtok eid="21" type="method_call" span="478:33:478:36">get</jtok>
<jtok eid="21" type="string_literal" span="478:37:478:54">"defaultEncoding"</jtok>
<jtok eid="21" type="primary_name_ref" span="479:16:479:18">pr</jtok>
<jtok eid="21" type="method_call" span="479:19:479:30">getDatabase</jtok>
<jtok eid="21" type="method_call" span="479:33:479:46">getEntryCount</jtok>
<jtok eid="21" type="primary_name_ref" span="480:23:480:25">pr</jtok>
<jtok eid="21" type="method_call" span="480:26:480:37">getDatabase</jtok>
<jtok eid="21" type="method_call" span="480:40:480:54">getStringCount</jtok>
<jtok eid="21" type="primary_name_ref" span="481:15:481:17">pr</jtok>
<jtok eid="21" type="method_call" span="481:18:481:25">setFile</jtok>
<jtok eid="21" type="constructor_call" span="481:30:481:34">File</jtok>
<jtok eid="21" type="primary_name_ref" span="481:35:481:43">filename</jtok>
<jtok eid="21" type="constructor_call" span="483:26:483:30">Pair</jtok>
<jtok eid="21" type="constructor_call" span="483:31:483:37">String</jtok>
<jtok eid="21" type="constructor_call" span="483:39:483:51">ParserResult</jtok>
<jtok eid="21" type="primary_name_ref" span="483:53:483:66">BIBTEX_FORMAT</jtok>
<jtok eid="21" type="primary_name_ref" span="483:68:483:70">pr</jtok>
<jtok eid="21" type="class_or_interface_ref" span="485:16:485:32">RuntimeException</jtok>
<jtok eid="21" type="local_variable_name" span="485:33:485:35">ex</jtok>
</jdoc>