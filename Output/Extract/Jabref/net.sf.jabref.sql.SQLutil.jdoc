<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="net.sf.jabref.sql.SQLutil" jls="java5">
<jent id="0" type="file" span="0:0:1325:1">Source/jabref/src/java/net/sf/jabref/sql/SQLutil.java</jent>
<jent id="1" pid="0" type="class" span="51:1:1325:1">net.sf.jabref.sql.SQLutil</jent>
<jent id="2" pid="1" type="enum" span="53:24:55:5">net.sf.jabref.sql.SQLutil.DBTYPE</jent>
<jent id="3" pid="1" type="method" span="67:5:80:5">net.sf.jabref.sql.SQLutil.getDBType(DBStrings)</jent>
<jent id="4" pid="1" type="method" span="89:5:106:5">net.sf.jabref.sql.SQLutil.createJDBCurl(DBStrings)</jent>
<jent id="5" pid="1" type="method" span="108:5:123:5">net.sf.jabref.sql.SQLutil.getJDBCdriver(DBStrings)</jent>
<jent id="6" pid="1" type="method" span="131:5:143:5">net.sf.jabref.sql.SQLutil.connectToDB(DBStrings)</jent>
<jent id="7" pid="1" type="method" span="155:5:171:5">net.sf.jabref.sql.SQLutil.processDMLWithResults(Object,String)</jent>
<jent id="8" pid="1" type="method" span="173:5:184:5">net.sf.jabref.sql.SQLutil.processDMLWithSingleResult(Connection,String)</jent>
<jent id="9" pid="1" type="method" span="194:5:205:5">net.sf.jabref.sql.SQLutil.execDMLWithResults(Connection,String)</jent>
<jent id="10" pid="1" type="method" span="216:5:229:5">net.sf.jabref.sql.SQLutil.processDML(Object,String)</jent>
<jent id="11" pid="1" type="method" span="240:5:251:5">net.sf.jabref.sql.SQLutil.execDML(Connection,String)</jent>
<jent id="12" pid="1" type="method" span="254:5:259:5">net.sf.jabref.sql.SQLutil.getFields()</jent>
<jent id="13" pid="1" type="method" span="266:5:290:5">net.sf.jabref.sql.SQLutil.refreshFields()</jent>
<jent id="14" pid="1" type="method" span="303:5:313:5">net.sf.jabref.sql.SQLutil.uniqueInsert(ArrayList&lt;String&gt;,String[])</jent>
<jent id="15" pid="1" type="method" span="330:5:349:5">net.sf.jabref.sql.SQLutil.exportDatabase(BibtexDatabase,MetaData,Set&lt;String&gt;,String,DBTYPE)</jent>
<jent id="16" pid="1" type="method" span="351:5:381:5">net.sf.jabref.sql.SQLutil.importDatabase(Set&lt;String&gt;,DBStrings)</jent>
<jent id="17" pid="1" type="method" span="383:6:469:6">net.sf.jabref.sql.SQLutil.importDatabase_worker(DBTYPE,Set&lt;String&gt;,Connection)</jent>
<jent id="18" pid="1" type="method" span="471:5:555:5">net.sf.jabref.sql.SQLutil.importGroupsTree(DBTYPE,MetaData,HashMap&lt;String,BibtexEntry&gt;,Connection)</jent>
<jent id="19" pid="1" type="method" span="564:5:566:5">net.sf.jabref.sql.SQLutil.findGroupTypeName(String,Connection)</jent>
<jent id="20" pid="1" type="method" span="582:5:615:5">net.sf.jabref.sql.SQLutil.exportDatabase(BibtexDatabase,MetaData,Set&lt;String&gt;,DBStrings)</jent>
<jent id="21" pid="1" type="method" span="632:5:662:5">net.sf.jabref.sql.SQLutil.exportDatabase_worker(DBTYPE,BibtexDatabase,MetaData,Set&lt;String&gt;,Object)</jent>
<jent id="22" pid="1" type="method" span="673:5:733:5">net.sf.jabref.sql.SQLutil.dmlCreateTables(DBTYPE,Object)</jent>
<jent id="23" pid="1" type="method" span="746:5:755:5">net.sf.jabref.sql.SQLutil.fieldsAsCols(ArrayList&lt;String&gt;,String)</jent>
<jent id="24" pid="1" type="method" span="769:5:831:5">net.sf.jabref.sql.SQLutil.dmlTable_mysql(String,String,Object)</jent>
<jent id="25" pid="1" type="method" span="845:5:897:5">net.sf.jabref.sql.SQLutil.dmlTable_derby(String,String,Object)</jent>
<jent id="26" pid="1" type="method" span="907:5:918:5">net.sf.jabref.sql.SQLutil.dmlPopTab_GT(Object)</jent>
<jent id="27" pid="1" type="method" span="926:5:969:5">net.sf.jabref.sql.SQLutil.dmlPopTab_ET(Object)</jent>
<jent id="28" pid="1" type="method" span="987:5:995:5">net.sf.jabref.sql.SQLutil.setFieldID(ArrayList&lt;String&gt;,ArrayList&lt;String&gt;,String[],String)</jent>
<jent id="29" pid="1" type="method" span="1007:5:1049:5">net.sf.jabref.sql.SQLutil.dmlPopTab_FD(List&lt;BibtexEntry&gt;,Object)</jent>
<jent id="30" pid="1" type="method" span="1051:5:1073:5">net.sf.jabref.sql.SQLutil.dmlPopTab_ST(BibtexDatabase,Object)</jent>
<jent id="31" pid="1" type="method" span="1084:2:1088:5">net.sf.jabref.sql.SQLutil.dmlPopTab_GP(GroupTreeNode,Object)</jent>
<jent id="32" pid="1" type="method" span="1102:2:1144:2">net.sf.jabref.sql.SQLutil.dmlPopTab_GP_worker(GroupTreeNode,int,int,Object)</jent>
<jent id="33" pid="1" type="method" span="1156:2:1161:5">net.sf.jabref.sql.SQLutil.dmlPopTab_EG(GroupTreeNode,Object)</jent>
<jent id="34" pid="1" type="method" span="1176:2:1205:2">net.sf.jabref.sql.SQLutil.dmlPopTab_EG_worker(GroupTreeNode,int,int,Object)</jent>
<jent id="35" pid="1" type="method" span="1216:5:1234:5">net.sf.jabref.sql.SQLutil.getExceptionMessage(Exception,DBTYPE)</jent>
<jent id="36" pid="1" type="method" span="1242:5:1323:5">net.sf.jabref.sql.SQLutil.getExceptionMessage_MySQL(Exception)</jent>
<jtok eid="0" type="block_comment" span="1:1:8:4">/*
 * SQLutil.java
 *
 * Created on October 4, 2007, 5:28 PM
 *
 * To change this template, choose Tools | Template Manager
 * and open the template in the editor.
 */</jtok>
<jtok eid="0" type="block_comment" span="47:1:50:4">/**
 *
 * @author pattonlk
 */</jtok>
<jtok eid="1" type="class_name" span="51:14:51:21">SQLutil</jtok>
<jtok eid="2" type="enum_name" span="53:17:53:23">DBTYPE</jtok>
<jtok eid="2" type="enum_constant_name" span="54:9:54:14">MYSQL</jtok>
<jtok eid="2" type="enum_constant_name" span="54:16:54:21">DERBY</jtok>
<jtok eid="1" type="class_or_interface_ref" span="57:20:57:29">ArrayList</jtok>
<jtok eid="1" type="class_or_interface_ref" span="57:30:57:36">String</jtok>
<jtok eid="1" type="field_name" span="57:38:57:44">fields</jtok>
<jtok eid="1" type="class_or_interface_ref" span="58:20:58:26">String</jtok>
<jtok eid="1" type="field_name" span="58:27:58:35">fieldstr</jtok>
<jtok eid="1" type="block_comment" span="60:5:66:8">/**
     * returns the DBTYPE associated with a DBStrings ServerType
     *
     * @param dbstrings
     *          The DBStrings to query
     * @return The DBTYPE associated withthe dbstrings ServerType
     */</jtok>
<jtok eid="3" type="class_or_interface_ref" span="67:19:67:25">DBTYPE</jtok>
<jtok eid="3" type="method_name" span="67:26:67:35">getDBType</jtok>
<jtok eid="3" type="parameter_type" span="67:37:67:46">DBStrings</jtok>
<jtok eid="3" type="parameter_name" span="67:47:67:56">dbstrings</jtok>
<jtok eid="3" type="class_or_interface_ref" span="69:9:69:15">DBTYPE</jtok>
<jtok eid="3" type="local_variable_name" span="69:16:69:22">dbtype</jtok>
<jtok eid="3" type="class_or_interface_ref" span="70:9:70:15">String</jtok>
<jtok eid="3" type="local_variable_name" span="70:16:70:23">srvtype</jtok>
<jtok eid="3" type="primary_name_ref" span="70:26:70:35">dbstrings</jtok>
<jtok eid="3" type="method_call" span="70:36:70:49">getServerType</jtok>
<jtok eid="3" type="primary_name_ref" span="72:13:72:20">srvtype</jtok>
<jtok eid="3" type="method_call" span="72:21:72:37">equalsIgnoreCase</jtok>
<jtok eid="3" type="string_literal" span="72:38:72:45">"mysql"</jtok>
<jtok eid="3" type="primary_name_ref" span="73:13:73:19">dbtype</jtok>
<jtok eid="3" type="primary_name_ref" span="73:22:73:28">DBTYPE</jtok>
<jtok eid="3" type="qualified_name_ref" span="73:29:73:34">MYSQL</jtok>
<jtok eid="3" type="primary_name_ref" span="75:13:75:20">srvtype</jtok>
<jtok eid="3" type="method_call" span="75:21:75:37">equalsIgnoreCase</jtok>
<jtok eid="3" type="string_literal" span="75:38:75:45">"derby"</jtok>
<jtok eid="3" type="primary_name_ref" span="76:13:76:19">dbtype</jtok>
<jtok eid="3" type="primary_name_ref" span="76:22:76:28">DBTYPE</jtok>
<jtok eid="3" type="qualified_name_ref" span="76:29:76:34">DERBY</jtok>
<jtok eid="3" type="primary_name_ref" span="79:16:79:22">dbtype</jtok>
<jtok eid="1" type="block_comment" span="82:5:88:8">/**
     * This routine returns the JDBC url corresponding to the DBStrings input.
     *
     * @param dbstrings
     *          The DBStrings to use to make the connection
     * @return The JDBC url corresponding to the input DBStrings
     */</jtok>
<jtok eid="4" type="class_or_interface_ref" span="89:19:89:25">String</jtok>
<jtok eid="4" type="method_name" span="89:26:89:39">createJDBCurl</jtok>
<jtok eid="4" type="parameter_type" span="89:41:89:50">DBStrings</jtok>
<jtok eid="4" type="parameter_name" span="89:51:89:54">dbs</jtok>
<jtok eid="4" type="class_or_interface_ref" span="91:9:91:15">String</jtok>
<jtok eid="4" type="local_variable_name" span="91:16:91:19">url</jtok>
<jtok eid="4" type="string_literal" span="91:22:91:24">""</jtok>
<jtok eid="4" type="class_or_interface_ref" span="92:9:92:15">String</jtok>
<jtok eid="4" type="local_variable_name" span="92:16:92:26">servertype</jtok>
<jtok eid="4" type="primary_name_ref" span="92:29:92:32">dbs</jtok>
<jtok eid="4" type="method_call" span="92:33:92:46">getServerType</jtok>
<jtok eid="4" type="primary_name_ref" span="94:13:94:23">servertype</jtok>
<jtok eid="4" type="method_call" span="94:24:94:40">equalsIgnoreCase</jtok>
<jtok eid="4" type="string_literal" span="94:41:94:48">"mysql"</jtok>
<jtok eid="4" type="primary_name_ref" span="95:13:95:16">url</jtok>
<jtok eid="4" type="string_literal" span="95:19:95:26">"jdbc:"</jtok>
<jtok eid="4" type="primary_name_ref" span="95:29:95:32">dbs</jtok>
<jtok eid="4" type="method_call" span="95:33:95:46">getServerType</jtok>
<jtok eid="4" type="method_call" span="95:49:95:60">toLowerCase</jtok>
<jtok eid="4" type="string_literal" span="95:65:95:70">"://"</jtok>
<jtok eid="4" type="primary_name_ref" span="96:29:96:32">dbs</jtok>
<jtok eid="4" type="method_call" span="96:33:96:50">getServerHostname</jtok>
<jtok eid="4" type="string_literal" span="96:55:96:58">"/"</jtok>
<jtok eid="4" type="primary_name_ref" span="97:29:97:32">dbs</jtok>
<jtok eid="4" type="method_call" span="97:33:97:44">getDatabase</jtok>
<jtok eid="4" type="primary_name_ref" span="100:13:100:23">servertype</jtok>
<jtok eid="4" type="method_call" span="100:24:100:40">equalsIgnoreCase</jtok>
<jtok eid="4" type="string_literal" span="100:41:100:48">"derby"</jtok>
<jtok eid="4" type="primary_name_ref" span="101:13:101:16">url</jtok>
<jtok eid="4" type="string_literal" span="101:19:101:26">"jdbc:"</jtok>
<jtok eid="4" type="primary_name_ref" span="101:29:101:32">dbs</jtok>
<jtok eid="4" type="method_call" span="101:33:101:46">getServerType</jtok>
<jtok eid="4" type="method_call" span="101:49:101:60">toLowerCase</jtok>
<jtok eid="4" type="string_literal" span="101:65:101:68">":"</jtok>
<jtok eid="4" type="primary_name_ref" span="102:29:102:32">dbs</jtok>
<jtok eid="4" type="method_call" span="102:33:102:44">getDatabase</jtok>
<jtok eid="4" type="string_literal" span="102:49:102:63">";create=true"</jtok>
<jtok eid="4" type="primary_name_ref" span="105:16:105:19">url</jtok>
<jtok eid="5" type="class_or_interface_ref" span="108:19:108:25">String</jtok>
<jtok eid="5" type="method_name" span="108:26:108:39">getJDBCdriver</jtok>
<jtok eid="5" type="parameter_type" span="108:41:108:50">DBStrings</jtok>
<jtok eid="5" type="parameter_name" span="108:51:108:60">dbstrings</jtok>
<jtok eid="5" type="class_or_interface_ref" span="110:9:110:15">String</jtok>
<jtok eid="5" type="local_variable_name" span="110:16:110:22">driver</jtok>
<jtok eid="5" type="string_literal" span="110:25:110:27">""</jtok>
<jtok eid="5" type="class_or_interface_ref" span="111:9:111:15">String</jtok>
<jtok eid="5" type="local_variable_name" span="111:16:111:26">servertype</jtok>
<jtok eid="5" type="primary_name_ref" span="111:29:111:38">dbstrings</jtok>
<jtok eid="5" type="method_call" span="111:39:111:52">getServerType</jtok>
<jtok eid="5" type="primary_name_ref" span="113:13:113:23">servertype</jtok>
<jtok eid="5" type="method_call" span="113:24:113:40">equalsIgnoreCase</jtok>
<jtok eid="5" type="string_literal" span="113:41:113:48">"mysql"</jtok>
<jtok eid="5" type="primary_name_ref" span="114:13:114:19">driver</jtok>
<jtok eid="5" type="string_literal" span="114:21:114:44">"com.mysql.jdbc.Driver"</jtok>
<jtok eid="5" type="primary_name_ref" span="117:13:117:23">servertype</jtok>
<jtok eid="5" type="method_call" span="117:24:117:40">equalsIgnoreCase</jtok>
<jtok eid="5" type="string_literal" span="117:41:117:48">"derby"</jtok>
<jtok eid="5" type="primary_name_ref" span="118:13:118:19">driver</jtok>
<jtok eid="5" type="string_literal" span="118:22:118:60">"org.apache.derby.jdbc.EmbeddedDriver"</jtok>
<jtok eid="5" type="primary_name_ref" span="121:16:121:22">driver</jtok>
<jtok eid="1" type="block_comment" span="125:5:130:8">/**
     * This routine accepts the location of a MySQL database specified as a url as 
     * well as the username and password for the MySQL user with appropriate access
     * to this database.  The routine returns a valid Connection object if the MySQL 
     * database is successfully opened. It returns a null object otherwise.
     */</jtok>
<jtok eid="6" type="class_or_interface_ref" span="131:19:131:29">Connection</jtok>
<jtok eid="6" type="method_name" span="131:30:131:41">connectToDB</jtok>
<jtok eid="6" type="parameter_type" span="131:43:131:52">DBStrings</jtok>
<jtok eid="6" type="parameter_name" span="131:53:131:62">dbstrings</jtok>
<jtok eid="6" type="throws" span="132:16:132:25">Exception</jtok>
<jtok eid="6" type="class_or_interface_ref" span="134:9:134:15">String</jtok>
<jtok eid="6" type="local_variable_name" span="134:16:134:19">url</jtok>
<jtok eid="6" type="method_call" span="134:22:134:35">createJDBCurl</jtok>
<jtok eid="6" type="primary_name_ref" span="134:36:134:45">dbstrings</jtok>
<jtok eid="6" type="class_or_interface_ref" span="135:9:135:15">String</jtok>
<jtok eid="6" type="local_variable_name" span="135:16:135:19">drv</jtok>
<jtok eid="6" type="method_call" span="135:22:135:35">getJDBCdriver</jtok>
<jtok eid="6" type="primary_name_ref" span="135:36:135:45">dbstrings</jtok>
<jtok eid="6" type="primary_name_ref" span="137:9:137:14">Class</jtok>
<jtok eid="6" type="method_call" span="137:15:137:22">forName</jtok>
<jtok eid="6" type="primary_name_ref" span="137:24:137:27">drv</jtok>
<jtok eid="6" type="method_call" span="137:29:137:40">newInstance</jtok>
<jtok eid="6" type="class_or_interface_ref" span="138:9:138:19">Connection</jtok>
<jtok eid="6" type="local_variable_name" span="138:20:138:24">conn</jtok>
<jtok eid="6" type="primary_name_ref" span="138:27:138:40">DriverManager</jtok>
<jtok eid="6" type="method_call" span="138:41:138:54">getConnection</jtok>
<jtok eid="6" type="primary_name_ref" span="138:56:138:59">url</jtok>
<jtok eid="6" type="primary_name_ref" span="139:28:139:37">dbstrings</jtok>
<jtok eid="6" type="method_call" span="139:38:139:49">getUsername</jtok>
<jtok eid="6" type="primary_name_ref" span="139:53:139:62">dbstrings</jtok>
<jtok eid="6" type="method_call" span="139:63:139:74">getPassword</jtok>
<jtok eid="6" type="primary_name_ref" span="141:16:141:20">conn</jtok>
<jtok eid="1" type="block_comment" span="146:5:154:8">/**
     * Utility method for processing DML with proper output
     *
     * @param out
     *          The output (PrintStream or Connection) object to which the DML should be sent
     * @param dml
     *          The DML statements to be processed
     * @return the result of the statement
     */</jtok>
<jtok eid="7" type="class_or_interface_ref" span="155:20:155:26">Object</jtok>
<jtok eid="7" type="method_name" span="155:27:155:48">processDMLWithResults</jtok>
<jtok eid="7" type="parameter_type" span="155:51:155:57">Object</jtok>
<jtok eid="7" type="parameter_name" span="155:58:155:61">out</jtok>
<jtok eid="7" type="parameter_type" span="155:63:155:69">String</jtok>
<jtok eid="7" type="parameter_name" span="155:70:155:73">dml</jtok>
<jtok eid="7" type="throws" span="156:36:156:48">SQLException</jtok>
<jtok eid="7" type="primary_name_ref" span="158:14:158:17">out</jtok>
<jtok eid="7" type="class_or_interface_ref" span="158:29:158:40">PrintStream</jtok>
<jtok eid="7" type="line_comment" span="159:13:159:57">// TODO: how to handle the PrintStream case?</jtok>
<jtok eid="7" type="class_or_interface_ref" span="160:13:160:24">PrintStream</jtok>
<jtok eid="7" type="local_variable_name" span="160:25:160:29">fout</jtok>
<jtok eid="7" type="class_or_interface_ref" span="160:33:160:44">PrintStream</jtok>
<jtok eid="7" type="primary_name_ref" span="160:46:160:49">out</jtok>
<jtok eid="7" type="primary_name_ref" span="161:13:161:17">fout</jtok>
<jtok eid="7" type="method_call" span="161:18:161:25">println</jtok>
<jtok eid="7" type="primary_name_ref" span="161:26:161:29">dml</jtok>
<jtok eid="7" type="primary_name_ref" span="165:14:165:17">out</jtok>
<jtok eid="7" type="class_or_interface_ref" span="165:29:165:39">Connection</jtok>
<jtok eid="7" type="class_or_interface_ref" span="166:13:166:23">Connection</jtok>
<jtok eid="7" type="local_variable_name" span="166:24:166:28">conn</jtok>
<jtok eid="7" type="class_or_interface_ref" span="166:32:166:42">Connection</jtok>
<jtok eid="7" type="primary_name_ref" span="166:44:166:47">out</jtok>
<jtok eid="7" type="method_call" span="167:20:167:38">execDMLWithResults</jtok>
<jtok eid="7" type="primary_name_ref" span="167:39:167:43">conn</jtok>
<jtok eid="7" type="primary_name_ref" span="167:45:167:48">dml</jtok>
<jtok eid="8" type="class_or_interface_ref" span="173:20:173:26">String</jtok>
<jtok eid="8" type="method_name" span="173:27:173:53">processDMLWithSingleResult</jtok>
<jtok eid="8" type="parameter_type" span="173:56:173:66">Connection</jtok>
<jtok eid="8" type="parameter_name" span="173:67:173:71">conn</jtok>
<jtok eid="8" type="parameter_type" span="173:73:173:79">String</jtok>
<jtok eid="8" type="parameter_name" span="173:80:173:85">query</jtok>
<jtok eid="8" type="throws" span="173:94:173:106">SQLException</jtok>
<jtok eid="8" type="class_or_interface_ref" span="174:9:174:15">Object</jtok>
<jtok eid="8" type="local_variable_name" span="174:16:174:19">res</jtok>
<jtok eid="8" type="method_call" span="174:22:174:40">execDMLWithResults</jtok>
<jtok eid="8" type="primary_name_ref" span="174:41:174:45">conn</jtok>
<jtok eid="8" type="primary_name_ref" span="174:47:174:52">query</jtok>
<jtok eid="8" type="primary_name_ref" span="175:13:175:16">res</jtok>
<jtok eid="8" type="class_or_interface_ref" span="175:28:175:37">Statement</jtok>
<jtok eid="8" type="class_or_interface_ref" span="176:13:176:22">Statement</jtok>
<jtok eid="8" type="local_variable_name" span="176:23:176:25">st</jtok>
<jtok eid="8" type="class_or_interface_ref" span="176:29:176:38">Statement</jtok>
<jtok eid="8" type="primary_name_ref" span="176:39:176:42">res</jtok>
<jtok eid="8" type="class_or_interface_ref" span="177:13:177:22">ResultSet</jtok>
<jtok eid="8" type="local_variable_name" span="177:23:177:25">rs</jtok>
<jtok eid="8" type="primary_name_ref" span="177:28:177:30">st</jtok>
<jtok eid="8" type="method_call" span="177:31:177:43">getResultSet</jtok>
<jtok eid="8" type="primary_name_ref" span="178:13:178:15">rs</jtok>
<jtok eid="8" type="method_call" span="178:16:178:20">next</jtok>
<jtok eid="8" type="class_or_interface_ref" span="179:13:179:19">String</jtok>
<jtok eid="8" type="local_variable_name" span="179:20:179:28">returned</jtok>
<jtok eid="8" type="primary_name_ref" span="179:31:179:33">rs</jtok>
<jtok eid="8" type="method_call" span="179:34:179:43">getString</jtok>
<jtok eid="8" type="primary_name_ref" span="180:13:180:15">st</jtok>
<jtok eid="8" type="method_call" span="180:16:180:21">close</jtok>
<jtok eid="8" type="primary_name_ref" span="181:20:181:28">returned</jtok>
<jtok eid="1" type="block_comment" span="186:5:193:8">/**
     * Utility method for executing DML
     *
     * @param conn
     *          The DML Connection object that will execute the SQL
     * @param dml
     *          The DML statements to be executed
     */</jtok>
<jtok eid="9" type="class_or_interface_ref" span="194:19:194:28">Statement</jtok>
<jtok eid="9" type="method_name" span="194:29:194:47">execDMLWithResults</jtok>
<jtok eid="9" type="parameter_type" span="194:48:194:58">Connection</jtok>
<jtok eid="9" type="parameter_name" span="194:59:194:63">conn</jtok>
<jtok eid="9" type="parameter_type" span="194:65:194:71">String</jtok>
<jtok eid="9" type="parameter_name" span="194:72:194:75">dml</jtok>
<jtok eid="9" type="throws" span="194:84:194:96">SQLException</jtok>
<jtok eid="9" type="line_comment" span="195:9:195:46">// System.out.println(dml); // remove</jtok>
<jtok eid="9" type="class_or_interface_ref" span="196:9:196:18">Statement</jtok>
<jtok eid="9" type="local_variable_name" span="196:19:196:24">stmnt</jtok>
<jtok eid="9" type="primary_name_ref" span="196:27:196:31">conn</jtok>
<jtok eid="9" type="method_call" span="196:32:196:47">createStatement</jtok>
<jtok eid="9" type="primary_name_ref" span="197:9:197:14">stmnt</jtok>
<jtok eid="9" type="method_call" span="197:15:197:27">executeQuery</jtok>
<jtok eid="9" type="primary_name_ref" span="197:28:197:31">dml</jtok>
<jtok eid="9" type="class_or_interface_ref" span="198:9:198:19">SQLWarning</jtok>
<jtok eid="9" type="local_variable_name" span="198:20:198:24">warn</jtok>
<jtok eid="9" type="primary_name_ref" span="198:27:198:32">stmnt</jtok>
<jtok eid="9" type="method_call" span="198:33:198:44">getWarnings</jtok>
<jtok eid="9" type="primary_name_ref" span="199:13:199:17">warn</jtok>
<jtok eid="9" type="line_comment" span="200:13:200:39">//TODO handle SQL warnings</jtok>
<jtok eid="9" type="primary_name_ref" span="201:13:201:19">System</jtok>
<jtok eid="9" type="qualified_name_ref" span="201:20:201:23">out</jtok>
<jtok eid="9" type="method_call" span="201:24:201:31">println</jtok>
<jtok eid="9" type="primary_name_ref" span="201:32:201:36">warn</jtok>
<jtok eid="9" type="method_call" span="201:37:201:45">toString</jtok>
<jtok eid="9" type="primary_name_ref" span="202:13:202:19">System</jtok>
<jtok eid="9" type="qualified_name_ref" span="202:20:202:23">out</jtok>
<jtok eid="9" type="method_call" span="202:24:202:31">println</jtok>
<jtok eid="9" type="string_literal" span="202:32:202:35">"("</jtok>
<jtok eid="9" type="primary_name_ref" span="202:36:202:39">dml</jtok>
<jtok eid="9" type="string_literal" span="202:40:202:43">")"</jtok>
<jtok eid="9" type="primary_name_ref" span="204:16:204:21">stmnt</jtok>
<jtok eid="1" type="block_comment" span="208:5:215:8">/**
     * Utility method for processing DML with proper output
     *
     * @param out
     *          The output (PrintStream or Connection) object to which the DML should be sent
     * @param dml
     *          The DML statements to be processed
     */</jtok>
<jtok eid="10" type="method_name" span="216:25:216:35">processDML</jtok>
<jtok eid="10" type="parameter_type" span="216:38:216:44">Object</jtok>
<jtok eid="10" type="parameter_name" span="216:45:216:48">out</jtok>
<jtok eid="10" type="parameter_type" span="216:50:216:56">String</jtok>
<jtok eid="10" type="parameter_name" span="216:57:216:60">dml</jtok>
<jtok eid="10" type="throws" span="217:36:217:48">SQLException</jtok>
<jtok eid="10" type="primary_name_ref" span="219:14:219:17">out</jtok>
<jtok eid="10" type="class_or_interface_ref" span="219:29:219:40">PrintStream</jtok>
<jtok eid="10" type="class_or_interface_ref" span="220:13:220:24">PrintStream</jtok>
<jtok eid="10" type="local_variable_name" span="220:25:220:29">fout</jtok>
<jtok eid="10" type="class_or_interface_ref" span="220:33:220:44">PrintStream</jtok>
<jtok eid="10" type="primary_name_ref" span="220:46:220:49">out</jtok>
<jtok eid="10" type="primary_name_ref" span="221:13:221:17">fout</jtok>
<jtok eid="10" type="method_call" span="221:18:221:25">println</jtok>
<jtok eid="10" type="primary_name_ref" span="221:26:221:29">dml</jtok>
<jtok eid="10" type="primary_name_ref" span="224:14:224:17">out</jtok>
<jtok eid="10" type="class_or_interface_ref" span="224:29:224:39">Connection</jtok>
<jtok eid="10" type="class_or_interface_ref" span="225:13:225:23">Connection</jtok>
<jtok eid="10" type="local_variable_name" span="225:24:225:28">conn</jtok>
<jtok eid="10" type="class_or_interface_ref" span="225:32:225:42">Connection</jtok>
<jtok eid="10" type="primary_name_ref" span="225:44:225:47">out</jtok>
<jtok eid="10" type="method_call" span="226:13:226:20">execDML</jtok>
<jtok eid="10" type="primary_name_ref" span="226:21:226:25">conn</jtok>
<jtok eid="10" type="primary_name_ref" span="226:27:226:30">dml</jtok>
<jtok eid="1" type="block_comment" span="232:5:239:8">/**
     * Utility method for executing DML
     *
     * @param conn
     *          The DML Connection object that will execute the SQL
     * @param dml
     *          The DML statements to be executed
     */</jtok>
<jtok eid="11" type="method_name" span="240:24:240:31">execDML</jtok>
<jtok eid="11" type="parameter_type" span="240:32:240:42">Connection</jtok>
<jtok eid="11" type="parameter_name" span="240:43:240:47">conn</jtok>
<jtok eid="11" type="parameter_type" span="240:49:240:55">String</jtok>
<jtok eid="11" type="parameter_name" span="240:56:240:59">dml</jtok>
<jtok eid="11" type="throws" span="240:68:240:80">SQLException</jtok>
<jtok eid="11" type="line_comment" span="241:9:241:46">// System.out.println(dml); // remove</jtok>
<jtok eid="11" type="class_or_interface_ref" span="242:9:242:18">Statement</jtok>
<jtok eid="11" type="local_variable_name" span="242:19:242:24">stmnt</jtok>
<jtok eid="11" type="primary_name_ref" span="242:27:242:31">conn</jtok>
<jtok eid="11" type="method_call" span="242:32:242:47">createStatement</jtok>
<jtok eid="11" type="primary_name_ref" span="243:9:243:14">stmnt</jtok>
<jtok eid="11" type="method_call" span="243:15:243:22">execute</jtok>
<jtok eid="11" type="primary_name_ref" span="243:23:243:26">dml</jtok>
<jtok eid="11" type="class_or_interface_ref" span="244:9:244:19">SQLWarning</jtok>
<jtok eid="11" type="local_variable_name" span="244:20:244:24">warn</jtok>
<jtok eid="11" type="primary_name_ref" span="244:27:244:32">stmnt</jtok>
<jtok eid="11" type="method_call" span="244:33:244:44">getWarnings</jtok>
<jtok eid="11" type="primary_name_ref" span="245:13:245:17">warn</jtok>
<jtok eid="11" type="line_comment" span="246:13:246:39">//TODO handle SQL warnings</jtok>
<jtok eid="11" type="primary_name_ref" span="247:13:247:19">System</jtok>
<jtok eid="11" type="qualified_name_ref" span="247:20:247:23">out</jtok>
<jtok eid="11" type="method_call" span="247:24:247:31">println</jtok>
<jtok eid="11" type="primary_name_ref" span="247:32:247:36">warn</jtok>
<jtok eid="11" type="method_call" span="247:37:247:45">toString</jtok>
<jtok eid="11" type="primary_name_ref" span="248:13:248:19">System</jtok>
<jtok eid="11" type="qualified_name_ref" span="248:20:248:23">out</jtok>
<jtok eid="11" type="method_call" span="248:24:248:31">println</jtok>
<jtok eid="11" type="string_literal" span="248:32:248:35">"("</jtok>
<jtok eid="11" type="primary_name_ref" span="248:36:248:39">dml</jtok>
<jtok eid="11" type="string_literal" span="248:40:248:43">")"</jtok>
<jtok eid="11" type="primary_name_ref" span="250:9:250:14">stmnt</jtok>
<jtok eid="11" type="method_call" span="250:15:250:20">close</jtok>
<jtok eid="12" type="class_or_interface_ref" span="254:19:254:28">ArrayList</jtok>
<jtok eid="12" type="class_or_interface_ref" span="254:29:254:35">String</jtok>
<jtok eid="12" type="method_name" span="254:37:254:46">getFields</jtok>
<jtok eid="12" type="primary_name_ref" span="255:13:255:19">fields</jtok>
<jtok eid="12" type="method_call" span="256:13:256:26">refreshFields</jtok>
<jtok eid="12" type="primary_name_ref" span="258:16:258:22">fields</jtok>
<jtok eid="1" type="block_comment" span="262:5:265:8">/**
     * loop through entry types to get required, optional, general and utility 
     * fields for this type.
     */</jtok>
<jtok eid="13" type="method_name" span="266:24:266:37">refreshFields</jtok>
<jtok eid="13" type="primary_name_ref" span="268:13:268:19">fields</jtok>
<jtok eid="13" type="primary_name_ref" span="269:13:269:19">fields</jtok>
<jtok eid="13" type="constructor_call" span="269:26:269:35">ArrayList</jtok>
<jtok eid="13" type="constructor_call" span="269:36:269:42">String</jtok>
<jtok eid="13" type="primary_name_ref" span="271:13:271:19">fields</jtok>
<jtok eid="13" type="method_call" span="271:20:271:25">clear</jtok>
<jtok eid="13" type="class_or_interface_ref" span="274:14:274:29">BibtexEntryType</jtok>
<jtok eid="13" type="local_variable_name" span="274:30:274:33">val</jtok>
<jtok eid="13" type="primary_name_ref" span="274:36:274:51">BibtexEntryType</jtok>
<jtok eid="13" type="qualified_name_ref" span="274:52:274:61">ALL_TYPES</jtok>
<jtok eid="13" type="method_call" span="274:62:274:68">values</jtok>
<jtok eid="13" type="primary_name_ref" span="275:13:275:19">fields</jtok>
<jtok eid="13" type="method_call" span="275:22:275:34">uniqueInsert</jtok>
<jtok eid="13" type="primary_name_ref" span="275:35:275:41">fields</jtok>
<jtok eid="13" type="primary_name_ref" span="275:43:275:46">val</jtok>
<jtok eid="13" type="method_call" span="275:47:275:64">getRequiredFields</jtok>
<jtok eid="13" type="primary_name_ref" span="276:13:276:19">fields</jtok>
<jtok eid="13" type="method_call" span="276:22:276:34">uniqueInsert</jtok>
<jtok eid="13" type="primary_name_ref" span="276:35:276:41">fields</jtok>
<jtok eid="13" type="primary_name_ref" span="276:43:276:46">val</jtok>
<jtok eid="13" type="method_call" span="276:47:276:64">getOptionalFields</jtok>
<jtok eid="13" type="primary_name_ref" span="277:13:277:19">fields</jtok>
<jtok eid="13" type="method_call" span="277:22:277:34">uniqueInsert</jtok>
<jtok eid="13" type="primary_name_ref" span="277:35:277:41">fields</jtok>
<jtok eid="13" type="primary_name_ref" span="277:43:277:46">val</jtok>
<jtok eid="13" type="method_call" span="277:47:277:63">getGeneralFields</jtok>
<jtok eid="13" type="primary_name_ref" span="278:13:278:19">fields</jtok>
<jtok eid="13" type="method_call" span="278:22:278:34">uniqueInsert</jtok>
<jtok eid="13" type="primary_name_ref" span="278:35:278:41">fields</jtok>
<jtok eid="13" type="primary_name_ref" span="278:43:278:46">val</jtok>
<jtok eid="13" type="method_call" span="278:47:278:63">getUtilityFields</jtok>
<jtok eid="13" type="line_comment" span="280:9:280:78">//fields = uniqueInsert(fields, new String[] {"owner", "timestamp"});</jtok>
<jtok eid="13" type="line_comment" span="282:9:282:54">// create comma separated list of field names</jtok>
<jtok eid="13" type="primary_name_ref" span="283:9:283:17">fieldstr</jtok>
<jtok eid="13" type="string_literal" span="283:20:283:22">""</jtok>
<jtok eid="13" type="local_variable_name" span="284:18:284:19">i</jtok>
<jtok eid="13" type="primary_name_ref" span="284:25:284:26">i</jtok>
<jtok eid="13" type="primary_name_ref" span="284:29:284:35">fields</jtok>
<jtok eid="13" type="method_call" span="284:36:284:40">size</jtok>
<jtok eid="13" type="primary_name_ref" span="284:44:284:45">i</jtok>
<jtok eid="13" type="primary_name_ref" span="285:17:285:18">i</jtok>
<jtok eid="13" type="primary_name_ref" span="286:17:286:25">fieldstr</jtok>
<jtok eid="13" type="primary_name_ref" span="286:28:286:36">fieldstr</jtok>
<jtok eid="13" type="string_literal" span="286:39:286:43">", "</jtok>
<jtok eid="13" type="primary_name_ref" span="287:13:287:21">fieldstr</jtok>
<jtok eid="13" type="primary_name_ref" span="287:24:287:32">fieldstr</jtok>
<jtok eid="13" type="primary_name_ref" span="287:35:287:41">fields</jtok>
<jtok eid="13" type="method_call" span="287:42:287:45">get</jtok>
<jtok eid="13" type="primary_name_ref" span="287:46:287:47">i</jtok>
<jtok eid="1" type="block_comment" span="293:5:302:8">/**
     * Inserts the elements of a String array into an ArrayList making sure not
     * to duplicate entries in the ArrayList
     * 
     * @param list
     *            The ArrayList containing unique entries
     * @param array
     *            The String array to be inserted into the ArrayList
     * @return The updated ArrayList with new unique entries
     */</jtok>
<jtok eid="14" type="class_or_interface_ref" span="303:20:303:29">ArrayList</jtok>
<jtok eid="14" type="class_or_interface_ref" span="303:30:303:36">String</jtok>
<jtok eid="14" type="method_name" span="303:38:303:50">uniqueInsert</jtok>
<jtok eid="14" type="parameter_type" span="303:51:303:60">ArrayList</jtok>
<jtok eid="14" type="parameter_type" span="303:61:303:67">String</jtok>
<jtok eid="14" type="parameter_name" span="303:69:303:73">list</jtok>
<jtok eid="14" type="parameter_type" span="304:13:304:19">String</jtok>
<jtok eid="14" type="parameter_name" span="304:22:304:27">array</jtok>
<jtok eid="14" type="primary_name_ref" span="306:13:306:18">array</jtok>
<jtok eid="14" type="local_variable_name" span="307:22:307:23">i</jtok>
<jtok eid="14" type="primary_name_ref" span="307:29:307:30">i</jtok>
<jtok eid="14" type="primary_name_ref" span="307:33:307:38">array</jtok>
<jtok eid="14" type="qualified_name_ref" span="307:39:307:45">length</jtok>
<jtok eid="14" type="primary_name_ref" span="307:47:307:48">i</jtok>
<jtok eid="14" type="primary_name_ref" span="308:22:308:26">list</jtok>
<jtok eid="14" type="method_call" span="308:27:308:35">contains</jtok>
<jtok eid="14" type="primary_name_ref" span="308:36:308:41">array</jtok>
<jtok eid="14" type="primary_name_ref" span="308:42:308:43">i</jtok>
<jtok eid="14" type="primary_name_ref" span="309:21:309:25">list</jtok>
<jtok eid="14" type="method_call" span="309:26:309:29">add</jtok>
<jtok eid="14" type="primary_name_ref" span="309:30:309:35">array</jtok>
<jtok eid="14" type="primary_name_ref" span="309:36:309:37">i</jtok>
<jtok eid="14" type="primary_name_ref" span="312:16:312:20">list</jtok>
<jtok eid="1" type="block_comment" span="316:5:329:8">/**
     * Accepts the BibtexDatabase and MetaData, generates the DML required to
     * create and populate SQL database tables, and writes this DML to the 
     * specified output file.
     *
     * @param database
     *          The BibtexDatabase to export
     * @param metaData
     *          The MetaData object containing the groups information
     * @param keySet
     *          The set of IDs of the entries to export.
     * @param file
     *          The name of the file to which the DML should be written
     */</jtok>
<jtok eid="15" type="method_name" span="330:24:330:38">exportDatabase</jtok>
<jtok eid="15" type="parameter_type" span="330:45:330:59">BibtexDatabase</jtok>
<jtok eid="15" type="parameter_name" span="330:60:330:68">database</jtok>
<jtok eid="15" type="parameter_type" span="331:15:331:23">MetaData</jtok>
<jtok eid="15" type="parameter_name" span="331:24:331:32">metaData</jtok>
<jtok eid="15" type="parameter_type" span="331:34:331:37">Set</jtok>
<jtok eid="15" type="parameter_type" span="331:38:331:44">String</jtok>
<jtok eid="15" type="parameter_name" span="331:46:331:52">keySet</jtok>
<jtok eid="15" type="parameter_type" span="331:54:331:60">String</jtok>
<jtok eid="15" type="parameter_name" span="331:61:331:65">file</jtok>
<jtok eid="15" type="parameter_type" span="331:67:331:73">DBTYPE</jtok>
<jtok eid="15" type="parameter_name" span="331:74:331:80">dbtype</jtok>
<jtok eid="15" type="throws" span="332:16:332:25">Exception</jtok>
<jtok eid="15" type="line_comment" span="334:9:334:28">// open output file</jtok>
<jtok eid="15" type="class_or_interface_ref" span="335:9:335:13">File</jtok>
<jtok eid="15" type="local_variable_name" span="335:14:335:21">outfile</jtok>
<jtok eid="15" type="constructor_call" span="335:28:335:32">File</jtok>
<jtok eid="15" type="primary_name_ref" span="335:33:335:37">file</jtok>
<jtok eid="15" type="primary_name_ref" span="336:13:336:20">outfile</jtok>
<jtok eid="15" type="method_call" span="336:21:336:27">exists</jtok>
<jtok eid="15" type="primary_name_ref" span="337:13:337:20">outfile</jtok>
<jtok eid="15" type="method_call" span="337:21:337:27">delete</jtok>
<jtok eid="15" type="class_or_interface_ref" span="339:9:339:29">BufferedOutputStream</jtok>
<jtok eid="15" type="local_variable_name" span="339:30:339:36">writer</jtok>
<jtok eid="15" type="primary_name_ref" span="340:9:340:15">writer</jtok>
<jtok eid="15" type="constructor_call" span="340:22:340:42">BufferedOutputStream</jtok>
<jtok eid="15" type="constructor_call" span="340:48:340:64">FileOutputStream</jtok>
<jtok eid="15" type="primary_name_ref" span="340:66:340:73">outfile</jtok>
<jtok eid="15" type="class_or_interface_ref" span="341:9:341:20">PrintStream</jtok>
<jtok eid="15" type="local_variable_name" span="341:21:341:25">fout</jtok>
<jtok eid="15" type="primary_name_ref" span="342:9:342:13">fout</jtok>
<jtok eid="15" type="constructor_call" span="342:20:342:31">PrintStream</jtok>
<jtok eid="15" type="primary_name_ref" span="342:33:342:39">writer</jtok>
<jtok eid="15" type="method_call" span="345:9:345:30">exportDatabase_worker</jtok>
<jtok eid="15" type="primary_name_ref" span="345:31:345:37">dbtype</jtok>
<jtok eid="15" type="primary_name_ref" span="345:39:345:47">database</jtok>
<jtok eid="15" type="primary_name_ref" span="345:49:345:57">metaData</jtok>
<jtok eid="15" type="primary_name_ref" span="345:59:345:65">keySet</jtok>
<jtok eid="15" type="primary_name_ref" span="345:67:345:71">fout</jtok>
<jtok eid="15" type="primary_name_ref" span="347:9:347:13">fout</jtok>
<jtok eid="15" type="method_call" span="347:14:347:19">close</jtok>
<jtok eid="16" type="class_or_interface_ref" span="351:19:351:25">Object</jtok>
<jtok eid="16" type="method_name" span="351:28:351:42">importDatabase</jtok>
<jtok eid="16" type="parameter_type" span="351:43:351:46">Set</jtok>
<jtok eid="16" type="parameter_type" span="351:47:351:53">String</jtok>
<jtok eid="16" type="parameter_name" span="351:55:351:61">keySet</jtok>
<jtok eid="16" type="parameter_type" span="352:39:352:48">DBStrings</jtok>
<jtok eid="16" type="parameter_name" span="352:49:352:58">dbStrings</jtok>
<jtok eid="16" type="throws" span="353:16:353:25">Exception</jtok>
<jtok eid="16" type="class_or_interface_ref" span="355:17:355:23">DBTYPE</jtok>
<jtok eid="16" type="local_variable_name" span="355:24:355:30">dbtype</jtok>
<jtok eid="16" type="method_call" span="355:33:355:42">getDBType</jtok>
<jtok eid="16" type="primary_name_ref" span="355:43:355:52">dbStrings</jtok>
<jtok eid="16" type="class_or_interface_ref" span="357:9:357:15">Object</jtok>
<jtok eid="16" type="local_variable_name" span="357:18:357:24">result</jtok>
<jtok eid="16" type="class_or_interface_ref" span="358:9:358:19">Connection</jtok>
<jtok eid="16" type="local_variable_name" span="358:20:358:24">conn</jtok>
<jtok eid="16" type="primary_name_ref" span="362:13:362:17">conn</jtok>
<jtok eid="16" type="primary_name_ref" span="362:20:362:27">SQLutil</jtok>
<jtok eid="16" type="method_call" span="362:28:362:39">connectToDB</jtok>
<jtok eid="16" type="primary_name_ref" span="362:40:362:49">dbStrings</jtok>
<jtok eid="16" type="line_comment" span="364:13:364:42">// conn.setAutoCommit(false);</jtok>
<jtok eid="16" type="primary_name_ref" span="366:13:366:19">result</jtok>
<jtok eid="16" type="method_call" span="366:22:366:43">importDatabase_worker</jtok>
<jtok eid="16" type="primary_name_ref" span="366:44:366:50">dbtype</jtok>
<jtok eid="16" type="primary_name_ref" span="366:52:366:58">keySet</jtok>
<jtok eid="16" type="primary_name_ref" span="366:60:366:64">conn</jtok>
<jtok eid="16" type="block_comment" span="368:13:371:16">/*if (!conn.getAutoCommit()) {
                conn.commit();
                conn.setAutoCommit(true);
            }*/</jtok>
<jtok eid="16" type="primary_name_ref" span="373:13:373:17">conn</jtok>
<jtok eid="16" type="method_call" span="373:18:373:23">close</jtok>
<jtok eid="16" type="class_or_interface_ref" span="375:18:375:30">SQLException</jtok>
<jtok eid="16" type="local_variable_name" span="375:31:375:33">ex</jtok>
<jtok eid="16" type="primary_name_ref" span="377:19:377:21">ex</jtok>
<jtok eid="16" type="primary_name_ref" span="380:16:380:22">result</jtok>
<jtok eid="17" type="class_or_interface_ref" span="383:21:383:27">Object</jtok>
<jtok eid="17" type="method_name" span="383:30:383:51">importDatabase_worker</jtok>
<jtok eid="17" type="parameter_type" span="383:53:383:59">DBTYPE</jtok>
<jtok eid="17" type="parameter_name" span="383:60:383:66">dbtype</jtok>
<jtok eid="17" type="parameter_type" span="384:13:384:16">Set</jtok>
<jtok eid="17" type="parameter_type" span="384:17:384:23">String</jtok>
<jtok eid="17" type="parameter_name" span="384:25:384:31">keySet</jtok>
<jtok eid="17" type="parameter_type" span="384:33:384:43">Connection</jtok>
<jtok eid="17" type="parameter_name" span="384:44:384:48">conn</jtok>
<jtok eid="17" type="throws" span="384:57:384:66">Exception</jtok>
<jtok eid="17" type="class_or_interface_ref" span="386:10:386:24">BibtexDatabase</jtok>
<jtok eid="17" type="local_variable_name" span="386:25:386:33">database</jtok>
<jtok eid="17" type="constructor_call" span="386:40:386:54">BibtexDatabase</jtok>
<jtok eid="17" type="line_comment" span="388:10:388:66">// Find entry type IDs and their mappings to type names:</jtok>
<jtok eid="17" type="class_or_interface_ref" span="389:10:389:17">HashMap</jtok>
<jtok eid="17" type="class_or_interface_ref" span="389:18:389:24">String</jtok>
<jtok eid="17" type="class_or_interface_ref" span="389:26:389:41">BibtexEntryType</jtok>
<jtok eid="17" type="local_variable_name" span="389:43:389:48">types</jtok>
<jtok eid="17" type="constructor_call" span="389:55:389:62">HashMap</jtok>
<jtok eid="17" type="constructor_call" span="389:63:389:69">String</jtok>
<jtok eid="17" type="constructor_call" span="389:71:389:86">BibtexEntryType</jtok>
<jtok eid="17" type="class_or_interface_ref" span="390:10:390:16">Object</jtok>
<jtok eid="17" type="local_variable_name" span="390:17:390:20">res</jtok>
<jtok eid="17" type="method_call" span="390:23:390:44">processDMLWithResults</jtok>
<jtok eid="17" type="primary_name_ref" span="390:45:390:49">conn</jtok>
<jtok eid="17" type="string_literal" span="390:50:390:97">"SELECT entry_types_id,label FROM entry_types;"</jtok>
<jtok eid="17" type="primary_name_ref" span="391:14:391:17">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="391:29:391:38">Statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="392:14:392:23">Statement</jtok>
<jtok eid="17" type="local_variable_name" span="392:24:392:33">statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="392:37:392:46">Statement</jtok>
<jtok eid="17" type="primary_name_ref" span="392:47:392:50">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="393:14:393:23">ResultSet</jtok>
<jtok eid="17" type="local_variable_name" span="393:24:393:26">rs</jtok>
<jtok eid="17" type="primary_name_ref" span="393:29:393:38">statement</jtok>
<jtok eid="17" type="method_call" span="393:39:393:51">getResultSet</jtok>
<jtok eid="17" type="primary_name_ref" span="394:22:394:24">rs</jtok>
<jtok eid="17" type="method_call" span="394:25:394:29">next</jtok>
<jtok eid="17" type="primary_name_ref" span="395:17:395:22">types</jtok>
<jtok eid="17" type="method_call" span="395:23:395:26">put</jtok>
<jtok eid="17" type="primary_name_ref" span="395:27:395:29">rs</jtok>
<jtok eid="17" type="method_call" span="395:30:395:39">getString</jtok>
<jtok eid="17" type="primary_name_ref" span="395:44:395:59">BibtexEntryType</jtok>
<jtok eid="17" type="method_call" span="395:60:395:67">getType</jtok>
<jtok eid="17" type="primary_name_ref" span="395:68:395:70">rs</jtok>
<jtok eid="17" type="method_call" span="395:71:395:80">getString</jtok>
<jtok eid="17" type="primary_name_ref" span="397:14:397:23">statement</jtok>
<jtok eid="17" type="method_call" span="397:24:397:29">close</jtok>
<jtok eid="17" type="class_or_interface_ref" span="399:15:399:23">Iterator</jtok>
<jtok eid="17" type="class_or_interface_ref" span="399:24:399:30">String</jtok>
<jtok eid="17" type="local_variable_name" span="399:32:399:40">iterator</jtok>
<jtok eid="17" type="primary_name_ref" span="399:43:399:48">types</jtok>
<jtok eid="17" type="method_call" span="399:49:399:55">keySet</jtok>
<jtok eid="17" type="method_call" span="399:58:399:66">iterator</jtok>
<jtok eid="17" type="primary_name_ref" span="399:70:399:78">iterator</jtok>
<jtok eid="17" type="method_call" span="399:79:399:86">hasNext</jtok>
<jtok eid="17" type="primary_name_ref" span="400:14:400:22">iterator</jtok>
<jtok eid="17" type="method_call" span="400:23:400:27">next</jtok>
<jtok eid="17" type="line_comment" span="403:11:403:57">// Read the column names from the entry table:</jtok>
<jtok eid="17" type="primary_name_ref" span="404:10:404:13">res</jtok>
<jtok eid="17" type="method_call" span="404:16:404:37">processDMLWithResults</jtok>
<jtok eid="17" type="primary_name_ref" span="404:38:404:42">conn</jtok>
<jtok eid="17" type="string_literal" span="404:44:404:72">"SHOW columns FROM entries;"</jtok>
<jtok eid="17" type="class_or_interface_ref" span="405:10:405:19">ArrayList</jtok>
<jtok eid="17" type="class_or_interface_ref" span="405:20:405:26">String</jtok>
<jtok eid="17" type="local_variable_name" span="405:28:405:36">colNames</jtok>
<jtok eid="17" type="constructor_call" span="405:43:405:52">ArrayList</jtok>
<jtok eid="17" type="constructor_call" span="405:53:405:59">String</jtok>
<jtok eid="17" type="primary_name_ref" span="406:14:406:17">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="406:29:406:38">Statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="407:14:407:23">Statement</jtok>
<jtok eid="17" type="local_variable_name" span="407:24:407:33">statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="407:37:407:46">Statement</jtok>
<jtok eid="17" type="primary_name_ref" span="407:47:407:50">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="408:14:408:23">ResultSet</jtok>
<jtok eid="17" type="local_variable_name" span="408:24:408:26">rs</jtok>
<jtok eid="17" type="primary_name_ref" span="408:29:408:38">statement</jtok>
<jtok eid="17" type="method_call" span="408:39:408:51">getResultSet</jtok>
<jtok eid="17" type="local_variable_name" span="409:22:409:29">started</jtok>
<jtok eid="17" type="primary_name_ref" span="410:22:410:24">rs</jtok>
<jtok eid="17" type="method_call" span="410:25:410:29">next</jtok>
<jtok eid="17" type="primary_name_ref" span="411:21:411:28">started</jtok>
<jtok eid="17" type="primary_name_ref" span="412:21:412:29">colNames</jtok>
<jtok eid="17" type="method_call" span="412:30:412:33">add</jtok>
<jtok eid="17" type="primary_name_ref" span="412:34:412:36">rs</jtok>
<jtok eid="17" type="method_call" span="412:37:412:46">getString</jtok>
<jtok eid="17" type="primary_name_ref" span="413:27:413:29">rs</jtok>
<jtok eid="17" type="method_call" span="413:30:413:39">getString</jtok>
<jtok eid="17" type="method_call" span="413:43:413:49">equals</jtok>
<jtok eid="17" type="string_literal" span="413:50:413:60">"cite_key"</jtok>
<jtok eid="17" type="primary_name_ref" span="414:21:414:28">started</jtok>
<jtok eid="17" type="primary_name_ref" span="416:14:416:23">statement</jtok>
<jtok eid="17" type="method_call" span="416:24:416:29">close</jtok>
<jtok eid="17" type="line_comment" span="419:10:419:63">// Read the entries and create BibtexEntry instances:</jtok>
<jtok eid="17" type="class_or_interface_ref" span="420:10:420:17">HashMap</jtok>
<jtok eid="17" type="class_or_interface_ref" span="420:18:420:24">String</jtok>
<jtok eid="17" type="class_or_interface_ref" span="420:25:420:36">BibtexEntry</jtok>
<jtok eid="17" type="local_variable_name" span="420:38:420:45">entries</jtok>
<jtok eid="17" type="constructor_call" span="420:52:420:59">HashMap</jtok>
<jtok eid="17" type="constructor_call" span="420:60:420:66">String</jtok>
<jtok eid="17" type="constructor_call" span="420:68:420:79">BibtexEntry</jtok>
<jtok eid="17" type="primary_name_ref" span="421:10:421:13">res</jtok>
<jtok eid="17" type="method_call" span="421:16:421:37">processDMLWithResults</jtok>
<jtok eid="17" type="primary_name_ref" span="421:38:421:42">conn</jtok>
<jtok eid="17" type="string_literal" span="421:44:421:68">"SELECT * FROM entries;"</jtok>
<jtok eid="17" type="primary_name_ref" span="422:14:422:17">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="422:29:422:38">Statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="423:14:423:23">Statement</jtok>
<jtok eid="17" type="local_variable_name" span="423:24:423:33">statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="423:37:423:46">Statement</jtok>
<jtok eid="17" type="primary_name_ref" span="423:47:423:50">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="424:14:424:23">ResultSet</jtok>
<jtok eid="17" type="local_variable_name" span="424:24:424:26">rs</jtok>
<jtok eid="17" type="primary_name_ref" span="424:29:424:38">statement</jtok>
<jtok eid="17" type="method_call" span="424:39:424:51">getResultSet</jtok>
<jtok eid="17" type="primary_name_ref" span="425:22:425:24">rs</jtok>
<jtok eid="17" type="method_call" span="425:25:425:29">next</jtok>
<jtok eid="17" type="class_or_interface_ref" span="426:18:426:24">String</jtok>
<jtok eid="17" type="local_variable_name" span="426:25:426:27">id</jtok>
<jtok eid="17" type="primary_name_ref" span="426:30:426:32">rs</jtok>
<jtok eid="17" type="method_call" span="426:33:426:42">getString</jtok>
<jtok eid="17" type="string_literal" span="426:43:426:55">"entries_id"</jtok>
<jtok eid="17" type="class_or_interface_ref" span="427:18:427:29">BibtexEntry</jtok>
<jtok eid="17" type="local_variable_name" span="427:30:427:35">entry</jtok>
<jtok eid="17" type="constructor_call" span="427:42:427:53">BibtexEntry</jtok>
<jtok eid="17" type="primary_name_ref" span="427:54:427:58">Util</jtok>
<jtok eid="17" type="method_call" span="427:59:427:74">createNeutralId</jtok>
<jtok eid="17" type="primary_name_ref" span="428:26:428:31">types</jtok>
<jtok eid="17" type="method_call" span="428:32:428:35">get</jtok>
<jtok eid="17" type="primary_name_ref" span="428:36:428:38">rs</jtok>
<jtok eid="17" type="method_call" span="428:39:428:48">getString</jtok>
<jtok eid="17" type="primary_name_ref" span="429:18:429:23">entry</jtok>
<jtok eid="17" type="method_call" span="429:24:429:32">setField</jtok>
<jtok eid="17" type="primary_name_ref" span="429:33:429:45">BibtexFields</jtok>
<jtok eid="17" type="qualified_name_ref" span="429:46:429:55">KEY_FIELD</jtok>
<jtok eid="17" type="primary_name_ref" span="429:57:429:59">rs</jtok>
<jtok eid="17" type="method_call" span="429:60:429:69">getString</jtok>
<jtok eid="17" type="string_literal" span="429:70:429:80">"cite_key"</jtok>
<jtok eid="17" type="class_or_interface_ref" span="430:23:430:31">Iterator</jtok>
<jtok eid="17" type="class_or_interface_ref" span="430:32:430:38">String</jtok>
<jtok eid="17" type="local_variable_name" span="430:40:430:48">iterator</jtok>
<jtok eid="17" type="primary_name_ref" span="430:51:430:59">colNames</jtok>
<jtok eid="17" type="method_call" span="430:60:430:68">iterator</jtok>
<jtok eid="17" type="primary_name_ref" span="430:72:430:80">iterator</jtok>
<jtok eid="17" type="method_call" span="430:81:430:88">hasNext</jtok>
<jtok eid="17" type="class_or_interface_ref" span="431:22:431:28">String</jtok>
<jtok eid="17" type="local_variable_name" span="431:29:431:32">col</jtok>
<jtok eid="17" type="primary_name_ref" span="431:35:431:43">iterator</jtok>
<jtok eid="17" type="method_call" span="431:44:431:48">next</jtok>
<jtok eid="17" type="class_or_interface_ref" span="432:22:432:28">String</jtok>
<jtok eid="17" type="local_variable_name" span="432:29:432:34">value</jtok>
<jtok eid="17" type="primary_name_ref" span="432:37:432:39">rs</jtok>
<jtok eid="17" type="method_call" span="432:40:432:49">getString</jtok>
<jtok eid="17" type="primary_name_ref" span="432:50:432:53">col</jtok>
<jtok eid="17" type="primary_name_ref" span="433:26:433:31">value</jtok>
<jtok eid="17" type="primary_name_ref" span="434:25:434:30">entry</jtok>
<jtok eid="17" type="method_call" span="434:31:434:39">setField</jtok>
<jtok eid="17" type="primary_name_ref" span="434:40:434:43">col</jtok>
<jtok eid="17" type="primary_name_ref" span="434:45:434:50">value</jtok>
<jtok eid="17" type="line_comment" span="435:22:435:79">//System.out.println("col: "+col+": "+rs.getString(col));</jtok>
<jtok eid="17" type="primary_name_ref" span="437:18:437:25">entries</jtok>
<jtok eid="17" type="method_call" span="437:26:437:29">put</jtok>
<jtok eid="17" type="primary_name_ref" span="437:30:437:32">id</jtok>
<jtok eid="17" type="primary_name_ref" span="437:34:437:39">entry</jtok>
<jtok eid="17" type="primary_name_ref" span="438:18:438:26">database</jtok>
<jtok eid="17" type="method_call" span="438:27:438:38">insertEntry</jtok>
<jtok eid="17" type="primary_name_ref" span="438:39:438:44">entry</jtok>
<jtok eid="17" type="primary_name_ref" span="440:14:440:23">statement</jtok>
<jtok eid="17" type="method_call" span="440:24:440:29">close</jtok>
<jtok eid="17" type="line_comment" span="443:10:443:41">// Import strings and preamble:</jtok>
<jtok eid="17" type="primary_name_ref" span="444:10:444:13">res</jtok>
<jtok eid="17" type="method_call" span="444:16:444:37">processDMLWithResults</jtok>
<jtok eid="17" type="primary_name_ref" span="444:38:444:42">conn</jtok>
<jtok eid="17" type="string_literal" span="444:44:444:68">"SELECT * FROM strings;"</jtok>
<jtok eid="17" type="primary_name_ref" span="445:14:445:17">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="445:29:445:38">Statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="446:14:446:23">Statement</jtok>
<jtok eid="17" type="local_variable_name" span="446:24:446:33">statement</jtok>
<jtok eid="17" type="class_or_interface_ref" span="446:37:446:46">Statement</jtok>
<jtok eid="17" type="primary_name_ref" span="446:47:446:50">res</jtok>
<jtok eid="17" type="class_or_interface_ref" span="447:14:447:23">ResultSet</jtok>
<jtok eid="17" type="local_variable_name" span="447:24:447:26">rs</jtok>
<jtok eid="17" type="primary_name_ref" span="447:29:447:38">statement</jtok>
<jtok eid="17" type="method_call" span="447:39:447:51">getResultSet</jtok>
<jtok eid="17" type="primary_name_ref" span="448:22:448:24">rs</jtok>
<jtok eid="17" type="method_call" span="448:25:448:29">next</jtok>
<jtok eid="17" type="class_or_interface_ref" span="449:18:449:24">String</jtok>
<jtok eid="17" type="local_variable_name" span="449:25:449:30">label</jtok>
<jtok eid="17" type="primary_name_ref" span="449:33:449:35">rs</jtok>
<jtok eid="17" type="method_call" span="449:36:449:45">getString</jtok>
<jtok eid="17" type="string_literal" span="449:46:449:53">"label"</jtok>
<jtok eid="17" type="local_variable_name" span="449:56:449:63">content</jtok>
<jtok eid="17" type="primary_name_ref" span="449:66:449:68">rs</jtok>
<jtok eid="17" type="method_call" span="449:69:449:78">getString</jtok>
<jtok eid="17" type="string_literal" span="449:79:449:88">"content"</jtok>
<jtok eid="17" type="primary_name_ref" span="450:22:450:27">label</jtok>
<jtok eid="17" type="method_call" span="450:28:450:34">equals</jtok>
<jtok eid="17" type="string_literal" span="450:35:450:46">"@PREAMBLE"</jtok>
<jtok eid="17" type="primary_name_ref" span="451:22:451:30">database</jtok>
<jtok eid="17" type="method_call" span="451:31:451:42">setPreamble</jtok>
<jtok eid="17" type="primary_name_ref" span="451:43:451:50">content</jtok>
<jtok eid="17" type="class_or_interface_ref" span="454:22:454:34">BibtexString</jtok>
<jtok eid="17" type="local_variable_name" span="454:35:454:41">string</jtok>
<jtok eid="17" type="constructor_call" span="454:48:454:60">BibtexString</jtok>
<jtok eid="17" type="primary_name_ref" span="454:61:454:65">Util</jtok>
<jtok eid="17" type="method_call" span="454:66:454:81">createNeutralId</jtok>
<jtok eid="17" type="primary_name_ref" span="454:85:454:90">label</jtok>
<jtok eid="17" type="primary_name_ref" span="454:92:454:99">content</jtok>
<jtok eid="17" type="primary_name_ref" span="455:22:455:30">database</jtok>
<jtok eid="17" type="method_call" span="455:31:455:40">addString</jtok>
<jtok eid="17" type="primary_name_ref" span="455:41:455:47">string</jtok>
<jtok eid="17" type="primary_name_ref" span="458:14:458:23">statement</jtok>
<jtok eid="17" type="method_call" span="458:24:458:29">close</jtok>
<jtok eid="17" type="class_or_interface_ref" span="461:10:461:18">MetaData</jtok>
<jtok eid="17" type="local_variable_name" span="461:19:461:27">metaData</jtok>
<jtok eid="17" type="constructor_call" span="461:34:461:42">MetaData</jtok>
<jtok eid="17" type="primary_name_ref" span="462:10:462:18">metaData</jtok>
<jtok eid="17" type="method_call" span="462:19:462:40">initializeNewDatabase</jtok>
<jtok eid="17" type="line_comment" span="464:10:464:34">// Read the groups tree:</jtok>
<jtok eid="17" type="method_call" span="465:10:465:26">importGroupsTree</jtok>
<jtok eid="17" type="primary_name_ref" span="465:27:465:33">dbtype</jtok>
<jtok eid="17" type="primary_name_ref" span="465:35:465:43">metaData</jtok>
<jtok eid="17" type="primary_name_ref" span="465:45:465:52">entries</jtok>
<jtok eid="17" type="primary_name_ref" span="465:54:465:58">conn</jtok>
<jtok eid="17" type="constructor_call" span="467:21:467:27">Object</jtok>
<jtok eid="17" type="primary_name_ref" span="467:31:467:39">database</jtok>
<jtok eid="17" type="primary_name_ref" span="467:41:467:49">metaData</jtok>
<jtok eid="18" type="method_name" span="471:24:471:40">importGroupsTree</jtok>
<jtok eid="18" type="parameter_type" span="471:41:471:47">DBTYPE</jtok>
<jtok eid="18" type="parameter_name" span="471:48:471:54">dbtype</jtok>
<jtok eid="18" type="parameter_type" span="471:56:471:64">MetaData</jtok>
<jtok eid="18" type="parameter_name" span="471:65:471:73">metaData</jtok>
<jtok eid="18" type="parameter_type" span="471:75:471:82">HashMap</jtok>
<jtok eid="18" type="parameter_type" span="471:83:471:89">String</jtok>
<jtok eid="18" type="parameter_type" span="471:90:471:101">BibtexEntry</jtok>
<jtok eid="18" type="parameter_name" span="471:103:471:110">entries</jtok>
<jtok eid="18" type="parameter_type" span="472:41:472:51">Connection</jtok>
<jtok eid="18" type="parameter_name" span="472:52:472:56">conn</jtok>
<jtok eid="18" type="throws" span="472:65:472:77">SQLException</jtok>
<jtok eid="18" type="class_or_interface_ref" span="473:9:473:15">Object</jtok>
<jtok eid="18" type="local_variable_name" span="473:16:473:19">res</jtok>
<jtok eid="18" type="method_call" span="473:22:473:43">processDMLWithResults</jtok>
<jtok eid="18" type="primary_name_ref" span="473:44:473:48">conn</jtok>
<jtok eid="18" type="string_literal" span="473:50:473:92">"SELECT * FROM groups ORDER BY groups_id;"</jtok>
<jtok eid="18" type="primary_name_ref" span="474:13:474:16">res</jtok>
<jtok eid="18" type="class_or_interface_ref" span="474:28:474:37">Statement</jtok>
<jtok eid="18" type="class_or_interface_ref" span="475:13:475:22">Statement</jtok>
<jtok eid="18" type="local_variable_name" span="475:23:475:32">statement</jtok>
<jtok eid="18" type="class_or_interface_ref" span="475:36:475:45">Statement</jtok>
<jtok eid="18" type="primary_name_ref" span="475:46:475:49">res</jtok>
<jtok eid="18" type="class_or_interface_ref" span="476:13:476:22">ResultSet</jtok>
<jtok eid="18" type="local_variable_name" span="476:23:476:25">rs</jtok>
<jtok eid="18" type="primary_name_ref" span="476:28:476:37">statement</jtok>
<jtok eid="18" type="method_call" span="476:38:476:50">getResultSet</jtok>
<jtok eid="18" type="class_or_interface_ref" span="477:13:477:26">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="477:27:477:35">rootNode</jtok>
<jtok eid="18" type="constructor_call" span="477:42:477:55">GroupTreeNode</jtok>
<jtok eid="18" type="constructor_call" span="477:60:477:75">AllEntriesGroup</jtok>
<jtok eid="18" type="line_comment" span="478:13:478:80">// Create a lookup map for finding the parent to add each group to:</jtok>
<jtok eid="18" type="class_or_interface_ref" span="479:13:479:20">HashMap</jtok>
<jtok eid="18" type="class_or_interface_ref" span="479:21:479:27">String</jtok>
<jtok eid="18" type="class_or_interface_ref" span="479:29:479:42">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="479:44:479:50">groups</jtok>
<jtok eid="18" type="constructor_call" span="479:57:479:64">HashMap</jtok>
<jtok eid="18" type="constructor_call" span="479:65:479:71">String</jtok>
<jtok eid="18" type="constructor_call" span="479:73:479:86">GroupTreeNode</jtok>
<jtok eid="18" type="class_or_interface_ref" span="480:13:480:26">LinkedHashMap</jtok>
<jtok eid="18" type="class_or_interface_ref" span="480:27:480:40">GroupTreeNode</jtok>
<jtok eid="18" type="class_or_interface_ref" span="480:42:480:48">String</jtok>
<jtok eid="18" type="local_variable_name" span="480:50:480:59">parentIds</jtok>
<jtok eid="18" type="constructor_call" span="480:66:480:79">LinkedHashMap</jtok>
<jtok eid="18" type="constructor_call" span="480:80:480:93">GroupTreeNode</jtok>
<jtok eid="18" type="constructor_call" span="480:95:480:101">String</jtok>
<jtok eid="18" type="primary_name_ref" span="482:21:482:23">rs</jtok>
<jtok eid="18" type="method_call" span="482:24:482:28">next</jtok>
<jtok eid="18" type="class_or_interface_ref" span="483:17:483:30">AbstractGroup</jtok>
<jtok eid="18" type="local_variable_name" span="483:31:483:36">group</jtok>
<jtok eid="18" type="class_or_interface_ref" span="484:17:484:23">String</jtok>
<jtok eid="18" type="local_variable_name" span="484:24:484:30">typeId</jtok>
<jtok eid="18" type="method_call" span="484:33:484:50">findGroupTypeName</jtok>
<jtok eid="18" type="primary_name_ref" span="484:51:484:53">rs</jtok>
<jtok eid="18" type="method_call" span="484:54:484:63">getString</jtok>
<jtok eid="18" type="string_literal" span="484:64:484:80">"group_types_id"</jtok>
<jtok eid="18" type="primary_name_ref" span="484:83:484:87">conn</jtok>
<jtok eid="18" type="primary_name_ref" span="485:21:485:27">typeId</jtok>
<jtok eid="18" type="method_call" span="485:28:485:34">equals</jtok>
<jtok eid="18" type="primary_name_ref" span="485:35:485:50">AllEntriesGroup</jtok>
<jtok eid="18" type="qualified_name_ref" span="485:51:485:53">ID</jtok>
<jtok eid="18" type="line_comment" span="486:21:486:57">// register the id of the root node:</jtok>
<jtok eid="18" type="primary_name_ref" span="487:21:487:27">groups</jtok>
<jtok eid="18" type="method_call" span="487:28:487:31">put</jtok>
<jtok eid="18" type="primary_name_ref" span="487:32:487:34">rs</jtok>
<jtok eid="18" type="method_call" span="487:35:487:44">getString</jtok>
<jtok eid="18" type="string_literal" span="487:45:487:56">"groups_id"</jtok>
<jtok eid="18" type="primary_name_ref" span="487:59:487:67">rootNode</jtok>
<jtok eid="18" type="primary_name_ref" span="489:26:489:32">typeId</jtok>
<jtok eid="18" type="method_call" span="489:33:489:39">equals</jtok>
<jtok eid="18" type="primary_name_ref" span="489:40:489:53">ExplicitGroup</jtok>
<jtok eid="18" type="qualified_name_ref" span="489:54:489:56">ID</jtok>
<jtok eid="18" type="primary_name_ref" span="490:21:490:26">group</jtok>
<jtok eid="18" type="constructor_call" span="490:33:490:46">ExplicitGroup</jtok>
<jtok eid="18" type="primary_name_ref" span="490:47:490:49">rs</jtok>
<jtok eid="18" type="method_call" span="490:50:490:59">getString</jtok>
<jtok eid="18" type="string_literal" span="490:60:490:67">"label"</jtok>
<jtok eid="18" type="primary_name_ref" span="491:29:491:31">rs</jtok>
<jtok eid="18" type="method_call" span="491:32:491:38">getInt</jtok>
<jtok eid="18" type="string_literal" span="491:39:491:61">"hierarchical_context"</jtok>
<jtok eid="18" type="primary_name_ref" span="493:26:493:32">typeId</jtok>
<jtok eid="18" type="method_call" span="493:33:493:39">equals</jtok>
<jtok eid="18" type="primary_name_ref" span="493:40:493:52">KeywordGroup</jtok>
<jtok eid="18" type="qualified_name_ref" span="493:53:493:55">ID</jtok>
<jtok eid="18" type="primary_name_ref" span="494:21:494:27">System</jtok>
<jtok eid="18" type="qualified_name_ref" span="494:28:494:31">out</jtok>
<jtok eid="18" type="method_call" span="494:32:494:39">println</jtok>
<jtok eid="18" type="string_literal" span="494:40:494:48">"Keyw: "</jtok>
<jtok eid="18" type="primary_name_ref" span="494:50:494:52">rs</jtok>
<jtok eid="18" type="method_call" span="494:53:494:63">getBoolean</jtok>
<jtok eid="18" type="string_literal" span="494:64:494:80">"case_sensitive"</jtok>
<jtok eid="18" type="primary_name_ref" span="495:21:495:26">group</jtok>
<jtok eid="18" type="constructor_call" span="495:33:495:45">KeywordGroup</jtok>
<jtok eid="18" type="primary_name_ref" span="495:46:495:48">rs</jtok>
<jtok eid="18" type="method_call" span="495:49:495:58">getString</jtok>
<jtok eid="18" type="string_literal" span="495:59:495:66">"label"</jtok>
<jtok eid="18" type="primary_name_ref" span="496:29:496:33">Util</jtok>
<jtok eid="18" type="method_call" span="496:34:496:41">unquote</jtok>
<jtok eid="18" type="primary_name_ref" span="496:42:496:44">rs</jtok>
<jtok eid="18" type="method_call" span="496:45:496:54">getString</jtok>
<jtok eid="18" type="string_literal" span="496:55:496:69">"search_field"</jtok>
<jtok eid="18" type="primary_name_ref" span="497:29:497:33">Util</jtok>
<jtok eid="18" type="method_call" span="497:34:497:41">unquote</jtok>
<jtok eid="18" type="primary_name_ref" span="497:42:497:44">rs</jtok>
<jtok eid="18" type="method_call" span="497:45:497:54">getString</jtok>
<jtok eid="18" type="string_literal" span="497:55:497:74">"search_expression"</jtok>
<jtok eid="18" type="primary_name_ref" span="498:29:498:31">rs</jtok>
<jtok eid="18" type="method_call" span="498:32:498:42">getBoolean</jtok>
<jtok eid="18" type="string_literal" span="498:43:498:59">"case_sensitive"</jtok>
<jtok eid="18" type="primary_name_ref" span="498:62:498:64">rs</jtok>
<jtok eid="18" type="method_call" span="498:65:498:75">getBoolean</jtok>
<jtok eid="18" type="string_literal" span="498:76:498:85">"reg_exp"</jtok>
<jtok eid="18" type="primary_name_ref" span="499:29:499:31">rs</jtok>
<jtok eid="18" type="method_call" span="499:32:499:38">getInt</jtok>
<jtok eid="18" type="string_literal" span="499:39:499:61">"hierarchical_context"</jtok>
<jtok eid="18" type="primary_name_ref" span="501:26:501:32">typeId</jtok>
<jtok eid="18" type="method_call" span="501:33:501:39">equals</jtok>
<jtok eid="18" type="primary_name_ref" span="501:40:501:51">SearchGroup</jtok>
<jtok eid="18" type="qualified_name_ref" span="501:52:501:54">ID</jtok>
<jtok eid="18" type="primary_name_ref" span="502:21:502:27">System</jtok>
<jtok eid="18" type="qualified_name_ref" span="502:28:502:31">out</jtok>
<jtok eid="18" type="method_call" span="502:32:502:39">println</jtok>
<jtok eid="18" type="string_literal" span="502:40:502:50">"Search: "</jtok>
<jtok eid="18" type="primary_name_ref" span="502:52:502:54">rs</jtok>
<jtok eid="18" type="method_call" span="502:55:502:65">getBoolean</jtok>
<jtok eid="18" type="string_literal" span="502:66:502:82">"case_sensitive"</jtok>
<jtok eid="18" type="primary_name_ref" span="503:21:503:26">group</jtok>
<jtok eid="18" type="constructor_call" span="503:33:503:44">SearchGroup</jtok>
<jtok eid="18" type="primary_name_ref" span="503:45:503:47">rs</jtok>
<jtok eid="18" type="method_call" span="503:48:503:57">getString</jtok>
<jtok eid="18" type="string_literal" span="503:58:503:65">"label"</jtok>
<jtok eid="18" type="primary_name_ref" span="504:29:504:33">Util</jtok>
<jtok eid="18" type="method_call" span="504:34:504:41">unquote</jtok>
<jtok eid="18" type="primary_name_ref" span="504:42:504:44">rs</jtok>
<jtok eid="18" type="method_call" span="504:45:504:54">getString</jtok>
<jtok eid="18" type="string_literal" span="504:55:504:74">"search_expression"</jtok>
<jtok eid="18" type="primary_name_ref" span="505:29:505:31">rs</jtok>
<jtok eid="18" type="method_call" span="505:32:505:42">getBoolean</jtok>
<jtok eid="18" type="string_literal" span="505:43:505:59">"case_sensitive"</jtok>
<jtok eid="18" type="primary_name_ref" span="505:62:505:64">rs</jtok>
<jtok eid="18" type="method_call" span="505:65:505:75">getBoolean</jtok>
<jtok eid="18" type="string_literal" span="505:76:505:85">"reg_exp"</jtok>
<jtok eid="18" type="primary_name_ref" span="506:29:506:31">rs</jtok>
<jtok eid="18" type="method_call" span="506:32:506:38">getInt</jtok>
<jtok eid="18" type="string_literal" span="506:39:506:61">"hierarchical_context"</jtok>
<jtok eid="18" type="primary_name_ref" span="509:21:509:26">group</jtok>
<jtok eid="18" type="class_or_interface_ref" span="510:21:510:34">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="510:35:510:39">node</jtok>
<jtok eid="18" type="constructor_call" span="510:46:510:59">GroupTreeNode</jtok>
<jtok eid="18" type="primary_name_ref" span="510:60:510:65">group</jtok>
<jtok eid="18" type="primary_name_ref" span="511:21:511:30">parentIds</jtok>
<jtok eid="18" type="method_call" span="511:31:511:34">put</jtok>
<jtok eid="18" type="primary_name_ref" span="511:35:511:39">node</jtok>
<jtok eid="18" type="primary_name_ref" span="511:41:511:43">rs</jtok>
<jtok eid="18" type="method_call" span="511:44:511:53">getString</jtok>
<jtok eid="18" type="string_literal" span="511:54:511:65">"parent_id"</jtok>
<jtok eid="18" type="primary_name_ref" span="512:21:512:27">groups</jtok>
<jtok eid="18" type="method_call" span="512:28:512:31">put</jtok>
<jtok eid="18" type="primary_name_ref" span="512:32:512:34">rs</jtok>
<jtok eid="18" type="method_call" span="512:35:512:44">getString</jtok>
<jtok eid="18" type="string_literal" span="512:45:512:56">"groups_id"</jtok>
<jtok eid="18" type="primary_name_ref" span="512:59:512:63">node</jtok>
<jtok eid="18" type="primary_name_ref" span="515:13:515:22">statement</jtok>
<jtok eid="18" type="method_call" span="515:23:515:28">close</jtok>
<jtok eid="18" type="line_comment" span="517:13:517:79">// Ok, we have collected a map of all groups and their parent IDs,</jtok>
<jtok eid="18" type="line_comment" span="518:13:518:71">// and another map of all group IDs and their group nodes.</jtok>
<jtok eid="18" type="line_comment" span="519:13:519:53">// Now we need to build the groups tree:</jtok>
<jtok eid="18" type="class_or_interface_ref" span="520:18:520:26">Iterator</jtok>
<jtok eid="18" type="class_or_interface_ref" span="520:27:520:40">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="520:42:520:43">i</jtok>
<jtok eid="18" type="primary_name_ref" span="520:44:520:53">parentIds</jtok>
<jtok eid="18" type="method_call" span="520:54:520:60">keySet</jtok>
<jtok eid="18" type="method_call" span="520:63:520:71">iterator</jtok>
<jtok eid="18" type="primary_name_ref" span="520:75:520:76">i</jtok>
<jtok eid="18" type="method_call" span="520:77:520:84">hasNext</jtok>
<jtok eid="18" type="class_or_interface_ref" span="521:17:521:30">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="521:31:521:35">node</jtok>
<jtok eid="18" type="primary_name_ref" span="521:38:521:39">i</jtok>
<jtok eid="18" type="method_call" span="521:40:521:44">next</jtok>
<jtok eid="18" type="class_or_interface_ref" span="522:17:522:23">String</jtok>
<jtok eid="18" type="local_variable_name" span="522:24:522:32">parentId</jtok>
<jtok eid="18" type="primary_name_ref" span="522:35:522:44">parentIds</jtok>
<jtok eid="18" type="method_call" span="522:45:522:48">get</jtok>
<jtok eid="18" type="primary_name_ref" span="522:49:522:53">node</jtok>
<jtok eid="18" type="line_comment" span="523:17:523:39">// Look up the parent:</jtok>
<jtok eid="18" type="class_or_interface_ref" span="524:17:524:30">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="524:31:524:37">parent</jtok>
<jtok eid="18" type="primary_name_ref" span="524:40:524:46">groups</jtok>
<jtok eid="18" type="method_call" span="524:47:524:50">get</jtok>
<jtok eid="18" type="primary_name_ref" span="524:51:524:59">parentId</jtok>
<jtok eid="18" type="primary_name_ref" span="525:21:525:27">parent</jtok>
<jtok eid="18" type="line_comment" span="526:21:526:44">// TODO: missing parent</jtok>
<jtok eid="18" type="primary_name_ref" span="529:21:529:27">parent</jtok>
<jtok eid="18" type="method_call" span="529:28:529:31">add</jtok>
<jtok eid="18" type="primary_name_ref" span="529:32:529:36">node</jtok>
<jtok eid="18" type="line_comment" span="533:13:533:68">// If we have explicit groups, set up group membership:</jtok>
<jtok eid="18" type="primary_name_ref" span="534:13:534:16">res</jtok>
<jtok eid="18" type="method_call" span="534:19:534:40">processDMLWithResults</jtok>
<jtok eid="18" type="primary_name_ref" span="534:41:534:45">conn</jtok>
<jtok eid="18" type="string_literal" span="534:47:534:75">"SELECT * FROM entry_group;"</jtok>
<jtok eid="18" type="primary_name_ref" span="535:17:535:20">res</jtok>
<jtok eid="18" type="class_or_interface_ref" span="535:32:535:41">Statement</jtok>
<jtok eid="18" type="primary_name_ref" span="536:17:536:26">statement</jtok>
<jtok eid="18" type="class_or_interface_ref" span="536:30:536:39">Statement</jtok>
<jtok eid="18" type="primary_name_ref" span="536:40:536:43">res</jtok>
<jtok eid="18" type="primary_name_ref" span="537:17:537:19">rs</jtok>
<jtok eid="18" type="primary_name_ref" span="537:22:537:31">statement</jtok>
<jtok eid="18" type="method_call" span="537:32:537:44">getResultSet</jtok>
<jtok eid="18" type="primary_name_ref" span="538:25:538:27">rs</jtok>
<jtok eid="18" type="method_call" span="538:28:538:32">next</jtok>
<jtok eid="18" type="class_or_interface_ref" span="539:21:539:27">String</jtok>
<jtok eid="18" type="local_variable_name" span="539:28:539:35">entryId</jtok>
<jtok eid="18" type="primary_name_ref" span="539:38:539:40">rs</jtok>
<jtok eid="18" type="method_call" span="539:41:539:50">getString</jtok>
<jtok eid="18" type="string_literal" span="539:51:539:63">"entries_id"</jtok>
<jtok eid="18" type="local_variable_name" span="540:29:540:36">groupId</jtok>
<jtok eid="18" type="primary_name_ref" span="540:39:540:41">rs</jtok>
<jtok eid="18" type="method_call" span="540:42:540:51">getString</jtok>
<jtok eid="18" type="string_literal" span="540:52:540:63">"groups_id"</jtok>
<jtok eid="18" type="class_or_interface_ref" span="541:21:541:34">GroupTreeNode</jtok>
<jtok eid="18" type="local_variable_name" span="541:35:541:39">node</jtok>
<jtok eid="18" type="primary_name_ref" span="541:42:541:48">groups</jtok>
<jtok eid="18" type="method_call" span="541:49:541:52">get</jtok>
<jtok eid="18" type="primary_name_ref" span="541:53:541:60">groupId</jtok>
<jtok eid="18" type="primary_name_ref" span="542:26:542:30">node</jtok>
<jtok eid="18" type="primary_name_ref" span="542:44:542:48">node</jtok>
<jtok eid="18" type="method_call" span="542:49:542:57">getGroup</jtok>
<jtok eid="18" type="class_or_interface_ref" span="542:71:542:84">ExplicitGroup</jtok>
<jtok eid="18" type="class_or_interface_ref" span="543:25:543:38">ExplicitGroup</jtok>
<jtok eid="18" type="local_variable_name" span="543:39:543:44">group</jtok>
<jtok eid="18" type="class_or_interface_ref" span="543:48:543:61">ExplicitGroup</jtok>
<jtok eid="18" type="primary_name_ref" span="543:62:543:66">node</jtok>
<jtok eid="18" type="method_call" span="543:67:543:75">getGroup</jtok>
<jtok eid="18" type="primary_name_ref" span="544:25:544:30">group</jtok>
<jtok eid="18" type="method_call" span="544:31:544:39">addEntry</jtok>
<jtok eid="18" type="primary_name_ref" span="544:40:544:47">entries</jtok>
<jtok eid="18" type="method_call" span="544:48:544:51">get</jtok>
<jtok eid="18" type="primary_name_ref" span="544:52:544:59">entryId</jtok>
<jtok eid="18" type="line_comment" span="546:25:546:81">// TODO: unable to find explicit group with the given id</jtok>
<jtok eid="18" type="primary_name_ref" span="549:17:549:26">statement</jtok>
<jtok eid="18" type="method_call" span="549:27:549:32">close</jtok>
<jtok eid="18" type="line_comment" span="552:13:552:62">// Finally, set the groups tree for the metadata:</jtok>
<jtok eid="18" type="primary_name_ref" span="553:13:553:21">metaData</jtok>
<jtok eid="18" type="method_call" span="553:22:553:31">setGroups</jtok>
<jtok eid="18" type="primary_name_ref" span="553:32:553:40">rootNode</jtok>
<jtok eid="1" type="block_comment" span="557:5:563:8">/**
     * Look up the group type name from the type ID in the database.
     * @param groupId The database's groups id
     * @param conn The database connection
     * @return The name (JabRef type id) of the group type.
     * @throws SQLException
     */</jtok>
<jtok eid="19" type="class_or_interface_ref" span="564:19:564:25">String</jtok>
<jtok eid="19" type="method_name" span="564:26:564:43">findGroupTypeName</jtok>
<jtok eid="19" type="parameter_type" span="564:44:564:50">String</jtok>
<jtok eid="19" type="parameter_name" span="564:51:564:58">groupId</jtok>
<jtok eid="19" type="parameter_type" span="564:60:564:70">Connection</jtok>
<jtok eid="19" type="parameter_name" span="564:71:564:75">conn</jtok>
<jtok eid="19" type="throws" span="564:84:564:96">SQLException</jtok>
<jtok eid="19" type="method_call" span="565:16:565:42">processDMLWithSingleResult</jtok>
<jtok eid="19" type="primary_name_ref" span="565:43:565:47">conn</jtok>
<jtok eid="19" type="string_literal" span="565:49:565:104">"SELECT label FROM group_types WHERE group_types_id=\""</jtok>
<jtok eid="19" type="primary_name_ref" span="565:105:565:112">groupId</jtok>
<jtok eid="19" type="string_literal" span="565:113:565:118">"\";"</jtok>
<jtok eid="1" type="block_comment" span="568:5:581:8">/**
     * Accepts the BibtexDatabase and MetaData, generates the DML required to
     * create and populate SQL database tables, and writes this DML to the 
     * specified SQL database.
     *
     * @param database
     *          The BibtexDatabase to export
     * @param metaData
     *          The MetaData object containing the groups information
     * @param keySet
     *          The set of IDs of the entries to export.
     * @param dbStrings
     *          The necessary database connection information
     */</jtok>
<jtok eid="20" type="method_name" span="582:24:582:38">exportDatabase</jtok>
<jtok eid="20" type="parameter_type" span="582:45:582:59">BibtexDatabase</jtok>
<jtok eid="20" type="parameter_name" span="582:60:582:68">database</jtok>
<jtok eid="20" type="parameter_type" span="583:15:583:23">MetaData</jtok>
<jtok eid="20" type="parameter_name" span="583:24:583:32">metaData</jtok>
<jtok eid="20" type="parameter_type" span="583:34:583:37">Set</jtok>
<jtok eid="20" type="parameter_type" span="583:38:583:44">String</jtok>
<jtok eid="20" type="parameter_name" span="583:46:583:52">keySet</jtok>
<jtok eid="20" type="parameter_type" span="583:54:583:63">DBStrings</jtok>
<jtok eid="20" type="parameter_name" span="583:64:583:73">dbStrings</jtok>
<jtok eid="20" type="throws" span="584:16:584:25">Exception</jtok>
<jtok eid="20" type="class_or_interface_ref" span="586:9:586:15">DBTYPE</jtok>
<jtok eid="20" type="local_variable_name" span="586:16:586:22">dbtype</jtok>
<jtok eid="20" type="method_call" span="586:25:586:34">getDBType</jtok>
<jtok eid="20" type="primary_name_ref" span="586:35:586:44">dbStrings</jtok>
<jtok eid="20" type="class_or_interface_ref" span="588:9:588:19">Connection</jtok>
<jtok eid="20" type="local_variable_name" span="588:20:588:24">conn</jtok>
<jtok eid="20" type="primary_name_ref" span="592:13:592:17">conn</jtok>
<jtok eid="20" type="primary_name_ref" span="592:20:592:27">SQLutil</jtok>
<jtok eid="20" type="method_call" span="592:28:592:39">connectToDB</jtok>
<jtok eid="20" type="primary_name_ref" span="592:40:592:49">dbStrings</jtok>
<jtok eid="20" type="line_comment" span="594:13:594:42">// conn.setAutoCommit(false);</jtok>
<jtok eid="20" type="method_call" span="596:13:596:34">exportDatabase_worker</jtok>
<jtok eid="20" type="primary_name_ref" span="596:35:596:41">dbtype</jtok>
<jtok eid="20" type="primary_name_ref" span="596:43:596:51">database</jtok>
<jtok eid="20" type="primary_name_ref" span="596:53:596:61">metaData</jtok>
<jtok eid="20" type="primary_name_ref" span="596:63:596:69">keySet</jtok>
<jtok eid="20" type="primary_name_ref" span="596:71:596:75">conn</jtok>
<jtok eid="20" type="primary_name_ref" span="598:18:598:22">conn</jtok>
<jtok eid="20" type="method_call" span="598:23:598:36">getAutoCommit</jtok>
<jtok eid="20" type="primary_name_ref" span="599:17:599:21">conn</jtok>
<jtok eid="20" type="method_call" span="599:22:599:28">commit</jtok>
<jtok eid="20" type="primary_name_ref" span="600:17:600:21">conn</jtok>
<jtok eid="20" type="method_call" span="600:22:600:35">setAutoCommit</jtok>
<jtok eid="20" type="primary_name_ref" span="603:13:603:17">conn</jtok>
<jtok eid="20" type="method_call" span="603:18:603:23">close</jtok>
<jtok eid="20" type="class_or_interface_ref" span="605:18:605:30">SQLException</jtok>
<jtok eid="20" type="local_variable_name" span="605:31:605:33">ex</jtok>
<jtok eid="20" type="primary_name_ref" span="607:17:607:21">conn</jtok>
<jtok eid="20" type="primary_name_ref" span="608:22:608:26">conn</jtok>
<jtok eid="20" type="method_call" span="608:27:608:40">getAutoCommit</jtok>
<jtok eid="20" type="primary_name_ref" span="609:21:609:25">conn</jtok>
<jtok eid="20" type="method_call" span="609:26:609:34">rollback</jtok>
<jtok eid="20" type="primary_name_ref" span="613:19:613:21">ex</jtok>
<jtok eid="1" type="block_comment" span="618:4:631:8">/**
     * Worker method for the exportDatabase methods.
     *
     * @param dbtype
     *          The DBTYPE of the database
     * @param database
     *          The BibtexDatabase to export
     * @param metaData
     *          The MetaData object containing the groups information
     * @param keySet
     *            The set of IDs of the entries to export.
     * @param out
     *          The output (PrintStream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="21" type="method_name" span="632:25:632:46">exportDatabase_worker</jtok>
<jtok eid="21" type="parameter_type" span="632:48:632:54">DBTYPE</jtok>
<jtok eid="21" type="parameter_name" span="632:55:632:61">dbtype</jtok>
<jtok eid="21" type="parameter_type" span="633:19:633:33">BibtexDatabase</jtok>
<jtok eid="21" type="parameter_name" span="633:34:633:42">database</jtok>
<jtok eid="21" type="parameter_type" span="633:50:633:58">MetaData</jtok>
<jtok eid="21" type="parameter_name" span="633:59:633:67">metaData</jtok>
<jtok eid="21" type="parameter_type" span="634:13:634:16">Set</jtok>
<jtok eid="21" type="parameter_type" span="634:17:634:23">String</jtok>
<jtok eid="21" type="parameter_name" span="634:25:634:31">keySet</jtok>
<jtok eid="21" type="parameter_type" span="634:33:634:39">Object</jtok>
<jtok eid="21" type="parameter_name" span="634:40:634:43">out</jtok>
<jtok eid="21" type="throws" span="634:52:634:61">Exception</jtok>
<jtok eid="21" type="class_or_interface_ref" span="636:9:636:13">List</jtok>
<jtok eid="21" type="class_or_interface_ref" span="636:14:636:25">BibtexEntry</jtok>
<jtok eid="21" type="local_variable_name" span="636:27:636:34">entries</jtok>
<jtok eid="21" type="primary_name_ref" span="636:37:636:48">FileActions</jtok>
<jtok eid="21" type="method_call" span="636:49:636:65">getSortedEntries</jtok>
<jtok eid="21" type="primary_name_ref" span="636:66:636:74">database</jtok>
<jtok eid="21" type="primary_name_ref" span="637:13:637:19">keySet</jtok>
<jtok eid="21" type="line_comment" span="639:9:639:31">// create MySQL tables</jtok>
<jtok eid="21" type="method_call" span="640:9:640:24">dmlCreateTables</jtok>
<jtok eid="21" type="primary_name_ref" span="640:25:640:31">dbtype</jtok>
<jtok eid="21" type="primary_name_ref" span="640:32:640:35">out</jtok>
<jtok eid="21" type="line_comment" span="642:9:642:37">// populate entry_type table</jtok>
<jtok eid="21" type="method_call" span="643:9:643:21">dmlPopTab_ET</jtok>
<jtok eid="21" type="primary_name_ref" span="643:22:643:25">out</jtok>
<jtok eid="21" type="line_comment" span="645:9:645:34">// populate entries table</jtok>
<jtok eid="21" type="method_call" span="646:9:646:21">dmlPopTab_FD</jtok>
<jtok eid="21" type="primary_name_ref" span="646:22:646:29">entries</jtok>
<jtok eid="21" type="primary_name_ref" span="646:30:646:33">out</jtok>
<jtok eid="21" type="line_comment" span="648:9:648:35">// populate strings table:</jtok>
<jtok eid="21" type="method_call" span="649:9:649:21">dmlPopTab_ST</jtok>
<jtok eid="21" type="primary_name_ref" span="649:22:649:30">database</jtok>
<jtok eid="21" type="primary_name_ref" span="649:31:649:34">out</jtok>
<jtok eid="21" type="class_or_interface_ref" span="651:9:651:22">GroupTreeNode</jtok>
<jtok eid="21" type="local_variable_name" span="651:23:651:26">gtn</jtok>
<jtok eid="21" type="primary_name_ref" span="651:29:651:37">metaData</jtok>
<jtok eid="21" type="method_call" span="651:38:651:47">getGroups</jtok>
<jtok eid="21" type="line_comment" span="653:9:653:38">// populate group_types table</jtok>
<jtok eid="21" type="method_call" span="654:9:654:21">dmlPopTab_GT</jtok>
<jtok eid="21" type="primary_name_ref" span="654:22:654:25">out</jtok>
<jtok eid="21" type="line_comment" span="657:9:657:33">// populate groups table</jtok>
<jtok eid="21" type="method_call" span="658:9:658:21">dmlPopTab_GP</jtok>
<jtok eid="21" type="primary_name_ref" span="658:22:658:25">gtn</jtok>
<jtok eid="21" type="primary_name_ref" span="658:26:658:29">out</jtok>
<jtok eid="21" type="line_comment" span="660:3:660:32">// populate entry_group table</jtok>
<jtok eid="21" type="method_call" span="661:9:661:21">dmlPopTab_EG</jtok>
<jtok eid="21" type="primary_name_ref" span="661:22:661:25">gtn</jtok>
<jtok eid="21" type="primary_name_ref" span="661:26:661:29">out</jtok>
<jtok eid="1" type="block_comment" span="665:5:672:8">/**
     * Writes the table creation DML to the specififed file.
     * 
     * @param dbtype
     *          Indicates the type of database to be written to 
     * @param fout
     *          The output (PrintStream or Connection) object to which the DML should be written
     */</jtok>
<jtok eid="22" type="method_name" span="673:25:673:40">dmlCreateTables</jtok>
<jtok eid="22" type="parameter_type" span="673:41:673:47">DBTYPE</jtok>
<jtok eid="22" type="parameter_name" span="673:48:673:54">dbtype</jtok>
<jtok eid="22" type="parameter_type" span="673:56:673:62">Object</jtok>
<jtok eid="22" type="parameter_name" span="673:63:673:66">out</jtok>
<jtok eid="22" type="throws" span="674:40:674:52">SQLException</jtok>
<jtok eid="22" type="line_comment" span="676:9:676:44">// make sure fields are initialized</jtok>
<jtok eid="22" type="primary_name_ref" span="677:13:677:19">fields</jtok>
<jtok eid="22" type="method_call" span="678:13:678:26">refreshFields</jtok>
<jtok eid="22" type="line_comment" span="681:9:681:46">// build the DML tables specification</jtok>
<jtok eid="22" type="class_or_interface_ref" span="682:9:682:15">String</jtok>
<jtok eid="22" type="local_variable_name" span="682:16:682:20">dml1</jtok>
<jtok eid="22" type="string_literal" span="682:23:682:25">""</jtok>
<jtok eid="22" type="local_variable_name" span="682:27:682:31">dml2</jtok>
<jtok eid="22" type="string_literal" span="682:34:682:36">""</jtok>
<jtok eid="22" type="primary_name_ref" span="683:17:683:23">dbtype</jtok>
<jtok eid="22" type="primary_name_ref" span="684:18:684:23">MYSQL</jtok>
<jtok eid="22" type="line_comment" span="686:17:686:31">// drop tables</jtok>
<jtok eid="22" type="method_call" span="687:17:687:27">processDML</jtok>
<jtok eid="22" type="primary_name_ref" span="687:28:687:31">out</jtok>
<jtok eid="22" type="string_literal" span="687:32:687:67">"DROP TABLE IF EXISTS entry_types;"</jtok>
<jtok eid="22" type="method_call" span="688:17:688:27">processDML</jtok>
<jtok eid="22" type="primary_name_ref" span="688:28:688:31">out</jtok>
<jtok eid="22" type="string_literal" span="688:32:688:63">"DROP TABLE IF EXISTS entries;"</jtok>
<jtok eid="22" type="method_call" span="689:17:689:27">processDML</jtok>
<jtok eid="22" type="primary_name_ref" span="689:28:689:31">out</jtok>
<jtok eid="22" type="string_literal" span="689:32:689:63">"DROP TABLE IF EXISTS strings;"</jtok>
<jtok eid="22" type="method_call" span="690:17:690:27">processDML</jtok>
<jtok eid="22" type="primary_name_ref" span="690:28:690:31">out</jtok>
<jtok eid="22" type="string_literal" span="690:32:690:67">"DROP TABLE IF EXISTS group_types;"</jtok>
<jtok eid="22" type="method_call" span="691:17:691:27">processDML</jtok>
<jtok eid="22" type="primary_name_ref" span="691:28:691:31">out</jtok>
<jtok eid="22" type="string_literal" span="691:32:691:62">"DROP TABLE IF EXISTS groups;"</jtok>
<jtok eid="22" type="method_call" span="692:17:692:27">processDML</jtok>
<jtok eid="22" type="primary_name_ref" span="692:28:692:31">out</jtok>
<jtok eid="22" type="string_literal" span="692:32:692:67">"DROP TABLE IF EXISTS entry_group;"</jtok>
<jtok eid="22" type="line_comment" span="694:17:694:82">// generate DML that specifies DB columns corresponding to fields</jtok>
<jtok eid="22" type="primary_name_ref" span="695:17:695:21">dml1</jtok>
<jtok eid="22" type="primary_name_ref" span="695:24:695:31">SQLutil</jtok>
<jtok eid="22" type="method_call" span="695:32:695:44">fieldsAsCols</jtok>
<jtok eid="22" type="primary_name_ref" span="695:45:695:51">fields</jtok>
<jtok eid="22" type="string_literal" span="695:53:695:79">" VARCHAR(3) DEFAULT NULL"</jtok>
<jtok eid="22" type="primary_name_ref" span="696:17:696:21">dml2</jtok>
<jtok eid="22" type="primary_name_ref" span="696:24:696:31">SQLutil</jtok>
<jtok eid="22" type="method_call" span="696:32:696:44">fieldsAsCols</jtok>
<jtok eid="22" type="primary_name_ref" span="696:45:696:51">fields</jtok>
<jtok eid="22" type="string_literal" span="696:53:696:73">" TEXT DEFAULT NULL"</jtok>
<jtok eid="22" type="line_comment" span="698:17:698:33">// create tables</jtok>
<jtok eid="22" type="method_call" span="699:17:699:31">dmlTable_mysql</jtok>
<jtok eid="22" type="primary_name_ref" span="699:32:699:36">dml1</jtok>
<jtok eid="22" type="primary_name_ref" span="699:38:699:42">dml2</jtok>
<jtok eid="22" type="primary_name_ref" span="699:44:699:47">out</jtok>
<jtok eid="22" type="primary_name_ref" span="703:18:703:23">DERBY</jtok>
<jtok eid="22" type="line_comment" span="705:17:705:31">// drop tables</jtok>
<jtok eid="22" type="primary_name_ref" span="706:21:706:24">out</jtok>
<jtok eid="22" type="class_or_interface_ref" span="706:36:706:46">Connection</jtok>
<jtok eid="22" type="class_or_interface_ref" span="708:21:708:31">Connection</jtok>
<jtok eid="22" type="local_variable_name" span="708:32:708:36">conn</jtok>
<jtok eid="22" type="class_or_interface_ref" span="708:40:708:50">Connection</jtok>
<jtok eid="22" type="primary_name_ref" span="708:52:708:55">out</jtok>
<jtok eid="22" type="local_variable_name" span="709:29:709:38">commitNow</jtok>
<jtok eid="22" type="primary_name_ref" span="709:41:709:45">conn</jtok>
<jtok eid="22" type="method_call" span="709:46:709:59">getAutoCommit</jtok>
<jtok eid="22" type="primary_name_ref" span="710:21:710:25">conn</jtok>
<jtok eid="22" type="method_call" span="710:26:710:39">setAutoCommit</jtok>
<jtok eid="22" type="line_comment" span="712:21:712:78">//TODO: determine which tables are present, and drop them</jtok>
<jtok eid="22" type="primary_name_ref" span="714:21:714:25">conn</jtok>
<jtok eid="22" type="method_call" span="714:26:714:39">setAutoCommit</jtok>
<jtok eid="22" type="primary_name_ref" span="714:40:714:49">commitNow</jtok>
<jtok eid="22" type="line_comment" span="718:17:718:82">// generate DML that specifies DB columns corresponding to fields</jtok>
<jtok eid="22" type="primary_name_ref" span="719:17:719:21">dml1</jtok>
<jtok eid="22" type="primary_name_ref" span="719:24:719:31">SQLutil</jtok>
<jtok eid="22" type="method_call" span="719:32:719:44">fieldsAsCols</jtok>
<jtok eid="22" type="primary_name_ref" span="719:45:719:51">fields</jtok>
<jtok eid="22" type="string_literal" span="719:53:719:79">" VARCHAR(3) DEFAULT NULL"</jtok>
<jtok eid="22" type="primary_name_ref" span="720:17:720:21">dml2</jtok>
<jtok eid="22" type="primary_name_ref" span="720:24:720:31">SQLutil</jtok>
<jtok eid="22" type="method_call" span="720:32:720:44">fieldsAsCols</jtok>
<jtok eid="22" type="primary_name_ref" span="720:45:720:51">fields</jtok>
<jtok eid="22" type="string_literal" span="720:53:720:81">" LONG VARCHAR DEFAULT NULL"</jtok>
<jtok eid="22" type="line_comment" span="722:17:722:33">// create tables</jtok>
<jtok eid="22" type="method_call" span="723:17:723:31">dmlTable_derby</jtok>
<jtok eid="22" type="primary_name_ref" span="723:32:723:36">dml1</jtok>
<jtok eid="22" type="primary_name_ref" span="723:38:723:42">dml2</jtok>
<jtok eid="22" type="primary_name_ref" span="723:44:723:47">out</jtok>
<jtok eid="22" type="primary_name_ref" span="728:17:728:23">System</jtok>
<jtok eid="22" type="qualified_name_ref" span="728:24:728:27">err</jtok>
<jtok eid="22" type="method_call" span="728:28:728:35">println</jtok>
<jtok eid="22" type="string_literal" span="728:36:728:83">"Error: Do not recognize database enumeration."</jtok>
<jtok eid="22" type="primary_name_ref" span="729:17:729:23">System</jtok>
<jtok eid="22" type="method_call" span="729:24:729:28">exit</jtok>
<jtok eid="1" type="block_comment" span="736:5:745:8">/**
     * Generates DML specifying table columns and their datatypes. The output of
     * this routine should be used within a CREATE TABLE statement.
     * 
     * @param fields
     *            Contains unique field names
     * @param datatype
     *            Specifies the SQL data type that the fields should take on.
     * @return The DML code to be included in a CREATE TABLE statement.
     */</jtok>
<jtok eid="23" type="class_or_interface_ref" span="746:20:746:26">String</jtok>
<jtok eid="23" type="method_name" span="746:27:746:39">fieldsAsCols</jtok>
<jtok eid="23" type="parameter_type" span="746:40:746:49">ArrayList</jtok>
<jtok eid="23" type="parameter_type" span="746:50:746:56">String</jtok>
<jtok eid="23" type="parameter_name" span="746:58:746:64">fields</jtok>
<jtok eid="23" type="parameter_type" span="746:66:746:72">String</jtok>
<jtok eid="23" type="parameter_name" span="746:73:746:81">datatype</jtok>
<jtok eid="23" type="class_or_interface_ref" span="747:9:747:15">String</jtok>
<jtok eid="23" type="local_variable_name" span="747:16:747:19">str</jtok>
<jtok eid="23" type="string_literal" span="747:22:747:24">""</jtok>
<jtok eid="23" type="class_or_interface_ref" span="748:9:748:21">ListIterator</jtok>
<jtok eid="23" type="class_or_interface_ref" span="748:22:748:28">String</jtok>
<jtok eid="23" type="local_variable_name" span="748:30:748:32">li</jtok>
<jtok eid="23" type="primary_name_ref" span="748:35:748:41">fields</jtok>
<jtok eid="23" type="method_call" span="748:42:748:54">listIterator</jtok>
<jtok eid="23" type="primary_name_ref" span="749:16:749:18">li</jtok>
<jtok eid="23" type="method_call" span="749:19:749:26">hasNext</jtok>
<jtok eid="23" type="primary_name_ref" span="750:13:750:16">str</jtok>
<jtok eid="23" type="primary_name_ref" span="750:19:750:22">str</jtok>
<jtok eid="23" type="primary_name_ref" span="750:25:750:27">li</jtok>
<jtok eid="23" type="method_call" span="750:28:750:32">next</jtok>
<jtok eid="23" type="string_literal" span="750:37:750:40">" "</jtok>
<jtok eid="23" type="primary_name_ref" span="750:43:750:51">datatype</jtok>
<jtok eid="23" type="primary_name_ref" span="751:17:751:19">li</jtok>
<jtok eid="23" type="method_call" span="751:20:751:27">hasNext</jtok>
<jtok eid="23" type="primary_name_ref" span="752:17:752:20">str</jtok>
<jtok eid="23" type="primary_name_ref" span="752:23:752:26">str</jtok>
<jtok eid="23" type="string_literal" span="752:29:752:33">", "</jtok>
<jtok eid="23" type="primary_name_ref" span="754:16:754:19">str</jtok>
<jtok eid="1" type="block_comment" span="757:5:768:8">/**
     * Generates DML code necessary to create all tables in a MySQL database, 
     * and writes it to appropriate output.
     *
     * @param dml1
     *            Column specifications for fields in entry_type table.
     * @param dml2
     *            Column specifications for fields in entries table.
     * @param out
     *            The output (PrintStream or Connection) object to which the DML should be written.
     * @return DML to create all MySQL tables.
     */</jtok>
<jtok eid="24" type="method_name" span="769:25:769:39">dmlTable_mysql</jtok>
<jtok eid="24" type="parameter_type" span="769:40:769:46">String</jtok>
<jtok eid="24" type="parameter_name" span="769:47:769:51">dml1</jtok>
<jtok eid="24" type="parameter_type" span="769:53:769:59">String</jtok>
<jtok eid="24" type="parameter_name" span="769:60:769:64">dml2</jtok>
<jtok eid="24" type="parameter_type" span="769:66:769:72">Object</jtok>
<jtok eid="24" type="parameter_name" span="769:73:769:76">out</jtok>
<jtok eid="24" type="throws" span="770:20:770:32">SQLException</jtok>
<jtok eid="24" type="method_call" span="772:9:772:19">processDML</jtok>
<jtok eid="24" type="primary_name_ref" span="772:20:772:23">out</jtok>
<jtok eid="24" type="string_literal" span="772:24:772:55">"CREATE TABLE entry_types ( \n"</jtok>
<jtok eid="24" type="string_literal" span="773:15:773:76">"entry_types_id    INT UNSIGNED  NOT NULL AUTO_INCREMENT, \n"</jtok>
<jtok eid="24" type="string_literal" span="774:15:774:34">"label			 TEXT, \n"</jtok>
<jtok eid="24" type="primary_name_ref" span="775:15:775:19">dml1</jtok>
<jtok eid="24" type="string_literal" span="776:15:776:21">", \n"</jtok>
<jtok eid="24" type="string_literal" span="777:15:777:48">"PRIMARY KEY (entry_types_id) \n"</jtok>
<jtok eid="24" type="string_literal" span="778:15:778:19">");"</jtok>
<jtok eid="24" type="method_call" span="780:9:780:19">processDML</jtok>
<jtok eid="24" type="primary_name_ref" span="780:20:780:23">out</jtok>
<jtok eid="24" type="string_literal" span="780:24:780:51">"CREATE TABLE entries ( \n"</jtok>
<jtok eid="24" type="string_literal" span="781:15:781:76">"entries_id      INTEGER         NOT NULL AUTO_INCREMENT, \n"</jtok>
<jtok eid="24" type="string_literal" span="782:6:782:32">"jabref_eid      VARCHAR("</jtok>
<jtok eid="24" type="primary_name_ref" span="783:7:783:11">Util</jtok>
<jtok eid="24" type="method_call" span="783:12:783:35">getMinimumIntegerDigits</jtok>
<jtok eid="24" type="string_literal" span="784:9:784:31">")   DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="785:15:785:70">"entry_types_id  INT UNSIGNED         DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="786:15:786:66">"cite_key        VARCHAR(100)     DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="primary_name_ref" span="787:15:787:19">dml2</jtok>
<jtok eid="24" type="string_literal" span="788:15:788:20">",\n"</jtok>
<jtok eid="24" type="string_literal" span="789:15:789:45">"PRIMARY KEY (entries_id), \n"</jtok>
<jtok eid="24" type="string_literal" span="790:6:790:33">"INDEX(entry_types_id), \n"</jtok>
<jtok eid="24" type="string_literal" span="791:15:791:87">"FOREIGN KEY (entry_types_id) REFERENCES entry_types(entry_types_id) \n"</jtok>
<jtok eid="24" type="string_literal" span="792:15:792:19">");"</jtok>
<jtok eid="24" type="method_call" span="794:9:794:19">processDML</jtok>
<jtok eid="24" type="primary_name_ref" span="794:20:794:23">out</jtok>
<jtok eid="24" type="string_literal" span="794:24:794:51">"CREATE TABLE strings ( \n"</jtok>
<jtok eid="24" type="string_literal" span="795:15:795:76">"strings_id      INTEGER         NOT NULL AUTO_INCREMENT, \n"</jtok>
<jtok eid="24" type="string_literal" span="796:6:796:49">"label      VARCHAR(100)  DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="797:9:797:52">"content    VARCHAR(200)  DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="798:15:798:44">"PRIMARY KEY (strings_id) \n"</jtok>
<jtok eid="24" type="string_literal" span="799:15:799:19">");"</jtok>
<jtok eid="24" type="method_call" span="801:9:801:19">processDML</jtok>
<jtok eid="24" type="primary_name_ref" span="801:20:801:23">out</jtok>
<jtok eid="24" type="string_literal" span="801:24:801:55">"CREATE TABLE group_types ( \n"</jtok>
<jtok eid="24" type="string_literal" span="802:20:802:77">"group_types_id  INTEGER     NOT NULL AUTO_INCREMENT, \n"</jtok>
<jtok eid="24" type="string_literal" span="803:20:803:62">"label   VARCHAR(100)    DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="804:20:804:53">"PRIMARY KEY (group_types_id) \n"</jtok>
<jtok eid="24" type="string_literal" span="805:20:805:24">");"</jtok>
<jtok eid="24" type="method_call" span="807:9:807:19">processDML</jtok>
<jtok eid="24" type="primary_name_ref" span="807:20:807:23">out</jtok>
<jtok eid="24" type="string_literal" span="807:24:807:50">"CREATE TABLE groups ( \n"</jtok>
<jtok eid="24" type="string_literal" span="808:15:808:76">"groups_id       INTEGER         NOT NULL AUTO_INCREMENT, \n"</jtok>
<jtok eid="24" type="string_literal" span="809:15:809:65">"group_types_id  INTEGER         DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="810:15:810:65">"label           VARCHAR(100)    DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="811:15:811:65">"parent_id       INTEGER         DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="812:15:812:74">"search_field       VARCHAR(100)          DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="813:15:813:74">"search_expression  VARCHAR(200)          DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="814:15:814:63">"case_sensitive  BOOL          DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="815:15:815:46">"reg_exp BOOL DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="816:15:816:62">"hierarchical_context INTEGER DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="817:15:817:43">"PRIMARY KEY (groups_id) \n"</jtok>
<jtok eid="24" type="string_literal" span="818:15:818:19">");"</jtok>
<jtok eid="24" type="method_call" span="820:9:820:19">processDML</jtok>
<jtok eid="24" type="primary_name_ref" span="820:20:820:23">out</jtok>
<jtok eid="24" type="string_literal" span="820:24:820:55">"CREATE TABLE entry_group ( \n"</jtok>
<jtok eid="24" type="string_literal" span="821:15:821:76">"entries_id       INTEGER        NOT NULL AUTO_INCREMENT, \n"</jtok>
<jtok eid="24" type="string_literal" span="822:15:822:65">"groups_id        INTEGER        DEFAULT NULL, \n"</jtok>
<jtok eid="24" type="string_literal" span="823:6:823:29">"INDEX(entries_id), \n"</jtok>
<jtok eid="24" type="string_literal" span="824:6:824:28">"INDEX(groups_id), \n"</jtok>
<jtok eid="24" type="string_literal" span="825:15:825:76">"FOREIGN KEY (entries_id) REFERENCES entries(entries_id), \n"</jtok>
<jtok eid="24" type="string_literal" span="826:15:826:73">"FOREIGN KEY (groups_id)  REFERENCES groups(groups_id) \n"</jtok>
<jtok eid="24" type="string_literal" span="827:15:827:19">");"</jtok>
<jtok eid="1" type="block_comment" span="833:5:844:8">/**
     * Generates DML code necessary to create all tables in a Derby database, 
     * and writes it to appropriate output.
     *
     * @param dml1
     *            Column specifications for fields in entry_type table.
     * @param dml2
     *            Column specifications for fields in entries table.
     * @param out
     *            The output (PrintStream or Connection) object to which the DML should be written.
     * @return DML to create all Derby tables.
     */</jtok>
<jtok eid="25" type="method_name" span="845:25:845:39">dmlTable_derby</jtok>
<jtok eid="25" type="parameter_type" span="845:40:845:46">String</jtok>
<jtok eid="25" type="parameter_name" span="845:47:845:51">dml1</jtok>
<jtok eid="25" type="parameter_type" span="845:53:845:59">String</jtok>
<jtok eid="25" type="parameter_name" span="845:60:845:64">dml2</jtok>
<jtok eid="25" type="parameter_type" span="845:66:845:72">Object</jtok>
<jtok eid="25" type="parameter_name" span="845:73:845:76">out</jtok>
<jtok eid="25" type="throws" span="846:20:846:32">SQLException</jtok>
<jtok eid="25" type="method_call" span="848:9:848:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="848:20:848:23">out</jtok>
<jtok eid="25" type="string_literal" span="848:24:848:53">"CREATE TABLE entry_types ( "</jtok>
<jtok eid="25" type="string_literal" span="849:15:849:88">"entry_types_id INT  NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, "</jtok>
<jtok eid="25" type="primary_name_ref" span="850:15:850:19">dml1</jtok>
<jtok eid="25" type="string_literal" span="850:22:850:26">", "</jtok>
<jtok eid="25" type="string_literal" span="851:15:851:35">"label LONG VARCHAR"</jtok>
<jtok eid="25" type="string_literal" span="852:15:852:18">")"</jtok>
<jtok eid="25" type="method_call" span="854:9:854:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="854:20:854:23">out</jtok>
<jtok eid="25" type="string_literal" span="854:24:854:49">"CREATE TABLE entries ( "</jtok>
<jtok eid="25" type="string_literal" span="855:15:855:100">"entries_id      INTEGER         NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, "</jtok>
<jtok eid="25" type="string_literal" span="856:6:856:32">"jabref_eid      VARCHAR("</jtok>
<jtok eid="25" type="primary_name_ref" span="857:7:857:11">Util</jtok>
<jtok eid="25" type="method_call" span="857:12:857:35">getMinimumIntegerDigits</jtok>
<jtok eid="25" type="string_literal" span="858:9:858:29">")   DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="859:15:859:63">"entry_types_id  INTEGER         DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="860:15:860:64">"cite_key        VARCHAR(100)     DEFAULT NULL, "</jtok>
<jtok eid="25" type="primary_name_ref" span="861:15:861:19">dml2</jtok>
<jtok eid="25" type="string_literal" span="862:15:862:18">")"</jtok>
<jtok eid="25" type="method_call" span="864:9:864:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="864:20:864:23">out</jtok>
<jtok eid="25" type="string_literal" span="864:24:864:72">"ALTER TABLE entries ADD CONSTRAINT entries_fk "</jtok>
<jtok eid="25" type="string_literal" span="865:24:865:106">"FOREIGN KEY (\"entry_types_id\") REFERENCES \"entry_types\" (\"entry_types_id\")"</jtok>
<jtok eid="25" type="method_call" span="867:9:867:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="867:20:867:23">out</jtok>
<jtok eid="25" type="string_literal" span="867:24:867:53">"CREATE TABLE group_types ( "</jtok>
<jtok eid="25" type="string_literal" span="868:15:868:88">"group_types_id INT  NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, "</jtok>
<jtok eid="25" type="string_literal" span="869:15:869:35">"label LONG VARCHAR"</jtok>
<jtok eid="25" type="string_literal" span="870:15:870:18">")"</jtok>
<jtok eid="25" type="method_call" span="872:9:872:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="872:20:872:23">out</jtok>
<jtok eid="25" type="string_literal" span="872:24:872:48">"CREATE TABLE groups ( "</jtok>
<jtok eid="25" type="string_literal" span="873:15:873:100">"groups_id       INTEGER         NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, "</jtok>
<jtok eid="25" type="string_literal" span="874:15:874:63">"group_types_id  INTEGER         DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="875:15:875:63">"label           VARCHAR(100)    DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="876:15:876:63">"parent_id       INTEGER         DEFAULT NULL  "</jtok>
<jtok eid="25" type="string_literal" span="877:15:877:72">"search_field       VARCHAR(100)          DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="878:15:878:72">"search_expression  VARCHAR(200)          DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="879:15:879:61">"case_sensitive  BOOL          DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="880:15:880:42">"reg_exp BOOL DEFAULT NULL"</jtok>
<jtok eid="25" type="string_literal" span="881:15:881:60">"hierarchical_context INTEGER DEFAULT NULL, "</jtok>
<jtok eid="25" type="string_literal" span="882:15:882:18">")"</jtok>
<jtok eid="25" type="method_call" span="884:9:884:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="884:20:884:23">out</jtok>
<jtok eid="25" type="string_literal" span="884:24:884:53">"CREATE TABLE entry_group ( "</jtok>
<jtok eid="25" type="string_literal" span="885:15:885:100">"entries_id       INTEGER        NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, "</jtok>
<jtok eid="25" type="string_literal" span="886:15:886:62">"groups_id        INTEGER        DEFAULT NULL "</jtok>
<jtok eid="25" type="string_literal" span="887:15:887:18">")"</jtok>
<jtok eid="25" type="method_call" span="889:9:889:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="889:20:889:23">out</jtok>
<jtok eid="25" type="string_literal" span="889:24:889:81">"ALTER TABLE entry_group ADD CONSTRAINT entries_group_fk"</jtok>
<jtok eid="25" type="string_literal" span="890:24:890:99">"FOREIGN KEY (\"entries_id\") REFERENCES \"entry_fields\" (\"entries_id\")"</jtok>
<jtok eid="25" type="method_call" span="892:9:892:19">processDML</jtok>
<jtok eid="25" type="primary_name_ref" span="892:20:892:23">out</jtok>
<jtok eid="25" type="string_literal" span="892:24:892:74">"ALTER TABLE entry_group ADD CONSTRAINT groups_fk"</jtok>
<jtok eid="25" type="string_literal" span="893:24:893:91">"FOREIGN KEY (\"groups_id\") REFERENCES \"groups\" (\"groups_id\")"</jtok>
<jtok eid="1" type="block_comment" span="899:5:906:8">/**
     * Generates the DML required to populate the group_types table with
     * JabRef data.
     *
     * @param out
     *  The output (PrintSream or Connection) object to which the DML should be written.
     * @throws SQLException
     */</jtok>
<jtok eid="26" type="method_name" span="907:25:907:37">dmlPopTab_GT</jtok>
<jtok eid="26" type="parameter_type" span="907:39:907:45">Object</jtok>
<jtok eid="26" type="parameter_name" span="907:46:907:49">out</jtok>
<jtok eid="26" type="throws" span="907:58:907:70">SQLException</jtok>
<jtok eid="26" type="class_or_interface_ref" span="908:9:908:15">String</jtok>
<jtok eid="26" type="local_variable_name" span="908:18:908:27">typeNames</jtok>
<jtok eid="26" type="constructor_call" span="908:34:908:40">String</jtok>
<jtok eid="26" type="primary_name_ref" span="909:17:909:32">AllEntriesGroup</jtok>
<jtok eid="26" type="qualified_name_ref" span="909:33:909:35">ID</jtok>
<jtok eid="26" type="primary_name_ref" span="909:37:909:50">ExplicitGroup</jtok>
<jtok eid="26" type="qualified_name_ref" span="909:51:909:53">ID</jtok>
<jtok eid="26" type="primary_name_ref" span="909:55:909:67">KeywordGroup</jtok>
<jtok eid="26" type="qualified_name_ref" span="909:68:909:70">ID</jtok>
<jtok eid="26" type="primary_name_ref" span="909:72:909:83">SearchGroup</jtok>
<jtok eid="26" type="qualified_name_ref" span="909:84:909:86">ID</jtok>
<jtok eid="26" type="local_variable_name" span="910:18:910:19">i</jtok>
<jtok eid="26" type="primary_name_ref" span="910:25:910:26">i</jtok>
<jtok eid="26" type="primary_name_ref" span="910:29:910:38">typeNames</jtok>
<jtok eid="26" type="qualified_name_ref" span="910:39:910:45">length</jtok>
<jtok eid="26" type="primary_name_ref" span="910:47:910:48">i</jtok>
<jtok eid="26" type="class_or_interface_ref" span="911:13:911:19">String</jtok>
<jtok eid="26" type="local_variable_name" span="911:20:911:28">typeName</jtok>
<jtok eid="26" type="primary_name_ref" span="911:31:911:40">typeNames</jtok>
<jtok eid="26" type="primary_name_ref" span="911:41:911:42">i</jtok>
<jtok eid="26" type="class_or_interface_ref" span="912:13:912:19">String</jtok>
<jtok eid="26" type="local_variable_name" span="912:20:912:26">insert</jtok>
<jtok eid="26" type="string_literal" span="912:29:912:73">"INSERT INTO group_types (label) VALUES (\""</jtok>
<jtok eid="26" type="primary_name_ref" span="912:74:912:82">typeName</jtok>
<jtok eid="26" type="string_literal" span="912:83:912:89">"\");"</jtok>
<jtok eid="26" type="line_comment" span="913:13:913:51">// handle DML according to output type</jtok>
<jtok eid="26" type="method_call" span="914:13:914:23">processDML</jtok>
<jtok eid="26" type="primary_name_ref" span="914:24:914:27">out</jtok>
<jtok eid="26" type="primary_name_ref" span="914:29:914:35">insert</jtok>
<jtok eid="1" type="block_comment" span="919:6:925:8">/**
     * Generates the DML required to populate the entry_types table with jabref
     * data.
     * 
     * @param out
     *          The output (PrintSream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="27" type="method_name" span="926:25:926:37">dmlPopTab_ET</jtok>
<jtok eid="27" type="parameter_type" span="926:39:926:45">Object</jtok>
<jtok eid="27" type="parameter_name" span="926:46:926:49">out</jtok>
<jtok eid="27" type="throws" span="926:58:926:70">SQLException</jtok>
<jtok eid="27" type="class_or_interface_ref" span="928:9:928:15">String</jtok>
<jtok eid="27" type="local_variable_name" span="928:16:928:19">dml</jtok>
<jtok eid="27" type="string_literal" span="928:22:928:24">""</jtok>
<jtok eid="27" type="class_or_interface_ref" span="929:9:929:15">String</jtok>
<jtok eid="27" type="local_variable_name" span="929:16:929:22">insert</jtok>
<jtok eid="27" type="string_literal" span="929:25:929:59">"INSERT INTO entry_types (label, "</jtok>
<jtok eid="27" type="primary_name_ref" span="929:60:929:68">fieldstr</jtok>
<jtok eid="27" type="string_literal" span="929:69:929:81">") VALUES ("</jtok>
<jtok eid="27" type="class_or_interface_ref" span="931:9:931:18">ArrayList</jtok>
<jtok eid="27" type="class_or_interface_ref" span="931:19:931:25">String</jtok>
<jtok eid="27" type="local_variable_name" span="931:27:931:34">fieldID</jtok>
<jtok eid="27" type="constructor_call" span="931:41:931:50">ArrayList</jtok>
<jtok eid="27" type="constructor_call" span="931:51:931:57">String</jtok>
<jtok eid="27" type="local_variable_name" span="932:18:932:19">i</jtok>
<jtok eid="27" type="primary_name_ref" span="932:25:932:26">i</jtok>
<jtok eid="27" type="primary_name_ref" span="932:29:932:35">fields</jtok>
<jtok eid="27" type="method_call" span="932:36:932:40">size</jtok>
<jtok eid="27" type="primary_name_ref" span="932:44:932:45">i</jtok>
<jtok eid="27" type="primary_name_ref" span="933:13:933:20">fieldID</jtok>
<jtok eid="27" type="method_call" span="933:21:933:24">add</jtok>
<jtok eid="27" type="line_comment" span="935:9:935:36">// loop through entry types</jtok>
<jtok eid="27" type="class_or_interface_ref" span="936:14:936:29">BibtexEntryType</jtok>
<jtok eid="27" type="local_variable_name" span="936:30:936:33">val</jtok>
<jtok eid="27" type="primary_name_ref" span="936:36:936:51">BibtexEntryType</jtok>
<jtok eid="27" type="qualified_name_ref" span="936:52:936:61">ALL_TYPES</jtok>
<jtok eid="27" type="method_call" span="936:62:936:68">values</jtok>
<jtok eid="27" type="line_comment" span="938:13:938:78">// set ID for each field corresponding to its relationship to the</jtok>
<jtok eid="27" type="line_comment" span="939:13:939:26">// entry type</jtok>
<jtok eid="27" type="local_variable_name" span="940:22:940:23">i</jtok>
<jtok eid="27" type="primary_name_ref" span="940:29:940:30">i</jtok>
<jtok eid="27" type="primary_name_ref" span="940:33:940:40">fieldID</jtok>
<jtok eid="27" type="method_call" span="940:41:940:45">size</jtok>
<jtok eid="27" type="primary_name_ref" span="940:49:940:50">i</jtok>
<jtok eid="27" type="primary_name_ref" span="941:17:941:24">fieldID</jtok>
<jtok eid="27" type="method_call" span="941:25:941:28">set</jtok>
<jtok eid="27" type="primary_name_ref" span="941:29:941:30">i</jtok>
<jtok eid="27" type="string_literal" span="941:32:941:34">""</jtok>
<jtok eid="27" type="primary_name_ref" span="943:13:943:20">fieldID</jtok>
<jtok eid="27" type="method_call" span="943:23:943:33">setFieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="943:34:943:40">fields</jtok>
<jtok eid="27" type="primary_name_ref" span="943:42:943:49">fieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="943:51:943:54">val</jtok>
<jtok eid="27" type="method_call" span="943:55:943:72">getRequiredFields</jtok>
<jtok eid="27" type="string_literal" span="944:17:944:22">"req"</jtok>
<jtok eid="27" type="primary_name_ref" span="945:13:945:20">fieldID</jtok>
<jtok eid="27" type="method_call" span="945:23:945:33">setFieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="945:34:945:40">fields</jtok>
<jtok eid="27" type="primary_name_ref" span="945:42:945:49">fieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="945:51:945:54">val</jtok>
<jtok eid="27" type="method_call" span="945:55:945:72">getOptionalFields</jtok>
<jtok eid="27" type="string_literal" span="946:17:946:22">"opt"</jtok>
<jtok eid="27" type="primary_name_ref" span="947:13:947:20">fieldID</jtok>
<jtok eid="27" type="method_call" span="947:23:947:33">setFieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="947:34:947:40">fields</jtok>
<jtok eid="27" type="primary_name_ref" span="947:42:947:49">fieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="947:51:947:54">val</jtok>
<jtok eid="27" type="method_call" span="947:55:947:71">getGeneralFields</jtok>
<jtok eid="27" type="string_literal" span="947:75:947:80">"gen"</jtok>
<jtok eid="27" type="primary_name_ref" span="948:13:948:20">fieldID</jtok>
<jtok eid="27" type="method_call" span="948:23:948:33">setFieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="948:34:948:40">fields</jtok>
<jtok eid="27" type="primary_name_ref" span="948:42:948:49">fieldID</jtok>
<jtok eid="27" type="primary_name_ref" span="948:51:948:54">val</jtok>
<jtok eid="27" type="method_call" span="948:55:948:71">getUtilityFields</jtok>
<jtok eid="27" type="string_literal" span="948:75:948:80">"uti"</jtok>
<jtok eid="27" type="line_comment" span="950:13:950:42">// build DML insert statement</jtok>
<jtok eid="27" type="primary_name_ref" span="951:13:951:16">dml</jtok>
<jtok eid="27" type="primary_name_ref" span="951:19:951:25">insert</jtok>
<jtok eid="27" type="string_literal" span="951:28:951:32">"\""</jtok>
<jtok eid="27" type="primary_name_ref" span="951:35:951:38">val</jtok>
<jtok eid="27" type="method_call" span="951:39:951:46">getName</jtok>
<jtok eid="27" type="method_call" span="951:49:951:60">toLowerCase</jtok>
<jtok eid="27" type="string_literal" span="951:65:951:69">"\""</jtok>
<jtok eid="27" type="local_variable_name" span="952:22:952:23">i</jtok>
<jtok eid="27" type="primary_name_ref" span="952:29:952:30">i</jtok>
<jtok eid="27" type="primary_name_ref" span="952:33:952:40">fieldID</jtok>
<jtok eid="27" type="method_call" span="952:41:952:45">size</jtok>
<jtok eid="27" type="primary_name_ref" span="952:49:952:50">i</jtok>
<jtok eid="27" type="primary_name_ref" span="953:17:953:20">dml</jtok>
<jtok eid="27" type="primary_name_ref" span="953:23:953:26">dml</jtok>
<jtok eid="27" type="string_literal" span="953:29:953:33">", "</jtok>
<jtok eid="27" type="primary_name_ref" span="954:21:954:28">fieldID</jtok>
<jtok eid="27" type="method_call" span="954:29:954:32">get</jtok>
<jtok eid="27" type="primary_name_ref" span="954:33:954:34">i</jtok>
<jtok eid="27" type="string_literal" span="954:39:954:41">""</jtok>
<jtok eid="27" type="primary_name_ref" span="955:21:955:24">dml</jtok>
<jtok eid="27" type="primary_name_ref" span="955:27:955:30">dml</jtok>
<jtok eid="27" type="string_literal" span="955:33:955:37">"\""</jtok>
<jtok eid="27" type="primary_name_ref" span="955:40:955:47">fieldID</jtok>
<jtok eid="27" type="method_call" span="955:48:955:51">get</jtok>
<jtok eid="27" type="primary_name_ref" span="955:52:955:53">i</jtok>
<jtok eid="27" type="string_literal" span="955:57:955:61">"\""</jtok>
<jtok eid="27" type="primary_name_ref" span="957:21:957:24">dml</jtok>
<jtok eid="27" type="primary_name_ref" span="957:27:957:30">dml</jtok>
<jtok eid="27" type="string_literal" span="957:33:957:39">"NULL"</jtok>
<jtok eid="27" type="primary_name_ref" span="960:13:960:16">dml</jtok>
<jtok eid="27" type="primary_name_ref" span="960:19:960:22">dml</jtok>
<jtok eid="27" type="string_literal" span="960:25:960:29">");"</jtok>
<jtok eid="27" type="line_comment" span="962:13:962:51">// handle DML according to output type</jtok>
<jtok eid="27" type="method_call" span="963:13:963:23">processDML</jtok>
<jtok eid="27" type="primary_name_ref" span="963:24:963:27">out</jtok>
<jtok eid="27" type="primary_name_ref" span="963:29:963:32">dml</jtok>
<jtok eid="1" type="block_comment" span="972:6:986:8">/**
     * A utility function for facilitating the assignment of a code to each
     * field name that represents the relationship of that field to a specific
     * entry type.
     * 
     * @param fields
     *            A list of all fields.
     * @param fieldID
     *            A list for holding the codes.
     * @param fieldstr
     *            A String array containing the fields to be coded.
     * @param ID
     *            The code that should be assigned to the specified fields.
     * @return The updated code list.
     */</jtok>
<jtok eid="28" type="class_or_interface_ref" span="987:20:987:29">ArrayList</jtok>
<jtok eid="28" type="class_or_interface_ref" span="987:30:987:36">String</jtok>
<jtok eid="28" type="method_name" span="987:38:987:48">setFieldID</jtok>
<jtok eid="28" type="parameter_type" span="987:49:987:58">ArrayList</jtok>
<jtok eid="28" type="parameter_type" span="987:59:987:65">String</jtok>
<jtok eid="28" type="parameter_name" span="987:67:987:73">fields</jtok>
<jtok eid="28" type="parameter_type" span="988:9:988:18">ArrayList</jtok>
<jtok eid="28" type="parameter_type" span="988:19:988:25">String</jtok>
<jtok eid="28" type="parameter_name" span="988:27:988:34">fieldID</jtok>
<jtok eid="28" type="parameter_type" span="988:36:988:42">String</jtok>
<jtok eid="28" type="parameter_name" span="988:45:988:53">fieldstr</jtok>
<jtok eid="28" type="parameter_type" span="988:55:988:61">String</jtok>
<jtok eid="28" type="parameter_name" span="988:62:988:64">ID</jtok>
<jtok eid="28" type="primary_name_ref" span="989:13:989:21">fieldstr</jtok>
<jtok eid="28" type="local_variable_name" span="990:22:990:23">i</jtok>
<jtok eid="28" type="primary_name_ref" span="990:29:990:30">i</jtok>
<jtok eid="28" type="primary_name_ref" span="990:33:990:41">fieldstr</jtok>
<jtok eid="28" type="qualified_name_ref" span="990:42:990:48">length</jtok>
<jtok eid="28" type="primary_name_ref" span="990:50:990:51">i</jtok>
<jtok eid="28" type="primary_name_ref" span="991:17:991:24">fieldID</jtok>
<jtok eid="28" type="method_call" span="991:25:991:28">set</jtok>
<jtok eid="28" type="primary_name_ref" span="991:29:991:35">fields</jtok>
<jtok eid="28" type="method_call" span="991:36:991:43">indexOf</jtok>
<jtok eid="28" type="primary_name_ref" span="991:44:991:52">fieldstr</jtok>
<jtok eid="28" type="primary_name_ref" span="991:53:991:54">i</jtok>
<jtok eid="28" type="primary_name_ref" span="991:58:991:60">ID</jtok>
<jtok eid="28" type="primary_name_ref" span="994:16:994:23">fieldID</jtok>
<jtok eid="1" type="block_comment" span="998:6:1006:8">/**
     * Generates the DML required to populate the entries table with jabref
     * data and writes it to the output PrintStream.
     * 
     * @param entries
     *          The BibtexEntries to export     
     * @param out
     *          The output (PrintStream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="29" type="method_name" span="1007:25:1007:37">dmlPopTab_FD</jtok>
<jtok eid="29" type="parameter_type" span="1007:38:1007:42">List</jtok>
<jtok eid="29" type="parameter_type" span="1007:43:1007:54">BibtexEntry</jtok>
<jtok eid="29" type="parameter_name" span="1007:56:1007:63">entries</jtok>
<jtok eid="29" type="parameter_type" span="1007:65:1007:71">Object</jtok>
<jtok eid="29" type="parameter_name" span="1007:72:1007:75">out</jtok>
<jtok eid="29" type="throws" span="1008:36:1008:48">SQLException</jtok>
<jtok eid="29" type="class_or_interface_ref" span="1010:9:1010:15">String</jtok>
<jtok eid="29" type="local_variable_name" span="1010:16:1010:19">dml</jtok>
<jtok eid="29" type="string_literal" span="1010:22:1010:24">""</jtok>
<jtok eid="29" type="class_or_interface_ref" span="1011:9:1011:15">String</jtok>
<jtok eid="29" type="local_variable_name" span="1011:16:1011:19">val</jtok>
<jtok eid="29" type="string_literal" span="1011:22:1011:24">""</jtok>
<jtok eid="29" type="class_or_interface_ref" span="1012:9:1012:15">String</jtok>
<jtok eid="29" type="local_variable_name" span="1012:16:1012:22">insert</jtok>
<jtok eid="29" type="string_literal" span="1012:25:1012:86">"INSERT INTO entries (jabref_eid, entry_types_id, cite_key, "</jtok>
<jtok eid="29" type="primary_name_ref" span="1013:15:1013:23">fieldstr</jtok>
<jtok eid="29" type="string_literal" span="1014:15:1014:27">") VALUES ("</jtok>
<jtok eid="29" type="line_comment" span="1016:9:1016:61">// loop throught the entries that are to be exported</jtok>
<jtok eid="29" type="class_or_interface_ref" span="1017:14:1017:25">BibtexEntry</jtok>
<jtok eid="29" type="local_variable_name" span="1017:26:1017:31">entry</jtok>
<jtok eid="29" type="primary_name_ref" span="1017:34:1017:41">entries</jtok>
<jtok eid="29" type="line_comment" span="1019:13:1019:42">// build DML insert statement</jtok>
<jtok eid="29" type="primary_name_ref" span="1020:13:1020:16">dml</jtok>
<jtok eid="29" type="primary_name_ref" span="1020:19:1020:25">insert</jtok>
<jtok eid="29" type="string_literal" span="1021:12:1021:16">"\""</jtok>
<jtok eid="29" type="primary_name_ref" span="1021:19:1021:24">entry</jtok>
<jtok eid="29" type="method_call" span="1021:25:1021:30">getId</jtok>
<jtok eid="29" type="string_literal" span="1021:35:1021:39">"\""</jtok>
<jtok eid="29" type="string_literal" span="1022:12:1022:70">", (SELECT entry_types_id FROM entry_types WHERE label=\""</jtok>
<jtok eid="29" type="primary_name_ref" span="1023:12:1023:17">entry</jtok>
<jtok eid="29" type="method_call" span="1023:18:1023:25">getType</jtok>
<jtok eid="29" type="method_call" span="1023:28:1023:35">getName</jtok>
<jtok eid="29" type="method_call" span="1023:38:1023:49">toLowerCase</jtok>
<jtok eid="29" type="string_literal" span="1023:54:1023:63">"\"), \""</jtok>
<jtok eid="29" type="primary_name_ref" span="1024:21:1024:26">entry</jtok>
<jtok eid="29" type="method_call" span="1024:27:1024:37">getCiteKey</jtok>
<jtok eid="29" type="string_literal" span="1024:42:1024:46">"\""</jtok>
<jtok eid="29" type="local_variable_name" span="1026:22:1026:23">i</jtok>
<jtok eid="29" type="primary_name_ref" span="1026:29:1026:30">i</jtok>
<jtok eid="29" type="primary_name_ref" span="1026:33:1026:39">fields</jtok>
<jtok eid="29" type="method_call" span="1026:40:1026:44">size</jtok>
<jtok eid="29" type="primary_name_ref" span="1026:48:1026:49">i</jtok>
<jtok eid="29" type="primary_name_ref" span="1027:17:1027:20">dml</jtok>
<jtok eid="29" type="primary_name_ref" span="1027:23:1027:26">dml</jtok>
<jtok eid="29" type="string_literal" span="1027:29:1027:33">", "</jtok>
<jtok eid="29" type="primary_name_ref" span="1028:17:1028:20">val</jtok>
<jtok eid="29" type="primary_name_ref" span="1028:23:1028:28">entry</jtok>
<jtok eid="29" type="method_call" span="1028:29:1028:37">getField</jtok>
<jtok eid="29" type="primary_name_ref" span="1028:38:1028:44">fields</jtok>
<jtok eid="29" type="method_call" span="1028:45:1028:48">get</jtok>
<jtok eid="29" type="primary_name_ref" span="1028:49:1028:50">i</jtok>
<jtok eid="29" type="primary_name_ref" span="1029:21:1029:24">val</jtok>
<jtok eid="29" type="line_comment" span="1030:21:1030:58">//escape slashes and quotes for MySQL</jtok>
<jtok eid="29" type="primary_name_ref" span="1031:18:1031:21">val</jtok>
<jtok eid="29" type="primary_name_ref" span="1031:24:1031:27">val</jtok>
<jtok eid="29" type="method_call" span="1031:28:1031:35">replace</jtok>
<jtok eid="29" type="string_literal" span="1031:36:1031:40">"\\"</jtok>
<jtok eid="29" type="string_literal" span="1031:42:1031:48">"\\\\"</jtok>
<jtok eid="29" type="primary_name_ref" span="1032:18:1032:21">val</jtok>
<jtok eid="29" type="primary_name_ref" span="1032:24:1032:27">val</jtok>
<jtok eid="29" type="method_call" span="1032:28:1032:35">replace</jtok>
<jtok eid="29" type="string_literal" span="1032:36:1032:40">"\""</jtok>
<jtok eid="29" type="string_literal" span="1032:42:1032:48">"\\\""</jtok>
<jtok eid="29" type="primary_name_ref" span="1033:18:1033:21">val</jtok>
<jtok eid="29" type="primary_name_ref" span="1033:24:1033:27">val</jtok>
<jtok eid="29" type="method_call" span="1033:28:1033:35">replace</jtok>
<jtok eid="29" type="string_literal" span="1033:36:1033:40">"\'"</jtok>
<jtok eid="29" type="string_literal" span="1033:42:1033:48">"\\\'"</jtok>
<jtok eid="29" type="primary_name_ref" span="1034:18:1034:21">val</jtok>
<jtok eid="29" type="primary_name_ref" span="1034:24:1034:27">val</jtok>
<jtok eid="29" type="method_call" span="1034:28:1034:35">replace</jtok>
<jtok eid="29" type="string_literal" span="1034:36:1034:39">"`"</jtok>
<jtok eid="29" type="string_literal" span="1034:41:1034:46">"\\`"</jtok>
<jtok eid="29" type="primary_name_ref" span="1035:18:1035:21">dml</jtok>
<jtok eid="29" type="primary_name_ref" span="1035:24:1035:27">dml</jtok>
<jtok eid="29" type="string_literal" span="1035:30:1035:34">"\""</jtok>
<jtok eid="29" type="primary_name_ref" span="1035:37:1035:40">val</jtok>
<jtok eid="29" type="string_literal" span="1035:43:1035:47">"\""</jtok>
<jtok eid="29" type="primary_name_ref" span="1037:21:1037:24">dml</jtok>
<jtok eid="29" type="primary_name_ref" span="1037:27:1037:30">dml</jtok>
<jtok eid="29" type="string_literal" span="1037:33:1037:39">"NULL"</jtok>
<jtok eid="29" type="primary_name_ref" span="1040:13:1040:16">dml</jtok>
<jtok eid="29" type="primary_name_ref" span="1040:19:1040:22">dml</jtok>
<jtok eid="29" type="string_literal" span="1040:25:1040:29">");"</jtok>
<jtok eid="29" type="line_comment" span="1042:13:1042:51">// handle DML according to output type</jtok>
<jtok eid="29" type="method_call" span="1043:13:1043:23">processDML</jtok>
<jtok eid="29" type="primary_name_ref" span="1043:24:1043:27">out</jtok>
<jtok eid="29" type="primary_name_ref" span="1043:29:1043:32">dml</jtok>
<jtok eid="30" type="method_name" span="1051:25:1051:37">dmlPopTab_ST</jtok>
<jtok eid="30" type="parameter_type" span="1051:38:1051:52">BibtexDatabase</jtok>
<jtok eid="30" type="parameter_name" span="1051:53:1051:61">database</jtok>
<jtok eid="30" type="parameter_type" span="1051:63:1051:69">Object</jtok>
<jtok eid="30" type="parameter_name" span="1051:70:1051:73">out</jtok>
<jtok eid="30" type="throws" span="1052:36:1052:48">SQLException</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1054:9:1054:15">String</jtok>
<jtok eid="30" type="local_variable_name" span="1054:16:1054:22">insert</jtok>
<jtok eid="30" type="string_literal" span="1054:25:1054:72">"INSERT INTO strings (label, content) VALUES ("</jtok>
<jtok eid="30" type="line_comment" span="1056:9:1056:40">// Insert preamble as a string:</jtok>
<jtok eid="30" type="primary_name_ref" span="1057:13:1057:21">database</jtok>
<jtok eid="30" type="method_call" span="1057:22:1057:33">getPreamble</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1058:13:1058:19">String</jtok>
<jtok eid="30" type="local_variable_name" span="1058:20:1058:23">dml</jtok>
<jtok eid="30" type="primary_name_ref" span="1058:26:1058:32">insert</jtok>
<jtok eid="30" type="string_literal" span="1058:35:1058:52">"\"@PREAMBLE\", "</jtok>
<jtok eid="30" type="string_literal" span="1059:23:1059:27">"\""</jtok>
<jtok eid="30" type="primary_name_ref" span="1059:28:1059:32">Util</jtok>
<jtok eid="30" type="method_call" span="1059:33:1059:38">quote</jtok>
<jtok eid="30" type="primary_name_ref" span="1059:39:1059:47">database</jtok>
<jtok eid="30" type="method_call" span="1059:48:1059:59">getPreamble</jtok>
<jtok eid="30" type="string_literal" span="1059:63:1059:67">"\""</jtok>
<jtok eid="30" type="string_literal" span="1059:75:1059:79">"\""</jtok>
<jtok eid="30" type="string_literal" span="1060:23:1060:27">");"</jtok>
<jtok eid="30" type="method_call" span="1061:13:1061:23">processDML</jtok>
<jtok eid="30" type="primary_name_ref" span="1061:24:1061:27">out</jtok>
<jtok eid="30" type="primary_name_ref" span="1061:29:1061:32">dml</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1064:9:1064:12">Set</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1064:13:1064:19">String</jtok>
<jtok eid="30" type="local_variable_name" span="1064:21:1064:25">keys</jtok>
<jtok eid="30" type="primary_name_ref" span="1064:28:1064:36">database</jtok>
<jtok eid="30" type="method_call" span="1064:37:1064:52">getStringKeySet</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1065:14:1065:22">Iterator</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1065:23:1065:29">String</jtok>
<jtok eid="30" type="local_variable_name" span="1065:31:1065:39">iterator</jtok>
<jtok eid="30" type="primary_name_ref" span="1065:42:1065:46">keys</jtok>
<jtok eid="30" type="method_call" span="1065:47:1065:55">iterator</jtok>
<jtok eid="30" type="primary_name_ref" span="1065:59:1065:67">iterator</jtok>
<jtok eid="30" type="method_call" span="1065:68:1065:75">hasNext</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1066:13:1066:19">String</jtok>
<jtok eid="30" type="local_variable_name" span="1066:20:1066:23">key</jtok>
<jtok eid="30" type="primary_name_ref" span="1066:26:1066:34">iterator</jtok>
<jtok eid="30" type="method_call" span="1066:35:1066:39">next</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1067:13:1067:25">BibtexString</jtok>
<jtok eid="30" type="local_variable_name" span="1067:26:1067:32">string</jtok>
<jtok eid="30" type="primary_name_ref" span="1067:35:1067:43">database</jtok>
<jtok eid="30" type="method_call" span="1067:44:1067:53">getString</jtok>
<jtok eid="30" type="primary_name_ref" span="1067:54:1067:57">key</jtok>
<jtok eid="30" type="class_or_interface_ref" span="1068:13:1068:19">String</jtok>
<jtok eid="30" type="local_variable_name" span="1068:20:1068:23">dml</jtok>
<jtok eid="30" type="primary_name_ref" span="1068:26:1068:32">insert</jtok>
<jtok eid="30" type="string_literal" span="1068:35:1068:39">"\""</jtok>
<jtok eid="30" type="primary_name_ref" span="1068:40:1068:44">Util</jtok>
<jtok eid="30" type="method_call" span="1068:45:1068:50">quote</jtok>
<jtok eid="30" type="primary_name_ref" span="1068:51:1068:57">string</jtok>
<jtok eid="30" type="method_call" span="1068:58:1068:65">getName</jtok>
<jtok eid="30" type="string_literal" span="1068:69:1068:73">"\""</jtok>
<jtok eid="30" type="string_literal" span="1068:81:1068:87">"\", "</jtok>
<jtok eid="30" type="string_literal" span="1069:23:1069:27">"\""</jtok>
<jtok eid="30" type="primary_name_ref" span="1069:28:1069:32">Util</jtok>
<jtok eid="30" type="method_call" span="1069:33:1069:38">quote</jtok>
<jtok eid="30" type="primary_name_ref" span="1069:39:1069:45">string</jtok>
<jtok eid="30" type="method_call" span="1069:46:1069:56">getContent</jtok>
<jtok eid="30" type="string_literal" span="1069:60:1069:64">"\""</jtok>
<jtok eid="30" type="string_literal" span="1069:72:1069:76">"\""</jtok>
<jtok eid="30" type="string_literal" span="1070:23:1070:27">");"</jtok>
<jtok eid="30" type="method_call" span="1071:13:1071:23">processDML</jtok>
<jtok eid="30" type="primary_name_ref" span="1071:24:1071:27">out</jtok>
<jtok eid="30" type="primary_name_ref" span="1071:29:1071:32">dml</jtok>
<jtok eid="1" type="block_comment" span="1075:6:1083:8">/**
     * Generates the DML required to populate the groups table with jabref
     * data, and writes this DML to the output file.
     * 
     * @param cursor
     *            The current GroupTreeNode in the GroupsTree
     * @param out
     *            The output (PrintStream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="31" type="method_name" span="1084:21:1084:33">dmlPopTab_GP</jtok>
<jtok eid="31" type="parameter_type" span="1084:35:1084:48">GroupTreeNode</jtok>
<jtok eid="31" type="parameter_name" span="1084:49:1084:55">cursor</jtok>
<jtok eid="31" type="parameter_type" span="1084:57:1084:63">Object</jtok>
<jtok eid="31" type="parameter_name" span="1084:64:1084:67">out</jtok>
<jtok eid="31" type="throws" span="1085:32:1085:41">Exception</jtok>
<jtok eid="31" type="local_variable_name" span="1086:13:1086:16">cnt</jtok>
<jtok eid="31" type="method_call" span="1086:19:1086:38">dmlPopTab_GP_worker</jtok>
<jtok eid="31" type="primary_name_ref" span="1086:39:1086:45">cursor</jtok>
<jtok eid="31" type="primary_name_ref" span="1086:53:1086:56">out</jtok>
<jtok eid="31" type="primary_name_ref" span="1087:16:1087:19">cnt</jtok>
<jtok eid="1" type="block_comment" span="1090:5:1101:8">/**
     * Recursive worker method for the dmlPopTab_GP methods.
     *
     * @param cursor
     *            The current GroupTreeNode in the GroupsTree
     * @param parentID
     *            The integer ID associated with the cursors's parent node
     * @param ID
     *            The integer value to associate with the cursor
     * @param out
     *            The output (PrintStream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="32" type="method_name" span="1102:21:1102:40">dmlPopTab_GP_worker</jtok>
<jtok eid="32" type="parameter_type" span="1102:42:1102:55">GroupTreeNode</jtok>
<jtok eid="32" type="parameter_name" span="1102:56:1102:62">cursor</jtok>
<jtok eid="32" type="parameter_name" span="1102:68:1102:76">parentID</jtok>
<jtok eid="32" type="parameter_name" span="1103:17:1103:19">ID</jtok>
<jtok eid="32" type="parameter_type" span="1103:21:1103:27">Object</jtok>
<jtok eid="32" type="parameter_name" span="1103:28:1103:31">out</jtok>
<jtok eid="32" type="throws" span="1103:40:1103:52">SQLException</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1105:9:1105:22">AbstractGroup</jtok>
<jtok eid="32" type="local_variable_name" span="1105:23:1105:28">group</jtok>
<jtok eid="32" type="primary_name_ref" span="1105:31:1105:37">cursor</jtok>
<jtok eid="32" type="method_call" span="1105:38:1105:46">getGroup</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1106:9:1106:15">String</jtok>
<jtok eid="32" type="local_variable_name" span="1106:16:1106:27">searchField</jtok>
<jtok eid="32" type="local_variable_name" span="1106:36:1106:46">searchExpr</jtok>
<jtok eid="32" type="local_variable_name" span="1106:55:1106:68">caseSensitive</jtok>
<jtok eid="32" type="local_variable_name" span="1106:77:1106:84">reg_exp</jtok>
<jtok eid="32" type="local_variable_name" span="1107:13:1107:24">hierContext</jtok>
<jtok eid="32" type="primary_name_ref" span="1107:27:1107:32">group</jtok>
<jtok eid="32" type="method_call" span="1107:33:1107:55">getHierarchicalContext</jtok>
<jtok eid="32" type="primary_name_ref" span="1108:13:1108:18">group</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1108:30:1108:42">KeywordGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1109:13:1109:24">searchField</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1109:29:1109:41">KeywordGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1109:42:1109:47">group</jtok>
<jtok eid="32" type="method_call" span="1109:49:1109:63">getSearchField</jtok>
<jtok eid="32" type="primary_name_ref" span="1110:13:1110:23">searchExpr</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1110:28:1110:40">KeywordGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1110:41:1110:46">group</jtok>
<jtok eid="32" type="method_call" span="1110:48:1110:67">getSearchExpression</jtok>
<jtok eid="32" type="primary_name_ref" span="1111:13:1111:26">caseSensitive</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1111:31:1111:43">KeywordGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1111:44:1111:49">group</jtok>
<jtok eid="32" type="method_call" span="1111:51:1111:66">isCaseSensitive</jtok>
<jtok eid="32" type="string_literal" span="1111:71:1111:74">"1"</jtok>
<jtok eid="32" type="string_literal" span="1111:77:1111:80">"0"</jtok>
<jtok eid="32" type="primary_name_ref" span="1112:13:1112:20">reg_exp</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1112:25:1112:37">KeywordGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1112:38:1112:43">group</jtok>
<jtok eid="32" type="method_call" span="1112:45:1112:53">isRegExp</jtok>
<jtok eid="32" type="string_literal" span="1112:58:1112:61">"1"</jtok>
<jtok eid="32" type="string_literal" span="1112:64:1112:67">"0"</jtok>
<jtok eid="32" type="primary_name_ref" span="1114:18:1114:23">group</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1114:35:1114:46">SearchGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1115:13:1115:23">searchExpr</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1115:28:1115:39">SearchGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1115:40:1115:45">group</jtok>
<jtok eid="32" type="method_call" span="1115:47:1115:66">getSearchExpression</jtok>
<jtok eid="32" type="primary_name_ref" span="1116:13:1116:26">caseSensitive</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1116:31:1116:42">SearchGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1116:43:1116:48">group</jtok>
<jtok eid="32" type="method_call" span="1116:50:1116:65">isCaseSensitive</jtok>
<jtok eid="32" type="string_literal" span="1116:70:1116:73">"1"</jtok>
<jtok eid="32" type="string_literal" span="1116:76:1116:79">"0"</jtok>
<jtok eid="32" type="primary_name_ref" span="1117:13:1117:20">reg_exp</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1117:25:1117:36">SearchGroup</jtok>
<jtok eid="32" type="primary_name_ref" span="1117:37:1117:42">group</jtok>
<jtok eid="32" type="method_call" span="1117:44:1117:52">isRegExp</jtok>
<jtok eid="32" type="string_literal" span="1117:57:1117:60">"1"</jtok>
<jtok eid="32" type="string_literal" span="1117:63:1117:66">"0"</jtok>
<jtok eid="32" type="line_comment" span="1120:9:1120:57">// Protect all quotes in the group descriptions:</jtok>
<jtok eid="32" type="primary_name_ref" span="1121:13:1121:24">searchField</jtok>
<jtok eid="32" type="primary_name_ref" span="1122:13:1122:24">searchField</jtok>
<jtok eid="32" type="primary_name_ref" span="1122:27:1122:31">Util</jtok>
<jtok eid="32" type="method_call" span="1122:32:1122:37">quote</jtok>
<jtok eid="32" type="primary_name_ref" span="1122:38:1122:49">searchField</jtok>
<jtok eid="32" type="string_literal" span="1122:51:1122:55">"\""</jtok>
<jtok eid="32" type="primary_name_ref" span="1123:13:1123:23">searchExpr</jtok>
<jtok eid="32" type="primary_name_ref" span="1124:13:1124:23">searchExpr</jtok>
<jtok eid="32" type="primary_name_ref" span="1124:26:1124:30">Util</jtok>
<jtok eid="32" type="method_call" span="1124:31:1124:36">quote</jtok>
<jtok eid="32" type="primary_name_ref" span="1124:37:1124:47">searchExpr</jtok>
<jtok eid="32" type="string_literal" span="1124:49:1124:53">"\""</jtok>
<jtok eid="32" type="line_comment" span="1126:9:1126:47">// handle DML according to output type</jtok>
<jtok eid="32" type="method_call" span="1127:9:1127:19">processDML</jtok>
<jtok eid="32" type="primary_name_ref" span="1127:20:1127:23">out</jtok>
<jtok eid="32" type="string_literal" span="1127:25:1127:106">"INSERT INTO groups (groups_id, label, parent_id, group_types_id, search_field, "</jtok>
<jtok eid="32" type="string_literal" span="1128:14:1128:82">"search_expression, case_sensitive, reg_exp, hierarchical_context) "</jtok>
<jtok eid="32" type="string_literal" span="1129:13:1129:23">"VALUES ("</jtok>
<jtok eid="32" type="primary_name_ref" span="1129:26:1129:28">ID</jtok>
<jtok eid="32" type="string_literal" span="1129:31:1129:37">", \""</jtok>
<jtok eid="32" type="primary_name_ref" span="1129:40:1129:46">cursor</jtok>
<jtok eid="32" type="method_call" span="1129:47:1129:55">getGroup</jtok>
<jtok eid="32" type="method_call" span="1129:58:1129:65">getName</jtok>
<jtok eid="32" type="string_literal" span="1130:13:1130:19">"\", "</jtok>
<jtok eid="32" type="primary_name_ref" span="1130:22:1130:30">parentID</jtok>
<jtok eid="32" type="string_literal" span="1131:24:1131:82">", (SELECT group_types_id FROM group_types where label=\""</jtok>
<jtok eid="32" type="primary_name_ref" span="1131:83:1131:88">group</jtok>
<jtok eid="32" type="method_call" span="1131:89:1131:98">getTypeId</jtok>
<jtok eid="32" type="string_literal" span="1131:101:1131:106">"\")"</jtok>
<jtok eid="32" type="string_literal" span="1132:24:1132:28">", "</jtok>
<jtok eid="32" type="primary_name_ref" span="1132:30:1132:41">searchField</jtok>
<jtok eid="32" type="string_literal" span="1132:52:1132:56">"\""</jtok>
<jtok eid="32" type="primary_name_ref" span="1132:57:1132:68">searchField</jtok>
<jtok eid="32" type="string_literal" span="1132:69:1132:73">"\""</jtok>
<jtok eid="32" type="string_literal" span="1132:76:1132:82">"NULL"</jtok>
<jtok eid="32" type="string_literal" span="1133:24:1133:28">", "</jtok>
<jtok eid="32" type="primary_name_ref" span="1133:30:1133:40">searchExpr</jtok>
<jtok eid="32" type="string_literal" span="1133:51:1133:55">"\""</jtok>
<jtok eid="32" type="primary_name_ref" span="1133:56:1133:66">searchExpr</jtok>
<jtok eid="32" type="string_literal" span="1133:67:1133:71">"\""</jtok>
<jtok eid="32" type="string_literal" span="1133:74:1133:80">"NULL"</jtok>
<jtok eid="32" type="string_literal" span="1134:24:1134:28">", "</jtok>
<jtok eid="32" type="primary_name_ref" span="1134:30:1134:43">caseSensitive</jtok>
<jtok eid="32" type="string_literal" span="1134:54:1134:58">"\""</jtok>
<jtok eid="32" type="primary_name_ref" span="1134:59:1134:72">caseSensitive</jtok>
<jtok eid="32" type="string_literal" span="1134:73:1134:77">"\""</jtok>
<jtok eid="32" type="string_literal" span="1134:80:1134:86">"NULL"</jtok>
<jtok eid="32" type="string_literal" span="1135:24:1135:28">", "</jtok>
<jtok eid="32" type="primary_name_ref" span="1135:30:1135:37">reg_exp</jtok>
<jtok eid="32" type="string_literal" span="1135:48:1135:52">"\""</jtok>
<jtok eid="32" type="primary_name_ref" span="1135:53:1135:60">reg_exp</jtok>
<jtok eid="32" type="string_literal" span="1135:61:1135:65">"\""</jtok>
<jtok eid="32" type="string_literal" span="1135:68:1135:74">"NULL"</jtok>
<jtok eid="32" type="string_literal" span="1136:24:1136:28">", "</jtok>
<jtok eid="32" type="primary_name_ref" span="1136:29:1136:40">hierContext</jtok>
<jtok eid="32" type="string_literal" span="1137:25:1137:29">");"</jtok>
<jtok eid="32" type="line_comment" span="1139:3:1139:52">// recurse on child nodes (depth-first traversal)</jtok>
<jtok eid="32" type="local_variable_name" span="1140:10:1140:14">myID</jtok>
<jtok eid="32" type="primary_name_ref" span="1140:17:1140:19">ID</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1141:11:1141:22">Enumeration</jtok>
<jtok eid="32" type="class_or_interface_ref" span="1141:23:1141:36">GroupTreeNode</jtok>
<jtok eid="32" type="local_variable_name" span="1141:38:1141:39">e</jtok>
<jtok eid="32" type="primary_name_ref" span="1141:42:1141:48">cursor</jtok>
<jtok eid="32" type="method_call" span="1141:49:1141:57">children</jtok>
<jtok eid="32" type="primary_name_ref" span="1141:61:1141:62">e</jtok>
<jtok eid="32" type="method_call" span="1141:63:1141:78">hasMoreElements</jtok>
<jtok eid="32" type="primary_name_ref" span="1142:4:1142:6">ID</jtok>
<jtok eid="32" type="method_call" span="1142:9:1142:28">dmlPopTab_GP_worker</jtok>
<jtok eid="32" type="primary_name_ref" span="1142:29:1142:30">e</jtok>
<jtok eid="32" type="method_call" span="1142:31:1142:42">nextElement</jtok>
<jtok eid="32" type="primary_name_ref" span="1142:45:1142:49">myID</jtok>
<jtok eid="32" type="primary_name_ref" span="1142:52:1142:54">ID</jtok>
<jtok eid="32" type="primary_name_ref" span="1142:55:1142:58">out</jtok>
<jtok eid="32" type="primary_name_ref" span="1143:13:1143:15">ID</jtok>
<jtok eid="1" type="block_comment" span="1147:5:1155:8">/**
     * Generates the DML required to populate the entry_group table with jabref
     * data, and writes the DML to the PrintStream.
     * 
     * @param cursor
     *            The current GroupTreeNode in the GroupsTree
     * @param out
     *            The output (PrintStream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="33" type="method_name" span="1156:21:1156:33">dmlPopTab_EG</jtok>
<jtok eid="33" type="parameter_type" span="1156:34:1156:47">GroupTreeNode</jtok>
<jtok eid="33" type="parameter_name" span="1156:48:1156:54">cursor</jtok>
<jtok eid="33" type="parameter_type" span="1156:56:1156:62">Object</jtok>
<jtok eid="33" type="parameter_name" span="1156:63:1156:67">fout</jtok>
<jtok eid="33" type="throws" span="1157:32:1157:44">SQLException</jtok>
<jtok eid="33" type="local_variable_name" span="1159:17:1159:20">cnt</jtok>
<jtok eid="33" type="method_call" span="1159:23:1159:42">dmlPopTab_EG_worker</jtok>
<jtok eid="33" type="primary_name_ref" span="1159:43:1159:49">cursor</jtok>
<jtok eid="33" type="primary_name_ref" span="1159:57:1159:61">fout</jtok>
<jtok eid="33" type="primary_name_ref" span="1160:20:1160:23">cnt</jtok>
<jtok eid="1" type="block_comment" span="1163:5:1174:8">/**
     * Recursive worker method for the dmlPopTab_EG methods.
     * 
     * @param cursor
     *            The current GroupTreeNode in the GroupsTree
     * @param parentID
     *            The integer ID associated with the cursors's parent node
     * @param ID
     *            The integer value to associate with the cursor
     * @param out
     *            The output (PrintStream or Connection) object to which the DML should be written.
     */</jtok>
<jtok eid="34" type="method_name" span="1176:21:1176:40">dmlPopTab_EG_worker</jtok>
<jtok eid="34" type="parameter_type" span="1176:41:1176:54">GroupTreeNode</jtok>
<jtok eid="34" type="parameter_name" span="1176:55:1176:61">cursor</jtok>
<jtok eid="34" type="parameter_name" span="1176:67:1176:75">parentID</jtok>
<jtok eid="34" type="parameter_name" span="1176:81:1176:83">ID</jtok>
<jtok eid="34" type="parameter_type" span="1177:4:1177:10">Object</jtok>
<jtok eid="34" type="parameter_name" span="1177:11:1177:14">out</jtok>
<jtok eid="34" type="throws" span="1177:23:1177:35">SQLException</jtok>
<jtok eid="34" type="line_comment" span="1179:3:1179:39">// if this group contains entries...</jtok>
<jtok eid="34" type="primary_name_ref" span="1180:8:1180:14">cursor</jtok>
<jtok eid="34" type="method_call" span="1180:15:1180:23">getGroup</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1180:37:1180:50">ExplicitGroup</jtok>
<jtok eid="34" type="line_comment" span="1182:4:1182:68">// build INSERT statement for each entry belonging to this group</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1183:4:1183:17">ExplicitGroup</jtok>
<jtok eid="34" type="local_variable_name" span="1183:18:1183:21">grp</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1183:25:1183:38">ExplicitGroup</jtok>
<jtok eid="34" type="primary_name_ref" span="1183:39:1183:45">cursor</jtok>
<jtok eid="34" type="method_call" span="1183:46:1183:54">getGroup</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1185:9:1185:20">BibtexEntry</jtok>
<jtok eid="34" type="local_variable_name" span="1185:21:1185:23">be</jtok>
<jtok eid="34" type="primary_name_ref" span="1185:26:1185:29">grp</jtok>
<jtok eid="34" type="method_call" span="1185:30:1185:40">getEntries</jtok>
<jtok eid="34" type="line_comment" span="1187:17:1187:55">// handle DML according to output type</jtok>
<jtok eid="34" type="method_call" span="1188:17:1188:27">processDML</jtok>
<jtok eid="34" type="primary_name_ref" span="1188:28:1188:31">out</jtok>
<jtok eid="34" type="string_literal" span="1188:33:1188:83">"INSERT INTO entry_group (entries_id, groups_id) "</jtok>
<jtok eid="34" type="string_literal" span="1189:12:1189:22">"VALUES ("</jtok>
<jtok eid="34" type="string_literal" span="1190:12:1190:63">"(SELECT entries_id FROM entries WHERE jabref_eid="</jtok>
<jtok eid="34" type="string_literal" span="1191:12:1191:16">"\""</jtok>
<jtok eid="34" type="primary_name_ref" span="1191:19:1191:21">be</jtok>
<jtok eid="34" type="method_call" span="1191:22:1191:27">getId</jtok>
<jtok eid="34" type="string_literal" span="1191:32:1191:36">"\""</jtok>
<jtok eid="34" type="string_literal" span="1192:12:1192:17">"), "</jtok>
<jtok eid="34" type="string_literal" span="1193:12:1193:60">"(SELECT groups_id FROM groups WHERE groups_id="</jtok>
<jtok eid="34" type="string_literal" span="1194:12:1194:16">"\""</jtok>
<jtok eid="34" type="primary_name_ref" span="1194:19:1194:21">ID</jtok>
<jtok eid="34" type="string_literal" span="1194:24:1194:29">"\")"</jtok>
<jtok eid="34" type="string_literal" span="1195:12:1195:16">");"</jtok>
<jtok eid="34" type="line_comment" span="1199:3:1199:52">// recurse on child nodes (depth-first traversal)</jtok>
<jtok eid="34" type="local_variable_name" span="1200:10:1200:14">myID</jtok>
<jtok eid="34" type="primary_name_ref" span="1200:17:1200:19">ID</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1201:11:1201:22">Enumeration</jtok>
<jtok eid="34" type="class_or_interface_ref" span="1201:23:1201:36">GroupTreeNode</jtok>
<jtok eid="34" type="local_variable_name" span="1201:38:1201:39">e</jtok>
<jtok eid="34" type="primary_name_ref" span="1201:42:1201:48">cursor</jtok>
<jtok eid="34" type="method_call" span="1201:49:1201:57">children</jtok>
<jtok eid="34" type="primary_name_ref" span="1201:61:1201:62">e</jtok>
<jtok eid="34" type="method_call" span="1201:63:1201:78">hasMoreElements</jtok>
<jtok eid="34" type="primary_name_ref" span="1202:4:1202:6">ID</jtok>
<jtok eid="34" type="method_call" span="1202:9:1202:28">dmlPopTab_EG_worker</jtok>
<jtok eid="34" type="primary_name_ref" span="1202:29:1202:30">e</jtok>
<jtok eid="34" type="method_call" span="1202:31:1202:42">nextElement</jtok>
<jtok eid="34" type="primary_name_ref" span="1202:45:1202:49">myID</jtok>
<jtok eid="34" type="primary_name_ref" span="1202:52:1202:54">ID</jtok>
<jtok eid="34" type="primary_name_ref" span="1202:55:1202:58">out</jtok>
<jtok eid="34" type="primary_name_ref" span="1204:13:1204:15">ID</jtok>
<jtok eid="1" type="block_comment" span="1207:5:1214:8">/**
     * Processes a SQLException, and returns a more user-friendly message
     * 
     * @param ex
     *            The SQLException raised
     * @param dbtype
     *            DBTYPE specifying the type of database that raised the exception
     */</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1216:19:1216:25">String</jtok>
<jtok eid="35" type="method_name" span="1216:26:1216:45">getExceptionMessage</jtok>
<jtok eid="35" type="parameter_type" span="1216:47:1216:56">Exception</jtok>
<jtok eid="35" type="parameter_name" span="1216:57:1216:59">ex</jtok>
<jtok eid="35" type="parameter_type" span="1216:61:1216:67">DBTYPE</jtok>
<jtok eid="35" type="parameter_name" span="1216:68:1216:74">dbtype</jtok>
<jtok eid="35" type="class_or_interface_ref" span="1218:9:1218:15">String</jtok>
<jtok eid="35" type="local_variable_name" span="1218:16:1218:28">errorMessage</jtok>
<jtok eid="35" type="primary_name_ref" span="1220:17:1220:23">dbtype</jtok>
<jtok eid="35" type="primary_name_ref" span="1221:18:1221:23">MYSQL</jtok>
<jtok eid="35" type="primary_name_ref" span="1222:17:1222:29">errorMessage</jtok>
<jtok eid="35" type="method_call" span="1222:32:1222:57">getExceptionMessage_MySQL</jtok>
<jtok eid="35" type="primary_name_ref" span="1222:58:1222:60">ex</jtok>
<jtok eid="35" type="primary_name_ref" span="1224:18:1224:23">DERBY</jtok>
<jtok eid="35" type="primary_name_ref" span="1225:17:1225:29">errorMessage</jtok>
<jtok eid="35" type="method_call" span="1225:32:1225:57">getExceptionMessage_MySQL</jtok>
<jtok eid="35" type="primary_name_ref" span="1225:58:1225:60">ex</jtok>
<jtok eid="35" type="primary_name_ref" span="1228:17:1228:29">errorMessage</jtok>
<jtok eid="35" type="primary_name_ref" span="1228:32:1228:39">Globals</jtok>
<jtok eid="35" type="method_call" span="1228:40:1228:44">lang</jtok>
<jtok eid="35" type="string_literal" span="1228:45:1228:85">"Could not determine exception message."</jtok>
<jtok eid="35" type="primary_name_ref" span="1232:16:1232:28">errorMessage</jtok>
<jtok eid="1" type="block_comment" span="1236:5:1241:8">/**
     * Handles work for getExceptionMessage when dbtype is MYSQL
     * 
     * @param ex
     *            The SQLException raised
     */</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1242:19:1242:25">String</jtok>
<jtok eid="36" type="method_name" span="1242:26:1242:51">getExceptionMessage_MySQL</jtok>
<jtok eid="36" type="parameter_type" span="1242:53:1242:62">Exception</jtok>
<jtok eid="36" type="parameter_name" span="1242:63:1242:65">ex</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1244:9:1244:15">String</jtok>
<jtok eid="36" type="local_variable_name" span="1244:16:1244:19">msg</jtok>
<jtok eid="36" type="line_comment" span="1246:9:1246:54">// handle case where exception is SQL related</jtok>
<jtok eid="36" type="primary_name_ref" span="1247:13:1247:15">ex</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1247:27:1247:39">SQLException</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1249:13:1249:25">SQLException</jtok>
<jtok eid="36" type="local_variable_name" span="1249:26:1249:31">sqlex</jtok>
<jtok eid="36" type="class_or_interface_ref" span="1249:35:1249:47">SQLException</jtok>
<jtok eid="36" type="primary_name_ref" span="1249:49:1249:51">ex</jtok>
<jtok eid="36" type="line_comment" span="1251:13:1251:33">// desc  : Unkown DB</jtok>
<jtok eid="36" type="line_comment" span="1252:13:1252:28">// code  : 1049</jtok>
<jtok eid="36" type="line_comment" span="1253:13:1253:29">// state : 42000</jtok>
<jtok eid="36" type="line_comment" span="1254:13:1254:55">// msg   : Unkown database 'database_name'</jtok>
<jtok eid="36" type="line_comment" span="1255:13:1255:36">// type  : SQLException</jtok>
<jtok eid="36" type="line_comment" span="1256:13:1256:33">// tested with MySQL</jtok>
<jtok eid="36" type="primary_name_ref" span="1258:17:1258:22">sqlex</jtok>
<jtok eid="36" type="method_call" span="1258:23:1258:34">getSQLState</jtok>
<jtok eid="36" type="method_call" span="1258:37:1258:43">equals</jtok>
<jtok eid="36" type="string_literal" span="1258:44:1258:51">"42000"</jtok>
<jtok eid="36" type="primary_name_ref" span="1259:17:1259:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1259:23:1259:30">Globals</jtok>
<jtok eid="36" type="method_call" span="1259:31:1259:35">lang</jtok>
<jtok eid="36" type="primary_name_ref" span="1259:36:1259:41">sqlex</jtok>
<jtok eid="36" type="method_call" span="1259:42:1259:52">getMessage</jtok>
<jtok eid="36" type="line_comment" span="1263:13:1263:38">// desc  : command denied</jtok>
<jtok eid="36" type="line_comment" span="1264:13:1264:28">// code  : 1142</jtok>
<jtok eid="36" type="line_comment" span="1265:13:1265:29">// state : 42000</jtok>
<jtok eid="36" type="line_comment" span="1266:13:1266:93">// msg   : * command denied to user 'username'@'hostname' for table 'table_name'</jtok>
<jtok eid="36" type="line_comment" span="1267:13:1267:33">// tested with MySQL</jtok>
<jtok eid="36" type="primary_name_ref" span="1269:17:1269:22">sqlex</jtok>
<jtok eid="36" type="method_call" span="1269:23:1269:34">getSQLState</jtok>
<jtok eid="36" type="method_call" span="1269:37:1269:43">equals</jtok>
<jtok eid="36" type="string_literal" span="1269:44:1269:51">"42000"</jtok>
<jtok eid="36" type="primary_name_ref" span="1270:17:1270:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1270:23:1270:30">Globals</jtok>
<jtok eid="36" type="method_call" span="1270:31:1270:35">lang</jtok>
<jtok eid="36" type="string_literal" span="1270:36:1270:81">"User does not have sufficient privileges.\n"</jtok>
<jtok eid="36" type="primary_name_ref" span="1271:17:1271:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1271:23:1271:26">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1271:29:1271:36">Globals</jtok>
<jtok eid="36" type="method_call" span="1271:37:1271:41">lang</jtok>
<jtok eid="36" type="string_literal" span="1271:42:1271:45">"("</jtok>
<jtok eid="36" type="primary_name_ref" span="1271:48:1271:53">sqlex</jtok>
<jtok eid="36" type="method_call" span="1271:54:1271:64">getMessage</jtok>
<jtok eid="36" type="string_literal" span="1271:69:1271:72">")"</jtok>
<jtok eid="36" type="line_comment" span="1275:13:1275:56">// desc  : Invalid username and/or password</jtok>
<jtok eid="36" type="line_comment" span="1276:13:1276:28">// code  : 1045</jtok>
<jtok eid="36" type="line_comment" span="1277:13:1277:29">// state : 28000</jtok>
<jtok eid="36" type="line_comment" span="1278:13:1278:90">// msg   : Access denied for user 'username'@'hostname' (using password: ...)</jtok>
<jtok eid="36" type="line_comment" span="1279:13:1279:36">// type  : SQLException</jtok>
<jtok eid="36" type="line_comment" span="1280:13:1280:33">// tested with MySQL</jtok>
<jtok eid="36" type="primary_name_ref" span="1282:17:1282:22">sqlex</jtok>
<jtok eid="36" type="method_call" span="1282:23:1282:34">getSQLState</jtok>
<jtok eid="36" type="method_call" span="1282:37:1282:43">equals</jtok>
<jtok eid="36" type="string_literal" span="1282:44:1282:51">"28000"</jtok>
<jtok eid="36" type="primary_name_ref" span="1283:17:1283:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1283:23:1283:30">Globals</jtok>
<jtok eid="36" type="method_call" span="1283:31:1283:35">lang</jtok>
<jtok eid="36" type="primary_name_ref" span="1283:36:1283:41">sqlex</jtok>
<jtok eid="36" type="method_call" span="1283:42:1283:52">getMessage</jtok>
<jtok eid="36" type="line_comment" span="1287:13:1287:52">// desc  : Cannot connect to SQL server</jtok>
<jtok eid="36" type="line_comment" span="1288:13:1288:25">// code  : 0</jtok>
<jtok eid="36" type="line_comment" span="1289:13:1289:29">// state : 08S01</jtok>
<jtok eid="36" type="line_comment" span="1290:13:1290:79">// msg   : Communications link failure due to underlying exception</jtok>
<jtok eid="36" type="line_comment" span="1291:13:1291:53">// type  : java.net.UnknownHostException</jtok>
<jtok eid="36" type="line_comment" span="1292:13:1292:33">// tested with MySQL</jtok>
<jtok eid="36" type="primary_name_ref" span="1294:17:1294:22">sqlex</jtok>
<jtok eid="36" type="method_call" span="1294:23:1294:34">getSQLState</jtok>
<jtok eid="36" type="method_call" span="1294:37:1294:43">equals</jtok>
<jtok eid="36" type="string_literal" span="1294:44:1294:51">"08S01"</jtok>
<jtok eid="36" type="primary_name_ref" span="1295:17:1295:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1295:23:1295:30">Globals</jtok>
<jtok eid="36" type="method_call" span="1295:31:1295:35">lang</jtok>
<jtok eid="36" type="string_literal" span="1295:36:1295:89">"Cannot connect to SQL server at the specified host."</jtok>
<jtok eid="36" type="line_comment" span="1298:13:1298:32">// for debugging...</jtok>
<jtok eid="36" type="primary_name_ref" span="1300:17:1300:23">System</jtok>
<jtok eid="36" type="qualified_name_ref" span="1300:24:1300:27">out</jtok>
<jtok eid="36" type="method_call" span="1300:28:1300:35">println</jtok>
<jtok eid="36" type="string_literal" span="1300:36:1300:75">"-------------------------------------"</jtok>
<jtok eid="36" type="primary_name_ref" span="1301:17:1301:23">System</jtok>
<jtok eid="36" type="qualified_name_ref" span="1301:24:1301:27">out</jtok>
<jtok eid="36" type="method_call" span="1301:28:1301:35">println</jtok>
<jtok eid="36" type="primary_name_ref" span="1301:36:1301:41">sqlex</jtok>
<jtok eid="36" type="method_call" span="1301:42:1301:54">getErrorCode</jtok>
<jtok eid="36" type="primary_name_ref" span="1302:17:1302:23">System</jtok>
<jtok eid="36" type="qualified_name_ref" span="1302:24:1302:27">out</jtok>
<jtok eid="36" type="method_call" span="1302:28:1302:35">println</jtok>
<jtok eid="36" type="primary_name_ref" span="1302:36:1302:41">sqlex</jtok>
<jtok eid="36" type="method_call" span="1302:42:1302:53">getSQLState</jtok>
<jtok eid="36" type="primary_name_ref" span="1303:17:1303:23">System</jtok>
<jtok eid="36" type="qualified_name_ref" span="1303:24:1303:27">out</jtok>
<jtok eid="36" type="method_call" span="1303:28:1303:35">println</jtok>
<jtok eid="36" type="primary_name_ref" span="1303:36:1303:41">sqlex</jtok>
<jtok eid="36" type="method_call" span="1303:42:1303:52">getMessage</jtok>
<jtok eid="36" type="primary_name_ref" span="1304:17:1304:23">System</jtok>
<jtok eid="36" type="qualified_name_ref" span="1304:24:1304:27">out</jtok>
<jtok eid="36" type="method_call" span="1304:28:1304:35">println</jtok>
<jtok eid="36" type="string_literal" span="1304:36:1304:75">"-------------------------------------"</jtok>
<jtok eid="36" type="line_comment" span="1309:9:1309:58">// handle case where exception is non-SQL related</jtok>
<jtok eid="36" type="primary_name_ref" span="1310:13:1310:16">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1312:17:1312:19">ex</jtok>
<jtok eid="36" type="method_call" span="1312:20:1312:30">getMessage</jtok>
<jtok eid="36" type="primary_name_ref" span="1313:17:1313:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1313:23:1313:25">ex</jtok>
<jtok eid="36" type="method_call" span="1313:26:1313:34">toString</jtok>
<jtok eid="36" type="primary_name_ref" span="1315:17:1315:20">msg</jtok>
<jtok eid="36" type="primary_name_ref" span="1315:23:1315:25">ex</jtok>
<jtok eid="36" type="method_call" span="1315:26:1315:36">getMessage</jtok>
<jtok eid="36" type="primary_name_ref" span="1321:16:1321:19">msg</jtok>
</jdoc>