<?xml version="1.0" encoding="utf-8"?>
<jdoc cUnit="installer.Install" jls="java5">
<jent id="0" type="file" span="0:0:128:2">Source/jEdit/installer/Install.java</jent>
<jent id="1" pid="0" type="class" span="21:1:128:1">installer.Install</jent>
<jent id="2" pid="1" type="method" span="23:2:61:2">installer.Install.main(String[])</jent>
<jent id="3" pid="1" type="method" span="63:2:79:2">installer.Install.Install()</jent>
<jent id="4" pid="1" type="method" span="81:2:84:2">installer.Install.getProperty(String)</jent>
<jent id="5" pid="1" type="method" span="86:2:96:2">installer.Install.getIntegerProperty(String)</jent>
<jent id="6" pid="1" type="method" span="98:2:123:2">installer.Install.copy(InputStream,String,Progress)</jent>
<jtok eid="0" type="block_comment" span="1:1:12:4">/*
 * Install.java - Main class of the installer
 *
 * Originally written by Slava Pestov for the jEdit installer project. This work
 * has been placed into the public domain. You may use this work in any way and
 * for any purpose you wish.
 *
 * THIS SOFTWARE IS PROVIDED AS-IS WITHOUT WARRANTY OF ANY KIND, NOT EVEN THE
 * IMPLIED WARRANTY OF MERCHANTABILITY. THE AUTHOR OF THIS SOFTWARE, ASSUMES
 * _NO_ RESPONSIBILITY FOR ANY CONSEQUENCE RESULTING FROM THE USE, MODIFICATION,
 * OR REDISTRIBUTION OF THIS SOFTWARE.
 */</jtok>
<jtok eid="1" type="class_name" span="21:14:21:21">Install</jtok>
<jtok eid="2" type="method_name" span="23:21:23:25">main</jtok>
<jtok eid="2" type="parameter_type" span="23:26:23:32">String</jtok>
<jtok eid="2" type="parameter_name" span="23:35:23:39">args</jtok>
<jtok eid="2" type="class_or_interface_ref" span="26:3:26:9">String</jtok>
<jtok eid="2" type="local_variable_name" span="26:10:26:21">javaVersion</jtok>
<jtok eid="2" type="primary_name_ref" span="26:24:26:30">System</jtok>
<jtok eid="2" type="method_call" span="26:31:26:42">getProperty</jtok>
<jtok eid="2" type="string_literal" span="26:43:26:57">"java.version"</jtok>
<jtok eid="2" type="primary_name_ref" span="27:6:27:17">javaVersion</jtok>
<jtok eid="2" type="method_call" span="27:18:27:27">compareTo</jtok>
<jtok eid="2" type="string_literal" span="27:28:27:33">"1.5"</jtok>
<jtok eid="2" type="class_or_interface_ref" span="29:4:29:10">String</jtok>
<jtok eid="2" type="local_variable_name" span="29:11:29:18">message</jtok>
<jtok eid="2" type="string_literal" span="29:21:29:52">"You are running Java version "</jtok>
<jtok eid="2" type="primary_name_ref" span="30:8:30:19">javaVersion</jtok>
<jtok eid="2" type="string_literal" span="30:22:30:30">" from "</jtok>
<jtok eid="2" type="primary_name_ref" span="30:31:30:37">System</jtok>
<jtok eid="2" type="method_call" span="30:38:30:49">getProperty</jtok>
<jtok eid="2" type="string_literal" span="30:50:30:63">"java.vendor"</jtok>
<jtok eid="2" type="string_literal" span="30:65:30:70">".\n"</jtok>
<jtok eid="2" type="string_literal" span="31:7:31:51">"This installer requires Java 1.5 or later."</jtok>
<jtok eid="2" type="primary_name_ref" span="32:7:32:11">args</jtok>
<jtok eid="2" type="qualified_name_ref" span="32:12:32:18">length</jtok>
<jtok eid="2" type="primary_name_ref" span="34:5:34:16">JOptionPane</jtok>
<jtok eid="2" type="method_call" span="34:17:34:34">showMessageDialog</jtok>
<jtok eid="2" type="primary_name_ref" span="35:6:35:13">message</jtok>
<jtok eid="2" type="string_literal" span="36:6:36:26">"jEdit installer..."</jtok>
<jtok eid="2" type="primary_name_ref" span="36:28:36:39">JOptionPane</jtok>
<jtok eid="2" type="qualified_name_ref" span="36:40:36:53">ERROR_MESSAGE</jtok>
<jtok eid="2" type="primary_name_ref" span="40:5:40:11">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="40:12:40:15">err</jtok>
<jtok eid="2" type="method_call" span="40:16:40:23">println</jtok>
<jtok eid="2" type="primary_name_ref" span="40:24:40:31">message</jtok>
<jtok eid="2" type="primary_name_ref" span="42:4:42:10">System</jtok>
<jtok eid="2" type="method_call" span="42:11:42:15">exit</jtok>
<jtok eid="2" type="primary_name_ref" span="45:6:45:10">args</jtok>
<jtok eid="2" type="qualified_name_ref" span="45:11:45:17">length</jtok>
<jtok eid="2" type="constructor_call" span="46:8:46:20">SwingInstall</jtok>
<jtok eid="2" type="primary_name_ref" span="47:11:47:15">args</jtok>
<jtok eid="2" type="qualified_name_ref" span="47:16:47:22">length</jtok>
<jtok eid="2" type="primary_name_ref" span="47:31:47:35">args</jtok>
<jtok eid="2" type="method_call" span="47:39:47:45">equals</jtok>
<jtok eid="2" type="string_literal" span="47:46:47:52">"text"</jtok>
<jtok eid="2" type="constructor_call" span="48:8:48:22">ConsoleInstall</jtok>
<jtok eid="2" type="primary_name_ref" span="49:11:49:15">args</jtok>
<jtok eid="2" type="qualified_name_ref" span="49:16:49:22">length</jtok>
<jtok eid="2" type="primary_name_ref" span="49:31:49:35">args</jtok>
<jtok eid="2" type="method_call" span="49:39:49:45">equals</jtok>
<jtok eid="2" type="string_literal" span="49:46:49:52">"auto"</jtok>
<jtok eid="2" type="constructor_call" span="50:8:50:29">NonInteractiveInstall</jtok>
<jtok eid="2" type="primary_name_ref" span="50:30:50:34">args</jtok>
<jtok eid="2" type="primary_name_ref" span="53:4:53:10">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="53:11:53:14">err</jtok>
<jtok eid="2" type="method_call" span="53:15:53:22">println</jtok>
<jtok eid="2" type="string_literal" span="53:23:53:31">"Usage:"</jtok>
<jtok eid="2" type="primary_name_ref" span="54:4:54:10">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="54:11:54:14">err</jtok>
<jtok eid="2" type="method_call" span="54:15:54:22">println</jtok>
<jtok eid="2" type="string_literal" span="54:23:54:50">"java -jar &lt;installer JAR&gt;"</jtok>
<jtok eid="2" type="primary_name_ref" span="55:4:55:10">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="55:11:55:14">err</jtok>
<jtok eid="2" type="method_call" span="55:15:55:22">println</jtok>
<jtok eid="2" type="string_literal" span="55:23:55:55">"java -jar &lt;installer JAR&gt; text"</jtok>
<jtok eid="2" type="primary_name_ref" span="56:4:56:10">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="56:11:56:14">err</jtok>
<jtok eid="2" type="method_call" span="56:15:56:22">println</jtok>
<jtok eid="2" type="string_literal" span="56:23:56:55">"java -jar &lt;installer JAR&gt; auto"</jtok>
<jtok eid="2" type="string_literal" span="57:7:57:60">" &lt;install dir&gt; [unix-script=&lt;dir&gt;] [unix-man=&lt;dir&gt;]"</jtok>
<jtok eid="2" type="primary_name_ref" span="58:4:58:10">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="58:11:58:14">err</jtok>
<jtok eid="2" type="method_call" span="58:15:58:22">println</jtok>
<jtok eid="2" type="string_literal" span="58:23:58:75">"text parameter starts installer in text-only mode."</jtok>
<jtok eid="2" type="primary_name_ref" span="59:4:59:10">System</jtok>
<jtok eid="2" type="qualified_name_ref" span="59:11:59:14">err</jtok>
<jtok eid="2" type="method_call" span="59:15:59:22">println</jtok>
<jtok eid="2" type="string_literal" span="59:23:59:81">"auto parameter starts installer in non-interactive mode."</jtok>
<jtok eid="3" type="method_name" span="63:9:63:16">Install</jtok>
<jtok eid="3" type="primary_name_ref" span="65:3:65:8">props</jtok>
<jtok eid="3" type="constructor_call" span="65:15:65:25">Properties</jtok>
<jtok eid="3" type="class_or_interface_ref" span="68:4:68:15">InputStream</jtok>
<jtok eid="3" type="local_variable_name" span="68:16:68:18">in</jtok>
<jtok eid="3" type="method_call" span="68:21:68:29">getClass</jtok>
<jtok eid="3" type="method_call" span="68:32:68:51">getResourceAsStream</jtok>
<jtok eid="3" type="string_literal" span="68:52:68:78">"/installer/install.props"</jtok>
<jtok eid="3" type="primary_name_ref" span="69:4:69:9">props</jtok>
<jtok eid="3" type="method_call" span="69:10:69:14">load</jtok>
<jtok eid="3" type="primary_name_ref" span="69:15:69:17">in</jtok>
<jtok eid="3" type="primary_name_ref" span="70:4:70:6">in</jtok>
<jtok eid="3" type="method_call" span="70:7:70:12">close</jtok>
<jtok eid="3" type="class_or_interface_ref" span="72:9:72:20">IOException</jtok>
<jtok eid="3" type="local_variable_name" span="72:21:72:23">io</jtok>
<jtok eid="3" type="primary_name_ref" span="74:4:74:10">System</jtok>
<jtok eid="3" type="qualified_name_ref" span="74:11:74:14">err</jtok>
<jtok eid="3" type="method_call" span="74:15:74:22">println</jtok>
<jtok eid="3" type="string_literal" span="74:23:74:55">"Error loading 'install.props':"</jtok>
<jtok eid="3" type="primary_name_ref" span="75:4:75:6">io</jtok>
<jtok eid="3" type="method_call" span="75:7:75:22">printStackTrace</jtok>
<jtok eid="3" type="primary_name_ref" span="78:3:78:6">buf</jtok>
<jtok eid="4" type="class_or_interface_ref" span="81:9:81:15">String</jtok>
<jtok eid="4" type="method_name" span="81:16:81:27">getProperty</jtok>
<jtok eid="4" type="parameter_type" span="81:28:81:34">String</jtok>
<jtok eid="4" type="parameter_name" span="81:35:81:39">name</jtok>
<jtok eid="4" type="primary_name_ref" span="83:10:83:15">props</jtok>
<jtok eid="4" type="method_call" span="83:16:83:27">getProperty</jtok>
<jtok eid="4" type="primary_name_ref" span="83:28:83:32">name</jtok>
<jtok eid="5" type="method_name" span="86:13:86:31">getIntegerProperty</jtok>
<jtok eid="5" type="parameter_type" span="86:32:86:38">String</jtok>
<jtok eid="5" type="parameter_name" span="86:39:86:43">name</jtok>
<jtok eid="5" type="primary_name_ref" span="90:11:90:18">Integer</jtok>
<jtok eid="5" type="method_call" span="90:19:90:27">parseInt</jtok>
<jtok eid="5" type="primary_name_ref" span="90:28:90:33">props</jtok>
<jtok eid="5" type="method_call" span="90:34:90:45">getProperty</jtok>
<jtok eid="5" type="primary_name_ref" span="90:46:90:50">name</jtok>
<jtok eid="5" type="class_or_interface_ref" span="92:9:92:18">Exception</jtok>
<jtok eid="5" type="local_variable_name" span="92:19:92:20">e</jtok>
<jtok eid="6" type="method_name" span="98:14:98:18">copy</jtok>
<jtok eid="6" type="parameter_type" span="98:19:98:30">InputStream</jtok>
<jtok eid="6" type="parameter_name" span="98:31:98:33">in</jtok>
<jtok eid="6" type="parameter_type" span="98:35:98:41">String</jtok>
<jtok eid="6" type="parameter_name" span="98:42:98:49">outfile</jtok>
<jtok eid="6" type="parameter_type" span="98:51:98:59">Progress</jtok>
<jtok eid="6" type="parameter_name" span="98:60:98:68">progress</jtok>
<jtok eid="6" type="throws" span="99:10:99:21">IOException</jtok>
<jtok eid="6" type="class_or_interface_ref" span="101:3:101:7">File</jtok>
<jtok eid="6" type="local_variable_name" span="101:8:101:15">outFile</jtok>
<jtok eid="6" type="constructor_call" span="101:22:101:26">File</jtok>
<jtok eid="6" type="primary_name_ref" span="101:27:101:34">outfile</jtok>
<jtok eid="6" type="primary_name_ref" span="103:3:103:18">OperatingSystem</jtok>
<jtok eid="6" type="method_call" span="103:19:103:37">getOperatingSystem</jtok>
<jtok eid="6" type="method_call" span="103:40:103:46">mkdirs</jtok>
<jtok eid="6" type="primary_name_ref" span="103:47:103:54">outFile</jtok>
<jtok eid="6" type="method_call" span="103:55:103:64">getParent</jtok>
<jtok eid="6" type="class_or_interface_ref" span="105:3:105:23">BufferedOutputStream</jtok>
<jtok eid="6" type="local_variable_name" span="105:24:105:27">out</jtok>
<jtok eid="6" type="constructor_call" span="105:34:105:54">BufferedOutputStream</jtok>
<jtok eid="6" type="constructor_call" span="106:8:106:24">FileOutputStream</jtok>
<jtok eid="6" type="primary_name_ref" span="106:25:106:32">outFile</jtok>
<jtok eid="6" type="local_variable_name" span="108:7:108:12">count</jtok>
<jtok eid="6" type="primary_name_ref" span="112:4:112:9">count</jtok>
<jtok eid="6" type="primary_name_ref" span="112:12:112:14">in</jtok>
<jtok eid="6" type="method_call" span="112:15:112:19">read</jtok>
<jtok eid="6" type="primary_name_ref" span="112:20:112:23">buf</jtok>
<jtok eid="6" type="primary_name_ref" span="112:26:112:30">Math</jtok>
<jtok eid="6" type="method_call" span="112:31:112:34">min</jtok>
<jtok eid="6" type="primary_name_ref" span="112:35:112:37">in</jtok>
<jtok eid="6" type="method_call" span="112:38:112:47">available</jtok>
<jtok eid="6" type="primary_name_ref" span="112:50:112:53">buf</jtok>
<jtok eid="6" type="qualified_name_ref" span="112:54:112:60">length</jtok>
<jtok eid="6" type="primary_name_ref" span="113:7:113:12">count</jtok>
<jtok eid="6" type="primary_name_ref" span="113:22:113:27">count</jtok>
<jtok eid="6" type="primary_name_ref" span="116:4:116:7">out</jtok>
<jtok eid="6" type="method_call" span="116:8:116:13">write</jtok>
<jtok eid="6" type="primary_name_ref" span="116:14:116:17">buf</jtok>
<jtok eid="6" type="primary_name_ref" span="116:20:116:25">count</jtok>
<jtok eid="6" type="primary_name_ref" span="117:7:117:15">progress</jtok>
<jtok eid="6" type="primary_name_ref" span="118:5:118:13">progress</jtok>
<jtok eid="6" type="method_call" span="118:14:118:21">advance</jtok>
<jtok eid="6" type="primary_name_ref" span="118:22:118:27">count</jtok>
<jtok eid="6" type="line_comment" span="121:3:121:16">//in.close();</jtok>
<jtok eid="6" type="primary_name_ref" span="122:3:122:6">out</jtok>
<jtok eid="6" type="method_call" span="122:7:122:12">close</jtok>
<jtok eid="1" type="line_comment" span="125:2:125:20">// private members</jtok>
<jtok eid="1" type="class_or_interface_ref" span="126:10:126:20">Properties</jtok>
<jtok eid="1" type="field_name" span="126:21:126:26">props</jtok>
<jtok eid="1" type="field_name" span="127:17:127:20">buf</jtok>
</jdoc>